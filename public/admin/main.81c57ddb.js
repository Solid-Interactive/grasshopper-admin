var requirejs,require,define;!function(global){function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,i){return t&&eachProp(t,function(t,s){(n||!hasProp(e,s))&&(!i||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[s]=t:(e[s]||(e[s]={}),mixin(e[s],t,n,i)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,i){var s=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return s.requireType=e,s.requireModules=i,n&&(s.originalError=n),s}function newContext(e){function t(e){var t,n;for(t=0;t<e.length;t++)if(n=e[t],"."===n)e.splice(t,1),t-=1;else if(".."===n){if(0===t||1==t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}function n(e,n,i){var s,o,r,a,l,c,d,u,h,p,f,m,v=n&&n.split("/"),g=T.map,y=g&&g["*"];if(e&&(e=e.split("/"),d=e.length-1,T.nodeIdCompat&&jsSuffixRegExp.test(e[d])&&(e[d]=e[d].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&v&&(m=v.slice(0,v.length-1),e=m.concat(e)),t(e),e=e.join("/")),i&&g&&(v||y)){r=e.split("/");e:for(a=r.length;a>0;a-=1){if(c=r.slice(0,a).join("/"),v)for(l=v.length;l>0;l-=1)if(o=getOwn(g,v.slice(0,l).join("/")),o&&(o=getOwn(o,c))){u=o,h=a;break e}!p&&y&&getOwn(y,c)&&(p=getOwn(y,c),f=a)}!u&&p&&(u=p,h=f),u&&(r.splice(0,h,u),e=r.join("/"))}return s=getOwn(T.pkgs,e),s?s:e}function i(e){isBrowser&&each(scripts(),function(t){return t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===w.contextName?(t.parentNode.removeChild(t),!0):void 0})}function s(e){var t=getOwn(T.paths,e);return t&&isArray(t)&&t.length>1?(t.shift(),w.require.undef(e),w.makeRequire(null,{skipMap:!0})([e]),!0):void 0}function o(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function r(e,t,i,s){var r,a,l,c,d=null,u=t?t.name:null,h=e,p=!0,f="";return e||(p=!1,e="_@r"+(N+=1)),c=o(e),d=c[0],e=c[1],d&&(d=n(d,u,s),a=getOwn(E,d)),e&&(d?f=a&&a.normalize?a.normalize(e,function(e){return n(e,u,s)}):-1===e.indexOf("!")?n(e,u,s):e:(f=n(e,u,s),c=o(f),d=c[0],f=c[1],i=!0,r=w.nameToUrl(f))),l=!d||a||i?"":"_unnormalized"+(F+=1),{prefix:d,name:f,parentMap:t,unnormalized:!!l,url:r,originalName:h,isDefine:p,id:(d?d+"!"+f:f)+l}}function a(e){var t=e.id,n=getOwn(k,t);return n||(n=k[t]=new w.Module(e)),n}function l(e,t,n){var i=e.id,s=getOwn(k,i);!hasProp(E,i)||s&&!s.defineEmitComplete?(s=a(e),s.error&&"error"===t?n(s.error):s.on(t,n)):"defined"===t&&n(E[i])}function c(e,t){var n=e.requireModules,i=!1;t?t(e):(each(n,function(t){var n=getOwn(k,t);n&&(n.error=e,n.events.error&&(i=!0,n.emit("error",e)))}),i||req.onError(e))}function d(){globalDefQueue.length&&(apsp.apply(D,[D.length,0].concat(globalDefQueue)),globalDefQueue=[])}function u(e){delete k[e],delete S[e]}function h(e,t,n){var i=e.map.id;e.error?e.emit("error",e.error):(t[i]=!0,each(e.depMaps,function(i,s){var o=i.id,r=getOwn(k,o);!r||e.depMatched[s]||n[o]||(getOwn(t,o)?(e.defineDep(s,E[o]),e.check()):h(r,t,n))}),n[i]=!0)}function p(){var e,t,n=1e3*T.waitSeconds,o=n&&w.startTime+n<(new Date).getTime(),r=[],a=[],l=!1,d=!0;if(!y){if(y=!0,eachProp(S,function(e){var n=e.map,c=n.id;if(e.enabled&&(n.isDefine||a.push(e),!e.error))if(!e.inited&&o)s(c)?(t=!0,l=!0):(r.push(c),i(c));else if(!e.inited&&e.fetched&&n.isDefine&&(l=!0,!n.prefix))return d=!1}),o&&r.length)return e=makeError("timeout","Load timeout for modules: "+r,null,r),e.contextName=w.contextName,c(e);d&&each(a,function(e){h(e,{},{})}),o&&!t||!l||!isBrowser&&!isWebWorker||C||(C=setTimeout(function(){C=0,p()},50)),y=!1}}function f(e){hasProp(E,e[0])||a(r(e[0],null,!0)).init(e[1],e[2])}function m(e,t,n,i){e.detachEvent&&!isOpera?i&&e.detachEvent(i,t):e.removeEventListener(n,t,!1)}function v(e){var t=e.currentTarget||e.srcElement;return m(t,w.onScriptLoad,"load","onreadystatechange"),m(t,w.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function g(){var e;for(d();D.length;){if(e=D.shift(),null===e[0])return c(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));f(e)}}var y,b,w,x,C,T={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},k={},S={},_={},D=[],E={},M={},A={},N=1,F=1;return x={require:function(e){return e.require?e.require:e.require=w.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?E[e.map.id]=e.exports:e.exports=E[e.map.id]={}:void 0},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(T.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},b=function(e){this.events=getOwn(_,e.id)||{},this.map=e,this.shim=getOwn(T.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},b.prototype={init:function(e,t,n,i){i=i||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=i.ignore,i.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,w.startTime=(new Date).getTime();var e=this.map;return this.shim?void w.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;M[e]||(M[e]=!0,w.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id,i=this.depExports,s=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{s=w.execCb(n,o,i,s)}catch(r){e=r}else s=w.execCb(n,o,i,s);if(this.map.isDefine&&void 0===s&&(t=this.module,t?s=t.exports:this.usingExports&&(s=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",c(this.error=e)}else s=o;this.exports=s,this.map.isDefine&&!this.ignore&&(E[n]=s,req.onResourceLoad&&req.onResourceLoad(w,this.map,this.depMaps)),u(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,i=r(e.prefix);this.depMaps.push(i),l(i,"defined",bind(this,function(i){var s,o,d,h=getOwn(A,this.map.id),p=this.map.name,f=this.map.parentMap?this.map.parentMap.name:null,m=w.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(i.normalize&&(p=i.normalize(p,function(e){return n(e,f,!0)})||""),o=r(e.prefix+"!"+p,this.map.parentMap),l(o,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),d=getOwn(k,o.id),void(d&&(this.depMaps.push(o),this.events.error&&d.on("error",bind(this,function(e){this.emit("error",e)})),d.enable()))):h?(this.map.url=w.nameToUrl(h),void this.load()):(s=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),s.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(k,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&u(e.map.id)}),c(e)}),s.fromText=bind(this,function(n,i){var o=e.name,l=r(o),d=useInteractive;i&&(n=i),d&&(useInteractive=!1),a(l),hasProp(T.config,t)&&(T.config[o]=T.config[t]);try{req.exec(n)}catch(u){return c(makeError("fromtexteval","fromText eval for "+t+" failed: "+u,u,[t]))}d&&(useInteractive=!0),this.depMaps.push(l),w.completeLoad(o),m([o],s)}),void i.load(e.name,m,s,T))})),w.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){S[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,i,s;if("string"==typeof e){if(e=r(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,s=getOwn(x,e.id))return void(this.depExports[t]=s(this));this.depCount+=1,l(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&l(e,"error",bind(this,this.errback))}n=e.id,i=k[n],hasProp(x,n)||!i||i.enabled||w.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(k,e.id);t&&!t.enabled&&w.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},w={config:T,contextName:e,registry:k,defined:E,urlFetched:M,defQueue:D,Module:b,makeModuleMap:r,nextTick:req.nextTick,onError:c,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=T.shim,n={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){n[t]?(T[t]||(T[t]={}),mixin(T[t],e,!0,!0)):T[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(A[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,n){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=w.makeShimExports(e)),t[n]=e}),T.shim=t),e.packages&&each(e.packages,function(e){var t,n;e="string"==typeof e?{name:e}:e,n=e.name,t=e.location,t&&(T.paths[n]=e.location),T.pkgs[n]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(k,function(e,t){e.inited||e.map.unnormalized||(e.map=r(t))}),(e.deps||e.callback)&&w.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,s){function o(n,i,l){var d,u,h;return s.enableBuildCallback&&i&&isFunction(i)&&(i.__requireJsBuild=!0),"string"==typeof n?isFunction(i)?c(makeError("requireargs","Invalid require call"),l):t&&hasProp(x,n)?x[n](k[t.id]):req.get?req.get(w,n,t,o):(u=r(n,t,!1,!0),d=u.id,hasProp(E,d)?E[d]:c(makeError("notloaded",'Module name "'+d+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(g(),w.nextTick(function(){g(),h=a(r(null,t)),h.skipMap=s.skipMap,h.init(n,i,l,{enabled:!0}),p()}),o)}return s=s||{},mixin(o,{isBrowser:isBrowser,toUrl:function(e){var i,s=e.lastIndexOf("."),o=e.split("/")[0],r="."===o||".."===o;return-1!==s&&(!r||s>1)&&(i=e.substring(s,e.length),e=e.substring(0,s)),w.nameToUrl(n(e,t&&t.id,!0),i,!0)},defined:function(e){return hasProp(E,r(e,t,!1,!0).id)},specified:function(e){return e=r(e,t,!1,!0).id,hasProp(E,e)||hasProp(k,e)}}),t||(o.undef=function(e){d();var n=r(e,t,!0),s=getOwn(k,e);i(e),delete E[e],delete M[n.url],delete _[e],eachReverse(D,function(t,n){t[0]===e&&D.splice(n,1)}),s&&(s.events.defined&&(_[e]=s.events),u(e))}),o},enable:function(e){var t=getOwn(k,e.id);t&&a(e).enable()},completeLoad:function(e){var t,n,i,o=getOwn(T.shim,e)||{},r=o.exports;for(d();D.length;){if(n=D.shift(),null===n[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);f(n)}if(i=getOwn(k,e),!t&&!hasProp(E,e)&&i&&!i.inited){if(!(!T.enforceDefine||r&&getGlobal(r)))return s(e)?void 0:c(makeError("nodefine","No define call for "+e,null,[e]));f([e,o.deps||[],o.exportsFn])}p()},nameToUrl:function(e,t,n){var i,s,o,r,a,l,c,d=getOwn(T.pkgs,e);if(d&&(e=d),c=getOwn(A,e))return w.nameToUrl(c,t,n);if(req.jsExtRegExp.test(e))a=e+(t||"");else{for(i=T.paths,s=e.split("/"),o=s.length;o>0;o-=1)if(r=s.slice(0,o).join("/"),l=getOwn(i,r)){isArray(l)&&(l=l[0]),s.splice(0,o,l);break}a=s.join("/"),a+=t||(/^data\:|\?/.test(a)||n?"":".js"),a=("/"===a.charAt(0)||a.match(/^[\w\+\.\-]+:/)?"":T.baseUrl)+a}return T.urlArgs?a+((-1===a.indexOf("?")?"?":"&")+T.urlArgs):a},load:function(e,t){req.load(w,e,t)},execCb:function(e,t,n,i){return t.apply(i,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=v(e);w.completeLoad(t.id)}},onScriptError:function(e){var t=v(e);return s(t.id)?void 0:c(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}},w.require=w.makeRequire(),w}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){return"interactive"===e.readyState?interactiveScript=e:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.14",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,n,i){var s,o,r=defContextName;return isArray(e)||"string"==typeof e||(o=e,isArray(t)?(e=t,t=n,n=i):e=[]),o&&o.context&&(r=o.context),s=getOwn(contexts,r),s||(s=contexts[r]=req.s.newContext(r)),o&&s.configure(o),s.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e){var t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return t.type=e.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,t},req.load=function(e,t,n){var i,s=e&&e.config||{};if(isBrowser)return i=req.createNode(s,t,n),i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),!i.attachEvent||i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0||isOpera?(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)),i.src=n,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{importScripts(n),e.completeLoad(t)}catch(o){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,o,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){return head||(head=e.parentNode),dataMain=e.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(e,t,n){var i,s;"string"!=typeof e&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(i=currentlyAddingScript||getInteractiveScript(),i&&(e||(e=i.getAttribute("data-requiremodule")),s=contexts[i.getAttribute("data-requirecontext")])),(s?s.defQueue:globalDefQueue).push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),define("vendor/requirejs/require.js",function(){}),define("underscore/arrays/compact",[],function(){function e(e){for(var t=-1,n=e?e.length:0,i=[];++t<n;){var s=e[t];s&&i.push(s)}return i}return e}),define("underscore/internals/baseIndexOf",[],function(){function e(e,t,n){for(var i=(n||0)-1,s=e?e.length:0;++i<s;)if(e[i]===t)return i;return-1}return e}),define("underscore/internals/baseDifference",["./baseIndexOf"],function(e){function t(t,n){for(var i=-1,s=e,o=t?t.length:0,r=[];++i<o;){var a=t[i];s(n,a)<0&&r.push(a)}return r}return t}),define("underscore/objects/isArguments",[],function(){function e(e){return e&&"object"==typeof e&&"number"==typeof e.length&&i.call(e)==t||!1}var t="[object Arguments]",n=Object.prototype,i=n.toString,s=n.hasOwnProperty,o=n.propertyIsEnumerable;return e(arguments)||(e=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&s.call(e,"callee")&&!o.call(e,"callee")||!1}),e}),define("underscore/internals/isNative",[],function(){function e(e){return"function"==typeof e&&i.test(e)}var t=Object.prototype,n=t.toString,i=RegExp("^"+String(n).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");return e}),define("underscore/objects/isArray",["../internals/isNative"],function(e){var t="[object Array]",n=Object.prototype,i=n.toString,s=e(s=Array.isArray)&&s,o=s||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&i.call(e)==t||!1};return o}),define("underscore/internals/baseFlatten",["../objects/isArguments","../objects/isArray"],function(e,t){function n(i,s,o,r){for(var a=(r||0)-1,l=i?i.length:0,c=[];++a<l;){var d=i[a];if(d&&"object"==typeof d&&"number"==typeof d.length&&(t(d)||e(d))){s||(d=n(d,s,o));var u=-1,h=d.length,p=c.length;for(c.length+=h;++u<h;)c[p++]=d[u]}else o||c.push(d)}return c}return n}),define("underscore/arrays/difference",["../internals/baseDifference","../internals/baseFlatten"],function(e,t){function n(n){return e(n,t(arguments,!0,!0,1))}return n}),define("underscore/internals/objectTypes",[],function(){var e={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};return e}),define("underscore/objects/isObject",["../internals/objectTypes"],function(e){function t(t){return!(!t||!e[typeof t])}return t}),define("underscore/utilities/noop",[],function(){function e(){}return e}),define("underscore/internals/baseCreate",["./isNative","../objects/isObject","../utilities/noop"],function(e,t){function n(e){return t(e)?i(e):{}}var i=e(i=Object.create)&&i;return i||(n=function(){function e(){}return function(n){if(t(n)){e.prototype=n;var i=new e;e.prototype=null}return i||window.Object()}}()),n}),define("underscore/internals/slice",[],function(){function e(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var i=-1,s=n-t||0,o=Array(0>s?0:s);++i<s;)o[i]=e[t+i];return o}return e}),define("underscore/internals/baseBind",["./baseCreate","../objects/isObject","./slice"],function(e,t,n){function i(i){function s(){if(a){var i=n(a);o.apply(i,arguments)}if(this instanceof s){var c=e(r.prototype),d=r.apply(c,i||arguments);return t(d)?d:c}return r.apply(l,i||arguments)}var r=i[0],a=i[2],l=i[4];return s}var s=[],o=s.push;return i}),define("underscore/internals/baseCreateWrapper",["./baseCreate","../objects/isObject","./slice"],function(e,t,n){function i(s){function r(){var s=p?u:this;if(c){var y=n(c);o.apply(y,arguments)}if((d||m)&&(y||(y=n(arguments)),d&&o.apply(y,d),m&&y.length<h))return l|=16,i([a,v?l:-4&l,y,null,u,h]);if(y||(y=arguments),f&&(a=s[g]),this instanceof r){s=e(a.prototype);var b=a.apply(s,y);return t(b)?b:s}return a.apply(s,y)}var a=s[0],l=s[1],c=s[2],d=s[3],u=s[4],h=s[5],p=1&l,f=2&l,m=4&l,v=8&l,g=a;return r}var s=[],o=s.push;return i}),define("underscore/objects/isFunction",[],function(){function e(e){return"function"==typeof e}var t="[object Function]",n=Object.prototype,i=n.toString;return e(/x/)&&(e=function(e){return"function"==typeof e&&i.call(e)==t}),e}),define("underscore/internals/createWrapper",["./baseBind","./baseCreateWrapper","../objects/isFunction","./slice"],function(e,t,n){function i(i,s,o,r,a,l){var c=2&s,d=16&s,u=32&s;if(!c&&!n(i))throw new TypeError;d&&!o.length&&(s&=-17,d=o=!1),u&&!r.length&&(s&=-33,u=r=!1);var h=1==s||17===s?e:t;return h([i,s,o,r,a,l])}return i}),define("underscore/functions/bind",["../internals/createWrapper","../internals/slice"],function(e,t){function n(n,i){return arguments.length>2?e(n,17,t(arguments,2),null,i):e(n,1,null,null,i)}return n}),define("underscore/utilities/identity",[],function(){function e(e){return e}return e}),define("underscore/internals/baseCreateCallback",["../functions/bind","../utilities/identity"],function(e,t){function n(n,i,s){if("function"!=typeof n)return t;if("undefined"==typeof i||!("prototype"in n))return n;switch(s){case 1:return function(e){return n.call(i,e)};case 2:return function(e,t){return n.call(i,e,t)};case 3:return function(e,t,s){return n.call(i,e,t,s)};case 4:return function(e,t,s,o){return n.call(i,e,t,s,o)}}return e(n,i)}return n}),define("underscore/internals/shimKeys",["./objectTypes"],function(e){var t=Object.prototype,n=t.hasOwnProperty,i=function(t){var i,s=t,o=[];if(!s)return o;if(!e[typeof t])return o;for(i in s)n.call(s,i)&&o.push(i);return o};return i}),define("underscore/objects/keys",["../internals/isNative","./isObject","../internals/shimKeys"],function(e,t,n){var i=e(i=Object.keys)&&i,s=i?function(e){return t(e)?i(e):[]}:n;return s}),define("underscore/utilities/property",[],function(){function e(e){return function(t){return t[e]}}return e}),define("underscore/functions/createCallback",["../internals/baseCreateCallback","../objects/keys","../utilities/property"],function(e,t,n){function i(i,s,o){var r=typeof i;if(null==i||"function"==r)return e(i,s,o);if("object"!=r)return n(i);var a=t(i);return function(e){for(var t=a.length,n=!1;t--&&(n=e[a[t]]===i[a[t]]););return n}}return i}),define("underscore/arrays/first",["../functions/createCallback","../internals/slice"],function(e,t){function n(n,r,a){var l=0,c=n?n.length:0;if("number"!=typeof r&&null!=r){var d=-1;for(r=e(r,a,3);++d<c&&r(n[d],d,n);)l++}else if(l=r,null==l||a)return n?n[0]:i;return t(n,0,o(s(0,l),c))}var i,s=Math.max,o=Math.min;return n}),define("underscore/arrays/flatten",["../internals/baseFlatten"],function(e){function t(t,n){return e(t,n)}return t}),define("underscore/arrays/sortedIndex",["../functions/createCallback","../utilities/identity"],function(e,t){function n(n,i,s,o){var r=0,a=n?n.length:r;for(s=s?e(s,o,1):t,i=s(i);a>r;){var l=r+a>>>1;s(n[l])<i?r=l+1:a=l}return r}return n}),define("underscore/arrays/indexOf",["../internals/baseIndexOf","./sortedIndex"],function(e,t){function n(n,s,o){if("number"==typeof o){var r=n?n.length:0;o=0>o?i(0,r+o):o||0}else if(o){var a=t(n,s);return n[a]===s?a:-1}return e(n,s,o)}var i=Math.max;return n}),define("underscore/arrays/initial",["../functions/createCallback","../internals/slice"],function(e,t){function n(n,o,r){var a=0,l=n?n.length:0;if("number"!=typeof o&&null!=o){var c=l;for(o=e(o,r,3);c--&&o(n[c],c,n);)a++}else a=null==o||r?1:o||a;return t(n,0,s(i(0,l-a),l))}var i=Math.max,s=Math.min;return n}),define("underscore/arrays/intersection",["../internals/baseIndexOf","../objects/isArguments","../objects/isArray"],function(e,t,n){function i(){for(var i=[],s=-1,o=arguments.length;++s<o;){var r=arguments[s];(n(r)||t(r))&&i.push(r)}var a=i[0],l=-1,c=e,d=a?a.length:0,u=[];e:for(;++l<d;)if(r=a[l],c(u,r)<0){for(var s=o;--s;)if(c(i[s],r)<0)continue e;u.push(r)}return u}return i}),define("underscore/arrays/last",["../functions/createCallback","../internals/slice"],function(e,t){function n(n,o,r){var a=0,l=n?n.length:0;if("number"!=typeof o&&null!=o){var c=l;for(o=e(o,r,3);c--&&o(n[c],c,n);)a++}else if(a=o,null==a||r)return n?n[l-1]:i;return t(n,s(0,l-a))}var i,s=Math.max;return n}),define("underscore/arrays/lastIndexOf",[],function(){function e(e,i,s){var o=e?e.length:0;for("number"==typeof s&&(o=(0>s?t(0,o+s):n(s,o-1))+1);o--;)if(e[o]===i)return o;return-1}var t=Math.max,n=Math.min;return e}),define("underscore/arrays/range",[],function(){function e(e,i,s){e=+e||0,s=+s||1,null==i&&(i=e,e=0);for(var o=-1,r=n(0,t((i-e)/s)),a=Array(r);++o<r;)a[o]=e,e+=s;return a}var t=Math.ceil,n=Math.max;return e}),define("underscore/arrays/rest",["../functions/createCallback","../internals/slice"],function(e,t){function n(n,s,o){if("number"!=typeof s&&null!=s){var r=0,a=-1,l=n?n.length:0;for(s=e(s,o,3);++a<l&&s(n[a],a,n);)r++}else r=null==s||o?1:i(0,s);return t(n,r)}var i=Math.max;return n}),define("underscore/internals/baseUniq",["./baseIndexOf"],function(e){function t(t,n,i){for(var s=-1,o=e,r=t?t.length:0,a=[],l=i?[]:a;++s<r;){var c=t[s],d=i?i(c,s,t):c;(n?!s||l[l.length-1]!==d:o(l,d)<0)&&(i&&l.push(d),a.push(c))}return a}return t}),define("underscore/arrays/union",["../internals/baseFlatten","../internals/baseUniq"],function(e,t){function n(){return t(e(arguments,!0,!0))}return n}),define("underscore/arrays/uniq",["../internals/baseUniq","../functions/createCallback"],function(e,t){function n(n,i,s,o){return"boolean"!=typeof i&&null!=i&&(o=s,s="function"!=typeof i&&o&&o[i]===n?null:i,i=!1),null!=s&&(s=t(s,o,3)),e(n,i,s)}return n}),define("underscore/arrays/without",["../internals/baseDifference","../internals/slice"],function(e,t){function n(n){return e(n,t(arguments,1))}return n}),define("underscore/internals/indicatorObject",[],function(){var e={};return e}),define("underscore/objects/forOwn",["../internals/baseCreateCallback","../internals/indicatorObject","./keys","../internals/objectTypes"],function(e,t,n,i){var s=Object.prototype,o=s.hasOwnProperty,r=function(e,n){var s,r=e,a=r;if(!r)return a;if(!i[typeof r])return a;for(s in r)if(o.call(r,s)&&n(r[s],s,e)===t)return a;return a};return r}),define("underscore/collections/forEach",["../internals/baseCreateCallback","../objects/forOwn","../internals/indicatorObject"],function(e,t,n){function i(i,s,o){var r=-1,a=i?i.length:0;if(s=s&&"undefined"==typeof o?s:e(s,o,3),"number"==typeof a)for(;++r<a&&s(i[r],r,i)!==n;);else t(i,s)}return i}),define("underscore/collections/max",["../functions/createCallback","./forEach","../objects/forOwn"],function(e,t){function n(n,i,s){var o=-1/0,r=o;"function"!=typeof i&&s&&s[i]===n&&(i=null);var a=-1,l=n?n.length:0;if(null==i&&"number"==typeof l)for(;++a<l;){var c=n[a];c>r&&(r=c)}else i=e(i,s,3),t(n,function(e,t,n){var s=i(e,t,n);s>o&&(o=s,r=e)});return r}return n}),define("underscore/collections/map",["../functions/createCallback","../objects/forOwn"],function(e,t){function n(n,i,s){var o=-1,r=n?n.length:0;if(i=e(i,s,3),"number"==typeof r)for(var a=Array(r);++o<r;)a[o]=i(n[o],o,n);else a=[],t(n,function(e,t,n){a[++o]=i(e,t,n)});return a}return n}),define("underscore/collections/pluck",["./map"],function(e){var t=e;return t}),define("underscore/arrays/zip",["../collections/max","../collections/pluck"],function(e,t){function n(){for(var n=-1,i=e(t(arguments,"length")),s=Array(0>i?0:i);++n<i;)s[n]=t(arguments,n);return s}return n}),define("underscore/arrays/zipObject",["../objects/isArray"],function(e){function t(t,n){var i=-1,s=t?t.length:0,o={};for(n||!s||e(t[0])||(n=[]);++i<s;){var r=t[i];n?o[r]=n[i]:r&&(o[r[0]]=r[1])}return o}return t}),define("underscore/arrays",["./arrays/compact","./arrays/difference","./arrays/first","./arrays/flatten","./arrays/indexOf","./arrays/initial","./arrays/intersection","./arrays/last","./arrays/lastIndexOf","./arrays/range","./arrays/rest","./arrays/sortedIndex","./arrays/union","./arrays/uniq","./arrays/without","./arrays/zip","./arrays/zipObject"],function(e,t,n,i,s,o,r,a,l,c,d,u,h,p,f,m,v){return{compact:e,difference:t,drop:d,first:n,flatten:i,head:n,indexOf:s,initial:o,intersection:r,last:a,lastIndexOf:l,object:v,range:c,rest:d,sortedIndex:u,tail:d,take:n,union:h,uniq:p,unique:p,unzip:m,without:f,zip:m,zipObject:v}}),define("underscore/internals/lodashWrapper",[],function(){function e(e,t){this.__chain__=!!t,this.__wrapped__=e}return e}),define("underscore/chaining/chain",["../internals/lodashWrapper"],function(e){function t(t){return t=new e(t),t.__chain__=!0,t}return t}),define("underscore/chaining/tap",[],function(){function e(e,t){return t(e),e}return e}),define("underscore/chaining/wrapperChain",[],function(){function e(){return this.__chain__=!0,this}return e}),define("underscore/support",["./internals/isNative"],function(){var e=[],t={};return function(){var n={0:1,length:1};t.spliceObjects=(e.splice.call(n,0,1),!n[0])}(1),t}),define("underscore/chaining/wrapperValueOf",["../collections/forEach","../support"],function(){function e(){return this.__wrapped__}return e}),define("underscore/chaining",["./chaining/chain","./chaining/tap","./chaining/wrapperChain","./chaining/wrapperValueOf"],function(e,t,n,i){return{chain:e,tap:t,value:i,wrapperChain:n,wrapperValueOf:i}}),define("underscore/collections/contains",["../internals/baseIndexOf","../objects/forOwn","../internals/indicatorObject"],function(e,t,n){function i(i,s){var o=e,r=i?i.length:0,a=!1;return r&&"number"==typeof r?a=o(i,s)>-1:t(i,function(e){return(a=e===s)&&n}),a}return i}),define("underscore/internals/createAggregator",["../functions/createCallback","../objects/forOwn","../objects/isArray"],function(e,t){function n(n){return function(i,s,o){var r={};s=e(s,o,3);var a=-1,l=i?i.length:0;if("number"==typeof l)for(;++a<l;){var c=i[a];n(r,c,s(c,a,i),i)}else t(i,function(e,t,i){n(r,e,s(e,t,i),i)});return r}}return n}),define("underscore/collections/countBy",["../internals/createAggregator"],function(e){var t=Object.prototype,n=t.hasOwnProperty,i=e(function(e,t,i){n.call(e,i)?e[i]++:e[i]=1});return i}),define("underscore/collections/every",["../functions/createCallback","../objects/forOwn","../internals/indicatorObject"],function(e,t,n){function i(i,s,o){var r=!0;s=e(s,o,3);var a=-1,l=i?i.length:0;if("number"==typeof l)for(;++a<l&&(r=!!s(i[a],a,i)););else t(i,function(e,t,i){return!(r=!!s(e,t,i))&&n});return r}return i}),define("underscore/collections/filter",["../functions/createCallback","../objects/forOwn"],function(e,t){function n(n,i,s){var o=[];i=e(i,s,3);var r=-1,a=n?n.length:0;if("number"==typeof a)for(;++r<a;){var l=n[r];i(l,r,n)&&o.push(l)}else t(n,function(e,t,n){i(e,t,n)&&o.push(e)});return o}return n}),define("underscore/collections/find",["../functions/createCallback","../objects/forOwn","../internals/indicatorObject"],function(e,t,n){function i(i,s,o){s=e(s,o,3);var r=-1,a=i?i.length:0;if("number"!=typeof a){var l;return t(i,function(e,t,i){return s(e,t,i)?(l=e,n):void 0}),l}for(;++r<a;){var c=i[r];if(s(c,r,i))return c}}return i}),define("underscore/objects/isString",[],function(){function e(e){return"string"==typeof e||e&&"object"==typeof e&&i.call(e)==t||!1}var t="[object String]",n=Object.prototype,i=n.toString;return e}),define("underscore/objects/isEmpty",["./isArray","./isString"],function(e,t){function n(n){if(!n)return!0;if(e(n)||t(n))return!n.length;for(var i in n)if(s.call(n,i))return!1;return!0}var i=Object.prototype,s=i.hasOwnProperty;return n}),define("underscore/collections/where",["./filter","./find","../objects/isEmpty"],function(e,t,n){function i(i,o,r){return r&&n(o)?s:(r?t:e)(i,o)
}var s;return i}),define("underscore/collections/findWhere",["./where"],function(e){function t(t,n){return e(t,n,!0)}return t}),define("underscore/collections/forEachRight",["../internals/baseCreateCallback","../objects/forOwn","../internals/indicatorObject","../objects/isArray","../objects/isString","../objects/keys"],function(e,t,n,i,s,o){function r(e,i){var s=e?e.length:0;if("number"==typeof s)for(;s--&&i(e[s],s,e)!==!1;);else{var r=o(e);s=r.length,t(e,function(e,t,o){return t=r?r[--s]:--s,i(o[t],t,o)===!1&&n})}}return r}),define("underscore/collections/groupBy",["../internals/createAggregator"],function(e){var t=Object.prototype,n=t.hasOwnProperty,i=e(function(e,t,i){(n.call(e,i)?e[i]:e[i]=[]).push(t)});return i}),define("underscore/collections/indexBy",["../internals/createAggregator"],function(e){var t=e(function(e,t,n){e[n]=t});return t}),define("underscore/collections/invoke",["./forEach","../internals/slice"],function(e,t){function n(n,i){var s=t(arguments,2),o=-1,r="function"==typeof i,a=n?n.length:0,l=Array("number"==typeof a?a:0);return e(n,function(e){l[++o]=(r?i:e[i]).apply(e,s)}),l}return n}),define("underscore/collections/min",["../functions/createCallback","./forEach","../objects/forOwn"],function(e,t){function n(n,i,s){var o=1/0,r=o;"function"!=typeof i&&s&&s[i]===n&&(i=null);var a=-1,l=n?n.length:0;if(null==i&&"number"==typeof l)for(;++a<l;){var c=n[a];r>c&&(r=c)}else i=e(i,s,3),t(n,function(e,t,n){var s=i(e,t,n);o>s&&(o=s,r=e)});return r}return n}),define("underscore/collections/reduce",["../functions/createCallback","../objects/forOwn"],function(e,t){function n(n,i,s,o){if(!n)return s;var r=arguments.length<3;i=e(i,o,4);var a=-1,l=n.length;if("number"==typeof l)for(r&&(s=n[++a]);++a<l;)s=i(s,n[a],a,n);else t(n,function(e,t,n){s=r?(r=!1,e):i(s,e,t,n)});return s}return n}),define("underscore/collections/reduceRight",["../functions/createCallback","./forEachRight"],function(e,t){function n(n,i,s,o){var r=arguments.length<3;return i=e(i,o,4),t(n,function(e,t,n){s=r?(r=!1,e):i(s,e,t,n)}),s}return n}),define("underscore/collections/reject",["../functions/createCallback","./filter"],function(e,t){function n(n,i,s){return i=e(i,s,3),t(n,function(e,t,n){return!i(e,t,n)})}return n}),define("underscore/internals/baseRandom",[],function(){function e(e,i){return e+t(n()*(i-e+1))}var t=Math.floor,n=Math.random;return e}),define("underscore/collections/shuffle",["../internals/baseRandom","./forEach"],function(e,t){function n(n){var i=-1,s=n?n.length:0,o=Array("number"==typeof s?s:0);return t(n,function(t){var n=e(0,++i);o[i]=o[n],o[n]=t}),o}return n}),define("underscore/objects/values",["./keys"],function(e){function t(t){for(var n=-1,i=e(t),s=i.length,o=Array(s);++n<s;)o[n]=t[i[n]];return o}return t}),define("underscore/collections/sample",["../internals/baseRandom","../objects/isString","./shuffle","../objects/values"],function(e,t,n,i){function s(t,s,l){if(t&&"number"!=typeof t.length&&(t=i(t)),null==s||l)return t?t[e(0,t.length-1)]:o;var c=n(t);return c.length=a(r(0,s),c.length),c}var o,r=Math.max,a=Math.min;return s}),define("underscore/collections/size",["../objects/keys"],function(e){function t(t){var n=t?t.length:0;return"number"==typeof n?n:e(t).length}return t}),define("underscore/collections/some",["../functions/createCallback","../objects/forOwn","../internals/indicatorObject","../objects/isArray"],function(e,t,n){function i(i,s,o){var r;s=e(s,o,3);var a=-1,l=i?i.length:0;if("number"==typeof l)for(;++a<l&&!(r=s(i[a],a,i)););else t(i,function(e,t,i){return(r=s(e,t,i))&&n});return!!r}return i}),define("underscore/internals/compareAscending",[],function(){function e(e,t){for(var n=e.criteria,i=t.criteria,s=-1,o=n.length;++s<o;){var r=n[s],a=i[s];if(r!==a){if(r>a||"undefined"==typeof r)return 1;if(a>r||"undefined"==typeof a)return-1}}return e.index-t.index}return e}),define("underscore/collections/sortBy",["../internals/compareAscending","../functions/createCallback","./forEach","../objects/isArray","./map"],function(e,t,n){function i(i,s,o){var r=-1,a=i?i.length:0,l=Array("number"==typeof a?a:0);for(s=t(s,o,3),n(i,function(e,t,n){l[++r]={criteria:[s(e,t,n)],index:r,value:e}}),a=l.length,l.sort(e);a--;)l[a]=l[a].value;return l}return i}),define("underscore/collections/toArray",["../objects/isArray","./map","../internals/slice","../objects/values"],function(e,t,n,i){function s(s){return e(s)?n(s):s&&"number"==typeof s.length?t(s):i(s)}return s}),define("underscore/collections",["./collections/contains","./collections/countBy","./collections/every","./collections/filter","./collections/find","./collections/findWhere","./collections/forEach","./collections/forEachRight","./collections/groupBy","./collections/indexBy","./collections/invoke","./collections/map","./collections/max","./collections/min","./collections/pluck","./collections/reduce","./collections/reduceRight","./collections/reject","./collections/sample","./collections/shuffle","./collections/size","./collections/some","./collections/sortBy","./collections/toArray","./collections/where"],function(e,t,n,i,s,o,r,a,l,c,d,u,h,p,f,m,v,g,y,b,w,x,C,T,k){return{all:n,any:x,collect:u,contains:e,countBy:t,detect:s,each:r,eachRight:a,every:n,filter:i,find:s,findWhere:o,foldl:m,foldr:v,forEach:r,forEachRight:a,groupBy:l,include:e,indexBy:c,inject:m,invoke:d,map:u,max:h,min:p,pluck:f,reduce:m,reduceRight:v,reject:g,sample:y,select:i,shuffle:b,size:w,some:x,sortBy:C,toArray:T,where:k}}),define("underscore/functions/after",["../objects/isFunction"],function(e){function t(t,n){if(!e(n))throw new TypeError;return function(){return--t<1?n.apply(this,arguments):void 0}}return t}),define("underscore/objects/forIn",["../internals/baseCreateCallback","../internals/indicatorObject","../internals/objectTypes"],function(e,t,n){var i=function(e,i){var s,o=e,r=o;if(!o)return r;if(!n[typeof o])return r;for(s in o)if(i(o[s],s,e)===t)return r;return r};return i}),define("underscore/objects/functions",["./forIn","./isFunction"],function(e,t){function n(n){var i=[];return e(n,function(e,n){t(e)&&i.push(n)}),i.sort()}return n}),define("underscore/functions/bindAll",["../internals/baseFlatten","../internals/createWrapper","../objects/functions"],function(e,t,n){function i(i){for(var s=arguments.length>1?e(arguments,!0,!1,1):n(i),o=-1,r=s.length;++o<r;){var a=s[o];i[a]=t(i[a],1,null,null,i)}return i}return i}),define("underscore/functions/compose",["../objects/isFunction"],function(e){function t(){for(var t=arguments,n=t.length;n--;)if(!e(t[n]))throw new TypeError;return function(){for(var e=arguments,n=t.length;n--;)e=[t[n].apply(this,e)];return e[0]}}return t}),define("underscore/utilities/now",["../internals/isNative"],function(e){var t=e(t=Date.now)&&t||function(){return(new Date).getTime()};return t}),define("underscore/functions/debounce",["../objects/isFunction","../objects/isObject","../utilities/now"],function(e,t,n){function i(i,r,a){var l,c,d,u,h,p,f,m=0,v=!1,g=!0;if(!e(i))throw new TypeError;if(r=o(0,r)||0,a===!0){var y=!0;g=!1}else t(a)&&(y=a.leading,v="maxWait"in a&&(o(r,a.maxWait)||0),g="trailing"in a?a.trailing:g);var b=function(){var e=r-(n()-u);if(0>=e){c&&clearTimeout(c);var t=f;c=p=f=s,t&&(m=n(),d=i.apply(h,l),p||c||(l=h=null))}else p=setTimeout(b,e)},w=function(){p&&clearTimeout(p),c=p=f=s,(g||v!==r)&&(m=n(),d=i.apply(h,l),p||c||(l=h=null))};return function(){if(l=arguments,u=n(),h=this,f=g&&(p||!y),v===!1)var e=y&&!p;else{c||y||(m=u);var t=v-(u-m),s=0>=t;s?(c&&(c=clearTimeout(c)),m=u,d=i.apply(h,l)):c||(c=setTimeout(w,t))}return s&&p?p=clearTimeout(p):p||r===v||(p=setTimeout(b,r)),e&&(s=!0,d=i.apply(h,l)),!s||p||c||(l=h=null),d}}var s,o=Math.max;return i}),define("underscore/functions/defer",["../objects/isFunction","../internals/slice"],function(e,t){function n(n){if(!e(n))throw new TypeError;var s=t(arguments,1);return setTimeout(function(){n.apply(i,s)},1)}var i;return n}),define("underscore/functions/delay",["../objects/isFunction","../internals/slice"],function(e,t){function n(n,s){if(!e(n))throw new TypeError;var o=t(arguments,2);return setTimeout(function(){n.apply(i,o)},s)}var i;return n}),define("underscore/internals/keyPrefix",[],function(){var e=+new Date+"";return e}),define("underscore/functions/memoize",["../objects/isFunction","../internals/keyPrefix"],function(e,t){function n(e,n){var i={};return function(){var o=n?n.apply(this,arguments):t+arguments[0];return s.call(i,o)?i[o]:i[o]=e.apply(this,arguments)}}var i=Object.prototype,s=i.hasOwnProperty;return n}),define("underscore/functions/once",["../objects/isFunction"],function(e){function t(t){var n,i;if(!e(t))throw new TypeError;return function(){return n?i:(n=!0,i=t.apply(this,arguments),t=null,i)}}return t}),define("underscore/functions/partial",["../internals/createWrapper","../internals/slice"],function(e,t){function n(n){return e(n,16,t(arguments,1))}return n}),define("underscore/functions/throttle",["./debounce","../objects/isFunction","../objects/isObject"],function(e,t,n){function i(i,s,o){var r=!0,a=!0;if(!t(i))throw new TypeError;return o===!1?r=!1:n(o)&&(r="leading"in o?o.leading:r,a="trailing"in o?o.trailing:a),o={},o.leading=r,o.maxWait=s,o.trailing=a,e(i,s,o)}return i}),define("underscore/functions/wrap",["../internals/createWrapper"],function(e){function t(t,n){return e(n,16,[t])}return t}),define("underscore/functions",["./functions/after","./functions/bind","./functions/bindAll","./functions/compose","./functions/createCallback","./functions/debounce","./functions/defer","./functions/delay","./functions/memoize","./functions/once","./functions/partial","./functions/throttle","./functions/wrap"],function(e,t,n,i,s,o,r,a,l,c,d,u,h){return{after:e,bind:t,bindAll:n,compose:i,createCallback:s,debounce:o,defer:r,delay:a,memoize:l,once:c,partial:d,throttle:u,wrap:h}}),define("underscore/objects/assign",["../internals/baseCreateCallback","./keys","../internals/objectTypes"],function(){function e(e){if(!e)return e;for(var t=1,n=arguments.length;n>t;t++){var i=arguments[t];if(i)for(var s in i)e[s]=i[s]}return e}return e}),define("underscore/objects/clone",["./assign","../internals/baseCreateCallback","./isArray","./isObject","../internals/slice"],function(e,t,n,i,s){function o(t){return i(t)?n(t)?s(t):e({},t):t}return o}),define("underscore/objects/defaults",["./keys","../internals/objectTypes"],function(){function e(e){if(!e)return e;for(var t=1,n=arguments.length;n>t;t++){var i=arguments[t];if(i)for(var s in i)"undefined"==typeof e[s]&&(e[s]=i[s])}return e}return e}),define("underscore/objects/has",[],function(){function e(e,t){return e?n.call(e,t):!1}var t=Object.prototype,n=t.hasOwnProperty;return e}),define("underscore/objects/invert",["./keys"],function(e){function t(t){for(var n=-1,i=e(t),s=i.length,o={};++n<s;){var r=i[n];o[t[r]]=r}return o}return t}),define("underscore/objects/isBoolean",[],function(){function e(e){return e===!0||e===!1||e&&"object"==typeof e&&i.call(e)==t||!1}var t="[object Boolean]",n=Object.prototype,i=n.toString;return e}),define("underscore/objects/isDate",[],function(){function e(e){return e&&"object"==typeof e&&i.call(e)==t||!1}var t="[object Date]",n=Object.prototype,i=n.toString;return e}),define("underscore/objects/isElement",[],function(){function e(e){return e&&1===e.nodeType||!1}return e}),define("underscore/internals/baseIsEqual",["../objects/forIn","./indicatorObject","../objects/isFunction","./objectTypes"],function(e,t,n,i){function s(h,m,v,g){if(h===m)return 0!==h||1/h==1/m;var y=typeof h,b=typeof m;if(!(h!==h||h&&i[y]||m&&i[b]))return!1;if(null==h||null==m)return h===m;var w=p.call(h),x=p.call(m);if(w!=x)return!1;switch(w){case r:case a:return+h==+m;case l:return h!=+h?m!=+m:0==h?1/h==1/m:h==+m;case d:case u:return h==String(m)}var C=w==o;if(!C){var T=f.call(h,"__wrapped__"),k=f.call(m,"__wrapped__");if(T||k)return s(T?h.__wrapped__:h,k?m.__wrapped__:m,v,g);if(w!=c)return!1;var S=h.constructor,_=m.constructor;if(S!=_&&!(n(S)&&S instanceof S&&n(_)&&_ instanceof _)&&"constructor"in h&&"constructor"in m)return!1}v||(v=[]),g||(g=[]);for(var D=v.length;D--;)if(v[D]==h)return g[D]==m;var E=!0,M=0;if(v.push(h),g.push(m),C){if(M=m.length,E=M==h.length)for(;M--&&(E=s(h[M],m[M],v,g)););}else e(m,function(e,n,i){return f.call(i,n)?(M++,!(E=f.call(h,n)&&s(h[n],e,v,g))&&t):void 0}),E&&e(h,function(e,n,i){return f.call(i,n)?!(E=--M>-1)&&t:void 0});return v.pop(),g.pop(),E}var o="[object Array]",r="[object Boolean]",a="[object Date]",l="[object Number]",c="[object Object]",d="[object RegExp]",u="[object String]",h=Object.prototype,p=h.toString,f=h.hasOwnProperty;return s}),define("underscore/objects/isEqual",["../internals/baseIsEqual"],function(e){function t(t,n){return e(t,n)}return t}),define("underscore/objects/isFinite",[],function(){function e(e){return t(e)&&!n(parseFloat(e))}var t=window.isFinite,n=window.isNaN;return e}),define("underscore/objects/isNumber",[],function(){function e(e){return"number"==typeof e||e&&"object"==typeof e&&i.call(e)==t||!1}var t="[object Number]",n=Object.prototype,i=n.toString;return e}),define("underscore/objects/isNaN",["./isNumber"],function(e){function t(t){return e(t)&&t!=+t}return t}),define("underscore/objects/isNull",[],function(){function e(e){return null===e}return e}),define("underscore/objects/isRegExp",["../internals/objectTypes"],function(e){function t(t){return t&&e[typeof t]&&s.call(t)==n||!1}var n="[object RegExp]",i=Object.prototype,s=i.toString;return t}),define("underscore/objects/isUndefined",[],function(){function e(e){return"undefined"==typeof e}return e}),define("underscore/objects/omit",["../internals/baseDifference","../internals/baseFlatten","./forIn"],function(e,t,n){function i(i){var s=[];n(i,function(e,t){s.push(t)}),s=e(s,t(arguments,!0,!1,1));for(var o=-1,r=s.length,a={};++o<r;){var l=s[o];a[l]=i[l]}return a}return i}),define("underscore/objects/pairs",["./keys"],function(e){function t(t){for(var n=-1,i=e(t),s=i.length,o=Array(s);++n<s;){var r=i[n];o[n]=[r,t[r]]}return o}return t}),define("underscore/objects/pick",["../internals/baseFlatten"],function(e){function t(t){for(var n=-1,i=e(arguments,!0,!1,1),s=i.length,o={};++n<s;){var r=i[n];r in t&&(o[r]=t[r])}return o}return t}),define("underscore/objects",["./objects/assign","./objects/clone","./objects/defaults","./objects/forIn","./objects/forOwn","./objects/functions","./objects/has","./objects/invert","./objects/isArguments","./objects/isArray","./objects/isBoolean","./objects/isDate","./objects/isElement","./objects/isEmpty","./objects/isEqual","./objects/isFinite","./objects/isFunction","./objects/isNaN","./objects/isNull","./objects/isNumber","./objects/isObject","./objects/isRegExp","./objects/isString","./objects/isUndefined","./objects/keys","./objects/omit","./objects/pairs","./objects/pick","./objects/values"],function(e,t,n,i,s,o,r,a,l,c,d,u,h,p,f,m,v,g,y,b,w,x,C,T,k,S,_,D,E){return{assign:e,clone:t,defaults:n,extend:e,forIn:i,forOwn:s,functions:o,has:r,invert:a,isArguments:l,isArray:c,isBoolean:d,isDate:u,isElement:h,isEmpty:p,isEqual:f,isFinite:m,isFunction:v,isNaN:g,isNull:y,isNumber:b,isObject:w,isRegExp:x,isString:C,isUndefined:T,keys:k,methods:o,omit:S,pairs:_,pick:D,values:E}}),define("underscore/internals/htmlEscapes",[],function(){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"};return e}),define("underscore/internals/escapeHtmlChar",["./htmlEscapes"],function(e){function t(t){return e[t]}return t}),define("underscore/internals/reUnescapedHtml",["./htmlEscapes","../objects/keys"],function(e,t){var n=RegExp("["+t(e).join("")+"]","g");return n}),define("underscore/utilities/escape",["../internals/escapeHtmlChar","../objects/keys","../internals/reUnescapedHtml"],function(e,t,n){function i(t){return null==t?"":String(t).replace(n,e)}return i}),define("underscore/utilities/mixin",["../collections/forEach","../objects/functions","../objects/isFunction"],function(e,t,n){function i(i,s){var r=i,a=n(r);e(t(s),function(e){var t=i[e]=s[e];a&&(r.prototype[e]=function(){var e=[this.__wrapped__];o.apply(e,arguments);var n=t.apply(i,e);return this.__chain__&&(n=new r(n),n.__chain__=!0),n})})}var s=[],o=s.push;return i}),define("underscore/utilities/noConflict",[],function(){function e(){return window._=t,this}var t=window._;return e}),define("underscore/utilities/random",["../internals/baseRandom"],function(){function e(e,i){return null==e&&null==i&&(i=1),e=+e||0,null==i?(i=e,e=0):i=+i||0,e+t(n()*(i-e+1))}var t=Math.floor,n=Math.random;return e}),define("underscore/utilities/result",["../objects/isFunction"],function(e){function t(t,n){if(t){var i=t[n];return e(i)?t[n]():i}}return t}),define("underscore/internals/escapeStringChar",[],function(){function e(e){return"\\"+t[e]}var t={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};return e}),define("underscore/internals/reInterpolate",[],function(){var e=/<%=([\s\S]+?)%>/g;return e}),define("underscore/utilities/templateSettings",["./escape","../internals/reInterpolate"],function(e,t){var n={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:t,variable:"",imports:{_:{escape:e}}};return n}),define("underscore/utilities/template",["../objects/defaults","./escape","../internals/escapeStringChar","../internals/reInterpolate","./templateSettings"],function(e,t,n,i,s){function o(t,i,o){var l=s.imports._,c=l.templateSettings||s;t=String(t||""),o=e({},o,c);var d=0,u="__p += '",h=o.variable,p=RegExp((o.escape||r).source+"|"+(o.interpolate||r).source+"|"+(o.evaluate||r).source+"|$","g");t.replace(p,function(e,i,s,o,r){return u+=t.slice(d,r).replace(a,n),i&&(u+="' +\n_.escape("+i+") +\n'"),o&&(u+="';\n"+o+";\n__p += '"),s&&(u+="' +\n((__t = ("+s+")) == null ? '' : __t) +\n'"),d=r+e.length,e}),u+="';\n",h||(h="obj",u="with ("+h+" || {}) {\n"+u+"\n}\n"),u="function("+h+") {\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n"+u+"return __p\n}";try{var f=Function("_","return "+u)(l)}catch(m){throw m.source=u,m}return i?f(i):(f.source=u,f)}var r=/($^)/,a=/['\n\r\t\u2028\u2029\\]/g;return o}),define("underscore/utilities/times",["../internals/baseCreateCallback"],function(e){function t(t,n,i){t=(t=+t)>-1?t:0;var s=-1,o=Array(t);for(n=e(n,i,1);++s<t;)o[s]=n(s);return o}return t}),define("underscore/internals/htmlUnescapes",["./htmlEscapes","../objects/invert"],function(e,t){var n=t(e);return n}),define("underscore/internals/reEscapedHtml",["./htmlUnescapes","../objects/keys"],function(e,t){var n=RegExp("("+t(e).join("|")+")","g");return n}),define("underscore/internals/unescapeHtmlChar",["./htmlUnescapes"],function(e){function t(t){return e[t]}return t}),define("underscore/utilities/unescape",["../objects/keys","../internals/reEscapedHtml","../internals/unescapeHtmlChar"],function(e,t,n){function i(e){return null==e?"":String(e).replace(t,n)}return i}),define("underscore/utilities/uniqueId",[],function(){function e(e){var n=++t+"";return e?e+n:n}var t=0;return e}),define("underscore/utilities",["./functions/createCallback","./utilities/escape","./utilities/identity","./utilities/mixin","./utilities/noConflict","./utilities/noop","./utilities/now","./utilities/property","./utilities/random","./utilities/result","./utilities/template","./utilities/templateSettings","./utilities/times","./utilities/unescape","./utilities/uniqueId"],function(e,t,n,i,s,o,r,a,l,c,d,u,h,p,f){return{createCallback:e,escape:t,identity:n,mixin:i,noConflict:s,noop:o,now:r,property:a,random:l,result:c,template:d,templateSettings:u,times:h,unescape:p,uniqueId:f}}),define("underscore/main",["./arrays","./chaining","./collections","./functions","./objects","./utilities","./collections/forEach","./objects/forOwn","./internals/lodashWrapper","./utilities/mixin","./support","./utilities/templateSettings"],function(e,t,n,i,s,o,r,a,l,c,d){function u(e){return e instanceof u?e:new l(e)}var h=[];return l.prototype=u.prototype,c=function(e){return function(t,n){return n||(n=t,t=u),e(t,n)}}(c),u.after=i.after,u.bind=i.bind,u.bindAll=i.bindAll,u.chain=t.chain,u.compact=e.compact,u.compose=i.compose,u.countBy=n.countBy,u.debounce=i.debounce,u.defaults=s.defaults,u.defer=i.defer,u.delay=i.delay,u.difference=e.difference,u.filter=n.filter,u.flatten=e.flatten,u.forEach=r,u.functions=s.functions,u.groupBy=n.groupBy,u.indexBy=n.indexBy,u.initial=e.initial,u.intersection=e.intersection,u.invert=s.invert,u.invoke=n.invoke,u.keys=s.keys,u.map=n.map,u.max=n.max,u.memoize=i.memoize,u.min=n.min,u.omit=s.omit,u.once=i.once,u.pairs=s.pairs,u.partial=i.partial,u.pick=s.pick,u.pluck=n.pluck,u.range=e.range,u.reject=n.reject,u.rest=e.rest,u.shuffle=n.shuffle,u.sortBy=n.sortBy,u.tap=t.tap,u.throttle=i.throttle,u.times=o.times,u.toArray=n.toArray,u.union=e.union,u.uniq=e.uniq,u.values=s.values,u.where=n.where,u.without=e.without,u.wrap=i.wrap,u.zip=e.zip,u.collect=n.map,u.drop=e.rest,u.each=r,u.extend=s.assign,u.methods=s.functions,u.object=e.zipObject,u.select=n.filter,u.tail=e.rest,u.unique=e.uniq,u.clone=s.clone,u.contains=n.contains,u.escape=o.escape,u.every=n.every,u.find=n.find,u.has=s.has,u.identity=o.identity,u.indexOf=e.indexOf,u.isArguments=s.isArguments,u.isArray=s.isArray,u.isBoolean=s.isBoolean,u.isDate=s.isDate,u.isElement=s.isElement,u.isEmpty=s.isEmpty,u.isEqual=s.isEqual,u.isFinite=s.isFinite,u.isFunction=s.isFunction,u.isNaN=s.isNaN,u.isNull=s.isNull,u.isNumber=s.isNumber,u.isObject=s.isObject,u.isRegExp=s.isRegExp,u.isString=s.isString,u.isUndefined=s.isUndefined,u.lastIndexOf=e.lastIndexOf,u.mixin=c,u.noConflict=o.noConflict,u.random=o.random,u.reduce=n.reduce,u.reduceRight=n.reduceRight,u.result=o.result,u.size=n.size,u.some=n.some,u.sortedIndex=e.sortedIndex,u.template=o.template,u.unescape=o.unescape,u.uniqueId=o.uniqueId,u.all=n.every,u.any=n.some,u.detect=n.find,u.findWhere=n.findWhere,u.foldl=n.reduce,u.foldr=n.reduceRight,u.include=n.contains,u.inject=n.reduce,u.first=e.first,u.last=e.last,u.sample=n.sample,u.take=e.first,u.head=e.first,c(u),u.VERSION="2.4.1",u.prototype.chain=t.wrapperChain,u.prototype.value=t.wrapperValueOf,r(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=h[e];u.prototype[e]=function(){var e=this.__wrapped__;return t.apply(e,arguments),d.spliceObjects||0!==e.length||delete e[0],this}}),r(["concat","join","slice"],function(e){var t=h[e];u.prototype[e]=function(){var e=this.__wrapped__,n=t.apply(e,arguments);return this.__chain__&&(n=new l(n),n.__chain__=!0),n}}),u.support=d,(u.templateSettings=o.templateSettings).imports._=u,u}),define("underscore",["underscore/main"],function(e){return e}),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=e.length,n=Q.type(e);return"function"===n||Q.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function i(e,t,n){if(Q.isFunction(t))return Q.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return Q.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(at.test(t))return Q.filter(t,e,n);t=Q.filter(t,e)}return Q.grep(e,function(e){return $.call(t,e)>=0!==n})}function s(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t=ft[e]={};return Q.each(e.match(pt)||[],function(e,n){t[n]=!0}),t}function r(){K.removeEventListener("DOMContentLoaded",r,!1),e.removeEventListener("load",r,!1),Q.ready()}function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Q.expando+Math.random()}function l(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(wt,"-$1").toLowerCase(),n=e.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:bt.test(n)?Q.parseJSON(n):n}catch(s){}yt.set(e,t,n)}else n=void 0;return n}function c(){return!0}function d(){return!1}function u(){try{return K.activeElement}catch(e){}}function h(e,t){return Q.nodeName(e,"table")&&Q.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function p(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function f(e){var t=Pt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function m(e,t){for(var n=0,i=e.length;i>n;n++)gt.set(e[n],"globalEval",!t||gt.get(t[n],"globalEval"))}function v(e,t){var n,i,s,o,r,a,l,c;if(1===t.nodeType){if(gt.hasData(e)&&(o=gt.access(e),r=gt.set(t,o),c=o.events)){delete r.handle,r.events={};for(s in c)for(n=0,i=c[s].length;i>n;n++)Q.event.add(t,s,c[s][n])}yt.hasData(e)&&(a=yt.access(e),l=Q.extend({},a),yt.set(t,l))}}function g(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&Q.nodeName(e,t)?Q.merge([e],n):n}function y(e,t){var n=t.nodeName.toLowerCase();"input"===n&&kt.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function b(t,n){var i,s=Q(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(i=e.getDefaultComputedStyle(s[0]))?i.display:Q.css(s[0],"display");return s.detach(),o}function w(e){var t=K,n=Lt[e];return n||(n=b(e,t),"none"!==n&&n||(Bt=(Bt||Q("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Bt[0].contentDocument,t.write(),t.close(),n=b(e,t),Bt.detach()),Lt[e]=n),n}function x(e,t,n){var i,s,o,r,a=e.style;return n=n||Wt(e),n&&(r=n.getPropertyValue(t)||n[t]),n&&(""!==r||Q.contains(e.ownerDocument,e)||(r=Q.style(e,t)),qt.test(r)&&Ht.test(t)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=n.width,a.width=i,a.minWidth=s,a.maxWidth=o)),void 0!==r?r+"":r}function C(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function T(e,t){if(t in e)return t;for(var n=t[0].toUpperCase()+t.slice(1),i=t,s=Jt.length;s--;)if(t=Jt[s]+n,t in e)return t;return i}function k(e,t,n){var i=zt.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function S(e,t,n,i,s){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,r=0;4>o;o+=2)"margin"===n&&(r+=Q.css(e,n+Ct[o],!0,s)),i?("content"===n&&(r-=Q.css(e,"padding"+Ct[o],!0,s)),"margin"!==n&&(r-=Q.css(e,"border"+Ct[o]+"Width",!0,s))):(r+=Q.css(e,"padding"+Ct[o],!0,s),"padding"!==n&&(r+=Q.css(e,"border"+Ct[o]+"Width",!0,s)));return r}function _(e,t,n){var i=!0,s="width"===t?e.offsetWidth:e.offsetHeight,o=Wt(e),r="border-box"===Q.css(e,"boxSizing",!1,o);if(0>=s||null==s){if(s=x(e,t,o),(0>s||null==s)&&(s=e.style[t]),qt.test(s))return s;i=r&&(X.boxSizingReliable()||s===e.style[t]),s=parseFloat(s)||0}return s+S(e,t,n||(r?"border":"content"),i,o)+"px"}function D(e,t){for(var n,i,s,o=[],r=0,a=e.length;a>r;r++)i=e[r],i.style&&(o[r]=gt.get(i,"olddisplay"),n=i.style.display,t?(o[r]||"none"!==n||(i.style.display=""),""===i.style.display&&Tt(i)&&(o[r]=gt.access(i,"olddisplay",w(i.nodeName)))):(s=Tt(i),"none"===n&&s||gt.set(i,"olddisplay",s?n:Q.css(i,"display"))));for(r=0;a>r;r++)i=e[r],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[r]||"":"none"));return e}function E(e,t,n,i,s){return new E.prototype.init(e,t,n,i,s)}function M(){return setTimeout(function(){Xt=void 0}),Xt=Q.now()}function A(e,t){var n,i=0,s={height:e};for(t=t?1:0;4>i;i+=2-t)n=Ct[i],s["margin"+n]=s["padding"+n]=e;return t&&(s.opacity=s.width=e),s}function N(e,t,n){for(var i,s=(nn[t]||[]).concat(nn["*"]),o=0,r=s.length;r>o;o++)if(i=s[o].call(n,t,e))return i}function F(e,t,n){var i,s,o,r,a,l,c,d,u=this,h={},p=e.style,f=e.nodeType&&Tt(e),m=gt.get(e,"fxshow");n.queue||(a=Q._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,u.always(function(){u.always(function(){a.unqueued--,Q.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],c=Q.css(e,"display"),d="none"===c?gt.get(e,"olddisplay")||w(e.nodeName):c,"inline"===d&&"none"===Q.css(e,"float")&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",u.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in t)if(s=t[i],Zt.exec(s)){if(delete t[i],o=o||"toggle"===s,s===(f?"hide":"show")){if("show"!==s||!m||void 0===m[i])continue;f=!0}h[i]=m&&m[i]||Q.style(e,i)}else c=void 0;if(Q.isEmptyObject(h))"inline"===("none"===c?w(e.nodeName):c)&&(p.display=c);else{m?"hidden"in m&&(f=m.hidden):m=gt.access(e,"fxshow",{}),o&&(m.hidden=!f),f?Q(e).show():u.done(function(){Q(e).hide()}),u.done(function(){var t;gt.remove(e,"fxshow");for(t in h)Q.style(e,t,h[t])});for(i in h)r=N(f?m[i]:0,i,u),i in m||(m[i]=r.start,f&&(r.end=r.start,r.start="width"===i||"height"===i?1:0))}}function O(e,t){var n,i,s,o,r;for(n in e)if(i=Q.camelCase(n),s=t[i],o=e[n],Q.isArray(o)&&(s=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),r=Q.cssHooks[i],r&&"expand"in r){o=r.expand(o),delete e[i];for(n in o)n in e||(e[n]=o[n],t[n]=s)}else t[i]=s}function j(e,t,n){var i,s,o=0,r=tn.length,a=Q.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var t=Xt||M(),n=Math.max(0,c.startTime+c.duration-t),i=n/c.duration||0,o=1-i,r=0,l=c.tweens.length;l>r;r++)c.tweens[r].run(o);return a.notifyWith(e,[c,o,n]),1>o&&l?n:(a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:Q.extend({},t),opts:Q.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xt||M(),duration:n.duration,tweens:[],createTween:function(t,n){var i=Q.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(s)return this;for(s=!0;i>n;n++)c.tweens[n].run(1);return t?a.resolveWith(e,[c,t]):a.rejectWith(e,[c,t]),this}}),d=c.props;for(O(d,c.opts.specialEasing);r>o;o++)if(i=tn[o].call(c,e,d,c.opts))return i;return Q.map(d,N,c),Q.isFunction(c.opts.start)&&c.opts.start.call(e,c),Q.fx.timer(Q.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function I(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,s=0,o=t.toLowerCase().match(pt)||[];if(Q.isFunction(n))for(;i=o[s++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function P(e,t,n,i){function s(a){var l;return o[a]=!0,Q.each(e[a]||[],function(e,a){var c=a(t,n,i);return"string"!=typeof c||r||o[c]?r?!(l=c):void 0:(t.dataTypes.unshift(c),s(c),!1)}),l}var o={},r=e===Cn;return s(t.dataTypes[0])||!o["*"]&&s("*")}function V(e,t){var n,i,s=Q.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((s[n]?e:i||(i={}))[n]=t[n]);return i&&Q.extend(!0,e,i),e}function R(e,t,n){for(var i,s,o,r,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){l.unshift(s);break}if(l[0]in n)o=l[0];else{for(s in n){if(!l[0]||e.converters[s+" "+l[0]]){o=s;break}r||(r=s)}o=o||r}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}function B(e,t,n,i){var s,o,r,a,l,c={},d=e.dataTypes.slice();if(d[1])for(r in e.converters)c[r.toLowerCase()]=e.converters[r];for(o=d.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=d.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(r=c[l+" "+o]||c["* "+o],!r)for(s in c)if(a=s.split(" "),a[1]===o&&(r=c[l+" "+a[0]]||c["* "+a[0]])){r===!0?r=c[s]:c[s]!==!0&&(o=a[0],d.unshift(a[1]));break}if(r!==!0)if(r&&e["throws"])t=r(t);else try{t=r(t)}catch(u){return{state:"parsererror",error:r?u:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function L(e,t,n,i){var s;if(Q.isArray(t))Q.each(t,function(t,s){n||_n.test(e)?i(e,s):L(e+"["+("object"==typeof s?t:"")+"]",s,n,i)});else if(n||"object"!==Q.type(t))i(e,t);else for(s in t)L(e+"["+s+"]",t[s],n,i)}function H(e){return Q.isWindow(e)?e:9===e.nodeType&&e.defaultView
}var q=[],W=q.slice,U=q.concat,z=q.push,$=q.indexOf,Y={},G=Y.toString,J=Y.hasOwnProperty,X={},K=e.document,Z="2.1.1",Q=function(e,t){return new Q.fn.init(e,t)},et=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,tt=/^-ms-/,nt=/-([\da-z])/gi,it=function(e,t){return t.toUpperCase()};Q.fn=Q.prototype={jquery:Z,constructor:Q,selector:"",length:0,toArray:function(){return W.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:W.call(this)},pushStack:function(e){var t=Q.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return Q.each(this,e,t)},map:function(e){return this.pushStack(Q.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(W.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:z,sort:q.sort,splice:q.splice},Q.extend=Q.fn.extend=function(){var e,t,n,i,s,o,r=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[a]||{},a++),"object"==typeof r||Q.isFunction(r)||(r={}),a===l&&(r=this,a--);l>a;a++)if(null!=(e=arguments[a]))for(t in e)n=r[t],i=e[t],r!==i&&(c&&i&&(Q.isPlainObject(i)||(s=Q.isArray(i)))?(s?(s=!1,o=n&&Q.isArray(n)?n:[]):o=n&&Q.isPlainObject(n)?n:{},r[t]=Q.extend(c,o,i)):void 0!==i&&(r[t]=i));return r},Q.extend({expando:"jQuery"+(Z+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===Q.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!Q.isArray(e)&&e-parseFloat(e)>=0},isPlainObject:function(e){return"object"!==Q.type(e)||e.nodeType||Q.isWindow(e)?!1:e.constructor&&!J.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Y[G.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=Q.trim(e),e&&(1===e.indexOf("use strict")?(t=K.createElement("script"),t.text=e,K.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(tt,"ms-").replace(nt,it)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var s,o=0,r=e.length,a=n(e);if(i){if(a)for(;r>o&&(s=t.apply(e[o],i),s!==!1);o++);else for(o in e)if(s=t.apply(e[o],i),s===!1)break}else if(a)for(;r>o&&(s=t.call(e[o],o,e[o]),s!==!1);o++);else for(o in e)if(s=t.call(e[o],o,e[o]),s===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(et,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?Q.merge(i,"string"==typeof e?[e]:e):z.call(i,e)),i},inArray:function(e,t,n){return null==t?-1:$.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,s=e.length;n>i;i++)e[s++]=t[i];return e.length=s,e},grep:function(e,t,n){for(var i,s=[],o=0,r=e.length,a=!n;r>o;o++)i=!t(e[o],o),i!==a&&s.push(e[o]);return s},map:function(e,t,i){var s,o=0,r=e.length,a=n(e),l=[];if(a)for(;r>o;o++)s=t(e[o],o,i),null!=s&&l.push(s);else for(o in e)s=t(e[o],o,i),null!=s&&l.push(s);return U.apply([],l)},guid:1,proxy:function(e,t){var n,i,s;return"string"==typeof t&&(n=e[t],t=e,e=n),Q.isFunction(e)?(i=W.call(arguments,2),s=function(){return e.apply(t||this,i.concat(W.call(arguments)))},s.guid=e.guid=e.guid||Q.guid++,s):void 0},now:Date.now,support:X}),Q.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Y["[object "+t+"]"]=t.toLowerCase()});var st=function(e){function t(e,t,n,i){var s,o,r,a,l,c,u,p,f,m;if((t?t.ownerDocument||t:L)!==F&&N(t),t=t||F,n=n||[],!e||"string"!=typeof e)return n;if(1!==(a=t.nodeType)&&9!==a)return[];if(j&&!i){if(s=yt.exec(e))if(r=s[1]){if(9===a){if(o=t.getElementById(r),!o||!o.parentNode)return n;if(o.id===r)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(r))&&R(t,o)&&o.id===r)return n.push(o),n}else{if(s[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((r=s[3])&&x.getElementsByClassName&&t.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(r)),n}if(x.qsa&&(!I||!I.test(e))){if(p=u=B,f=t,m=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(c=S(e),(u=t.getAttribute("id"))?p=u.replace(wt,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",l=c.length;l--;)c[l]=p+h(c[l]);f=bt.test(e)&&d(t.parentNode)||t,m=c.join(",")}if(m)try{return Q.apply(n,f.querySelectorAll(m)),n}catch(v){}finally{u||t.removeAttribute("id")}}}return D(e.replace(lt,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>C.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[B]=!0,e}function s(e){var t=F.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),i=e.length;i--;)C.attrHandle[n[i]]=t}function r(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||G)-(~e.sourceIndex||G);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return i(function(t){return t=+t,i(function(n,i){for(var s,o=e([],n.length,t),r=o.length;r--;)n[s=o[r]]&&(n[s]=!(i[s]=n[s]))})})}function d(e){return e&&typeof e.getElementsByTagName!==Y&&e}function u(){}function h(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function p(e,t,n){var i=t.dir,s=n&&"parentNode"===i,o=q++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||s)return e(t,n,o)}:function(t,n,r){var a,l,c=[H,o];if(r){for(;t=t[i];)if((1===t.nodeType||s)&&e(t,n,r))return!0}else for(;t=t[i];)if(1===t.nodeType||s){if(l=t[B]||(t[B]={}),(a=l[i])&&a[0]===H&&a[1]===o)return c[2]=a[2];if(l[i]=c,c[2]=e(t,n,r))return!0}}}function f(e){return e.length>1?function(t,n,i){for(var s=e.length;s--;)if(!e[s](t,n,i))return!1;return!0}:e[0]}function m(e,n,i){for(var s=0,o=n.length;o>s;s++)t(e,n[s],i);return i}function v(e,t,n,i,s){for(var o,r=[],a=0,l=e.length,c=null!=t;l>a;a++)(o=e[a])&&(!n||n(o,i,s))&&(r.push(o),c&&t.push(a));return r}function g(e,t,n,s,o,r){return s&&!s[B]&&(s=g(s)),o&&!o[B]&&(o=g(o,r)),i(function(i,r,a,l){var c,d,u,h=[],p=[],f=r.length,g=i||m(t||"*",a.nodeType?[a]:a,[]),y=!e||!i&&t?g:v(g,h,e,a,l),b=n?o||(i?e:f||s)?[]:r:y;if(n&&n(y,b,a,l),s)for(c=v(b,p),s(c,[],a,l),d=c.length;d--;)(u=c[d])&&(b[p[d]]=!(y[p[d]]=u));if(i){if(o||e){if(o){for(c=[],d=b.length;d--;)(u=b[d])&&c.push(y[d]=u);o(null,b=[],c,l)}for(d=b.length;d--;)(u=b[d])&&(c=o?tt.call(i,u):h[d])>-1&&(i[c]=!(r[c]=u))}}else b=v(b===r?b.splice(f,b.length):b),o?o(null,r,b,l):Q.apply(r,b)})}function y(e){for(var t,n,i,s=e.length,o=C.relative[e[0].type],r=o||C.relative[" "],a=o?1:0,l=p(function(e){return e===t},r,!0),c=p(function(e){return tt.call(t,e)>-1},r,!0),d=[function(e,n,i){return!o&&(i||n!==E)||((t=n).nodeType?l(e,n,i):c(e,n,i))}];s>a;a++)if(n=C.relative[e[a].type])d=[p(f(d),n)];else{if(n=C.filter[e[a].type].apply(null,e[a].matches),n[B]){for(i=++a;s>i&&!C.relative[e[i].type];i++);return g(a>1&&f(d),a>1&&h(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(lt,"$1"),n,i>a&&y(e.slice(a,i)),s>i&&y(e=e.slice(i)),s>i&&h(e))}d.push(n)}return f(d)}function b(e,n){var s=n.length>0,o=e.length>0,r=function(i,r,a,l,c){var d,u,h,p=0,f="0",m=i&&[],g=[],y=E,b=i||o&&C.find.TAG("*",c),w=H+=null==y?1:Math.random()||.1,x=b.length;for(c&&(E=r!==F&&r);f!==x&&null!=(d=b[f]);f++){if(o&&d){for(u=0;h=e[u++];)if(h(d,r,a)){l.push(d);break}c&&(H=w)}s&&((d=!h&&d)&&p--,i&&m.push(d))}if(p+=f,s&&f!==p){for(u=0;h=n[u++];)h(m,g,r,a);if(i){if(p>0)for(;f--;)m[f]||g[f]||(g[f]=K.call(l));g=v(g)}Q.apply(l,g),c&&!i&&g.length>0&&p+n.length>1&&t.uniqueSort(l)}return c&&(H=w,E=y),m};return s?i(r):r}var w,x,C,T,k,S,_,D,E,M,A,N,F,O,j,I,P,V,R,B="sizzle"+-new Date,L=e.document,H=0,q=0,W=n(),U=n(),z=n(),$=function(e,t){return e===t&&(A=!0),0},Y="undefined",G=1<<31,J={}.hasOwnProperty,X=[],K=X.pop,Z=X.push,Q=X.push,et=X.slice,tt=X.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},nt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",st="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ot=st.replace("w","w#"),rt="\\["+it+"*("+st+")(?:"+it+"*([*^$|!~]?=)"+it+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ot+"))|)"+it+"*\\]",at=":("+st+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+rt+")*)|.*)\\)|)",lt=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),ct=new RegExp("^"+it+"*,"+it+"*"),dt=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),ut=new RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),ht=new RegExp(at),pt=new RegExp("^"+ot+"$"),ft={ID:new RegExp("^#("+st+")"),CLASS:new RegExp("^\\.("+st+")"),TAG:new RegExp("^("+st.replace("w","w*")+")"),ATTR:new RegExp("^"+rt),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+nt+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},mt=/^(?:input|select|textarea|button)$/i,vt=/^h\d$/i,gt=/^[^{]+\{\s*\[native \w/,yt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bt=/[+~]/,wt=/'|\\/g,xt=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),Ct=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{Q.apply(X=et.call(L.childNodes),L.childNodes),X[L.childNodes.length].nodeType}catch(Tt){Q={apply:X.length?function(e,t){Z.apply(e,et.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}x=t.support={},k=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},N=t.setDocument=function(e){var t,n=e?e.ownerDocument||e:L,i=n.defaultView;return n!==F&&9===n.nodeType&&n.documentElement?(F=n,O=n.documentElement,j=!k(n),i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",function(){N()},!1):i.attachEvent&&i.attachEvent("onunload",function(){N()})),x.attributes=s(function(e){return e.className="i",!e.getAttribute("className")}),x.getElementsByTagName=s(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),x.getElementsByClassName=gt.test(n.getElementsByClassName)&&s(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),x.getById=s(function(e){return O.appendChild(e).id=B,!n.getElementsByName||!n.getElementsByName(B).length}),x.getById?(C.find.ID=function(e,t){if(typeof t.getElementById!==Y&&j){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},C.filter.ID=function(e){var t=e.replace(xt,Ct);return function(e){return e.getAttribute("id")===t}}):(delete C.find.ID,C.filter.ID=function(e){var t=e.replace(xt,Ct);return function(e){var n=typeof e.getAttributeNode!==Y&&e.getAttributeNode("id");return n&&n.value===t}}),C.find.TAG=x.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==Y?t.getElementsByTagName(e):void 0}:function(e,t){var n,i=[],s=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[s++];)1===n.nodeType&&i.push(n);return i}return o},C.find.CLASS=x.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==Y&&j?t.getElementsByClassName(e):void 0},P=[],I=[],(x.qsa=gt.test(n.querySelectorAll))&&(s(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&I.push("[*^$]="+it+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||I.push("\\["+it+"*(?:value|"+nt+")"),e.querySelectorAll(":checked").length||I.push(":checked")}),s(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&I.push("name"+it+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||I.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),I.push(",.*:")})),(x.matchesSelector=gt.test(V=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&s(function(e){x.disconnectedMatch=V.call(e,"div"),V.call(e,"[s!='']:x"),P.push("!=",at)}),I=I.length&&new RegExp(I.join("|")),P=P.length&&new RegExp(P.join("|")),t=gt.test(O.compareDocumentPosition),R=t||gt.test(O.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},$=t?function(e,t){if(e===t)return A=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!x.sortDetached&&t.compareDocumentPosition(e)===i?e===n||e.ownerDocument===L&&R(L,e)?-1:t===n||t.ownerDocument===L&&R(L,t)?1:M?tt.call(M,e)-tt.call(M,t):0:4&i?-1:1)}:function(e,t){if(e===t)return A=!0,0;var i,s=0,o=e.parentNode,a=t.parentNode,l=[e],c=[t];if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:M?tt.call(M,e)-tt.call(M,t):0;if(o===a)return r(e,t);for(i=e;i=i.parentNode;)l.unshift(i);for(i=t;i=i.parentNode;)c.unshift(i);for(;l[s]===c[s];)s++;return s?r(l[s],c[s]):l[s]===L?-1:c[s]===L?1:0},n):F},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==F&&N(e),n=n.replace(ut,"='$1']"),!(!x.matchesSelector||!j||P&&P.test(n)||I&&I.test(n)))try{var i=V.call(e,n);if(i||x.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(s){}return t(n,F,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==F&&N(e),R(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==F&&N(e);var n=C.attrHandle[t.toLowerCase()],i=n&&J.call(C.attrHandle,t.toLowerCase())?n(e,t,!j):void 0;return void 0!==i?i:x.attributes||!j?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,s=0;if(A=!x.detectDuplicates,M=!x.sortStable&&e.slice(0),e.sort($),A){for(;t=e[s++];)t===e[s]&&(i=n.push(s));for(;i--;)e.splice(n[i],1)}return M=null,e},T=t.getText=function(e){var t,n="",i=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=T(e)}else if(3===s||4===s)return e.nodeValue}else for(;t=e[i++];)n+=T(t);return n},C=t.selectors={cacheLength:50,createPseudo:i,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(xt,Ct),e[3]=(e[3]||e[4]||e[5]||"").replace(xt,Ct),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return ft.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ht.test(n)&&(t=S(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(xt,Ct).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=W[e+" "];return t||(t=new RegExp("(^|"+it+")"+e+"("+it+"|$)"))&&W(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==Y&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(s){var o=t.attr(s,e);return null==o?"!="===n:n?(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o+" ").indexOf(i)>-1:"|="===n?o===i||o.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,s){var o="nth"!==e.slice(0,3),r="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===s?function(e){return!!e.parentNode}:function(t,n,l){var c,d,u,h,p,f,m=o!==r?"nextSibling":"previousSibling",v=t.parentNode,g=a&&t.nodeName.toLowerCase(),y=!l&&!a;if(v){if(o){for(;m;){for(u=t;u=u[m];)if(a?u.nodeName.toLowerCase()===g:1===u.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[r?v.firstChild:v.lastChild],r&&y){for(d=v[B]||(v[B]={}),c=d[e]||[],p=c[0]===H&&c[1],h=c[0]===H&&c[2],u=p&&v.childNodes[p];u=++p&&u&&u[m]||(h=p=0)||f.pop();)if(1===u.nodeType&&++h&&u===t){d[e]=[H,p,h];break}}else if(y&&(c=(t[B]||(t[B]={}))[e])&&c[0]===H)h=c[1];else for(;(u=++p&&u&&u[m]||(h=p=0)||f.pop())&&((a?u.nodeName.toLowerCase()!==g:1!==u.nodeType)||!++h||(y&&((u[B]||(u[B]={}))[e]=[H,h]),u!==t)););return h-=s,h===i||h%i===0&&h/i>=0}}},PSEUDO:function(e,n){var s,o=C.pseudos[e]||C.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[B]?o(n):o.length>1?(s=[e,e,"",n],C.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,s=o(e,n),r=s.length;r--;)i=tt.call(e,s[r]),e[i]=!(t[i]=s[r])}):function(e){return o(e,0,s)}):o}},pseudos:{not:i(function(e){var t=[],n=[],s=_(e.replace(lt,"$1"));return s[B]?i(function(e,t,n,i){for(var o,r=s(e,null,i,[]),a=e.length;a--;)(o=r[a])&&(e[a]=!(t[a]=o))}):function(e,i,o){return t[0]=e,s(t,null,o,n),!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return function(t){return(t.textContent||t.innerText||T(t)).indexOf(e)>-1}}),lang:i(function(e){return pt.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(xt,Ct).toLowerCase(),function(t){var n;do if(n=j?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===O},focus:function(e){return e===F.activeElement&&(!F.hasFocus||F.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return vt.test(e.nodeName)},input:function(e){return mt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[0>n?n+t:n]}),even:c(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:c(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},C.pseudos.nth=C.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[w]=a(w);for(w in{submit:!0,reset:!0})C.pseudos[w]=l(w);return u.prototype=C.filters=C.pseudos,C.setFilters=new u,S=t.tokenize=function(e,n){var i,s,o,r,a,l,c,d=U[e+" "];if(d)return n?0:d.slice(0);for(a=e,l=[],c=C.preFilter;a;){(!i||(s=ct.exec(a)))&&(s&&(a=a.slice(s[0].length)||a),l.push(o=[])),i=!1,(s=dt.exec(a))&&(i=s.shift(),o.push({value:i,type:s[0].replace(lt," ")}),a=a.slice(i.length));for(r in C.filter)!(s=ft[r].exec(a))||c[r]&&!(s=c[r](s))||(i=s.shift(),o.push({value:i,type:r,matches:s}),a=a.slice(i.length));if(!i)break}return n?a.length:a?t.error(e):U(e,l).slice(0)},_=t.compile=function(e,t){var n,i=[],s=[],o=z[e+" "];if(!o){for(t||(t=S(e)),n=t.length;n--;)o=y(t[n]),o[B]?i.push(o):s.push(o);o=z(e,b(s,i)),o.selector=e}return o},D=t.select=function(e,t,n,i){var s,o,r,a,l,c="function"==typeof e&&e,u=!i&&S(e=c.selector||e);if(n=n||[],1===u.length){if(o=u[0]=u[0].slice(0),o.length>2&&"ID"===(r=o[0]).type&&x.getById&&9===t.nodeType&&j&&C.relative[o[1].type]){if(t=(C.find.ID(r.matches[0].replace(xt,Ct),t)||[])[0],!t)return n;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(s=ft.needsContext.test(e)?0:o.length;s--&&(r=o[s],!C.relative[a=r.type]);)if((l=C.find[a])&&(i=l(r.matches[0].replace(xt,Ct),bt.test(o[0].type)&&d(t.parentNode)||t))){if(o.splice(s,1),e=i.length&&h(o),!e)return Q.apply(n,i),n;break}}return(c||_(e,u))(i,t,!j,n,bt.test(e)&&d(t.parentNode)||t),n},x.sortStable=B.split("").sort($).join("")===B,x.detectDuplicates=!!A,N(),x.sortDetached=s(function(e){return 1&e.compareDocumentPosition(F.createElement("div"))}),s(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),x.attributes&&s(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),s(function(e){return null==e.getAttribute("disabled")})||o(nt,function(e,t,n){var i;return n?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);Q.find=st,Q.expr=st.selectors,Q.expr[":"]=Q.expr.pseudos,Q.unique=st.uniqueSort,Q.text=st.getText,Q.isXMLDoc=st.isXML,Q.contains=st.contains;var ot=Q.expr.match.needsContext,rt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,at=/^.[^:#\[\.,]*$/;Q.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?Q.find.matchesSelector(i,e)?[i]:[]:Q.find.matches(e,Q.grep(t,function(e){return 1===e.nodeType}))},Q.fn.extend({find:function(e){var t,n=this.length,i=[],s=this;if("string"!=typeof e)return this.pushStack(Q(e).filter(function(){for(t=0;n>t;t++)if(Q.contains(s[t],this))return!0}));for(t=0;n>t;t++)Q.find(e,s[t],i);return i=this.pushStack(n>1?Q.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&ot.test(e)?Q(e):e||[],!1).length}});var lt,ct=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,dt=Q.fn.init=function(e,t){var n,i;if(!e)return this;if("string"==typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ct.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||lt).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof Q?t[0]:t,Q.merge(this,Q.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:K,!0)),rt.test(n[1])&&Q.isPlainObject(t))for(n in t)Q.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return i=K.getElementById(n[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=K,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):Q.isFunction(e)?"undefined"!=typeof lt.ready?lt.ready(e):e(Q):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),Q.makeArray(e,this))};dt.prototype=Q.fn,lt=Q(K);var ut=/^(?:parents|prev(?:Until|All))/,ht={children:!0,contents:!0,next:!0,prev:!0};Q.extend({dir:function(e,t,n){for(var i=[],s=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(s&&Q(e).is(n))break;i.push(e)}return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),Q.fn.extend({has:function(e){var t=Q(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(Q.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,i=0,s=this.length,o=[],r=ot.test(e)||"string"!=typeof e?Q(e,t||this.context):0;s>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(r?r.index(n)>-1:1===n.nodeType&&Q.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?Q.unique(o):o)},index:function(e){return e?"string"==typeof e?$.call(Q(e),this[0]):$.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Q.unique(Q.merge(this.get(),Q(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Q.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Q.dir(e,"parentNode")},parentsUntil:function(e,t,n){return Q.dir(e,"parentNode",n)},next:function(e){return s(e,"nextSibling")},prev:function(e){return s(e,"previousSibling")},nextAll:function(e){return Q.dir(e,"nextSibling")},prevAll:function(e){return Q.dir(e,"previousSibling")},nextUntil:function(e,t,n){return Q.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return Q.dir(e,"previousSibling",n)},siblings:function(e){return Q.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Q.sibling(e.firstChild)},contents:function(e){return e.contentDocument||Q.merge([],e.childNodes)}},function(e,t){Q.fn[e]=function(n,i){var s=Q.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(s=Q.filter(i,s)),this.length>1&&(ht[e]||Q.unique(s),ut.test(e)&&s.reverse()),this.pushStack(s)}});var pt=/\S+/g,ft={};Q.Callbacks=function(e){e="string"==typeof e?ft[e]||o(e):Q.extend({},e);var t,n,i,s,r,a,l=[],c=!e.once&&[],d=function(o){for(t=e.memory&&o,n=!0,a=s||0,s=0,r=l.length,i=!0;l&&r>a;a++)if(l[a].apply(o[0],o[1])===!1&&e.stopOnFalse){t=!1;break}i=!1,l&&(c?c.length&&d(c.shift()):t?l=[]:u.disable())},u={add:function(){if(l){var n=l.length;!function o(t){Q.each(t,function(t,n){var i=Q.type(n);"function"===i?e.unique&&u.has(n)||l.push(n):n&&n.length&&"string"!==i&&o(n)})}(arguments),i?r=l.length:t&&(s=n,d(t))}return this},remove:function(){return l&&Q.each(arguments,function(e,t){for(var n;(n=Q.inArray(t,l,n))>-1;)l.splice(n,1),i&&(r>=n&&r--,a>=n&&a--)}),this},has:function(e){return e?Q.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],r=0,this},disable:function(){return l=c=t=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,t||u.disable(),this},locked:function(){return!c},fireWith:function(e,t){return!l||n&&!c||(t=t||[],t=[e,t.slice?t.slice():t],i?c.push(t):d(t)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!n}};return u},Q.extend({Deferred:function(e){var t=[["resolve","done",Q.Callbacks("once memory"),"resolved"],["reject","fail",Q.Callbacks("once memory"),"rejected"],["notify","progress",Q.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Q.Deferred(function(n){Q.each(t,function(t,o){var r=Q.isFunction(e[t])&&e[t];s[o[1]](function(){var e=r&&r.apply(this,arguments);e&&Q.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===i?n.promise():this,r?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?Q.extend(e,i):i}},s={};return i.pipe=i.then,Q.each(t,function(e,o){var r=o[2],a=o[3];i[o[1]]=r.add,a&&r.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),s[o[0]]=function(){return s[o[0]+"With"](this===s?i:this,arguments),this},s[o[0]+"With"]=r.fireWith}),i.promise(s),e&&e.call(s,s),s},when:function(e){var t,n,i,s=0,o=W.call(arguments),r=o.length,a=1!==r||e&&Q.isFunction(e.promise)?r:0,l=1===a?e:Q.Deferred(),c=function(e,n,i){return function(s){n[e]=this,i[e]=arguments.length>1?W.call(arguments):s,i===t?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(r>1)for(t=new Array(r),n=new Array(r),i=new Array(r);r>s;s++)o[s]&&Q.isFunction(o[s].promise)?o[s].promise().done(c(s,i,o)).fail(l.reject).progress(c(s,n,t)):--a;return a||l.resolveWith(i,o),l.promise()}});var mt;Q.fn.ready=function(e){return Q.ready.promise().done(e),this},Q.extend({isReady:!1,readyWait:1,holdReady:function(e){e?Q.readyWait++:Q.ready(!0)},ready:function(e){(e===!0?--Q.readyWait:Q.isReady)||(Q.isReady=!0,e!==!0&&--Q.readyWait>0||(mt.resolveWith(K,[Q]),Q.fn.triggerHandler&&(Q(K).triggerHandler("ready"),Q(K).off("ready"))))}}),Q.ready.promise=function(t){return mt||(mt=Q.Deferred(),"complete"===K.readyState?setTimeout(Q.ready):(K.addEventListener("DOMContentLoaded",r,!1),e.addEventListener("load",r,!1))),mt.promise(t)},Q.ready.promise();var vt=Q.access=function(e,t,n,i,s,o,r){var a=0,l=e.length,c=null==n;if("object"===Q.type(n)){s=!0;for(a in n)Q.access(e,t,a,n[a],!0,o,r)}else if(void 0!==i&&(s=!0,Q.isFunction(i)||(r=!0),c&&(r?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(Q(e),n)})),t))for(;l>a;a++)t(e[a],n,r?i:i.call(e[a],a,t(e[a],n)));return s?e:c?t.call(e):l?t(e[0],n):o};Q.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},a.uid=1,a.accepts=Q.acceptData,a.prototype={key:function(e){if(!a.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=a.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(i){t[this.expando]=n,Q.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var i,s=this.key(e),o=this.cache[s];if("string"==typeof t)o[t]=n;else if(Q.isEmptyObject(o))Q.extend(this.cache[s],t);else for(i in t)o[i]=t[i];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?(i=this.get(e,t),void 0!==i?i:this.get(e,Q.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,s,o=this.key(e),r=this.cache[o];if(void 0===t)this.cache[o]={};else{Q.isArray(t)?i=t.concat(t.map(Q.camelCase)):(s=Q.camelCase(t),t in r?i=[t,s]:(i=s,i=i in r?[i]:i.match(pt)||[])),n=i.length;for(;n--;)delete r[i[n]]}},hasData:function(e){return!Q.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var gt=new a,yt=new a,bt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,wt=/([A-Z])/g;Q.extend({hasData:function(e){return yt.hasData(e)||gt.hasData(e)},data:function(e,t,n){return yt.access(e,t,n)},removeData:function(e,t){yt.remove(e,t)},_data:function(e,t,n){return gt.access(e,t,n)},_removeData:function(e,t){gt.remove(e,t)}}),Q.fn.extend({data:function(e,t){var n,i,s,o=this[0],r=o&&o.attributes;if(void 0===e){if(this.length&&(s=yt.get(o),1===o.nodeType&&!gt.get(o,"hasDataAttrs"))){for(n=r.length;n--;)r[n]&&(i=r[n].name,0===i.indexOf("data-")&&(i=Q.camelCase(i.slice(5)),l(o,i,s[i])));gt.set(o,"hasDataAttrs",!0)}return s}return"object"==typeof e?this.each(function(){yt.set(this,e)}):vt(this,function(t){var n,i=Q.camelCase(e);if(o&&void 0===t){if(n=yt.get(o,e),void 0!==n)return n;if(n=yt.get(o,i),void 0!==n)return n;if(n=l(o,i,void 0),void 0!==n)return n}else this.each(function(){var n=yt.get(this,i);yt.set(this,i,t),-1!==e.indexOf("-")&&void 0!==n&&yt.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){yt.remove(this,e)})}}),Q.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=gt.get(e,t),n&&(!i||Q.isArray(n)?i=gt.access(e,t,Q.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=Q.queue(e,t),i=n.length,s=n.shift(),o=Q._queueHooks(e,t),r=function(){Q.dequeue(e,t)};"inprogress"===s&&(s=n.shift(),i--),s&&("fx"===t&&n.unshift("inprogress"),delete o.stop,s.call(e,r,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return gt.get(e,n)||gt.access(e,n,{empty:Q.Callbacks("once memory").add(function(){gt.remove(e,[t+"queue",n])
})})}}),Q.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?Q.queue(this[0],e):void 0===t?this:this.each(function(){var n=Q.queue(this,e,t);Q._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&Q.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Q.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,s=Q.Deferred(),o=this,r=this.length,a=function(){--i||s.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";r--;)n=gt.get(o[r],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(a));return a(),s.promise(t)}});var xt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ct=["Top","Right","Bottom","Left"],Tt=function(e,t){return e=t||e,"none"===Q.css(e,"display")||!Q.contains(e.ownerDocument,e)},kt=/^(?:checkbox|radio)$/i;!function(){var e=K.createDocumentFragment(),t=e.appendChild(K.createElement("div")),n=K.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),X.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",X.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var St="undefined";X.focusinBubbles="onfocusin"in e;var _t=/^key/,Dt=/^(?:mouse|pointer|contextmenu)|click/,Et=/^(?:focusinfocus|focusoutblur)$/,Mt=/^([^.]*)(?:\.(.+)|)$/;Q.event={global:{},add:function(e,t,n,i,s){var o,r,a,l,c,d,u,h,p,f,m,v=gt.get(e);if(v)for(n.handler&&(o=n,n=o.handler,s=o.selector),n.guid||(n.guid=Q.guid++),(l=v.events)||(l=v.events={}),(r=v.handle)||(r=v.handle=function(t){return typeof Q!==St&&Q.event.triggered!==t.type?Q.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(pt)||[""],c=t.length;c--;)a=Mt.exec(t[c])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p&&(u=Q.event.special[p]||{},p=(s?u.delegateType:u.bindType)||p,u=Q.event.special[p]||{},d=Q.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:s,needsContext:s&&Q.expr.match.needsContext.test(s),namespace:f.join(".")},o),(h=l[p])||(h=l[p]=[],h.delegateCount=0,u.setup&&u.setup.call(e,i,f,r)!==!1||e.addEventListener&&e.addEventListener(p,r,!1)),u.add&&(u.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),s?h.splice(h.delegateCount++,0,d):h.push(d),Q.event.global[p]=!0)},remove:function(e,t,n,i,s){var o,r,a,l,c,d,u,h,p,f,m,v=gt.hasData(e)&&gt.get(e);if(v&&(l=v.events)){for(t=(t||"").match(pt)||[""],c=t.length;c--;)if(a=Mt.exec(t[c])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p){for(u=Q.event.special[p]||{},p=(i?u.delegateType:u.bindType)||p,h=l[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=o=h.length;o--;)d=h[o],!s&&m!==d.origType||n&&n.guid!==d.guid||a&&!a.test(d.namespace)||i&&i!==d.selector&&("**"!==i||!d.selector)||(h.splice(o,1),d.selector&&h.delegateCount--,u.remove&&u.remove.call(e,d));r&&!h.length&&(u.teardown&&u.teardown.call(e,f,v.handle)!==!1||Q.removeEvent(e,p,v.handle),delete l[p])}else for(p in l)Q.event.remove(e,p+t[c],n,i,!0);Q.isEmptyObject(l)&&(delete v.handle,gt.remove(e,"events"))}},trigger:function(t,n,i,s){var o,r,a,l,c,d,u,h=[i||K],p=J.call(t,"type")?t.type:t,f=J.call(t,"namespace")?t.namespace.split("."):[];if(r=a=i=i||K,3!==i.nodeType&&8!==i.nodeType&&!Et.test(p+Q.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),c=p.indexOf(":")<0&&"on"+p,t=t[Q.expando]?t:new Q.Event(p,"object"==typeof t&&t),t.isTrigger=s?2:3,t.namespace=f.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:Q.makeArray(n,[t]),u=Q.event.special[p]||{},s||!u.trigger||u.trigger.apply(i,n)!==!1)){if(!s&&!u.noBubble&&!Q.isWindow(i)){for(l=u.delegateType||p,Et.test(l+p)||(r=r.parentNode);r;r=r.parentNode)h.push(r),a=r;a===(i.ownerDocument||K)&&h.push(a.defaultView||a.parentWindow||e)}for(o=0;(r=h[o++])&&!t.isPropagationStopped();)t.type=o>1?l:u.bindType||p,d=(gt.get(r,"events")||{})[t.type]&&gt.get(r,"handle"),d&&d.apply(r,n),d=c&&r[c],d&&d.apply&&Q.acceptData(r)&&(t.result=d.apply(r,n),t.result===!1&&t.preventDefault());return t.type=p,s||t.isDefaultPrevented()||u._default&&u._default.apply(h.pop(),n)!==!1||!Q.acceptData(i)||c&&Q.isFunction(i[p])&&!Q.isWindow(i)&&(a=i[c],a&&(i[c]=null),Q.event.triggered=p,i[p](),Q.event.triggered=void 0,a&&(i[c]=a)),t.result}},dispatch:function(e){e=Q.event.fix(e);var t,n,i,s,o,r=[],a=W.call(arguments),l=(gt.get(this,"events")||{})[e.type]||[],c=Q.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(r=Q.event.handlers.call(this,e,l),t=0;(s=r[t++])&&!e.isPropagationStopped();)for(e.currentTarget=s.elem,n=0;(o=s.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,i=((Q.event.special[o.origType]||{}).handle||o.handler).apply(s.elem,a),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,s,o,r=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==e.type){for(i=[],n=0;a>n;n++)o=t[n],s=o.selector+" ",void 0===i[s]&&(i[s]=o.needsContext?Q(s,this).index(l)>=0:Q.find(s,this,null,[l]).length),i[s]&&i.push(o);i.length&&r.push({elem:l,handlers:i})}return a<t.length&&r.push({elem:this,handlers:t.slice(a)}),r},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,s,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||K,i=n.documentElement,s=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||s&&s.scrollLeft||0)-(i&&i.clientLeft||s&&s.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||s&&s.scrollTop||0)-(i&&i.clientTop||s&&s.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[Q.expando])return e;var t,n,i,s=e.type,o=e,r=this.fixHooks[s];for(r||(this.fixHooks[s]=r=Dt.test(s)?this.mouseHooks:_t.test(s)?this.keyHooks:{}),i=r.props?this.props.concat(r.props):this.props,e=new Q.Event(o),t=i.length;t--;)n=i[t],e[n]=o[n];return e.target||(e.target=K),3===e.target.nodeType&&(e.target=e.target.parentNode),r.filter?r.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==u()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===u()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Q.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return Q.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var s=Q.extend(new Q.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?Q.event.trigger(s,null,t):Q.event.dispatch.call(t,s),s.isDefaultPrevented()&&n.preventDefault()}},Q.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},Q.Event=function(e,t){return this instanceof Q.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?c:d):this.type=e,t&&Q.extend(this,t),this.timeStamp=e&&e.timeStamp||Q.now(),void(this[Q.expando]=!0)):new Q.Event(e,t)},Q.Event.prototype={isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=c,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=c,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=c,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},Q.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){Q.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,s=e.relatedTarget,o=e.handleObj;return(!s||s!==i&&!Q.contains(i,s))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),X.focusinBubbles||Q.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){Q.event.simulate(t,e.target,Q.event.fix(e),!0)};Q.event.special[t]={setup:function(){var i=this.ownerDocument||this,s=gt.access(i,t);s||i.addEventListener(e,n,!0),gt.access(i,t,(s||0)+1)},teardown:function(){var i=this.ownerDocument||this,s=gt.access(i,t)-1;s?gt.access(i,t,s):(i.removeEventListener(e,n,!0),gt.remove(i,t))}}}),Q.fn.extend({on:function(e,t,n,i,s){var o,r;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(r in e)this.on(r,t,n,e[r],s);return this}if(null==n&&null==i?(i=t,n=t=void 0):null==i&&("string"==typeof t?(i=n,n=void 0):(i=n,n=t,t=void 0)),i===!1)i=d;else if(!i)return this;return 1===s&&(o=i,i=function(e){return Q().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=Q.guid++)),this.each(function(){Q.event.add(this,e,i,n,t)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,t,n){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,Q(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(s in e)this.off(s,t,e[s]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=d),this.each(function(){Q.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){Q.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?Q.event.trigger(e,t,n,!0):void 0}});var At=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Nt=/<([\w:]+)/,Ft=/<|&#?\w+;/,Ot=/<(?:script|style|link)/i,jt=/checked\s*(?:[^=]|=\s*.checked.)/i,It=/^$|\/(?:java|ecma)script/i,Pt=/^true\/(.*)/,Vt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Rt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Rt.optgroup=Rt.option,Rt.tbody=Rt.tfoot=Rt.colgroup=Rt.caption=Rt.thead,Rt.th=Rt.td,Q.extend({clone:function(e,t,n){var i,s,o,r,a=e.cloneNode(!0),l=Q.contains(e.ownerDocument,e);if(!(X.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Q.isXMLDoc(e)))for(r=g(a),o=g(e),i=0,s=o.length;s>i;i++)y(o[i],r[i]);if(t)if(n)for(o=o||g(e),r=r||g(a),i=0,s=o.length;s>i;i++)v(o[i],r[i]);else v(e,a);return r=g(a,"script"),r.length>0&&m(r,!l&&g(e,"script")),a},buildFragment:function(e,t,n,i){for(var s,o,r,a,l,c,d=t.createDocumentFragment(),u=[],h=0,p=e.length;p>h;h++)if(s=e[h],s||0===s)if("object"===Q.type(s))Q.merge(u,s.nodeType?[s]:s);else if(Ft.test(s)){for(o=o||d.appendChild(t.createElement("div")),r=(Nt.exec(s)||["",""])[1].toLowerCase(),a=Rt[r]||Rt._default,o.innerHTML=a[1]+s.replace(At,"<$1></$2>")+a[2],c=a[0];c--;)o=o.lastChild;Q.merge(u,o.childNodes),o=d.firstChild,o.textContent=""}else u.push(t.createTextNode(s));for(d.textContent="",h=0;s=u[h++];)if((!i||-1===Q.inArray(s,i))&&(l=Q.contains(s.ownerDocument,s),o=g(d.appendChild(s),"script"),l&&m(o),n))for(c=0;s=o[c++];)It.test(s.type||"")&&n.push(s);return d},cleanData:function(e){for(var t,n,i,s,o=Q.event.special,r=0;void 0!==(n=e[r]);r++){if(Q.acceptData(n)&&(s=n[gt.expando],s&&(t=gt.cache[s]))){if(t.events)for(i in t.events)o[i]?Q.event.remove(n,i):Q.removeEvent(n,i,t.handle);gt.cache[s]&&delete gt.cache[s]}delete yt.cache[n[yt.expando]]}}}),Q.fn.extend({text:function(e){return vt(this,function(e){return void 0===e?Q.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=h(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=h(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?Q.filter(e,this):this,s=0;null!=(n=i[s]);s++)t||1!==n.nodeType||Q.cleanData(g(n)),n.parentNode&&(t&&Q.contains(n.ownerDocument,n)&&m(g(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Q.cleanData(g(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return Q.clone(this,e,t)})},html:function(e){return vt(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ot.test(e)&&!Rt[(Nt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(At,"<$1></$2>");try{for(;i>n;n++)t=this[n]||{},1===t.nodeType&&(Q.cleanData(g(t,!1)),t.innerHTML=e);t=0}catch(s){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,Q.cleanData(g(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=U.apply([],e);var n,i,s,o,r,a,l=0,c=this.length,d=this,u=c-1,h=e[0],m=Q.isFunction(h);if(m||c>1&&"string"==typeof h&&!X.checkClone&&jt.test(h))return this.each(function(n){var i=d.eq(n);m&&(e[0]=h.call(this,n,i.html())),i.domManip(e,t)});if(c&&(n=Q.buildFragment(e,this[0].ownerDocument,!1,this),i=n.firstChild,1===n.childNodes.length&&(n=i),i)){for(s=Q.map(g(n,"script"),p),o=s.length;c>l;l++)r=n,l!==u&&(r=Q.clone(r,!0,!0),o&&Q.merge(s,g(r,"script"))),t.call(this[l],r,l);if(o)for(a=s[s.length-1].ownerDocument,Q.map(s,f),l=0;o>l;l++)r=s[l],It.test(r.type||"")&&!gt.access(r,"globalEval")&&Q.contains(a,r)&&(r.src?Q._evalUrl&&Q._evalUrl(r.src):Q.globalEval(r.textContent.replace(Vt,"")))}return this}}),Q.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Q.fn[e]=function(e){for(var n,i=[],s=Q(e),o=s.length-1,r=0;o>=r;r++)n=r===o?this:this.clone(!0),Q(s[r])[t](n),z.apply(i,n.get());return this.pushStack(i)}});var Bt,Lt={},Ht=/^margin/,qt=new RegExp("^("+xt+")(?!px)[a-z%]+$","i"),Wt=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)};!function(){function t(){r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",r.innerHTML="",s.appendChild(o);var t=e.getComputedStyle(r,null);n="1%"!==t.top,i="4px"===t.width,s.removeChild(o)}var n,i,s=K.documentElement,o=K.createElement("div"),r=K.createElement("div");r.style&&(r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",X.clearCloneStyle="content-box"===r.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(r),e.getComputedStyle&&Q.extend(X,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==i&&t(),i},reliableMarginRight:function(){var t,n=r.appendChild(K.createElement("div"));return n.style.cssText=r.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",r.style.width="1px",s.appendChild(o),t=!parseFloat(e.getComputedStyle(n,null).marginRight),s.removeChild(o),t}}))}(),Q.swap=function(e,t,n,i){var s,o,r={};for(o in t)r[o]=e.style[o],e.style[o]=t[o];s=n.apply(e,i||[]);for(o in t)e.style[o]=r[o];return s};var Ut=/^(none|table(?!-c[ea]).+)/,zt=new RegExp("^("+xt+")(.*)$","i"),$t=new RegExp("^([+-])=("+xt+")","i"),Yt={position:"absolute",visibility:"hidden",display:"block"},Gt={letterSpacing:"0",fontWeight:"400"},Jt=["Webkit","O","Moz","ms"];Q.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=x(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,o,r,a=Q.camelCase(t),l=e.style;return t=Q.cssProps[a]||(Q.cssProps[a]=T(l,a)),r=Q.cssHooks[t]||Q.cssHooks[a],void 0===n?r&&"get"in r&&void 0!==(s=r.get(e,!1,i))?s:l[t]:(o=typeof n,"string"===o&&(s=$t.exec(n))&&(n=(s[1]+1)*s[2]+parseFloat(Q.css(e,t)),o="number"),null!=n&&n===n&&("number"!==o||Q.cssNumber[a]||(n+="px"),X.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),r&&"set"in r&&void 0===(n=r.set(e,n,i))||(l[t]=n)),void 0)}},css:function(e,t,n,i){var s,o,r,a=Q.camelCase(t);return t=Q.cssProps[a]||(Q.cssProps[a]=T(e.style,a)),r=Q.cssHooks[t]||Q.cssHooks[a],r&&"get"in r&&(s=r.get(e,!0,n)),void 0===s&&(s=x(e,t,i)),"normal"===s&&t in Gt&&(s=Gt[t]),""===n||n?(o=parseFloat(s),n===!0||Q.isNumeric(o)?o||0:s):s}}),Q.each(["height","width"],function(e,t){Q.cssHooks[t]={get:function(e,n,i){return n?Ut.test(Q.css(e,"display"))&&0===e.offsetWidth?Q.swap(e,Yt,function(){return _(e,t,i)}):_(e,t,i):void 0},set:function(e,n,i){var s=i&&Wt(e);return k(e,n,i?S(e,t,i,"border-box"===Q.css(e,"boxSizing",!1,s),s):0)}}}),Q.cssHooks.marginRight=C(X.reliableMarginRight,function(e,t){return t?Q.swap(e,{display:"inline-block"},x,[e,"marginRight"]):void 0}),Q.each({margin:"",padding:"",border:"Width"},function(e,t){Q.cssHooks[e+t]={expand:function(n){for(var i=0,s={},o="string"==typeof n?n.split(" "):[n];4>i;i++)s[e+Ct[i]+t]=o[i]||o[i-2]||o[0];return s}},Ht.test(e)||(Q.cssHooks[e+t].set=k)}),Q.fn.extend({css:function(e,t){return vt(this,function(e,t,n){var i,s,o={},r=0;if(Q.isArray(t)){for(i=Wt(e),s=t.length;s>r;r++)o[t[r]]=Q.css(e,t[r],!1,i);return o}return void 0!==n?Q.style(e,t,n):Q.css(e,t)},e,t,arguments.length>1)},show:function(){return D(this,!0)},hide:function(){return D(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Tt(this)?Q(this).show():Q(this).hide()})}}),Q.Tween=E,E.prototype={constructor:E,init:function(e,t,n,i,s,o){this.elem=e,this.prop=n,this.easing=s||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(Q.cssNumber[n]?"":"px")},cur:function(){var e=E.propHooks[this.prop];return e&&e.get?e.get(this):E.propHooks._default.get(this)},run:function(e){var t,n=E.propHooks[this.prop];return this.pos=t=this.options.duration?Q.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):E.propHooks._default.set(this),this}},E.prototype.init.prototype=E.prototype,E.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=Q.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){Q.fx.step[e.prop]?Q.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Q.cssProps[e.prop]]||Q.cssHooks[e.prop])?Q.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},E.propHooks.scrollTop=E.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Q.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Q.fx=E.prototype.init,Q.fx.step={};var Xt,Kt,Zt=/^(?:toggle|show|hide)$/,Qt=new RegExp("^(?:([+-])=|)("+xt+")([a-z%]*)$","i"),en=/queueHooks$/,tn=[F],nn={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),s=Qt.exec(t),o=s&&s[3]||(Q.cssNumber[e]?"":"px"),r=(Q.cssNumber[e]||"px"!==o&&+i)&&Qt.exec(Q.css(n.elem,e)),a=1,l=20;if(r&&r[3]!==o){o=o||r[3],s=s||[],r=+i||1;do a=a||".5",r/=a,Q.style(n.elem,e,r+o);while(a!==(a=n.cur()/i)&&1!==a&&--l)}return s&&(r=n.start=+r||+i||0,n.unit=o,n.end=s[1]?r+(s[1]+1)*s[2]:+s[2]),n}]};Q.Animation=Q.extend(j,{tweener:function(e,t){Q.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,s=e.length;s>i;i++)n=e[i],nn[n]=nn[n]||[],nn[n].unshift(t)},prefilter:function(e,t){t?tn.unshift(e):tn.push(e)}}),Q.speed=function(e,t,n){var i=e&&"object"==typeof e?Q.extend({},e):{complete:n||!n&&t||Q.isFunction(e)&&e,duration:e,easing:n&&t||t&&!Q.isFunction(t)&&t};return i.duration=Q.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in Q.fx.speeds?Q.fx.speeds[i.duration]:Q.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){Q.isFunction(i.old)&&i.old.call(this),i.queue&&Q.dequeue(this,i.queue)},i},Q.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Tt).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var s=Q.isEmptyObject(e),o=Q.speed(t,n,i),r=function(){var t=j(this,Q.extend({},e),o);(s||gt.get(this,"finish"))&&t.stop(!0)};return r.finish=r,s||o.queue===!1?this.each(r):this.queue(o.queue,r)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,s=null!=e&&e+"queueHooks",o=Q.timers,r=gt.get(this);if(s)r[s]&&r[s].stop&&i(r[s]);else for(s in r)r[s]&&r[s].stop&&en.test(s)&&i(r[s]);for(s=o.length;s--;)o[s].elem!==this||null!=e&&o[s].queue!==e||(o[s].anim.stop(n),t=!1,o.splice(s,1));(t||!n)&&Q.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=gt.get(this),i=n[e+"queue"],s=n[e+"queueHooks"],o=Q.timers,r=i?i.length:0;for(n.finish=!0,Q.queue(this,e,[]),s&&s.stop&&s.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;r>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),Q.each(["toggle","show","hide"],function(e,t){var n=Q.fn[t];Q.fn[t]=function(e,i,s){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(A(t,!0),e,i,s)}}),Q.each({slideDown:A("show"),slideUp:A("hide"),slideToggle:A("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Q.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),Q.timers=[],Q.fx.tick=function(){var e,t=0,n=Q.timers;for(Xt=Q.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||Q.fx.stop(),Xt=void 0},Q.fx.timer=function(e){Q.timers.push(e),e()?Q.fx.start():Q.timers.pop()},Q.fx.interval=13,Q.fx.start=function(){Kt||(Kt=setInterval(Q.fx.tick,Q.fx.interval))},Q.fx.stop=function(){clearInterval(Kt),Kt=null},Q.fx.speeds={slow:600,fast:200,_default:400},Q.fn.delay=function(e,t){return e=Q.fx?Q.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},function(){var e=K.createElement("input"),t=K.createElement("select"),n=t.appendChild(K.createElement("option"));e.type="checkbox",X.checkOn=""!==e.value,X.optSelected=n.selected,t.disabled=!0,X.optDisabled=!n.disabled,e=K.createElement("input"),e.value="t",e.type="radio",X.radioValue="t"===e.value}();var sn,on,rn=Q.expr.attrHandle;Q.fn.extend({attr:function(e,t){return vt(this,Q.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Q.removeAttr(this,e)})}}),Q.extend({attr:function(e,t,n){var i,s,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===St?Q.prop(e,t,n):(1===o&&Q.isXMLDoc(e)||(t=t.toLowerCase(),i=Q.attrHooks[t]||(Q.expr.match.bool.test(t)?on:sn)),void 0===n?i&&"get"in i&&null!==(s=i.get(e,t))?s:(s=Q.find.attr(e,t),null==s?void 0:s):null!==n?i&&"set"in i&&void 0!==(s=i.set(e,n,t))?s:(e.setAttribute(t,n+""),n):void Q.removeAttr(e,t))},removeAttr:function(e,t){var n,i,s=0,o=t&&t.match(pt);if(o&&1===e.nodeType)for(;n=o[s++];)i=Q.propFix[n]||n,Q.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!X.radioValue&&"radio"===t&&Q.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),on={set:function(e,t,n){return t===!1?Q.removeAttr(e,n):e.setAttribute(n,n),n}},Q.each(Q.expr.match.bool.source.match(/\w+/g),function(e,t){var n=rn[t]||Q.find.attr;rn[t]=function(e,t,i){var s,o;return i||(o=rn[t],rn[t]=s,s=null!=n(e,t,i)?t.toLowerCase():null,rn[t]=o),s}});var an=/^(?:input|select|textarea|button)$/i;Q.fn.extend({prop:function(e,t){return vt(this,Q.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[Q.propFix[e]||e]})}}),Q.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var i,s,o,r=e.nodeType;if(e&&3!==r&&8!==r&&2!==r)return o=1!==r||!Q.isXMLDoc(e),o&&(t=Q.propFix[t]||t,s=Q.propHooks[t]),void 0!==n?s&&"set"in s&&void 0!==(i=s.set(e,n,t))?i:e[t]=n:s&&"get"in s&&null!==(i=s.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||an.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),X.optSelected||(Q.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),Q.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Q.propFix[this.toLowerCase()]=this});var ln=/[\t\r\n\f]/g;Q.fn.extend({addClass:function(e){var t,n,i,s,o,r,a="string"==typeof e&&e,l=0,c=this.length;if(Q.isFunction(e))return this.each(function(t){Q(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(pt)||[];c>l;l++)if(n=this[l],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(ln," "):" ")){for(o=0;s=t[o++];)i.indexOf(" "+s+" ")<0&&(i+=s+" ");r=Q.trim(i),n.className!==r&&(n.className=r)}return this},removeClass:function(e){var t,n,i,s,o,r,a=0===arguments.length||"string"==typeof e&&e,l=0,c=this.length;if(Q.isFunction(e))return this.each(function(t){Q(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(pt)||[];c>l;l++)if(n=this[l],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(ln," "):"")){for(o=0;s=t[o++];)for(;i.indexOf(" "+s+" ")>=0;)i=i.replace(" "+s+" "," ");r=e?Q.trim(i):"",n.className!==r&&(n.className=r)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(Q.isFunction(e)?function(n){Q(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,i=0,s=Q(this),o=e.match(pt)||[];t=o[i++];)s.hasClass(t)?s.removeClass(t):s.addClass(t);else(n===St||"boolean"===n)&&(this.className&&gt.set(this,"__className__",this.className),this.className=this.className||e===!1?"":gt.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(ln," ").indexOf(t)>=0)return!0;return!1}});var cn=/\r/g;Q.fn.extend({val:function(e){var t,n,i,s=this[0];{if(arguments.length)return i=Q.isFunction(e),this.each(function(n){var s;1===this.nodeType&&(s=i?e.call(this,n,Q(this).val()):e,null==s?s="":"number"==typeof s?s+="":Q.isArray(s)&&(s=Q.map(s,function(e){return null==e?"":e+""})),t=Q.valHooks[this.type]||Q.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,s,"value")||(this.value=s))});if(s)return t=Q.valHooks[s.type]||Q.valHooks[s.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(s,"value"))?n:(n=s.value,"string"==typeof n?n.replace(cn,""):null==n?"":n)}}}),Q.extend({valHooks:{option:{get:function(e){var t=Q.find.attr(e,"value");return null!=t?t:Q.trim(Q.text(e))}},select:{get:function(e){for(var t,n,i=e.options,s=e.selectedIndex,o="select-one"===e.type||0>s,r=o?null:[],a=o?s+1:i.length,l=0>s?a:o?s:0;a>l;l++)if(n=i[l],!(!n.selected&&l!==s||(X.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&Q.nodeName(n.parentNode,"optgroup"))){if(t=Q(n).val(),o)return t;r.push(t)}return r},set:function(e,t){for(var n,i,s=e.options,o=Q.makeArray(t),r=s.length;r--;)i=s[r],(i.selected=Q.inArray(i.value,o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),Q.each(["radio","checkbox"],function(){Q.valHooks[this]={set:function(e,t){return Q.isArray(t)?e.checked=Q.inArray(Q(e).val(),t)>=0:void 0}},X.checkOn||(Q.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),Q.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Q.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),Q.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var dn=Q.now(),un=/\?/;Q.parseJSON=function(e){return JSON.parse(e+"")},Q.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(i){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&Q.error("Invalid XML: "+e),t};var hn,pn,fn=/#.*$/,mn=/([?&])_=[^&]*/,vn=/^(.*?):[ \t]*([^\r\n]*)$/gm,gn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,yn=/^(?:GET|HEAD)$/,bn=/^\/\//,wn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,xn={},Cn={},Tn="*/".concat("*");try{pn=location.href}catch(kn){pn=K.createElement("a"),pn.href="",pn=pn.href}hn=wn.exec(pn.toLowerCase())||[],Q.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:pn,type:"GET",isLocal:gn.test(hn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Tn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Q.parseJSON,"text xml":Q.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?V(V(e,Q.ajaxSettings),t):V(Q.ajaxSettings,e)},ajaxPrefilter:I(xn),ajaxTransport:I(Cn),ajax:function(e,t){function n(e,t,n,r){var l,d,g,y,w,C=t;2!==b&&(b=2,a&&clearTimeout(a),i=void 0,o=r||"",x.readyState=e>0?4:0,l=e>=200&&300>e||304===e,n&&(y=R(u,x,n)),y=B(u,y,x,l),l?(u.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(Q.lastModified[s]=w),w=x.getResponseHeader("etag"),w&&(Q.etag[s]=w)),204===e||"HEAD"===u.type?C="nocontent":304===e?C="notmodified":(C=y.state,d=y.data,g=y.error,l=!g)):(g=C,(e||!C)&&(C="error",0>e&&(e=0))),x.status=e,x.statusText=(t||C)+"",l?f.resolveWith(h,[d,C,x]):f.rejectWith(h,[x,C,g]),x.statusCode(v),v=void 0,c&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,u,l?d:g]),m.fireWith(h,[x,C]),c&&(p.trigger("ajaxComplete",[x,u]),--Q.active||Q.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,s,o,r,a,l,c,d,u=Q.ajaxSetup({},t),h=u.context||u,p=u.context&&(h.nodeType||h.jquery)?Q(h):Q.event,f=Q.Deferred(),m=Q.Callbacks("once memory"),v=u.statusCode||{},g={},y={},b=0,w="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!r)for(r={};t=vn.exec(o);)r[t[1].toLowerCase()]=t[2];
t=r[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return b||(u.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)v[t]=[v[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||w;return i&&i.abort(t),n(0,t),this}};if(f.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,u.url=((e||u.url||pn)+"").replace(fn,"").replace(bn,hn[1]+"//"),u.type=t.method||t.type||u.method||u.type,u.dataTypes=Q.trim(u.dataType||"*").toLowerCase().match(pt)||[""],null==u.crossDomain&&(l=wn.exec(u.url.toLowerCase()),u.crossDomain=!(!l||l[1]===hn[1]&&l[2]===hn[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(hn[3]||("http:"===hn[1]?"80":"443")))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=Q.param(u.data,u.traditional)),P(xn,u,t,x),2===b)return x;c=u.global,c&&0===Q.active++&&Q.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!yn.test(u.type),s=u.url,u.hasContent||(u.data&&(s=u.url+=(un.test(s)?"&":"?")+u.data,delete u.data),u.cache===!1&&(u.url=mn.test(s)?s.replace(mn,"$1_="+dn++):s+(un.test(s)?"&":"?")+"_="+dn++)),u.ifModified&&(Q.lastModified[s]&&x.setRequestHeader("If-Modified-Since",Q.lastModified[s]),Q.etag[s]&&x.setRequestHeader("If-None-Match",Q.etag[s])),(u.data&&u.hasContent&&u.contentType!==!1||t.contentType)&&x.setRequestHeader("Content-Type",u.contentType),x.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+Tn+"; q=0.01":""):u.accepts["*"]);for(d in u.headers)x.setRequestHeader(d,u.headers[d]);if(u.beforeSend&&(u.beforeSend.call(h,x,u)===!1||2===b))return x.abort();w="abort";for(d in{success:1,error:1,complete:1})x[d](u[d]);if(i=P(Cn,u,t,x)){x.readyState=1,c&&p.trigger("ajaxSend",[x,u]),u.async&&u.timeout>0&&(a=setTimeout(function(){x.abort("timeout")},u.timeout));try{b=1,i.send(g,n)}catch(C){if(!(2>b))throw C;n(-1,C)}}else n(-1,"No Transport");return x},getJSON:function(e,t,n){return Q.get(e,t,n,"json")},getScript:function(e,t){return Q.get(e,void 0,t,"script")}}),Q.each(["get","post"],function(e,t){Q[t]=function(e,n,i,s){return Q.isFunction(n)&&(s=s||i,i=n,n=void 0),Q.ajax({url:e,type:t,dataType:s,data:n,success:i})}}),Q.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Q.fn[t]=function(e){return this.on(t,e)}}),Q._evalUrl=function(e){return Q.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},Q.fn.extend({wrapAll:function(e){var t;return Q.isFunction(e)?this.each(function(t){Q(this).wrapAll(e.call(this,t))}):(this[0]&&(t=Q(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(Q.isFunction(e)?function(t){Q(this).wrapInner(e.call(this,t))}:function(){var t=Q(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=Q.isFunction(e);return this.each(function(n){Q(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){Q.nodeName(this,"body")||Q(this).replaceWith(this.childNodes)}).end()}}),Q.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},Q.expr.filters.visible=function(e){return!Q.expr.filters.hidden(e)};var Sn=/%20/g,_n=/\[\]$/,Dn=/\r?\n/g,En=/^(?:submit|button|image|reset|file)$/i,Mn=/^(?:input|select|textarea|keygen)/i;Q.param=function(e,t){var n,i=[],s=function(e,t){t=Q.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=Q.ajaxSettings&&Q.ajaxSettings.traditional),Q.isArray(e)||e.jquery&&!Q.isPlainObject(e))Q.each(e,function(){s(this.name,this.value)});else for(n in e)L(n,e[n],t,s);return i.join("&").replace(Sn,"+")},Q.fn.extend({serialize:function(){return Q.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Q.prop(this,"elements");return e?Q.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Q(this).is(":disabled")&&Mn.test(this.nodeName)&&!En.test(e)&&(this.checked||!kt.test(e))}).map(function(e,t){var n=Q(this).val();return null==n?null:Q.isArray(n)?Q.map(n,function(e){return{name:t.name,value:e.replace(Dn,"\r\n")}}):{name:t.name,value:n.replace(Dn,"\r\n")}}).get()}}),Q.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var An=0,Nn={},Fn={0:200,1223:204},On=Q.ajaxSettings.xhr();e.ActiveXObject&&Q(e).on("unload",function(){for(var e in Nn)Nn[e]()}),X.cors=!!On&&"withCredentials"in On,X.ajax=On=!!On,Q.ajaxTransport(function(e){var t;return X.cors||On&&!e.crossDomain?{send:function(n,i){var s,o=e.xhr(),r=++An;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)o[s]=e.xhrFields[s];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(s in n)o.setRequestHeader(s,n[s]);t=function(e){return function(){t&&(delete Nn[r],t=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?i(o.status,o.statusText):i(Fn[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=t(),o.onerror=t("error"),t=Nn[r]=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(a){if(t)throw a}},abort:function(){t&&t()}}:void 0}),Q.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return Q.globalEval(e),e}}}),Q.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Q.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,s){t=Q("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&s("error"===e.type?404:200,e.type)}),K.head.appendChild(t[0])},abort:function(){n&&n()}}}});var jn=[],In=/(=)\?(?=&|$)|\?\?/;Q.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=jn.pop()||Q.expando+"_"+dn++;return this[e]=!0,e}}),Q.ajaxPrefilter("json jsonp",function(t,n,i){var s,o,r,a=t.jsonp!==!1&&(In.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&In.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(s=t.jsonpCallback=Q.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(In,"$1"+s):t.jsonp!==!1&&(t.url+=(un.test(t.url)?"&":"?")+t.jsonp+"="+s),t.converters["script json"]=function(){return r||Q.error(s+" was not called"),r[0]},t.dataTypes[0]="json",o=e[s],e[s]=function(){r=arguments},i.always(function(){e[s]=o,t[s]&&(t.jsonpCallback=n.jsonpCallback,jn.push(s)),r&&Q.isFunction(o)&&o(r[0]),r=o=void 0}),"script"):void 0}),Q.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||K;var i=rt.exec(e),s=!n&&[];return i?[t.createElement(i[1])]:(i=Q.buildFragment([e],t,s),s&&s.length&&Q(s).remove(),Q.merge([],i.childNodes))};var Pn=Q.fn.load;Q.fn.load=function(e,t,n){if("string"!=typeof e&&Pn)return Pn.apply(this,arguments);var i,s,o,r=this,a=e.indexOf(" ");return a>=0&&(i=Q.trim(e.slice(a)),e=e.slice(0,a)),Q.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(s="POST"),r.length>0&&Q.ajax({url:e,type:s,dataType:"html",data:t}).done(function(e){o=arguments,r.html(i?Q("<div>").append(Q.parseHTML(e)).find(i):e)}).complete(n&&function(e,t){r.each(n,o||[e.responseText,t,e])}),this},Q.expr.filters.animated=function(e){return Q.grep(Q.timers,function(t){return e===t.elem}).length};var Vn=e.document.documentElement;Q.offset={setOffset:function(e,t,n){var i,s,o,r,a,l,c,d=Q.css(e,"position"),u=Q(e),h={};"static"===d&&(e.style.position="relative"),a=u.offset(),o=Q.css(e,"top"),l=Q.css(e,"left"),c=("absolute"===d||"fixed"===d)&&(o+l).indexOf("auto")>-1,c?(i=u.position(),r=i.top,s=i.left):(r=parseFloat(o)||0,s=parseFloat(l)||0),Q.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(h.top=t.top-a.top+r),null!=t.left&&(h.left=t.left-a.left+s),"using"in t?t.using.call(e,h):u.css(h)}},Q.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){Q.offset.setOffset(this,e,t)});var t,n,i=this[0],s={top:0,left:0},o=i&&i.ownerDocument;if(o)return t=o.documentElement,Q.contains(t,i)?(typeof i.getBoundingClientRect!==St&&(s=i.getBoundingClientRect()),n=H(o),{top:s.top+n.pageYOffset-t.clientTop,left:s.left+n.pageXOffset-t.clientLeft}):s},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===Q.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),Q.nodeName(e[0],"html")||(i=e.offset()),i.top+=Q.css(e[0],"borderTopWidth",!0),i.left+=Q.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-Q.css(n,"marginTop",!0),left:t.left-i.left-Q.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Vn;e&&!Q.nodeName(e,"html")&&"static"===Q.css(e,"position");)e=e.offsetParent;return e||Vn})}}),Q.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var i="pageYOffset"===n;Q.fn[t]=function(s){return vt(this,function(t,s,o){var r=H(t);return void 0===o?r?r[n]:t[s]:void(r?r.scrollTo(i?e.pageXOffset:o,i?o:e.pageYOffset):t[s]=o)},t,s,arguments.length,null)}}),Q.each(["top","left"],function(e,t){Q.cssHooks[t]=C(X.pixelPosition,function(e,n){return n?(n=x(e,t),qt.test(n)?Q(e).position()[t]+"px":n):void 0})}),Q.each({Height:"height",Width:"width"},function(e,t){Q.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){Q.fn[i]=function(i,s){var o=arguments.length&&(n||"boolean"!=typeof i),r=n||(i===!0||s===!0?"margin":"border");return vt(this,function(t,n,i){var s;return Q.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===i?Q.css(t,n,r):Q.style(t,n,i,r)},t,o?i:void 0,o,null)}})}),Q.fn.size=function(){return this.length},Q.fn.andSelf=Q.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Q});var Rn=e.jQuery,Bn=e.$;return Q.noConflict=function(t){return e.$===Q&&(e.$=Bn),t&&e.jQuery===Q&&(e.jQuery=Rn),Q},typeof t===St&&(e.jQuery=e.$=Q),Q}),function(e,t){"undefined"!=typeof exports?t(e,exports,require("underscore")):"function"==typeof define&&define.amd?define("backbone",["underscore","jquery","exports"],function(n,i,s){e.Backbone=t(e,s,n,i)}):e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,i){{var s=e.Backbone,o=[],r=(o.push,o.slice);o.splice}t.VERSION="1.1.0",t.$=i,t.noConflict=function(){return e.Backbone=s,this},t.emulateHTTP=!1,t.emulateJSON=!1;var a=t.Events={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,i){if(!c(this,"once",e,[t,i])||!t)return this;var s=this,o=n.once(function(){s.off(e,o),t.apply(this,arguments)});return o._callback=t,this.on(e,o,i)},off:function(e,t,i){var s,o,r,a,l,d,u,h;if(!this._events||!c(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events={},this;for(a=e?[e]:n.keys(this._events),l=0,d=a.length;d>l;l++)if(e=a[l],r=this._events[e]){if(this._events[e]=s=[],t||i)for(u=0,h=r.length;h>u;u++)o=r[u],(t&&t!==o.callback&&t!==o.callback._callback||i&&i!==o.context)&&s.push(o);s.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=r.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&d(n,t),i&&d(i,arguments),this},stopListening:function(e,t,i){var s=this._listeningTo;if(!s)return this;var o=!t&&!i;i||"object"!=typeof t||(i=this),e&&((s={})[e._listenId]=e);for(var r in s)e=s[r],e.off(t,i,this),(o||n.isEmpty(e._events))&&delete this._listeningTo[r];return this}},l=/\s+/,c=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var s in n)e[t].apply(e,[s,n[s]].concat(i));return!1}if(l.test(n)){for(var o=n.split(l),r=0,a=o.length;a>r;r++)e[t].apply(e,[o[r]].concat(i));return!1}return!0},d=function(e,t){var n,i=-1,s=e.length,o=t[0],r=t[1],a=t[2];switch(t.length){case 0:for(;++i<s;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<s;)(n=e[i]).callback.call(n.ctx,o);return;case 2:for(;++i<s;)(n=e[i]).callback.call(n.ctx,o,r);return;case 3:for(;++i<s;)(n=e[i]).callback.call(n.ctx,o,r,a);return;default:for(;++i<s;)(n=e[i]).callback.apply(n.ctx,t)}},u={listenTo:"on",listenToOnce:"once"};n.each(u,function(e,t){a[t]=function(t,i,s){var o=this._listeningTo||(this._listeningTo={}),r=t._listenId||(t._listenId=n.uniqueId("l"));return o[r]=t,s||"object"!=typeof i||(s=this),t[e](i,s,this),this}}),a.bind=a.on,a.unbind=a.off,n.extend(t,a);var h=t.Model=function(e,t){var i=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(h.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,i){var s,o,r,a,l,c,d,u;if(null==e)return this;if("object"==typeof e?(o=e,i=t):(o={})[e]=t,i||(i={}),!this._validate(o,i))return!1;r=i.unset,l=i.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=n.clone(this.attributes),this.changed={}),u=this.attributes,d=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(s in o)t=o[s],n.isEqual(u[s],t)||a.push(s),n.isEqual(d[s],t)?delete this.changed[s]:this.changed[s]=t,r?delete u[s]:u[s]=t;if(!l){a.length&&(this._pending=!0);for(var h=0,p=a.length;p>h;h++)this.trigger("change:"+a[h],this,u[a[h]],i)}if(c)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,i=!1,s=this._changing?this._previousAttributes:this.attributes;for(var o in e)n.isEqual(s[o],t=e[o])||((i||(i={}))[o]=t);return i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,i=e.success;return e.success=function(n){return t.set(t.parse(n,e),e)?(i&&i(t,n,e),void t.trigger("sync",t,n,e)):!1},V(this,e),this.sync("read",this,e)},save:function(e,t,i){var s,o,r,a=this.attributes;if(null==e||"object"==typeof e?(s=e,i=t):(s={})[e]=t,i=n.extend({validate:!0},i),s&&!i.wait){if(!this.set(s,i))return!1}else if(!this._validate(s,i))return!1;s&&i.wait&&(this.attributes=n.extend({},a,s)),void 0===i.parse&&(i.parse=!0);var l=this,c=i.success;return i.success=function(e){l.attributes=a;var t=l.parse(e,i);return i.wait&&(t=n.extend(s||{},t)),n.isObject(t)&&!l.set(t,i)?!1:(c&&c(l,e,i),void l.trigger("sync",l,e,i))},V(this,i),o=this.isNew()?"create":i.patch?"patch":"update","patch"===o&&(i.attrs=s),r=this.sync(o,this,i),s&&i.wait&&(this.attributes=a),r},destroy:function(e){e=e?n.clone(e):{};var t=this,i=e.success,s=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(n){(e.wait||t.isNew())&&s(),i&&i(t,n,e),t.isNew()||t.trigger("sync",t,n,e)},this.isNew())return e.success(),!1;V(this,e);var o=this.sync("delete",this,e);return e.wait||s(),o},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||P();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return i?(this.trigger("invalid",this,i,n.extend(t,{validationError:i})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];n.each(p,function(e){h.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var f=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},m={add:!0,remove:!0,merge:!0},v={add:!0,remove:!1};n.extend(f.prototype,a,{model:h,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,v))},remove:function(e,t){var i=!n.isArray(e);e=i?[e]:n.clone(e),t||(t={});var s,o,r,a;for(s=0,o=e.length;o>s;s++)a=e[s]=this.get(e[s]),a&&(delete this._byId[a.id],delete this._byId[a.cid],r=this.indexOf(a),this.models.splice(r,1),this.length--,t.silent||(t.index=r,a.trigger("remove",a,this,t)),this._removeReference(a));return i?e[0]:e},set:function(e,t){t=n.defaults({},t,m),t.parse&&(e=this.parse(e,t));var i=!n.isArray(e);e=i?e?[e]:[]:n.clone(e);var s,o,r,a,l,c,d,u=t.at,p=this.model,f=this.comparator&&null==u&&t.sort!==!1,v=n.isString(this.comparator)?this.comparator:null,g=[],y=[],b={},w=t.add,x=t.merge,C=t.remove,T=!f&&w&&C?[]:!1;for(s=0,o=e.length;o>s;s++){if(l=e[s],r=l instanceof h?a=l:l[p.prototype.idAttribute],c=this.get(r))C&&(b[c.cid]=!0),x&&(l=l===a?a.attributes:l,t.parse&&(l=c.parse(l,t)),c.set(l,t),f&&!d&&c.hasChanged(v)&&(d=!0)),e[s]=c;else if(w){if(a=e[s]=this._prepareModel(l,t),!a)continue;g.push(a),a.on("all",this._onModelEvent,this),this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a)}T&&T.push(c||a)}if(C){for(s=0,o=this.length;o>s;++s)b[(a=this.models[s]).cid]||y.push(a);y.length&&this.remove(y,t)}if(g.length||T&&T.length)if(f&&(d=!0),this.length+=g.length,null!=u)for(s=0,o=g.length;o>s;s++)this.models.splice(u+s,0,g[s]);else{T&&(this.models.length=0);var k=T||g;for(s=0,o=k.length;o>s;s++)this.models.push(k[s])}if(d&&this.sort({silent:!0}),!t.silent){for(s=0,o=g.length;o>s;s++)(a=g[s]).trigger("add",a,this,t);(d||T&&T.length)&&this.trigger("sort",this,t)}return i?e[0]:e},reset:function(e,t){t||(t={});for(var i=0,s=this.models.length;s>i;i++)this._removeReference(this.models[i]);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return r.apply(this.models,arguments)},get:function(e){return null==e?void 0:this._byId[e.id]||this._byId[e.cid]||this._byId[e]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,i=this;return e.success=function(n){var s=e.reset?"reset":"set";i[s](n,e),t&&t(i,n,e),i.trigger("sync",i,n,e)},V(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?n.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var i=this,s=t.success;return t.success=function(e,t,n){n.wait&&i.add(e,n),s&&s(e,t,n)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof h)return e.collection||(e.collection=this),e;t=t?n.clone(t):{},t.collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var g=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];n.each(g,function(e){f.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var y=["groupBy","countBy","sortBy"];n.each(y,function(e){f.prototype[e]=function(t,i){var s=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,s,i)}});var b=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];n.extend(b.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var i=e[t];if(n.isFunction(i)||(i=this[e[t]]),i){var s=t.match(w),o=s[1],r=s[2];i=n.bind(i,this),o+=".delegateEvents"+this.cid,""===r?this.$el.on(o,i):this.$el.on(o,r,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var i=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(i,!1)}}}),t.sync=function(e,i,s){var o=T[e];n.defaults(s||(s={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var r={type:o,dataType:"json"};if(s.url||(r.url=n.result(i,"url")||P()),null!=s.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(r.contentType="application/json",r.data=JSON.stringify(s.attrs||i.toJSON(s))),s.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),s.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){r.type="POST",s.emulateJSON&&(r.data._method=o);var a=s.beforeSend;s.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",o),a?a.apply(this,arguments):void 0}}"GET"===r.type||s.emulateJSON||(r.processData=!1),"PATCH"===r.type&&C&&(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=s.xhr=t.ajax(n.extend(r,s));return i.trigger("request",i,l,s),l};var C=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var k=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},S=/\((.*?)\)/g,_=/(\(\?)?:\w+/g,D=/\*\w+/g,E=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(k.prototype,a,{initialize:function(){},route:function(e,i,s){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(i)&&(s=i,i=""),s||(s=this[i]);var o=this;return t.history.route(e,function(n){var r=o._extractParameters(e,n);s&&s.apply(o,r),o.trigger.apply(o,["route:"+i].concat(r)),o.trigger("route",i,r),t.history.trigger("route",o,i,r)}),this},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(E,"\\$&").replace(S,"(?:$1)?").replace(_,function(e,t){return t?e:"([^/]+)"}).replace(D,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return n.map(i,function(e){return e?decodeURIComponent(e):null})}});var M=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},A=/^[#\/]|\s+$/g,N=/^\/+|\/+$/g,F=/msie [\w.]+/,O=/\/$/,j=/[?#].*$/;M.started=!1,n.extend(M.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(O,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(A,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),s=document.documentMode,o=F.exec(navigator.userAgent.toLowerCase())&&(!s||7>=s);this.root=("/"+this.root+"/").replace(N,"/"),o&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(i)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var r=this.location,a=r.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!a)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&a&&r.hash&&(this.fragment=this.getHash().replace(A,""),this.history.replaceState({},document.title,this.root+this.fragment+r.search))}return this.options.silent?void 0:this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})},navigate:function(e,t){if(!M.started)return!1;t&&t!==!0||(t={trigger:!!t});var n=this.root+(e=this.getFragment(e||""));if(e=e.replace(j,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),t.history=new M;var I=function(e,t){var i,s=this;i=e&&n.has(e,"constructor")?e.constructor:function(){return s.apply(this,arguments)},n.extend(i,s,t);var o=function(){this.constructor=i};return o.prototype=s.prototype,i.prototype=new o,e&&n.extend(i.prototype,e),i.__super__=s.prototype,i};h.extend=f.extend=k.extend=b.extend=M.extend=I;var P=function(){throw new Error('A "url" property or function must be specified')},V=function(e,t){var n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}};return t}),define("masseuse/utilities/nameSpace",[],function(){"use strict";function e(e,t,n){var i,s,o=t.split("."),r=e;for(i=o.length,s=0;i>s;s++)"undefined"==typeof r[o[s]]&&(r[o[s]]=n?n({}):{}),r=r[o[s]];return r}return e}),define("masseuse/utilities/channels",["underscore","backbone","./nameSpace"],function(e,t,n){"use strict";function i(n){return o?(o.addChannel(n),o):!this instanceof i?new i(n):(e.extend(this,t.Events),this.addChannel(n),o=this,void 0)}function s(n){return e.extend(n,t.Events)}var o;return i.prototype.addChannel=function(t){t&&(e.isArray(t)?e.each(t,this.addChannel.bind(this)):this.channels=n(this,t,s))},i}),define("masseuse/utilities/accessors",["backbone"],function(e){"use strict";function t(e,t,n){var i;for("string"==typeof t&&(t=t.split("."));"object"==typeof e&&e&&t.length;)i=t.shift(),i in e||!n||(e[i]={}),e=s(e,i);return e}function n(e,t,n){var i;return"string"==typeof t&&(t=t.split(".")),i=t.pop(),e=this.getProperty(e,t,!0),e&&"object"==typeof e?(o(e,i,n),e):void 0}function i(e,t){var n;return"string"==typeof t&&(t=t.split(".")),n=t.pop(),e=this.getProperty(e,t,!0),e&&"object"==typeof e?(r(e,n),e):void 0}function s(t,n){return t instanceof e.Model?t.get(n):t[n]}function o(t,n,i){t instanceof e.Model?(t.set(n,i),i instanceof e.Model&&t.listenTo(i,"change",t.trigger.bind(t,"change"))):t[n]=i}function r(t,n){t instanceof e.Model?t.unset(n):delete t[n]}return{getProperty:t,setProperty:n,unsetProperty:i}}),define("masseuse/views/viewContext",["../utilities/accessors"],function(e){"use strict";function t(e){return this instanceof t?void(this.field=e):new t(e)}return t.prototype.getBoundFunction=function(t){return e.getProperty(t,this.field)},t}),define("masseuse/views/lifeCycle",["jquery","underscore"],function(e,t){"use strict";function n(t,n){var a=t.notify.bind(this,l),c=s.bind(this,n),d=r.bind(this,t),u=o.bind(this,t,d),h=t.reject.bind(this);t.progress(this.trigger.bind(this)),e.when(i.call(this,this.beforeRender)).then(a).then(c).then(u,h)}function i(t,n){var i,s,o=Array.prototype.slice.call(arguments);return t?(t.length&&(i=new e.Deferred,o.unshift(i)),n&&o.push(n),s=t.apply(this,o),t.length?i.promise():s):void 0}function s(e){return e?e:void 0}function o(t,n){var s=t.reject.bind(this);e.when(i.call(this,this.render,t)).then(t.notify.bind(this,c)).then(n,s)}function r(e){var t=a.call(this,e),n=e.resolve.bind(this),s=e.reject.bind(this);t.then(i.bind(this,this.afterRender)).then(e.notify.bind(this,d)).then(n,s)}function a(n){var i=[],s=new e.Deferred;return n.progress(function(e){e===c&&s.resolve()
}),t(this.children).each(function(e){var t=e.start(s.promise());i.push(t)}),e.when.apply(e,i)}var l="beforeRenderDone",c="renderDone",d="afterRenderDone";return{runAllMethods:n}}),define("masseuse/utilities/deepExtend",["jquery"],function(e){"use strict";function t(){for(var n,i,s,o,r,a,l=arguments[0],c=0,d=arguments.length;d>c;++c)if(null!=(n=arguments[c]))for(i in n)s=l[i],o=n[i],l!==o&&(o&&(e.isPlainObject(o)||(r=e.isArray(o)))?(r?(r=!1,a=s&&e.isArray(s)?s:[]):a=s&&e.isPlainObject(s)?s:{},l[i]=t(a,o)):l[i]=o);return l}return t}),define("masseuse/utilities/createOptions",["./deepExtend"],function(e){"use strict";return function(){var t=Array.prototype.slice.call(arguments,0);return e.apply(null,[{}].concat(t))}}),define("masseuse/models/computedProperty",[],function(){"use strict";function e(t,n,i){return this instanceof e?(this.listenables=t,this.callback=n,void(this.skipInitialComputation=i)):new e(t,n,i)}return e}),define("masseuse/models/proxyProperty",[],function(){"use strict";function e(t,n){return this instanceof e?(this.propertyNameOnModel=t,void(this.model=n)):new e(t,n)}return e}),define("masseuse/models/observerProperty",[],function(){"use strict";function e(t,n){return this instanceof e?(this.propertyNameOnModel=t,void(this.model=n)):new e(t,n)}return e}),define("masseuse/models/masseuseModel",["backbone","jquery","./computedProperty","./proxyProperty","./observerProperty","../utilities/accessors","underscore"],function(e,t,n,i,s,o,r){"use strict";function a(e){this.set(e,!this.get(e))}function l(t){var n,i,s;return r.isString(t)&&t.indexOf(".")>0?(n=t.slice(t.indexOf(".")+1),t=t.split(".")[0],i=e.Model.prototype.get.call(this,t),s=o.getProperty(i,n)):s=e.Model.prototype.get.apply(this,arguments),s}function c(t,n,i){i>g||"object"==typeof t&&r.each(t,function(t){t instanceof e.Model?n.listenTo(t,"change",n.trigger.bind(n,"change")):"object"==typeof t&&c(t,n,++i)})}function d(t,a,l){var d,u,h=this,p={},f=[],m=[],g=!1;if(this.computedCallbacks=this.computedCallbacks||{},null===t)return this;if("object"==typeof t)p=t,l=a,r.each(t,function(t,o){t instanceof n?(t.skipInitialComputation?m.push(function(){h.bindComputed(o,t)}):(h.bindComputed(o,t),g=!0),delete p[o]):t instanceof i?(h.bindProxy(o,t),delete p[o]):t instanceof s?(h.bindObserver(o,t),delete p[o]):t instanceof e.Model?h.listenTo(t,"change",h.trigger.bind(h,"change")):(c(t,h,0),h.computedCallbacks[o]&&f.push(h.computedCallbacks[o]))});else{if(a instanceof e.Model&&h.listenTo(a,"change",h.trigger.bind(h,"change")),r.isString(t)&&t.indexOf(".")>0&&(d=t.slice(t.indexOf(".")+1),t=t.split(".")[0],u=this.get(t)||{},this.set(t,{},{silent:!0}),l&&l.unset?(o.unsetProperty(u,d),l.unset=!1):o.setProperty(u,d,a),a=u),p[t]=a,a instanceof n)return void this.bindComputed(t,a);if(a instanceof i)return void this.bindProxy(t,a);if(a instanceof s)return void this.bindObserver(t,a);v.call(this,t,f)}g?this.set.apply(this,[p,l]):(e.Model.prototype.set.apply(this,[p,l]),r.forEach(f,function(e){r.forEach(e,function(e){e.call(h)})})),m&&r.forEach(m,function(e){e()})}function u(e,t){return this.set(e,void 0,r.extend({},t,{unset:!0}))}function h(e,t){var n,i=this;n=function(){this.set(e,t.callback.apply(this,this.getListenableValues(t.listenables)))},r.forEach(t.listenables,function(e){i.computedCallbacks[e]=i.computedCallbacks[e]||[],i.computedCallbacks[e].push(n),t.skipInitialComputation||n.call(i)})}function p(e,t){var n=this,i=t.model;this.bindObserver(e,t,i),this.on("change:"+e,function(){i.set(t.propertyNameOnModel,n.get(e))})}function f(e,t,n){var i=this,s=t.propertyNameOnModel;n=n||t.model,this.set(e,n.get(s)),r.isString(s)&&s.indexOf(".")>0&&(s=s.split(".")[0]),n.on("change:"+s,function(){i.set(e,n.get(t.propertyNameOnModel))})}function m(e){var t=[],n=this;return r.each(e,function(e){t.push(n.get(e))}),t}function v(e,t){this.computedCallbacks[e]&&t.push(this.computedCallbacks[e])}var g=10;return e.Model.extend({toggleAttribute:a,get:l,set:d,unset:u,bindComputed:h,bindProxy:p,bindObserver:f,getListenableValues:m})}),define("masseuse/views/baseView",["jquery","backbone","underscore","../utilities/channels","./viewContext","./lifeCycle","../utilities/accessors","../utilities/createOptions","../models/masseuseModel","../models/proxyProperty","../models/observerProperty"],function(e,t,n,i,s,o,r,a,l,c,d){"use strict";function u(){var e,t,i=Array.prototype.slice.call(arguments,0),s=i.length,o=i[s-1],r=!1!==o;return s&&"object"!=typeof o&&i.pop(),r&&this.defaultOptions&&i.unshift(this.defaultOptions),e=a.apply(null,i),(t=e.ViewType)?(delete e.ViewType,new t(e)):(this.cid=n.uniqueId("view"),n.extend(this,n.pick(e,O)),this._ensureElement(),this.initialize.call(this,e),void this.delegateEvents())}function h(e){var t=this;this.elementCache=n.memoize(v.bind(this)),e&&(e.viewOptions&&(O=O.concat(e.viewOptions)),n.extend(this,n.pick(e,O))),A.call(this,e),N.call(this,e),F.call(this,e),e&&e.plugins&&e.plugins.length&&n.each(e.plugins,function(n){n.call(t,e)}),this.children=[]}function p(t){var n,i=this;return this.$startPromise?this.$startPromise:(n=new e.Deferred,n.done(function(){i.hasStarted=!0}),this.$startPromise=n.promise(),o.runAllMethods.call(this,n,t),this.$startPromise)}function f(){this.appendOrInsertView(arguments[arguments.length-1]),this.elementCache=n.memoize(v.bind(this))}function m(e){this.appendTo||this.prependTo?D.call(this,e):M.call(this,e)}function v(e){return this.$el.find(e)}function g(){return this.model?this.model.toJSON():{}}function y(e){var t=this;this.stopListening(),e=n.map(e,function(e){var i=2===e.length,s=i?0:1;return n.each(e,function(i,o){n.isString(i)&&o!=s&&(e[o]=r.getProperty(t,i))}),i&&e.unshift(t),e}),e=n.uniq(e,function(e){return n.identity(e)}),n.each(e,function(e){t.listenTo.apply(t,e)})}function b(){this.removeAllChildren(),this.parent&&n.contains(this.parent.children,this)&&this.parent.removeChild(this),this.trigger("onRemove"),this.model&&(this.model.off(),this.model.stopListening(),delete this.model),this.$el||(this.$el=e("<div/>")),t.View.prototype.remove.apply(this,arguments),this.$el&&(this.undelegateEvents(),this.$el.removeData().unbind(),this.$el.empty(),delete this.$el),this.el&&delete this.el}function w(){var e=n.isArray(arguments[0])?arguments[0]:arguments,t=this,i=[];return n.each(e,function(e){i.push(t.addChild.call(t,e))}),i}function x(e){return e instanceof t.View?C.call(this,e):C.call(this,new B(e))}function C(e){var t;return n(this.children).contains(e)||(this.children.push(t=e),e.parent=this,this.hasStarted&&!e.hasStarted&&e.start()),t}function T(e){this.children=n(this.children).without(e),e.remove()}function k(){n(this.children).each(this.removeChild.bind(this))}function S(){return this.hasStarted&&(t.View.prototype.remove.apply(this),delete this.hasStarted,delete this.$startPromise),this.start()}function _(){var t=new e.Deferred,i=[];return n(this.children).each(function(e){i.push(e.refresh())}),e.when.apply(e,i).then(t.resolve),t.promise()}function D(t){var n,i=this.template,s=this.wrapper!==!1;i=i?i(this.dataToJSON()):"",n=s?this.el:e(i),s||1!==n.length?this.$el.html(i):this.setElement(n),t&&t.notify&&t.notify(I),this.appendTo?E.call(this,"appendTo"):this.prependTo&&E.call(this,"prependTo")}function E(t){e(this.el)[t](this.parent&&n.isString(this[t])?this.parent.$(this[t]):e(this[t]))}function M(e){var t=this.template;t&&this.$el.html(t(this.dataToJSON())),e&&e.notify&&e.notify(I)}function A(e){e&&e.template&&(this.template=n.template(e.template))}function N(e){var t,i=this,o=l;e&&e.ModelType&&(o=e.ModelType),this.model?this.model=e.model:(t=n.result(e,R),n.each(t,function(e,n){e instanceof s&&(t[n]=e.getBoundFunction(i)),(e instanceof c||e instanceof d)&&e.model instanceof s&&(e.model=e.model.getBoundFunction(i))}),this.model=new o(t))}function F(e){e&&this.bindEventListeners(e.listeners||e.bindings)}var O=["model","collection","el","id","attributes","className","tagName","events","name","appendTo","prependTo","wrapper"],j="beforeRenderDone",I="afterTemplatingDone",P="renderDone",V="afterRenderDone",R="modelData",B=t.View.extend({constructor:u,initialize:h,start:p,render:f,dataToJSON:g,bindEventListeners:y,remove:b,children:null,addChild:x,addChildren:w,removeChild:T,refresh:S,restart:S,refreshChildren:_,removeAllChildren:k,appendOrInsertView:m});return B.beforeRenderDone=j,B.afterTemplatingDone=I,B.renderDone=P,B.afterRenderDone=V,B.prototype.channels=B.prototype.channels||new i,B}),define("masseuse/routers/masseuseRouter",["backbone","underscore"],function(e,t){"use strict";function n(){}function i(){var n=this;t.isFunction(this.beforeRouting)&&t(this.routes).chain().omit(this.excludeFromBeforeRouting).values().uniq().each(function(e){s.call(n,e)}),e.Router.prototype._bindRoutes.call(this)}function s(e){var t=this,n=this[e];t[e]=function(){var e=arguments;this.beforeRouting().done(function(){n.apply(t,e)}).fail(function(){t.onRouteFail.apply(t,e)})}}return e.Router.extend({initialize:i,_bindRoutes:n,onRouteFail:n})}),function(){var e,t,n,i,s=function(e,t){return function(){return e.apply(t,arguments)}},o=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},r=[].slice,a={}.hasOwnProperty,l=function(e,t){function n(){this.constructor=e}for(var i in t)a.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};e={binders:{},components:{},formatters:{},adapters:{},config:{prefix:"rv",templateDelimiters:["{","}"],rootInterface:".",preloadData:!0,handler:function(e,t,n){return this.call(e,t,n.view.models)}}},"jQuery"in window?(i="on"in jQuery.prototype?["on","off"]:["bind","unbind"],t=i[0],n=i[1],e.Util={bindEvent:function(e,n,i){return jQuery(e)[t](n,i)},unbindEvent:function(e,t,i){return jQuery(e)[n](t,i)},getInputValue:function(e){var t;return t=jQuery(e),"checkbox"===t.attr("type")?t.is(":checked"):t.val()}}):e.Util={bindEvent:function(){return"addEventListener"in window?function(e,t,n){return e.addEventListener(t,n,!1)}:function(e,t,n){return e.attachEvent("on"+t,n)}}(),unbindEvent:function(){return"removeEventListener"in window?function(e,t,n){return e.removeEventListener(t,n,!1)}:function(e,t,n){return e.detachEvent("on"+t,n)}}(),getInputValue:function(e){var t,n,i,s;if("checkbox"===e.type)return e.checked;if("select-multiple"===e.type){for(s=[],n=0,i=e.length;i>n;n++)t=e[n],t.selected&&s.push(t.value);return s}return e.value}},e.View=function(){function t(t,n,i){var o,r,a,l,c,d,u,h,p;for(this.els=t,this.models=n,this.options=null!=i?i:{},this.update=s(this.update,this),this.publish=s(this.publish,this),this.sync=s(this.sync,this),this.unbind=s(this.unbind,this),this.bind=s(this.bind,this),this.select=s(this.select,this),this.build=s(this.build,this),this.componentRegExp=s(this.componentRegExp,this),this.bindingRegExp=s(this.bindingRegExp,this),this.els.jquery||this.els instanceof Array||(this.els=[this.els]),u=["config","binders","formatters","adapters"],c=0,d=u.length;d>c;c++){if(r=u[c],this[r]={},this.options[r]){h=this.options[r];for(o in h)a=h[o],this[r][o]=a}p=e[r];for(o in p)a=p[o],null==(l=this[r])[o]&&(l[o]=a)}this.build()}return t.prototype.bindingRegExp=function(){return new RegExp("^"+this.config.prefix+"-")},t.prototype.componentRegExp=function(){return new RegExp("^"+this.config.prefix.toUpperCase()+"-")},t.prototype.build=function(){var t,n,i,s,r,a,l,c,d,u=this;for(this.bindings=[],a=[],t=this.bindingRegExp(),i=this.componentRegExp(),n=function(t,n,i,s){var o,r,a,l,c,d,h;return c={},h=function(){var e,t,n,i;for(n=s.split("|"),i=[],e=0,t=n.length;t>e;e++)d=n[e],i.push(d.trim());return i}(),o=function(){var e,t,n,i;for(n=h.shift().split("<"),i=[],e=0,t=n.length;t>e;e++)r=n[e],i.push(r.trim());return i}(),l=o.shift(),c.formatters=h,(a=o.shift())&&(c.dependencies=a.split(/\s+/)),u.bindings.push(new e[t](u,n,i,l,c))},r=function(s){var l,c,d,h,p,f,m,v,g,y,b,w,x,C,T,k,S,_,D,E,M,A,N,F,O,j,I,P,V,R;if(o.call(a,s)<0){if(3===s.nodeType){if(v=e.TextTemplateParser,(p=u.config.templateDelimiters)&&(w=v.parse(s.data,p)).length&&(1!==w.length||w[0].type!==v.types.text)){for(T=0,D=w.length;D>T;T++)b=w[T],y=document.createTextNode(b.value),s.parentNode.insertBefore(y,s),1===b.type&&n("TextBinding",y,null,b.value);s.parentNode.removeChild(s)}}else if(i.test(s.tagName))x=s.tagName.replace(i,"").toLowerCase(),u.bindings.push(new e.ComponentBinding(u,s,x));else if(null!=s.attributes){for(O=s.attributes,k=0,E=O.length;E>k;k++)if(l=O[k],t.test(l.name)){if(x=l.name.replace(t,""),!(d=u.binders[x])){j=u.binders;for(f in j)C=j[f],"*"!==f&&-1!==f.indexOf("*")&&(g=new RegExp("^"+f.replace("*",".+")+"$"),g.test(x)&&(d=C))}if(d||(d=u.binders["*"]),d.block){for(I=s.childNodes,S=0,M=I.length;M>S;S++)m=I[S],a.push(m);c=[l]}}for(P=c||s.attributes,_=0,A=P.length;A>_;_++)l=P[_],t.test(l.name)&&(x=l.name.replace(t,""),n("Binding",s,x,l.value))}for(V=function(){var e,t,n,i;for(n=s.childNodes,i=[],t=0,e=n.length;e>t;t++)m=n[t],i.push(m);return i}(),R=[],F=0,N=V.length;N>F;F++)h=V[F],R.push(r(h));return R}},d=this.els,l=0,c=d.length;c>l;l++)s=d[l],r(s)},t.prototype.select=function(e){var t,n,i,s,o;for(s=this.bindings,o=[],n=0,i=s.length;i>n;n++)t=s[n],e(t)&&o.push(t);return o},t.prototype.bind=function(){var e,t,n,i,s;for(i=this.bindings,s=[],t=0,n=i.length;n>t;t++)e=i[t],s.push(e.bind());return s},t.prototype.unbind=function(){var e,t,n,i,s;for(i=this.bindings,s=[],t=0,n=i.length;n>t;t++)e=i[t],s.push(e.unbind());return s},t.prototype.sync=function(){var e,t,n,i,s;for(i=this.bindings,s=[],t=0,n=i.length;n>t;t++)e=i[t],s.push(e.sync());return s},t.prototype.publish=function(){var e,t,n,i,s;for(i=this.select(function(e){return e.binder.publishes}),s=[],t=0,n=i.length;n>t;t++)e=i[t],s.push(e.publish());return s},t.prototype.update=function(e){var t,n,i,s,o,r,a;null==e&&(e={});for(n in e)i=e[n],this.models[n]=i;for(r=this.bindings,a=[],s=0,o=r.length;o>s;s++)t=r[s],a.push(t.update(e));return a},t}(),e.Binding=function(){function t(e,t,n,i,o){this.view=e,this.el=t,this.type=n,this.keypath=i,this.options=null!=o?o:{},this.update=s(this.update,this),this.unbind=s(this.unbind,this),this.bind=s(this.bind,this),this.publish=s(this.publish,this),this.sync=s(this.sync,this),this.set=s(this.set,this),this.eventHandler=s(this.eventHandler,this),this.formattedValue=s(this.formattedValue,this),this.setBinder=s(this.setBinder,this),this.formatters=this.options.formatters||[],this.dependencies=[],this.model=void 0,this.setBinder()}return t.prototype.setBinder=function(){var e,t,n,i;if(!(this.binder=this.view.binders[this.type])){i=this.view.binders;for(e in i)n=i[e],"*"!==e&&-1!==e.indexOf("*")&&(t=new RegExp("^"+e.replace("*",".+")+"$"),t.test(this.type)&&(this.binder=n,this.args=new RegExp("^"+e.replace("*","(.+)")+"$").exec(this.type),this.args.shift()))}return this.binder||(this.binder=this.view.binders["*"]),this.binder instanceof Function?this.binder={routine:this.binder}:void 0},t.prototype.formattedValue=function(e){var t,n,i,s,o,a;for(a=this.formatters,s=0,o=a.length;o>s;s++)n=a[s],t=n.split(/\s+/),i=t.shift(),n=this.view.formatters[i],(null!=n?n.read:void 0)instanceof Function?e=n.read.apply(n,[e].concat(r.call(t))):n instanceof Function&&(e=n.apply(null,[e].concat(r.call(t))));return e},t.prototype.eventHandler=function(e){var t,n;return n=(t=this).view.config.handler,function(i){return n.call(e,this,i,t)}},t.prototype.set=function(e){var t;return e=this.formattedValue(e instanceof Function&&!this.binder["function"]?e.call(this.model):e),null!=(t=this.binder.routine)?t.call(this,this.el,e):void 0},t.prototype.sync=function(){var t,n,i,s,o,r,a,l,c;if(this.model!==this.observer.target){for(a=this.dependencies,i=0,o=a.length;o>i;i++)n=a[i],n.unobserve();if(this.dependencies=[],null!=(this.model=this.observer.target)&&(null!=(l=this.options.dependencies)?l.length:void 0))for(c=this.options.dependencies,s=0,r=c.length;r>s;s++)t=c[s],n=new e.Observer(this.view,this.model,t,this.sync),this.dependencies.push(n)}return this.set(this.observer.value())},t.prototype.publish=function(){var t,n,i,s,o,a,l,c,d;for(s=e.Util.getInputValue(this.el),l=this.formatters.slice(0).reverse(),o=0,a=l.length;a>o;o++)n=l[o],t=n.split(/\s+/),i=t.shift(),(null!=(c=this.view.formatters[i])?c.publish:void 0)&&(s=(d=this.view.formatters[i]).publish.apply(d,[s].concat(r.call(t))));return this.observer.publish(s)},t.prototype.bind=function(){var t,n,i,s,o,r,a;if(null!=(o=this.binder.bind)&&o.call(this,this.el),this.observer=new e.Observer(this.view,this.view.models,this.keypath,this.sync),this.model=this.observer.target,null!=this.model&&(null!=(r=this.options.dependencies)?r.length:void 0))for(a=this.options.dependencies,i=0,s=a.length;s>i;i++)t=a[i],n=new e.Observer(this.view,this.model,t,this.sync),this.dependencies.push(n);return this.view.config.preloadData?this.sync():void 0},t.prototype.unbind=function(){var e,t,n,i,s;for(null!=(i=this.binder.unbind)&&i.call(this,this.el),this.observer.unobserve(),s=this.dependencies,t=0,n=s.length;n>t;t++)e=s[t],e.unobserve();return this.dependencies=[]},t.prototype.update=function(e){var t;return null==e&&(e={}),this.model=this.observer.target,null!=(t=this.binder.update)?t.call(this,e):void 0},t}(),e.ComponentBinding=function(t){function n(t,n,i){var r,a,l,c,d;for(this.view=t,this.el=n,this.type=i,this.unbind=s(this.unbind,this),this.bind=s(this.bind,this),this.update=s(this.update,this),this.locals=s(this.locals,this),this.component=e.components[this.type],this.attributes={},this.inflections={},c=this.el.attributes||[],a=0,l=c.length;l>a;a++)r=c[a],d=r.name,o.call(this.component.attributes,d)>=0?this.attributes[r.name]=r.value:this.inflections[r.name]=r.value}return l(n,t),n.prototype.sync=function(){},n.prototype.locals=function(e){var t,n,i,s,o,r,a,l,c;null==e&&(e=this.view.models),o={},l=this.inflections;for(n in l)for(t=l[n],c=t.split("."),r=0,a=c.length;a>r;r++)s=c[r],o[n]=(o[n]||e)[s];for(n in e)i=e[n],null==o[n]&&(o[n]=i);return o},n.prototype.update=function(e){var t;return null!=(t=this.componentView)?t.update(this.locals(e)):void 0},n.prototype.bind=function(){var t,n;return null!=this.componentView?null!=(n=this.componentView)?n.bind():void 0:(t=this.component.build.call(this.attributes),(this.componentView=new e.View(t,this.locals(),this.view.options)).bind(),this.el.parentNode.replaceChild(t,this.el))},n.prototype.unbind=function(){var e;return null!=(e=this.componentView)?e.unbind():void 0},n}(e.Binding),e.TextBinding=function(e){function t(e,t,n,i,o){this.view=e,this.el=t,this.type=n,this.keypath=i,this.options=null!=o?o:{},this.sync=s(this.sync,this),this.formatters=this.options.formatters||[],this.dependencies=[]}return l(t,e),t.prototype.binder={routine:function(e,t){return e.data=null!=t?t:""}},t.prototype.sync=function(){return t.__super__.sync.apply(this,arguments)},t}(e.Binding),e.KeypathParser=function(){function e(){}return e.parse=function(e,t,n){var i,s,r,a,l,c;for(a=[],s={"interface":n,path:""},r=l=0,c=e.length;c>l;r=l+=1)i=e.charAt(r),o.call(t,i)>=0?(a.push(s),s={"interface":i,path:""}):s.path+=i;return a.push(s),a},e}(),e.TextTemplateParser=function(){function e(){}return e.types={text:0,binding:1},e.parse=function(e,t){var n,i,s,o,r,a,l;for(a=[],o=e.length,n=0,i=0;o>i;){if(n=e.indexOf(t[0],i),0>n){a.push({type:this.types.text,value:e.slice(i)});break}if(n>0&&n>i&&a.push({type:this.types.text,value:e.slice(i,n)}),i=n+t[0].length,n=e.indexOf(t[1],i),0>n){r=e.slice(i-t[1].length),s=a[a.length-1],(null!=s?s.type:void 0)===this.types.text?s.value+=r:a.push({type:this.types.text,value:r});break}l=e.slice(i,n).trim(),a.push({type:this.types.binding,value:l}),i=n+t[1].length}return a},e}(),e.Observer=function(){function t(e,t,n,i){this.view=e,this.model=t,this.keypath=n,this.callback=i,this.unobserve=s(this.unobserve,this),this.realize=s(this.realize,this),this.value=s(this.value,this),this.publish=s(this.publish,this),this.read=s(this.read,this),this.set=s(this.set,this),this.adapter=s(this.adapter,this),this.update=s(this.update,this),this.initialize=s(this.initialize,this),this.parse=s(this.parse,this),this.parse(),this.initialize()}return t.prototype.parse=function(){var t,n,i,s,r,a;return t=function(){var e,t;e=this.view.adapters,t=[];for(n in e)r=e[n],t.push(n);return t}.call(this),a=this.keypath[0],o.call(t,a)>=0?(s=this.keypath[0],i=this.keypath.substr(1)):(s=this.view.config.rootInterface,i=this.keypath),this.tokens=e.KeypathParser.parse(i,t,s),this.key=this.tokens.pop()},t.prototype.initialize=function(){return this.objectPath=[],this.target=this.realize(),null!=this.target?this.set(!0,this.key,this.target,this.callback):void 0},t.prototype.update=function(){var e,t;return(e=this.realize())!==this.target&&(null!=this.target&&this.set(!1,this.key,this.target,this.callback),null!=e&&this.set(!0,this.key,e,this.callback),t=this.value(),this.target=e,this.value()!==t)?this.callback():void 0},t.prototype.adapter=function(e){return this.view.adapters[e["interface"]]},t.prototype.set=function(e,t,n,i){var s;return s=e?"subscribe":"unsubscribe",this.adapter(t)[s](n,t.path,i)},t.prototype.read=function(e,t){return this.adapter(e).read(t,e.path)},t.prototype.publish=function(e){return null!=this.target?this.adapter(this.key).publish(this.target,this.key.path,e):void 0},t.prototype.value=function(){return null!=this.target?this.read(this.key,this.target):void 0},t.prototype.realize=function(){var e,t,n,i,s,o,r,a;for(e=this.model,s=null,a=this.tokens,t=o=0,r=a.length;r>o;t=++o)i=a[t],null!=e?(null!=this.objectPath[t]?e!==(n=this.objectPath[t])&&(this.set(!1,i,n,this.update),this.set(!0,i,e,this.update),this.objectPath[t]=e):(this.set(!0,i,e,this.update),this.objectPath[t]=e),e=this.read(i,e)):(null==s&&(s=t),(n=this.objectPath[t])&&this.set(!1,i,n,this.update));return null!=s&&this.objectPath.splice(s),e},t.prototype.unobserve=function(){var e,t,n,i,s,o;for(o=this.tokens,e=i=0,s=o.length;s>i;e=++i)n=o[e],(t=this.objectPath[e])&&this.set(!1,n,t,this.update);return null!=this.target?this.set(!1,this.key,this.target,this.callback):void 0},t}(),e.binders.text=function(e,t){return null!=e.textContent?e.textContent=null!=t?t:"":e.innerText=null!=t?t:""},e.binders.html=function(e,t){return e.innerHTML=null!=t?t:""},e.binders.show=function(e,t){return e.style.display=t?"":"none"},e.binders.hide=function(e,t){return e.style.display=t?"none":""},e.binders.enabled=function(e,t){return e.disabled=!t},e.binders.disabled=function(e,t){return e.disabled=!!t},e.binders.checked={publishes:!0,bind:function(t){return e.Util.bindEvent(t,"change",this.publish)},unbind:function(t){return e.Util.unbindEvent(t,"change",this.publish)},routine:function(e,t){var n;return e.checked="radio"===e.type?(null!=(n=e.value)?n.toString():void 0)===(null!=t?t.toString():void 0):!!t}},e.binders.unchecked={publishes:!0,bind:function(t){return e.Util.bindEvent(t,"change",this.publish)},unbind:function(t){return e.Util.unbindEvent(t,"change",this.publish)},routine:function(e,t){var n;return e.checked="radio"===e.type?(null!=(n=e.value)?n.toString():void 0)!==(null!=t?t.toString():void 0):!t}},e.binders.value={publishes:!0,bind:function(t){return e.Util.bindEvent(t,"change",this.publish)},unbind:function(t){return e.Util.unbindEvent(t,"change",this.publish)},routine:function(e,t){var n,i,s,r,a,l,c;if(null!=window.jQuery){if(e=jQuery(e),(null!=t?t.toString():void 0)!==(null!=(r=e.val())?r.toString():void 0))return e.val(null!=t?t:"")}else if("select-multiple"===e.type){if(null!=t){for(c=[],i=0,s=e.length;s>i;i++)n=e[i],c.push(n.selected=(a=n.value,o.call(t,a)>=0));return c}}else if((null!=t?t.toString():void 0)!==(null!=(l=e.value)?l.toString():void 0))return e.value=null!=t?t:""}},e.binders["if"]={block:!0,bind:function(e){var t,n;return null==this.marker?(t=[this.view.config.prefix,this.type].join("-").replace("--","-"),n=e.getAttribute(t),this.marker=document.createComment(" rivets: "+this.type+" "+n+" "),e.removeAttribute(t),e.parentNode.insertBefore(this.marker,e),e.parentNode.removeChild(e)):void 0},unbind:function(){var e;return null!=(e=this.nested)?e.unbind():void 0},routine:function(t,n){var i,s,o,r,a;if(!!n==(null==this.nested)){if(n){o={},a=this.view.models;for(i in a)s=a[i],o[i]=s;return r={binders:this.view.options.binders,formatters:this.view.options.formatters,adapters:this.view.options.adapters,config:this.view.options.config},(this.nested=new e.View(t,o,r)).bind(),this.marker.parentNode.insertBefore(t,this.marker.nextSibling)}return t.parentNode.removeChild(t),this.nested.unbind(),delete this.nested}},update:function(e){var t;return null!=(t=this.nested)?t.update(e):void 0}},e.binders.unless={block:!0,bind:function(t){return e.binders["if"].bind.call(this,t)},unbind:function(){return e.binders["if"].unbind.call(this)},routine:function(t,n){return e.binders["if"].routine.call(this,t,!n)},update:function(t){return e.binders["if"].update.call(this,t)}},e.binders["on-*"]={"function":!0,unbind:function(t){return this.handler?e.Util.unbindEvent(t,this.args[0],this.handler):void 0},routine:function(t,n){return this.handler&&e.Util.unbindEvent(t,this.args[0],this.handler),e.Util.bindEvent(t,this.args[0],this.handler=this.eventHandler(n))}},e.binders["each-*"]={block:!0,bind:function(e){var t;return null==this.marker?(t=[this.view.config.prefix,this.type].join("-").replace("--","-"),this.marker=document.createComment(" rivets: "+this.type+" "),this.iterated=[],e.removeAttribute(t),e.parentNode.insertBefore(this.marker,e),e.parentNode.removeChild(e)):void 0},unbind:function(){var e,t,n,i,s;if(null!=this.iterated){for(i=this.iterated,s=[],t=0,n=i.length;n>t;t++)e=i[t],s.push(e.unbind());return s}},routine:function(t,n){var i,s,o,r,a,l,c,d,u,h,p,f,m,v,g,y,b,w,x,C,T,k,S,_;if(d=this.args[0],n=n||[],this.iterated.length>n.length)for(C=Array(this.iterated.length-n.length),v=0,b=C.length;b>v;v++)o=C[v],m=this.iterated.pop(),m.unbind(),this.marker.parentNode.removeChild(m.els[0]);for(r=g=0,w=n.length;w>g;r=++g)if(c=n[r],s={index:r},s[d]=c,null==this.iterated[r]){T=this.view.models;for(l in T)c=T[l],null==s[l]&&(s[l]=c);h=this.iterated.length?this.iterated[this.iterated.length-1].els[0]:this.marker,u={binders:this.view.options.binders,formatters:this.view.options.formatters,adapters:this.view.options.adapters,config:{}},k=this.view.options.config;for(a in k)f=k[a],u.config[a]=f;u.config.preloadData=!0,p=t.cloneNode(!0),m=new e.View(p,s,u),m.bind(),this.iterated.push(m),this.marker.parentNode.insertBefore(p,h.nextSibling)}else this.iterated[r].models[d]!==c&&this.iterated[r].update(s);if("OPTION"===t.nodeName){for(S=this.view.bindings,_=[],y=0,x=S.length;x>y;y++)i=S[y],_.push(i.el===this.marker.parentNode&&"value"===i.type?i.sync():void 0);return _}},update:function(e){var t,n,i,s,o,r,a,l;t={};for(n in e)i=e[n],n!==this.args[0]&&(t[n]=i);for(a=this.iterated,l=[],o=0,r=a.length;r>o;o++)s=a[o],l.push(s.update(t));return l}},e.binders["class-*"]=function(e,t){var n;return n=" "+e.className+" ",!t==(-1!==n.indexOf(" "+this.args[0]+" "))?e.className=t?""+e.className+" "+this.args[0]:n.replace(" "+this.args[0]+" "," ").trim():void 0},e.binders["*"]=function(e,t){return null!=t?e.setAttribute(this.type,t):e.removeAttribute(this.type)},e.adapters["."]={id:"_rv",counter:0,weakmap:{},weakReference:function(e){var t;return null==e[this.id]&&(t=this.counter++,this.weakmap[t]={callbacks:{}},Object.defineProperty(e,this.id,{value:t})),this.weakmap[e[this.id]]},stubFunction:function(e,t){var n,i,s;return i=e[t],n=this.weakReference(e),s=this.weakmap,e[t]=function(){var t,o,r,a,l,c,d,u,h,p;a=i.apply(e,arguments),d=n.pointers;for(r in d)for(o=d[r],p=null!=(u=null!=(h=s[r])?h.callbacks[o]:void 0)?u:[],l=0,c=p.length;c>l;l++)(t=p[l])();return a}},observeMutations:function(e,t,n){var i,s,r,a,l,c;if(Array.isArray(e)){if(r=this.weakReference(e),null==r.pointers)for(r.pointers={},s=["push","pop","shift","unshift","sort","reverse","splice"],l=0,c=s.length;c>l;l++)i=s[l],this.stubFunction(e,i);if(null==(a=r.pointers)[t]&&(a[t]=[]),o.call(r.pointers[t],n)<0)return r.pointers[t].push(n)}},unobserveMutations:function(e,t,n){var i,s;return Array.isArray(e&&null!=e[this.id])&&(i=null!=(s=this.weakReference(e).pointers)?s[t]:void 0)?i.splice(i.indexOf(n),1):void 0},subscribe:function(e,t,n){var i,s,r=this;return i=this.weakReference(e).callbacks,null==i[t]&&(i[t]=[],s=e[t],Object.defineProperty(e,t,{enumerable:!0,get:function(){return s},set:function(o){var a,l,c;if(o!==s){for(s=o,c=i[t],a=0,l=c.length;l>a;a++)(n=c[a])();return r.observeMutations(o,e[r.id],t)}}})),o.call(i[t],n)<0&&i[t].push(n),this.observeMutations(e[t],e[this.id],t)},unsubscribe:function(e,t,n){var i;return i=this.weakmap[e[this.id]].callbacks[t],i.splice(i.indexOf(n),1),this.unobserveMutations(e[t],e[this.id],t)},read:function(e,t){return e[t]},publish:function(e,t,n){return e[t]=n}},e.factory=function(t){return t._=e,t.binders=e.binders,t.components=e.components,t.formatters=e.formatters,t.adapters=e.adapters,t.config=e.config,t.configure=function(t){var n,i;null==t&&(t={});for(n in t)i=t[n],e.config[n]=i},t.bind=function(t,n,i){var s;return null==n&&(n={}),null==i&&(i={}),s=new e.View(t,n,i),s.bind(),s}},"object"==typeof exports?e.factory(exports):"function"==typeof define&&define.amd?define("rivets",["exports"],function(t){return e.factory(this.rivets=t),t}):e.factory(this.rivets={})}.call(this),define("masseuse/plugins/rivets/loadRivets",["jquery","rivets","backbone","underscore"],function(e,t,n,i){"use strict";function s(n){var s=[],o=this;return n.skipRoot?i.each(this.$el.contents(),function(n){s.push(t.bind(e(n),{model:o.model,view:o,collection:o.collection}))}):s.push(t.bind(this.$el,{model:this.model,view:this,collection:this.collection})),s}function o(e){var t=this,s={};return i.each(e,function(e,i){s["new-"+i.toLowerCase()]=function(i,s){var o={ViewType:e,el:i,_rivetsSkipRoot:!0};s instanceof n.Model?o.model=s:s instanceof n.Collection?o.collection=s:o.modelData=s,t.addChild(o)}}),s}return function(n){return t.configure({preloadData:!0,prefix:n.rivetsPrefix,handler:function(e,t,n){this.call(n.observer.target,t,n.view.models)}}),n.rivetsInstaUpdate&&(this.$("input").on("keypress paste textInput input",function(){e(this).trigger("change")}),this.listenTo(this,"onRemove",function(){this.$("input").off("keypress paste textInput input")})),t.config.templateDelimiters=n.rivetsDelimiters,i.extend(t.components,n.rivetsComponents),i.extend(t.formatters,n.rivetsFormatters),i.extend(t.adapters,n.rivetsAdapters),i.extend(t.binders,n.rivetsBinders,o.call(this,n.childViewBinders)),s.call(this,n)}}),define("masseuse/plugins/rivets/binders",["jquery"],function(e){"use strict";function t(t){var n=e(t);n.attr("contenteditable")||n.attr("contenteditable",!0),this.callback=s.bind(this,t),n.on("keypress",this.callback),n.on("blur",this.callback)}function n(t){var n=e(t);n.off("keypress"),n.off("blur")}function i(e,t){this.view.binders.text.call(this,e,t)}function s(e,t){(13===t.keyCode||"blur"===t.type)&&this.view.adapters[":"].publish(this.model,this.keypath.substring(this.keypath.indexOf(":")+1),e.textContent)}function o(t,n){t.addedClass&&(e(t).removeClass(t.addedClass),delete t.addedClass),n&&(e(t).addClass(n),t.addedClass=n)}function r(e,t){e.style.width=t}function a(t){var n=this,i=e(t);i.on("keypress",function(e){13===e.keyCode&&(i.blur(),n.view.models.view[n.keypath](e))})}function l(t){e(t).off("keypress")}return{addclass:o,editable:{routine:i,bind:t,unbind:n},width:r,"on-enter-key-press":{bind:a,unbind:l}}}),define("masseuse/plugins/rivets/formatters",["underscore"],function(e){"use strict";function t(t,n){return e[n](t)}function n(e){return e+", "}function i(e){return e.join(", ")}function s(e,t){switch(e){case 0:return e+" "+t+"s";case 1:return e+" "+t;default:return e+" "+t+"s"}}function o(e){return e+" / "}function r(e){return e+" : "}function a(e){return e+" "}function l(e){return" "+e}function c(e){var t,n=["Bytes","KB","MB","GB","TB"];return e=parseInt(e,10),0===e?"0 Bytes":(t=Math.floor(Math.log(e)/Math.log(1024)),Math.round(e/Math.pow(1024,t),2)+" "+n[t])
}function d(e){var t=new Date(e);return t.toLocaleDateString()+" "+t.toLocaleTimeString("en-US",{hour12:!0})}function u(e){var t=new Date(e);return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()}function h(e){var t=60,n=60*t,i="hr",o="min",r="sec",a=Math.floor(e/n),l=e%n,c=Math.floor(l/t),d=l%t,u=Math.ceil(d),h=[];return 0!==a&&h.push(s(a,i)),0!==c&&h.push(s(c,o)),0!==u&&h.push(s(u,r)),h.join(" ")}function p(e){return"$"+(e/100).toFixed(2)}function f(e){return"$"+e.toFixed(2)}function m(e,t){return e==t}function v(e,t){return e?e:t}function g(e,t){return e.slice(0,t)}function y(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}function b(e){return e?e.charAt(0).toLowerCase()+e.slice(1):""}function w(e){return JSON.stringify(e,null,4)}function x(e){return e?"Enabled":"Disabled"}function C(){var e=Array.prototype.slice.call(arguments),t=e.shift();return-1!=e.indexOf(t)?!0:!1}function T(e,t){return t+e}function k(e,t){return t+e}function S(e){return!e}function _(){var t=!0;return e.each(arguments,function(e){t=t&&e}),t}function D(){var t=!1;return e.each(arguments,function(e){t=t||e}),t}return{_:t,and:_,booleantoenabled:x,centsToDollars:p,asDollars:f,equals:m,existsOr:v,humanize:{read:y,publish:b},includes:C,joinWithComma:i,jsonAsString:w,limit:g,not:S,or:D,pluralize:s,prefix:T,prettyDate:d,prettyDateNoTime:u,prettyFileSize:c,secondsToTime:h,spaceBefore:l,spaceAfter:a,suffix:k,withColon:r,withComma:n,withForwardSlash:o}}),define("masseuse/plugins/rivets/adapters",["jquery","rivets","backbone"],function(e,t,n){"use strict";var i=/->/g;return{":":{subscribe:function(e,t,s){t=t.replace(i,"."),e instanceof n.Collection?e.on("add remove reset change",function(e,t){s(e.get(t))}):e instanceof n.Model&&e.on("change",function(){s(e.get(t))})},unsubscribe:function(e,t){"undefined"!=typeof e&&(e instanceof n.Collection?e.off("add remove reset change"):e.off&&e.off("change:"+t.replace(i,".")))},read:function(e,t){return e instanceof n.Collection?e.models:e.get(t.replace(i,"."))},publish:function(e,t,s){e instanceof n.Model&&e.set(t.replace(i,"."),s)}}}}),define("masseuse/plugins/rivets/plugin",["underscore","./loadRivets","./binders","./formatters","./adapters"],function(e,t,n,i,s){"use strict";function o(o){var r,a;!1!==o.rivetsConfig&&!1!==o.rivetConfig&&(r="object"==typeof o.rivetsConfig?o.rivetsConfig:{},n=n||{},s=s||{},i=i||{},r.rivetsComponents=[{}].concat(r.components||o.rivetsComponents||o.rivetComponents),r.rivetsFormatters=[{},i].concat(r.formatters||o.rivetsFormatters||o.rivetFormatters),r.rivetsAdapters=[{},s].concat(r.adapters||o.rivetsAdapters||o.rivetAdapters),r.rivetsBinders=[{},n].concat(r.binders||o.rivetsBinders||o.rivetBinders),void 0!==r.rivetsInstaUpdate&&void 0===r.instaUpdate&&(r.instaUpdate=o.rivetsInstaUpdate),r.rivetsDelimiters=r.delimiters||o.rivetsDelimiters||o.rivetDelimiters,r.rivetsPrefix=r.prefix||o.rivetsPrefix||o.rivetPrefix,r={rivetsInstaUpdate:r.instaUpdate,rivetsDelimiters:r.rivetsDelimiters||["{{","}}"],rivetsPrefix:o.rivetsPrefix||"data-rv",rivetsComponents:e.extend.apply(e,r.rivetsComponents),rivetsFormatters:e.extend.apply(e,r.rivetsFormatters),rivetsAdapters:e.extend.apply(e,r.rivetsAdapters),rivetsBinders:e.extend.apply(e,r.rivetsBinders),childViewBinders:r.childViewBinders,skipRoot:r.skipRoot||o._rivetsSkipRoot},this.listenTo(this,"afterTemplatingDone",function(){a=t.call(this,r)}),this.listenTo(this,"onRemove",function(){a&&e.each(a,function(t){t.unbind(),e.each(t.bindings,function(e){delete e.el}),delete t.bindings,delete t.els,delete t.models}),a=void 0}))}return o}),define("masseuse/plugins/rivets/view",["../../views/baseView","./plugin"],function(e,t){"use strict";function n(n){n.plugins=n.plugins||[],n.plugins.push(t),e.prototype.initialize.call(this,n)}return e.extend({initialize:n})}),define("masseuse/collections/masseuseCollection",["backbone","../models/masseuseModel"],function(e,t){"use strict";return e.Collection.extend({model:t})}),define("masseuse/main",["./views/baseView","./utilities/channels","./views/viewContext","./routers/masseuseRouter","./models/masseuseModel","./models/computedProperty","./models/proxyProperty","./models/observerProperty","./plugins/rivets/view","./collections/masseuseCollection"],function(e,t,n,i,s,o,r,a,l,c){"use strict";return{View:e,ViewContext:n,Model:s,Collection:c,Router:i,ComputedProperty:o,ProxyProperty:r,ObserverProperty:a,channels:t,BaseView:e,MasseuseModel:s,MasseuseRouter:i,utilities:{channels:t},plugins:{rivets:{RivetsView:l}}}}),define("masseuse",["masseuse/main"],function(e){return e}),define("constants",[],function(){"use strict";var e="",t="0.29.29",n='[{"name":"ScrollToFixed","version":"1.0.6"},{"name":"SparkMD5","version":"0.0.5"},{"name":"ace","version":"1.1.3"},{"name":"ckeditor","version":"4.3.5"},{"name":"datetimepicker","version":"2.3.9"},{"name":"font-awesome","version":"4.1.0"},{"name":"foundation","version":"5.0.2"},{"name":"jquery.ui","version":"1.10.4"},{"name":"js-base64","version":"2.1.2"},{"name":"jsoneditor","version":"3.1.2"},{"name":"masseuse","version":"2.3.0"},{"name":"moment","version":"2.5.1"},{"name":"mousetrap","version":"1.4.6"},{"name":"multiple-select"},{"name":"requirejs-text","version":"2.0.10"},{"name":"select2","version":"3.5.2"},{"name":"velocity"}]',i="camelCase",s="Home";return{version:t,libraryVersions:n,api:{base:{url:e},login:{url:e+"/token"},logout:{url:e+"/token/logout"},user:{url:e+"/user"},users:{url:e+"/users"},usersQuery:{url:e+"/users/query"},newUser:{url:e+"/users"},contentTypes:{url:e+"/contenttypes"},node:{url:e+"/node"},nodesChildren:{url:e+"/node/:id/children"},nodesChildrenDeep:{url:e+"/node/:id/children/deep"},nodesContent:{url:e+"/node/:id/content"},assets:{url:e+"/node/:id/assets"},nodesContentTypes:{url:e+"/node/:id/contenttype"},content:{url:e+"/content"},moveNode:{url:e+"/node/move"},copyAsset:{url:e+"/node/:id/assets/copy"},moveAsset:{url:e+"/node/:id/assets/move"},contentQuery:{url:e+"/content/query"},version:{url:e+"/system"},google:{url:e+"/googleurl"},unlinkGoogle:{url:e+"/users/:id/unlink"}},internalRoutes:{advancedSearch:"/advanced-search",advancedSearchWithOptions:"/advanced-search/:type/query=:queryOptions",user:"/user",users:"/users",userDetail:"/user/:id",addUser:"/add-user",sysInfo:"/sys-info",contentTypes:"/content-types",newContentType:"/content-types/new",contentTypeDetail:"/content-types/:id",content:"/items",contentDetail:"/item/:id",nodeDetail:"/items/nodeid/:id",login:"/login",logout:"/logout",about:"/about",createFolder:"/items/nodeid/:id/create-folder",addContent:"/items/nodeid/:id/create-content",createAssets:"/items/nodeid/:id/create-assets",forbidden:"/forbidden",notFound:"/not-found"},timeouts:{showSpinnerLoadingTimeout:2e3},fileExtensionsMap:{pdf:"fa-file-pdf-o",doc:"fa-file-word-o",docx:"fa-file-word-o",xsl:"fa-file-excel-o",xslx:"fa-file-excel-o",txt:"fa-file-text",zip:"fa-file-archive-o",psd:"fa-file-image-o",ai:"fa-file-image-o",swf:"fa-file-video-o"},imageExtensions:["jpg","jpeg","png","bmp","webp","svg","gif"],contentSearchThrottle:1e3,pagination:{defaultLimit:25,defaultSkip:1,defaultPagesLimit:7,defaultPageSize:[25,50,100,"all"],defaultAllLimit:1e5},controlKeyCodeMap:{13:"enter",16:"shift",17:"cntrl",18:"alt",20:"capsLock",27:"esc",37:"lArr",38:"tArr",39:"rArr",40:"bArr",91:"leftCMD",93:"rightCMD"},jsoneditor:{mode:"tree",modes:["code","tree"]},loginRedirectKey:"loginRedirect",profileGoogleLinkRedirect:{url:"/user/:id"},contextConfig:{preventDoubleContext:!0,compress:!0},defaultPageTransitions:{enter:{type:"fadeIn",options:{duration:100}}},possibleQueryComparators:["equals","notequals",">=",">","<=","<","in","contains","!in","notin","notcontains","like","notlike","between","notbetween","size","exists"],typeSlugification:i,home:s}}),function(e){"use strict";if(!e.Base64){var t,n="2.1.2";"undefined"!=typeof module&&module.exports&&(t=require("buffer").Buffer);var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=function(e){for(var t={},n=0,i=e.length;i>n;n++)t[e.charAt(n)]=n;return t}(i),o=String.fromCharCode,r=function(e){if(e.length<2){var t=e.charCodeAt(0);return 128>t?e:2048>t?o(192|t>>>6)+o(128|63&t):o(224|t>>>12&15)+o(128|t>>>6&63)+o(128|63&t)}var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return o(240|t>>>18&7)+o(128|t>>>12&63)+o(128|t>>>6&63)+o(128|63&t)},a=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,l=function(e){return e.replace(a,r)},c=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),s=[i.charAt(n>>>18),i.charAt(n>>>12&63),t>=2?"=":i.charAt(n>>>6&63),t>=1?"=":i.charAt(63&n)];return s.join("")},d=e.btoa||function(e){return e.replace(/[\s\S]{1,3}/g,c)},u=t?function(e){return new t(e).toString("base64")}:function(e){return d(l(e))},h=function(e,t){return t?u(e).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):u(e)},p=function(e){return h(e,!0)},f=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),m=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return o((n>>>10)+55296)+o((1023&n)+56320);case 3:return o((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return o((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},v=function(e){return e.replace(f,m)},g=function(e){var t=e.length,n=t%4,i=(t>0?s[e.charAt(0)]<<18:0)|(t>1?s[e.charAt(1)]<<12:0)|(t>2?s[e.charAt(2)]<<6:0)|(t>3?s[e.charAt(3)]:0),r=[o(i>>>16),o(i>>>8&255),o(255&i)];return r.length-=[0,0,2,1][n],r.join("")},y=e.atob||function(e){return e.replace(/[\s\S]{1,4}/g,g)},b=t?function(e){return new t(e,"base64").toString()}:function(e){return v(y(e))},w=function(e){return b(e.replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))};if(e.Base64={VERSION:n,atob:y,btoa:d,fromBase64:w,toBase64:h,utob:l,encode:h,encodeURI:p,btou:v,decode:w},"function"==typeof Object.defineProperty){var x=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};e.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",x(function(){return w(this)})),Object.defineProperty(String.prototype,"toBase64",x(function(e){return h(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",x(function(){return h(this,!0)}))}}}}(this),define("base64",function(e){return function(){var t;return t||e.Base64}}(this)),define("helpers/utilities/localStorage",["jquery"],function(e){"use strict";function t(e){return o.getItem(e)}function n(e,t){return o.setItem(e,t)}function i(t){var n=new e.Deferred;return o.removeItem(t),s(t,n),n.promise()}function s(e,t){null===o.getItem(e)?t.resolve():setTimeout(function(){s(e,t)},r)}var o=window.localStorage,r=10;return{get:t,set:n,remove:i}}),define("helpers/utilities/validation",["underscore"],function(e){"use strict";return{stringHasLength:function(e){return!(!e||e.constructor!==String)},checkBoxChecked:function(e){return e},isEmail:function(e){return/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e)},minLength:function(e,t){return e.length>=t},maxLength:function(e,t){return e.length<=t},isCurrency:function(e){return/^\$-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},isNumeric:function(e){return/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},isAlpha:function(e){return/^[a-z]+$/i.test(e)},isAlphaNumeric:function(e){return/^[a-z0-9]+$/i.test(e)},isBetween:function(e,t,n){return e.length>=t&&e.length<=n},isCreditCard:function(e){var t=/^[\d-\s]+$/.test(e);return t?this.validateLuhn(e):!1},validateLoginAttribute:function(e){return/^[\w.\-]+$/.test(e)},validateLuhn:function(e){var t,n=e.toString().split(""),i="",s=0;for(t=0;t<n.length;t++)i+=t%2?""+2*n[t]:""+n[t];for(t=0;t<i.length;t++)s+=parseInt(i[t],10);return s%10===0},createErrorMessages:function(){return e.unique(e.compact(arguments))},checkForErrors:function(){return e.find(arguments,function(e){return!!e})?!0:!1}}}),define("helpers/utilities/cleanCollection",["underscore"],function(e){"use strict";function t(n){return e.each(n,function(i,s){!e.isObject(i)&&!e.isArray(i)||e.isEmpty(i)||t(i),(e.isUndefined(i)||e.isNull(i)||e.isNaN(i)||e.isEmpty(i)&&!e.isString(i)&&!e.isArray(i)&&!e.isBoolean(i)&&!e.isNumber(i))&&(e.isArray(n)?n.splice(s,1):delete n[s])}),n}return t}),define("helpers/utilities/browserTitles",[],function(){"use strict";var e="Grasshopper";return{setBrowserTitle:function(t){document.title=e+(t?" — "+t:"")}}}),define("helpers/utilities/text",["underscore"],function(e){"use strict";function t(){return e(arguments).toArray().join(" ")}function n(){function t(e,t){return e.replace("%s",t)}var n=e.toArray(arguments),i=n.shift();return n.reduce(t,i)}return{join:t,replace:n}}),define("helpers/main",["./utilities/localStorage","./utilities/validation","./utilities/cleanCollection","./utilities/browserTitles","./utilities/text"],function(e,t,n,i,s){"use strict";return{localStorage:e,validation:t,cleanCollection:n,browserTitles:i,text:s}}),define("helpers",["helpers/main"],function(e){return e}),define("api",["jquery","constants","base64","masseuse","helpers"],function(e,t,n,i,s){"use strict";var o=s.localStorage;return{getToken:function(i,s){return e.ajax({dataType:"json",url:t.api.login.url,type:"GET",headers:{Authorization:"Basic "+n.encode(i+":"+s)}})},unAuthenticatedRequest:function(t){return e.ajax({dataType:"json",url:t,type:"GET"})},authenticatedRequest:function(t){var n=o.get("authToken");return e.ajax({dataType:"json",url:t,type:"GET",headers:{Authorization:n}})},unlinkGoogle:function(e){return this.post(t.api.unlinkGoogle.url.replace(":id",e),{key:"google"})},getUsers:function(){return this.authenticatedRequest(t.api.users.url)},getVersion:function(){return this.authenticatedRequest(t.api.version.url)},getContentTypes:function(){return this.authenticatedRequest(t.api.contentTypes.url)},getContentType:function(e){return this.authenticatedRequest(t.api.contentTypes.url+"/"+e)},getContentDetail:function(e){return this.authenticatedRequest(t.api.content.url+"/"+e)},getNodeDetail:function(e){return this.authenticatedRequest(t.api.node.url+"/"+e)},getNodesChildren:function(e){return this.authenticatedRequest(t.api.nodesChildren.url.replace(":id",e))},getNodesContent:function(e){return this.authenticatedRequest(t.api.nodesContent.url.replace(":id",e))},getNodesDeep:function(e){return this.authenticatedRequest(t.api.nodesChildrenDeep.url.replace(":id",e))},getGoogleUrl:function(){return this.unAuthenticatedRequest(t.api.google.url)},authenticateToken:function(){return this.authenticatedRequest(t.api.user.url)},removeAuthToken:function(){return this.authenticatedRequest(t.api.logout.url)},post:function(t,n){var i=o.get("authToken");return e.ajax({dataType:"json",contentType:"application/json; charset=utf-8",url:t,type:"POST",data:JSON.stringify(n),headers:{Authorization:i}})},moveContent:function(e){return this.post(t.api.moveNode.url,e)},moveAsset:function(e){return this.post(t.api.moveAsset.url.replace(":id",e.nodeid),e)},copyAsset:function(e){return this.post(t.api.copyAsset.url.replace(":id",e.nodeid),e)},makeQuery:function(e){return this.post(t.api.contentQuery.url,e)},makeUsersQuery:function(e){return this.post(t.api.usersQuery.url,e)},postFolder:function(e){return this.post(t.api.node.url,e)},renameAsset:function(e,t,n){return this.post(e+"/rename",{original:t,updated:n})},getContentByContentType:function(e){return this.makeQuery({nodes:[],types:[e],filters:[]})}}}),define("resources",{api:{base:{errors:{400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",408:"Request Timeout",500:"Server Error",503:"Service Unavailable"}},login:{errors:{400:"Bad Request",401:"Incorrect Username Or Password",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",408:"Request Timeout",500:"Server Error",503:"Service Unavailable"}}},user:{dontHaveAccount:"Don't have an account?",loggedInAs:"Logged in as",signIn:"Sign In",signInRegisteredUser:"Sign in using your registered account:",signUp:"Sign Up",userDetailHeaderText:"Profile for: ",unlinkModalWithBasic:{header:"Unlink Google",msg:"Are you sure you want to remove google log in?"},unlinkModalWithoutBasic:{header:"Unlink Google",msg:"You are about to unlink this Google account without a username and password. Clicking continue will disable this user account."},unlinkSuccessModal:{header:"Unlink Success",msg:"You successfully unlinked your google account.",hideCancel:!0},linkModal:{header:"Link Google",msg:"Are you sure you want to link your google account?"},linkModalSuccess:{header:"Link Success",msg:"You successfully linked your google account.",hideCancel:!0},"delete":{warningMessage:"Are you sure you want to delete this user?",success:"User Successfully Deleted",failure:"Failed to delete user."},attributeTitles:{name:"USER NAME:",firstName:"FIRST NAME",lastName:"LAST NAME",displayname:"DISPLAY NAME",role:"USER ROLE",enabled:"ENABLED?",email:"EMAIL",username:"USERNAME",password:"PASSWORD",createdby:"CREATED BY",updatedby:"UPDATED BY",profile:"PROFILE",linkedidentities:"LINKED IDENTITIES"},selfLockWarning:"You are about to disable yourself and lose access to the system. Are you sure you want to do this? (You Will still need to save to apply changes.",roles:["admin","editor","author","reader","external","none"],successfullyUpdated:"User was successfully updated",updateError:"User was successfully updated",errors:{403:"You do not have adequate permissions to view/edit this profile."},newUserAdded:"New User Added",couldNotFindUserContentType:"Could not find Users content type. Please make one.",addNewUser:"Add New User",blocks:{lockUser:"Lock this user",unlockUser:"This user is currently locked.",lockUserSubtext:"Locking a user will prevent them from logging in and using the system.",lockUserButton:"Lock user",unlockUserButton:"Unlock user",deleteUser:"Remove user",deleteUserSubtext:"Deleting a user will permanently remove them from the system. This operation cannot be undone.",deleteUserButton:"Remove user"}},site:{about:"About Grasshopper"},mastheadButtons:{createContent:"Create Content",uploadFile:"Upload File",createFolder:"Create Folder",actions:"Actions",addNewUser:"Add New User",addContentType:"New Content Type",editNodeName:"Edit Name",editNodeContentTypes:"Edit Content Types",deleteNode:"Delete"},node:{deletionWarning:"Are you sure you want to delete this folder? All of its contents will also be deleted.",userDeletionWarning:"Are you sure that you want to delete this user?",successfullyDeletedWithoutLabel:"Successfully deleted",successfullyDeleted:"Item :item was successfully deleted.",successfullyUpdated:"Folder was successfully updated.",errorUpdated:"Folder could not be updated.",errorDeleted:"There was an issue deleting this folder: ",enterName:"Please enter the name of the folder: ",errorCreating:"Folder could not be added.",editName:"Edit folder name",emptyNode:"This folder does not contain any folders.",emptyContent:"This folder does not contain any content.",clickToAdd:"Click to add some."},contentItem:{deletionWarning:"Are you sure you want to delete this content?",successfullyDeleted:"Content :item was successfully deleted.",errorDeleted:"There was an issue deleting this content: ",readonly:"Readonly",labelErrorMessage:"Label is a required field.",successfullySaved:"Content successfully saved.",failedToSave:"Content could not be saved.",failedToFetch:"Content could not be retrieved.",failedToFetchContentsContentType:"Could not retrieve content type for this content.",label:"Label",labelRequiredMessage:"Label is a required field.",author:"Author",slug:"Slug",status:"Status",parent:"Parent Folder",id:"Content Id",type:"Content Type"},contentType:{addContentTypes:"Add Content Types: ",editContentTypes:"Edit allowed Content Types",contentTypeAdded:"Content Type Added",deletionWarningWithoutAssociatedContent:"Are you sure you want to delete this content type?",deletionWarningWithAssociatedContent:"You have :count of content associated with this content type. If you confirm it will all be deleted!",successfullyDeleted:"Content Type :item was successfully deleted.",errorDeleted:"There was an issue deleting this content type: ",serverError:"Content Types could not be retrieved.",selectContentType:"Which Content Type would you like to use?",contentInRoot:"You cannot create content in the Root.",noContentTypes:"This folder has no allowed content types.",noContentTypesCreated:"There are currently no content types.",fields:"Fields",fieldType:"Field Type",addNewField:"Add New Field",successfulSave:"Content type successfully saved.",failedSave:"Content type could not be saved.",removeFieldWarning:"If you delete this field it will be deleted from all content of this type.",addOption:"Add Option",helpText:"Help Text",description:"Description",emptyFields:'Click "Add new field" to add your first field.',switchingBetweenSimpleAndComplexTypesWarning:"You are switching between simple and complex data types. If you confirm, your content may be corrupted!",selectOption:"Please Select",thisFieldHasNoValidation:"This field has no validations",addValidationType:"Add Validation",validation:{mustHaveLabel:"Content type must have a title.",fieldsMustHaveLabel:"All fields must have a name.",fieldsMustHaveIds:"All fields should have ids",fieldsMustBeUnique:"All fields ids should be unique",firstFieldIsNotAStringWarning:"The first field in this content type is not a string. This could cause weird behavior in your content labels."}},asset:{deletionWarning:"Are you sure you want to delete this asset?",successfullyDeleted:"Asset Name: :asset was successfully deleted.",errorDeleted:"There was an issue deleting this asset: ",editFileName:"Edit File Name",editNameSuccess:"File name was successfully updated.",editNameFail:"File name could not be updated.",uploadAssetError:"Upload Failed",dragFilesHere:"Drag and Drop Files Here. Or Click to Select.",uploadInRoot:"You cannot upload assets in the Root.",uploadAssetModalMsg:"Upload an Asset.",emptyNode:"This folder does not contain any files.",clickToAdd:"Click to add some."},clipboard:{cut:"Cut",copy:"Copy",paste:"Paste",clear:"Clear Clipboard",warningPaste:"You are about to :op :nr_items :items to the :folder folder",differentContentTypesWarning:"Clipboard contains items of different types ",noOperationSpecified:"No operation specified",cannotCompleteOperation:"Cannot complete operation",itemsInClipboard:"item in clipboard",toClipboard:"to clipboard",copied:"Copied"},contentBrowse:{author:"Author",modified:"Modified"},fileIndex:{files:"Files",fileName:"File Name",size:"Size",modified:"Modified"},pluginWrapper:{emptyFieldsMessage:"not set.",clickToAdd:"Click To Add."},plugins:{author:{selectUser:"Select User",noPermissions:"You don't have permissions to query users list. You can only select current user."},codeEditor:{language:"Language",theme:"Theme",loading:"LOADING CODE EDITOR..."},contentReference:{allowedContentTypes:"Allowed Content Types",selectedContent:"Selected Content",currentFolder:"Current Folder",selectDefaultFolder:"Select Default Folder",defaultFolder:"Default Folder",contentTypes:"Content Types",selectContent:"Select Content",viewContent:"View Content"},dropdown:{selectOption:"Please Select"},editorialWindow:{loading:"Loading editorial window...",startAfterEnd:"Start date is after end date",setToNow:"Set to now",start:"Start",end:"End",neverExpire:"Never Expire",dateFormat:"YYYY/MM/DD h:mm a"},embeddedType:{contentType:"Content Type",validation:{content:{},setup:{nooptions:"Missing embedded type options. Please select a content type to embed from the dropdown."}}},fileReference:{selectedFile:"Selected File",currentFolder:"Current Folder",selectDefaultFolderOr:"Select Default Folder or",setRootAsDefault:"Set Root Folder as Default",defaultFolder:"Default Folder",contentTypes:"Content Types",selectFile:"Select File",viewSelectedFile:"View Selected File"},richText:{selectFile:"Select File",loading:"LOADING RICH TEXT..."},slug:{refresh:"Refresh",selectField:"Select Field"},jsonEditor:{language:"Language",theme:"Theme",loading:"LOADING JSON EDITOR..."}},validationViews:{deletionWarning:"You are about to delete a validation field. Are you sure you want to do this?"},actions:"Actions",advancedSearch:"Advanced Search",add:"Add",addNewUser:"Add New User",addFilter:"Add Filter",allowMultiple:"Allow Multiple",showMultipleSettings:"Show Multiple Settings",allowMultipleSettings:"Allow Multiple Settings",cancel:"Cancel",close:"Close",comparator:"Comparator",confirm:"Confirm",content:"Content",contentTypes:"Content Types",forbidden:"Forbidden",notFound:"Not Found",currentlySignedIn:"You are currently signed in.",dashboard:"Dashboard",defaultValue:"Default Value",download:"Download",edit:"Edit",email:"Email",enabled:"Enabled",error:"Error",emptySearchResult:"Ooops, try one more time.",falseText:"False",from:"From",filters:"Filters",helpText:"Help Text",id:"ID",key:"Key",label:"Label",login:"Login",displayname:"Display Name",log_in:"Log In",logInWithGoogle:"Login with Google",log_out:"Log Out",match:"Match",maximum:"Maximum",max:"Max",menu:"Menu",minimum:"Minimum",min:"Min",multiple:"Multiple",name:"Name",next:"Next",newWord:"New",no:"No",nodes:"Nodes",ok:"Ok",options:"Options",open:"Open",password:"Password",previous:"Previous",profile:"Profile",remind:"Remind",remove:"Remove",reset:"Reset",retry:"Retry",required:"Required",role:"Role",root:"Root",save:"Save",saveAndClose:"Save and Close",selectOption:"Please Select",select:"Select",selectAll:"Select All",settings:"Settings",siteName:"Grasshopper",status:"Status",success:"Success",summary:"Summary",thisIsNotImplemented:"This is not yet implemented.",title:"Title",to:"To",trueText:"True",type:"Type",types:"Types",upload:"Upload",uploadFile:"Upload File",user_name:"User Name",users:"Users",sysInfo:"Info",value:"Value",validation:"Validation",warning:"Warning!",welcomeBack:"Welcome Back",where:"Where",yes:"Yes"}),function(e,t){function n(e,t,n){return e.addEventListener?void e.addEventListener(t,n,!1):void e.attachEvent("on"+t,n)}function i(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return k[e.which]?k[e.which]:S[e.which]?S[e.which]:String.fromCharCode(e.which).toLowerCase()}function s(e,t){return e.sort().join(",")===t.sort().join(",")}function o(e){e=e||{};var t,n=!1;for(t in A)e[t]?n=!0:A[t]=0;n||(O=!1)}function r(e,t,n,i,o,r){var a,l,c=[],d=n.type;if(!E[e])return[];for("keyup"==d&&p(e)&&(t=[e]),a=0;a<E[e].length;++a)if(l=E[e][a],(i||!l.seq||A[l.seq]==l.level)&&d==l.action&&("keypress"==d&&!n.metaKey&&!n.ctrlKey||s(t,l.modifiers))){var u=!i&&l.combo==o,h=i&&l.seq==i&&l.level==r;(u||h)&&E[e].splice(a,1),c.push(l)}return c}function a(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}function l(e){return e.preventDefault?void e.preventDefault():void(e.returnValue=!1)}function c(e){return e.stopPropagation?void e.stopPropagation():void(e.cancelBubble=!0)}function d(e,t,n,i){I.stopCallback(t,t.target||t.srcElement,n,i)||e(t,n)===!1&&(l(t),c(t))}function u(e,t,n){var i,s=r(e,t,n),a={},l=0,c=!1;for(i=0;i<s.length;++i)s[i].seq&&(l=Math.max(l,s[i].level));for(i=0;i<s.length;++i)if(s[i].seq){if(s[i].level!=l)continue;c=!0,a[s[i].seq]=1,d(s[i].callback,n,s[i].combo,s[i].seq)}else c||d(s[i].callback,n,s[i].combo);var u="keypress"==n.type&&F;n.type!=O||p(e)||u||o(a),F=c&&"keydown"==n.type}function h(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=i(e);if(t)return"keyup"==e.type&&N===t?void(N=!1):void I.handleKey(t,a(e),e)}function p(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function f(){clearTimeout(T),T=setTimeout(o,1e3)}function m(){if(!C){C={};for(var e in k)e>95&&112>e||k.hasOwnProperty(e)&&(C[k[e]]=e)}return C}function v(e,t,n){return n||(n=m()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function g(e,t,n,s){function r(t){return function(){O=t,++A[e],f()}}function a(t){d(n,t,e),"keyup"!==s&&(N=i(t)),setTimeout(o,10)}A[e]=0;for(var l=0;l<t.length;++l){var c=l+1===t.length,u=c?a:r(s||b(t[l+1]).action);w(t[l],u,s,e,l)}}function y(e){return"+"===e?["+"]:e.split("+")}function b(e,t){var n,i,s,o=[];for(n=y(e),s=0;s<n.length;++s)i=n[s],D[i]&&(i=D[i]),t&&"keypress"!=t&&_[i]&&(i=_[i],o.push("shift")),p(i)&&o.push(i);return t=v(i,o,t),{key:i,modifiers:o,action:t}}function w(e,t,n,i,s){M[e+":"+n]=t,e=e.replace(/\s+/g," ");var o,a=e.split(" ");return a.length>1?void g(e,a,t,n):(o=b(e,n),E[o.key]=E[o.key]||[],r(o.key,o.modifiers,{type:o.action},i,e,s),void E[o.key][i?"unshift":"push"]({callback:t,modifiers:o.modifiers,action:o.action,seq:i,level:s,combo:e}))}function x(e,t,n){for(var i=0;i<e.length;++i)w(e[i],t,n)}for(var C,T,k={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},S={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},_={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},D={option:"alt",command:"meta","return":"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},E={},M={},A={},N=!1,F=!1,O=!1,j=1;20>j;++j)k[111+j]="f"+j;for(j=0;9>=j;++j)k[j+96]=j;n(t,"keypress",h),n(t,"keydown",h),n(t,"keyup",h);var I={bind:function(e,t,n){return e=e instanceof Array?e:[e],x(e,t,n),this},unbind:function(e,t){return I.bind(e,function(){},t)},trigger:function(e,t){return M[e+":"+t]&&M[e+":"+t]({},e),this},reset:function(){return E={},M={},this},stopCallback:function(e,t){return(" "+t.className+" ").indexOf(" mousetrap ")>-1?!1:"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},handleKey:u};e.Mousetrap=I,"function"==typeof define&&define.amd&&define("mousetrap",I)}(window,document),define("text",["module"],function(e){"use strict";var t,n,i,s,o,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,d=c&&location.protocol&&location.protocol.replace(/\:/,""),u=c&&location.hostname,h=c&&(location.port||void 0),p={},f=e.config&&e.config()||{};return t={version:"2.0.10",strip:function(e){if(e){e=e.replace(a,"");var t=e.match(l);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:f.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(i){}if(e){r=[n];break}}return e},parseName:function(e){var t,n,i,s=!1,o=e.indexOf("."),r=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!r||o>1)?(t=e.substring(0,o),n=e.substring(o+1,e.length)):t=e,i=n||t,o=i.indexOf("!"),-1!==o&&(s="strip"===i.substring(o+1),i=i.substring(0,o),n?n=i:t=i),{moduleName:t,ext:n,strip:s}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,i,s){var o,r,a,l=t.xdRegExp.exec(e);return l?(o=l[2],r=l[3],r=r.split(":"),a=r[1],r=r[0],!(o&&o!==n||r&&r.toLowerCase()!==i.toLowerCase()||(a||r)&&a!==s)):!0},finishLoad:function(e,n,i,s){i=n?t.strip(i):i,f.isBuild&&(p[e]=i),s(i)},load:function(e,n,i,s){if(s.isBuild&&!s.inlineText)return void i();f.isBuild=s.isBuild;var o=t.parseName(e),r=o.moduleName+(o.ext?"."+o.ext:""),a=n.toUrl(r),l=f.useXhr||t.useXhr;return 0===a.indexOf("empty:")?void i():void(!c||l(a,d,u,h)?t.get(a,function(n){t.finishLoad(e,o.strip,n,i)
},function(e){i.error&&i.error(e)}):n([r],function(e){t.finishLoad(o.moduleName+"."+o.ext,o.strip,e,i)}))},write:function(e,n,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);i.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,i,s,o){var r=t.parseName(n),a=r.ext?"."+r.ext:"",l=r.moduleName+a,c=i.toUrl(r.moduleName+a)+".js";t.load(l,i,function(){var n=function(e){return s(c,e)};n.asModule=function(e,t){return s.asModule(e,c,t)},t.write(e,l,n,o)},o)}},"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),t.get=function(e,t,i){try{var s=n.readFileSync(e,"utf8");0===s.indexOf("﻿")&&(s=s.substring(1)),t(s)}catch(o){i(o)}}):"xhr"===f.env||!f.env&&t.createXhr()?t.get=function(e,n,i,s){var o,r=t.createXhr();if(r.open("GET",e,!0),s)for(o in s)s.hasOwnProperty(o)&&r.setRequestHeader(o.toLowerCase(),s[o]);f.onXhr&&f.onXhr(r,e),r.onreadystatechange=function(){var t,s;4===r.readyState&&(t=r.status,t>399&&600>t?(s=new Error(e+" HTTP status: "+t),s.xhr=r,i(s)):n(r.responseText),f.onXhrComplete&&f.onXhrComplete(r,e))},r.send(null)}:"rhino"===f.env||!f.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,i,s="utf-8",o=new java.io.File(e),r=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),s)),l="";try{for(n=new java.lang.StringBuffer,i=a.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=a.readLine());)n.append(r),n.append(i);l=String(n.toString())}finally{a.close()}t(l)}:("xpconnect"===f.env||!f.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,s=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),o="@mozilla.org/windows-registry-key;1"in i,t.get=function(e,t){var n,r,a,l={};o&&(e=e.replace(/\//g,"\\")),a=new FileUtils.File(e);try{n=i["@mozilla.org/network/file-input-stream;1"].createInstance(s.nsIFileInputStream),n.init(a,1,0,!1),r=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(s.nsIConverterInputStream),r.init(n,"utf-8",n.available(),s.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(n.available(),l),r.close(),n.close(),t(l.value)}catch(c){throw new Error((a&&a.path||"")+": "+c)}}),t}),define("text!views/alertBox/alertBoxView.html",[],function(){return'<div class="alertBoxPartial" data-rv-addClass="model:style" style="display: none;">\n    <div class="alertImage"><i class="fa" data-rv-addClass="model:icon"></i></div>\n    <div class="alertHeader">{{model:header}}</div>\n    <div class="alertMessage">{{model:msg | humanize}}</div>\n    <a class="alertClose"  data-rv-on-click="view.closeAlertBox">&times;</a>\n</div>\n'}),define("grasshopperModel",["backbone","masseuse","resources","constants","underscore","helpers","jquery"],function(e,t,n,i,s,o,r){"use strict";function a(t){var n=p.get("authToken"),i=Array.prototype.slice.call(arguments,0),o={data:{},headers:{Authorization:n},success:function(){}};return t&&(s.extend(o.data,t.data),s.extend(o.headers,t.headers),s.extend(o.success,t.success),o.error=t.error),i[0]=o,e.Model.prototype.fetch.apply(this,i)}function l(t){var n,i,o=s.extend({},t,{headers:{Authorization:p.get("authToken")}});return i=e.Model.prototype.save.call(this,null,o),i?i:(n=new r.Deferred,n.reject(),n.promise())}function c(t){return t=t||{},t.headers=s.extend({},t.headers,{Authorization:p.get("authToken")}),e.Model.prototype.destroy.call(this,t)}function d(){return s.clone(s.omit(this.attributes,"resources","contants","schema","plugins","href"))}function u(e){this.set(e,this.get(e)?!1:!0)}var h=t.MasseuseModel,p=o.localStorage;return h.extend({fetch:a,save:l,destroy:c,toJSON:d,toggle:u})}),define("alertBoxViewModel",["grasshopperModel","masseuse"],function(e,t){"use strict";var n=t.ComputedProperty;return e.extend({defaults:{error:"",icon:new n(["style"],function(e){switch(e){case"success":return"fa-check";case"info":return"fa-info";case"error":return"fa-ban";case"warning":return"fa-exclamation-triangle"}})}})}),define("alertBoxViewConfig",["text!views/alertBox/alertBoxView.html","alertBoxViewModel"],function(e,t){"use strict";return{name:"alertBoxView",ModelType:t,appendTo:"#alertBox",wrapper:!1,template:e,events:{},listeners:[["channels.views","hideAlertBoxes","hideAlertsOnNavigate"]]}}),define("alertBoxView",["masseuse","alertBoxViewConfig"],function(e,t){"use strict";function n(){this.$el.fadeIn(),this.model.get("temporary")&&i.call(this)}function i(){var e=this;setTimeout(function(){e.$el&&e.$el.fadeOut("400",e.remove.bind(e))},5e3)}function s(){this.model.get("temporary")||this.closeAlertBox()}function o(){return this.$el.fadeOut("400",this.remove.bind(this)),!1}var r=e.plugins.rivets.RivetsView;return r.extend({defaultOptions:t,afterRender:n,hideAlertsOnNavigate:s,closeAlertBox:o})}),define("mixins/alertBox",["alertBoxView"],function(e){"use strict";function t(t){var n=new e({modelData:t});n.start()}function n(e){e.temporary=!0,this.displayAlertBox(e)}function i(){this.channels.views.trigger("hideAlertBoxes")}return{displayAlertBox:t,displayTemporaryAlertBox:n,hideAlertBox:i}}),define("text!views/modal/modalView.html",[],function(){return'<div id="modalContainer">\n    <div id="modalContents">\n\n        <div id="modalHeader" class="row">\n            {{model:header}}\n        </div>\n\n        <div id="modalBody">\n            {{model:msg}}\n        </div>\n\n        <div id="buttonContainer" class="row">\n            <div class="right">\n                <button class="button tiny radius noMarginBottom" data-rv-hide="model:hideConfirm"\n                        data-rv-on-click="view.confirmModal">\n                    {{model:resources->confirm}}\n                </button>\n\n                <button class="button tiny radius noMarginBottom" data-rv-hide="model:hideCancel"\n                        data-rv-on-click="view.cancelModal">\n                    {{model:resources->cancel}}\n                </button>\n            </div>\n        </div>\n\n    </div>\n</div>\n'}),define("modalViewModel",["masseuse","resources","constants"],function(e,t,n){"use strict";var i=e.MasseuseModel;return i.extend({defaults:{resources:t,constants:n,withSearch:!1,files:[]}})}),function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define("sparkmd5",e);else{var t;try{t=window}catch(n){t=self}t.SparkMD5=e()}}(function(){"use strict";var e=function(e,t){return e+t&4294967295},t=function(t,n,i,s,o,r){return n=e(e(n,t),e(s,r)),e(n<<o|n>>>32-o,i)},n=function(e,n,i,s,o,r,a){return t(n&i|~n&s,e,n,o,r,a)},i=function(e,n,i,s,o,r,a){return t(n&s|i&~s,e,n,o,r,a)},s=function(e,n,i,s,o,r,a){return t(n^i^s,e,n,o,r,a)},o=function(e,n,i,s,o,r,a){return t(i^(n|~s),e,n,o,r,a)},r=function(t,r){var a=t[0],l=t[1],c=t[2],d=t[3];a=n(a,l,c,d,r[0],7,-680876936),d=n(d,a,l,c,r[1],12,-389564586),c=n(c,d,a,l,r[2],17,606105819),l=n(l,c,d,a,r[3],22,-1044525330),a=n(a,l,c,d,r[4],7,-176418897),d=n(d,a,l,c,r[5],12,1200080426),c=n(c,d,a,l,r[6],17,-1473231341),l=n(l,c,d,a,r[7],22,-45705983),a=n(a,l,c,d,r[8],7,1770035416),d=n(d,a,l,c,r[9],12,-1958414417),c=n(c,d,a,l,r[10],17,-42063),l=n(l,c,d,a,r[11],22,-1990404162),a=n(a,l,c,d,r[12],7,1804603682),d=n(d,a,l,c,r[13],12,-40341101),c=n(c,d,a,l,r[14],17,-1502002290),l=n(l,c,d,a,r[15],22,1236535329),a=i(a,l,c,d,r[1],5,-165796510),d=i(d,a,l,c,r[6],9,-1069501632),c=i(c,d,a,l,r[11],14,643717713),l=i(l,c,d,a,r[0],20,-373897302),a=i(a,l,c,d,r[5],5,-701558691),d=i(d,a,l,c,r[10],9,38016083),c=i(c,d,a,l,r[15],14,-660478335),l=i(l,c,d,a,r[4],20,-405537848),a=i(a,l,c,d,r[9],5,568446438),d=i(d,a,l,c,r[14],9,-1019803690),c=i(c,d,a,l,r[3],14,-187363961),l=i(l,c,d,a,r[8],20,1163531501),a=i(a,l,c,d,r[13],5,-1444681467),d=i(d,a,l,c,r[2],9,-51403784),c=i(c,d,a,l,r[7],14,1735328473),l=i(l,c,d,a,r[12],20,-1926607734),a=s(a,l,c,d,r[5],4,-378558),d=s(d,a,l,c,r[8],11,-2022574463),c=s(c,d,a,l,r[11],16,1839030562),l=s(l,c,d,a,r[14],23,-35309556),a=s(a,l,c,d,r[1],4,-1530992060),d=s(d,a,l,c,r[4],11,1272893353),c=s(c,d,a,l,r[7],16,-155497632),l=s(l,c,d,a,r[10],23,-1094730640),a=s(a,l,c,d,r[13],4,681279174),d=s(d,a,l,c,r[0],11,-358537222),c=s(c,d,a,l,r[3],16,-722521979),l=s(l,c,d,a,r[6],23,76029189),a=s(a,l,c,d,r[9],4,-640364487),d=s(d,a,l,c,r[12],11,-421815835),c=s(c,d,a,l,r[15],16,530742520),l=s(l,c,d,a,r[2],23,-995338651),a=o(a,l,c,d,r[0],6,-198630844),d=o(d,a,l,c,r[7],10,1126891415),c=o(c,d,a,l,r[14],15,-1416354905),l=o(l,c,d,a,r[5],21,-57434055),a=o(a,l,c,d,r[12],6,1700485571),d=o(d,a,l,c,r[3],10,-1894986606),c=o(c,d,a,l,r[10],15,-1051523),l=o(l,c,d,a,r[1],21,-2054922799),a=o(a,l,c,d,r[8],6,1873313359),d=o(d,a,l,c,r[15],10,-30611744),c=o(c,d,a,l,r[6],15,-1560198380),l=o(l,c,d,a,r[13],21,1309151649),a=o(a,l,c,d,r[4],6,-145523070),d=o(d,a,l,c,r[11],10,-1120210379),c=o(c,d,a,l,r[2],15,718787259),l=o(l,c,d,a,r[9],21,-343485551),t[0]=e(a,t[0]),t[1]=e(l,t[1]),t[2]=e(c,t[2]),t[3]=e(d,t[3])},a=function(e){var t,n=[];for(t=0;64>t;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n},l=function(e){var t,n=[];for(t=0;64>t;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n},c=function(e){var t,n,i,s,o,l,c=e.length,d=[1732584193,-271733879,-1732584194,271733878];for(t=64;c>=t;t+=64)r(d,a(e.substring(t-64,t)));for(e=e.substring(t-64),n=e.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;n>t;t+=1)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(r(d,i),t=0;16>t;t+=1)i[t]=0;return s=8*c,s=s.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(s[2],16),l=parseInt(s[1],16)||0,i[14]=o,i[15]=l,r(d,i),d},d=function(e){var t,n,i,s,o,a,c=e.length,d=[1732584193,-271733879,-1732584194,271733878];for(t=64;c>=t;t+=64)r(d,l(e.subarray(t-64,t)));for(e=c>t-64?e.subarray(t-64):new Uint8Array(0),n=e.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;n>t;t+=1)i[t>>2]|=e[t]<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(r(d,i),t=0;16>t;t+=1)i[t]=0;return s=8*c,s=s.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(s[2],16),a=parseInt(s[1],16)||0,i[14]=o,i[15]=a,r(d,i),d},u=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],h=function(e){var t,n="";for(t=0;4>t;t+=1)n+=u[e>>8*t+4&15]+u[e>>8*t&15];return n},p=function(e){var t;for(t=0;t<e.length;t+=1)e[t]=h(e[t]);return e.join("")},f=function(e){return p(c(e))},m=function(){this.reset()};return"5d41402abc4b2a76b9719d911017c592"!==f("hello")&&(e=function(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n}),m.prototype.append=function(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),this.appendBinary(e),this},m.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,n=this._buff.length;for(t=64;n>=t;t+=64)r(this._state,a(this._buff.substring(t-64,t)));return this._buff=this._buff.substr(t-64),this},m.prototype.end=function(e){var t,n,i=this._buff,s=i.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;s>t;t+=1)o[t>>2]|=i.charCodeAt(t)<<(t%4<<3);return this._finish(o,s),n=e?this._state:p(this._state),this.reset(),n},m.prototype._finish=function(e,t){var n,i,s,o=t;if(e[o>>2]|=128<<(o%4<<3),o>55)for(r(this._state,e),o=0;16>o;o+=1)e[o]=0;n=8*this._length,n=n.toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(n[2],16),s=parseInt(n[1],16)||0,e[14]=i,e[15]=s,r(this._state,e)},m.prototype.reset=function(){return this._buff="",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},m.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},m.hash=function(e,t){/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e)));var n=c(e);return t?n:p(n)},m.hashBinary=function(e,t){var n=c(e);return t?n:p(n)},m.ArrayBuffer=function(){this.reset()},m.ArrayBuffer.prototype.append=function(e){var t,n=this._concatArrayBuffer(this._buff,e),i=n.length;for(this._length+=e.byteLength,t=64;i>=t;t+=64)r(this._state,l(n.subarray(t-64,t)));return this._buff=i>t-64?n.subarray(t-64):new Uint8Array(0),this},m.ArrayBuffer.prototype.end=function(e){var t,n,i=this._buff,s=i.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;s>t;t+=1)o[t>>2]|=i[t]<<(t%4<<3);return this._finish(o,s),n=e?this._state:p(this._state),this.reset(),n},m.ArrayBuffer.prototype._finish=m.prototype._finish,m.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},m.ArrayBuffer.prototype.destroy=m.prototype.destroy,m.ArrayBuffer.prototype._concatArrayBuffer=function(e,t){var n=e.length,i=new Uint8Array(n+t.byteLength);return i.set(e),i.set(new Uint8Array(t),n),i},m.ArrayBuffer.hash=function(e,t){var n=d(new Uint8Array(e));return t?n:p(n)},m}),define("formatters",["sparkmd5","constants"],function(e,t){"use strict";function n(e,t){return t+e}function i(e,t){return e>t}function s(e){return e}function o(e){return parseInt(e,10)}function r(e){return e&&e.length>0}function a(e,t){return"desc"===t?e.sort().reverse():e.sort()}function l(e,t,n){var i,s="desc"===n,o=function(e,n){return i=e[t]<n[t]?-1:e[t]>n[t]?1:0,i*[1,-1][+!!s]};return e.sort(o)}function c(t,n){var i=t?e.hash(t.toLowerCase()):"";return"http://www.gravatar.com/avatar/"+i+"?s="+n+"&d=mm"}function d(e){return function(t){return t.stopImmediatePropagation(),e.call(this,t),!1}}function u(e){return function(t){return t.preventDefault(),e.call(this,t),!1}}function h(e){return"true"===e||e===!0}function p(e){return t.internalRoutes.userDetail.replace(":id",e)}return{prepend:n,isGreaterThan:i,asNumber:{read:s,publish:o},hasLength:r,sort:a,sortBy:l,gravatarUrl:c,preventDefault:u,stopImmediatePropagation:d,asBoolean:h,asUserDetailsLink:p}}),define("modalViewBinders",["jquery","underscore","constants"],function(e,t,n){"use strict";var i=n.fileExtensionsMap,s=n.imageExtensions;return{checkfileextension:function(n,o){var r=o?t.last(o.split(".")).toLowerCase():"";t.has(i,r)?(e(n).removeClass("hide").addClass("fileExtension"),e(n).children().addClass(i[r])):t.has(i,r)||-1!==t.indexOf(s,r)||(e(n).removeClass("hide").addClass("fileExtension"),e(n).children().addClass("fa-file-o"))},checkfileextensionbutton:function(n,i){var o=t.last(i.split("."));-1===t.indexOf(s,o)&&e(n).removeClass("hide")}}}),define("modalViewFormatters",[],function(){"use strict";function e(e){return e.length?!0:!1}return{canShow:e}}),define("modalViewConfig",["text!views/modal/modalView.html","modalViewModel","formatters","modalViewBinders","modalViewFormatters"],function(e,t,n,i,s){"use strict";return{name:"modalView",ModelType:t,appendTo:"#modal",wrapper:!1,template:e,events:{"change #uploadFileInput":"handleFileSelect"},viewOptions:["withSearch"],rivetsConfig:{formatters:[n,s],binders:[i],instaUpdate:!0},transitions:"none"}}),define("text!views/modal/_imageModalView.html",[],function(){return'<div id="modalContainer">\n    <div id="modalContents">\n\n        <div id="modalHeader" class="row">\n            {{model:header}}\n        </div>\n\n        <div id="modalBody" class="row">\n            <div data-rv-checkfileextension="model:data" class="hide">\n                <div class="fileExtensionIcon fa"></div>\n            </div>\n            <img data-rv-src="model:data" class="imageContainer">\n            <div class="row collapse imageModalUrl">\n                <input id="imageURL" data-rv-value="model:data" readonly>\n            </div>\n        </div>\n\n        <div id="buttonContainer" class="row">\n            <div class="right">\n                <a data-rv-href="model:data" class="button hide tiny radius noMarginBottom" target="_blank" data-rv-on-click="view.confirmModal" data-rv-checkfileextensionbutton="model:data">\n                    <i class="fa fa-external-link"></i>\n                    {{model:resources->open | spaceBefore}}\n                </a>\n\n                <a download data-rv-href="model:data" class="button tiny radius noMarginBottom" data-rv-on-click="view.confirmModal">\n                    <i class="fa fa-download"></i>\n                    {{model:resources->download | spaceBefore}}\n                </a>\n\n                <button class="button tiny radius noMarginBottom" data-rv-on-click="view.cancelModal">\n                    {{model:resources->close}}\n                </button>\n            </div>\n        </div>\n\n    </div>\n</div>\n'}),define("text!views/modal/_inputModalView.html",[],function(){return'<div id="modalContainer">\n    <div id="modalContents">\n\n        <div id="modalHeader" class="row">\n            {{model:header}}\n        </div>\n\n        <div id="modalBody" class="row">\n            <input type="text" class="noMarginBottom" data-rv-value="model:data" data-rv-on-enter-key-press="confirmModal"/>\n        </div>\n\n        <div id="buttonContainer" class="row">\n            <div class="right">\n                <button class="button tiny radius noMarginBottom" data-rv-enabled="model:data | hasLength"  data-rv-on-click="view.confirmModal">\n                    {{model:resources->save}}\n                </button>\n\n                <button class="button tiny radius noMarginBottom" data-rv-on-click="view.cancelModal">\n                    {{model:resources->cancel}}\n                </button>\n            </div>\n        </div>\n\n    </div>\n</div>\n'}),define("text!views/modal/_checkboxModalView.html",[],function(){return'<div id="modalContainer">\n    <div id="modalContents">\n\n        <div id="modalHeader" class="row">\n            <h2 class="modalHeader-title">{{model:header}}</h2>\n            <div id="contentTypeSearch" data-rv-if="model:withSearch">\n                <input class="contentTypeSearchInput" type="text" placeholder="Search by content type label " data-rv-value="model:contentTypeSearchValue" data-rv-on-keyup="view.searchContentType"/>\n                <span class="contentTypeSearchIcon fa fa-search"></span>\n            </div>\n        </div>\n\n        <div id="modalBody" class="row">\n\n            <div class="small-12 columns inputContainer">\n\n                <div class="row" data-rv-each-type="model:data">\n\n                    <div class="small-12 columns">\n\n                        <input data-rv-id="type._id" type="checkbox" data-rv-checked="type.checked">\n\n                        <label class="inline" data-rv-for="type._id">\n                            <span data-rv-unless="type.helpText">\n                                {{type.label}}\n                            </span>\n\n                            <span data-rv-if="type.helpText" data-tooltip class="has-tip" data-rv-title="type.helpText">\n                                {{type.label}}\n                            </span>\n                        </label>\n\n                    </div>\n\n                </div>\n\n                <div class="row" data-rv-if="model:withSearch">\n                    <div class="small-12 columns" data-rv-unless="model:data | canShow">\n                        <label class="inline modalEmptySearch">{{model:resources->emptySearchResult}}</label>\n                    </div>\n                </div>\n\n            </div>\n\n        </div>\n\n        <div id="buttonContainer" class="row">\n            <div class="right">\n                <button class="button tiny radius noMarginBottom" data-rv-on-click="view.confirmModal">\n                    {{model:resources->confirm}}\n                </button>\n\n                <button class="button tiny radius noMarginBottom" data-rv-on-click="view.cancelModal">\n                    {{model:resources->cancel}}\n                </button>\n            </div>\n        </div>\n\n    </div>\n</div>\n'}),define("text!views/modal/_uploadModalView.html",[],function(){return'<div id="modalContainer">\n    <div id="modalContents">\n\n        <div id="modalHeader" class="row">\n            {{model:header}}\n        </div>\n\n        <div id="modalBody">\n\n            <div id="dropZone"\n                 data-rv-on-click="view.fireClickOnUploadFileInput"\n                 data-rv-on-dragover="view.handleDragOver"\n                 data-rv-on-drop="view.handleFileDrop"\n                 data-rv-on-dragleave="view.handleDragLeave">\n\n                {{model:resources->asset->dragFilesHere}}\n            </div>\n\n            <input type="file" id="uploadFileInput" name="files" multiple="multiple"/>\n\n            <div class="row">\n                <div class="left small-12">\n                    <span data-rv-show="model:files">Selected Files:</span>\n\n                </div>\n                <hr/>\n            </div>\n\n            <ol class="noMarginBottom">\n                <li data-rv-each-file="model:files">{{file.name | withColon}}{{file.size | prettyFileSize |\n                    withColon}}{{file.type}}\n                </li>\n            </ol>\n        </div>\n\n        <div id="buttonContainer" class="row">\n            <div class="right">\n                <button class="button tiny radius noMarginBottom" data-rv-on-click="view.confirmModal">\n                    {{model:resources->confirm}}\n                </button>\n\n                <button class="button tiny radius noMarginBottom" data-rv-on-click="view.cancelModal">\n                    {{model:resources->cancel}}\n                </button>\n            </div>\n        </div>\n\n    </div>\n</div>\n'}),define("text!views/modal/_radioModalView.html",[],function(){return'<div id="modalContainer">\n    <div id="modalContents">\n\n        <div id="modalHeader" class="row">\n            <h2 class="modalHeader-title">{{model:header}}</h2>\n            <div id="contentTypeSearch" data-rv-if="model:withSearch">\n                <input class="contentTypeSearchInput" type="text" placeholder="Search by content type label " data-rv-value="model:contentTypeSearchValue" data-rv-on-keyup="view.searchContentType"/>\n                <span class="contentTypeSearchIcon fa fa-search"></span>\n            </div>\n        </div>\n\n        <div id="modalBody" class="row">\n\n            <div class="small-12 columns inputContainer">\n\n                <div class="row" data-rv-each-type="model:data">\n\n                    <div class="small-12 columns nowrapRow">\n\n                        <input data-rv-id="type._id" name="radio" type="radio" data-rv-value="type._id"\n                               data-rv-checked="model:selectedType">\n\n                        <label class="inline" data-rv-for="type._id">\n                            <span data-rv-unless="type.helpText">\n                                {{type.label}}\n                            </span>\n\n                            <span data-rv-if="type.helpText" data-tooltip class="has-tip" data-rv-title="type.helpText">\n                                {{type.label}}\n                            </span>\n                        </label>\n\n                    </div>\n\n                </div>\n\n            </div>\n\n        </div>\n\n        <div id="buttonContainer" class="row">\n            <div class="right">\n                <button class="button tiny radius noMarginBottom" data-rv-on-click="view.confirmModal">\n                    {{model:resources->select}}\n                </button>\n\n                <button class="button tiny radius noMarginBottom" data-rv-on-click="view.cancelModal">\n                    {{model:resources->cancel}}\n                </button>\n            </div>\n        </div>\n\n    </div>\n</div>\n'}),define("text!views/modal/_listModalView.html",[],function(){return'<div id="modalContainer">\n    <div id="modalContents">\n\n        <div id="modalHeader" class="row">\n            {{model:header}}\n        </div>\n\n        <div id="modalBody" class="row inputContainer">\n            <div class="small-4 columns small-centered">\n                <div class="row">\n                    <ol>\n                        <li data-rv-each-item="model:data">\n                            {{item}}\n                        </li>\n                    </ol>\n                </div>\n            </div>\n        </div>\n\n        <div id="buttonContainer" class="row">\n            <div class="right">\n                <button class="button tiny radius noMarginBottom" data-rv-on-click="view.confirmModal">\n                    {{model:resources->confirm}}\n                </button>\n\n                <button class="button tiny radius noMarginBottom" data-rv-on-click="view.cancelModal">\n                    {{model:resources->cancel}}\n                </button>\n            </div>\n        </div>\n\n    </div>\n</div>\n'}),define("text!views/modal/_errorModalView.html",[],function(){return'<div id="modalContainer">\n    <div id="modalContents">\n\n        <div id="modalHeader" class="row">\n            {{model:header}}\n        </div>\n\n        <div id="modalBody">\n            {{model:msg}}\n        </div>\n\n        <div id="buttonContainer" class="row">\n            <div class="right">\n                <button class="button tiny radius alert noMarginBottom" data-rv-on-click="view.confirmModal">{{model:resources->ok}}</button>\n            </div>\n        </div>\n\n    </div>\n</div>\n'}),define("modalView",["masseuse","modalViewConfig","underscore","jquery","constants","text!views/modal/_imageModalView.html","text!views/modal/_inputModalView.html","text!views/modal/_checkboxModalView.html","text!views/modal/_uploadModalView.html","text!views/modal/modalView.html","text!views/modal/_radioModalView.html","text!views/modal/_listModalView.html","text!views/modal/_errorModalView.html"],function(e,t,n,i,s,o,r,a,l,c,d,u,h){"use strict";function p(e){switch(e.type){case"image":e.template=o;break;case"input":e.template=r;break;case"checkbox":e.template=a;break;case"upload":e.template=l;break;case"radio":e.template=d;break;case"list":e.template=u;break;case"error":e.template=h;break;default:e.template=c}this.options=e,e.viewOptions=e.viewOptions||[],e.viewOptions=e.viewOptions.concat(_),this.options=e,S.prototype.initialize.apply(this,arguments)}function f(){this.options&&"input"===this.options.type&&i("input",this.$el).focus(),this.model.get("withSearch")&&this.model.set("originalData",this.model.get("data"))}function m(e){e.stopPropagation(),e.preventDefault(),document.querySelector("#uploadFileInput").click()}function v(e){var t=n.clone(this.model.attributes.files);n.each(e.target.files,function(e){t.push(e)}),y.call(this,t)}function g(e){e.stopPropagation(),e.preventDefault(),this.handleDragLeave(e);var t=n.clone(this.model.attributes.files);n.each(e.originalEvent.dataTransfer.files,function(e){t.push(e)}),y.call(this,t)}function y(e){this.model.set("files",e)}function b(e){e.stopPropagation(),e.preventDefault(),"active"!=e.target.className&&e.target.classList.add("active"),e.originalEvent.dataTransfer.dropEffect="copy"}function w(e){e.target.classList.remove("active")}function x(){this.$deferred.resolve(this.model.attributes),T.call(this)}function C(){this.$deferred.reject(),T.call(this)}function T(){this.remove()}function k(e){var t,o=this.model,r=i.trim(this.model.get("contentTypeSearchValue")).toLowerCase();return n.isUndefined(e)||n.isUndefined(s.controlKeyCodeMap[e.keyCode])?void(r?(t=n.filter(o.get("originalData"),function(e){return n.has(e,"label")&&-1!==e.label.toLowerCase().indexOf(r)?e:!1}),o.set("data",t)):o.set("data",o.get("originalData"))):!1}var S=e.plugins.rivets.RivetsView,_=["$deferred","type","defaultBreadcrumbs","defaultMastheadButtons","breadcrumbs","privateBreadcrumbs","mastheadButtons","permissions","nodeId","wrapper","appendTo","collection","browserTitle"];return S.extend({defaultOptions:t,initialize:p,afterRender:f,fireClickOnUploadFileInput:m,handleFileSelect:v,handleFileDrop:g,handleDragOver:b,handleDragLeave:w,confirmModal:x,cancelModal:C,searchContentType:k})}),define("mixins/modal",["modalView","jquery"],function(e,t){"use strict";function n(n){var i=new t.Deferred,s=new e({modelData:{header:n.header?n.header:null,msg:n.msg,data:n.data?n.data:null,hideCancel:!!n.hideCancel,hideConfirm:!!n.hideConfirm,withSearch:n.withSearch},type:n.type?n.type:null,$deferred:i});return this.hideModal(),s.start(),this.modalView=s,i.promise()}function i(){this.modalView&&this.modalView.remove&&this.modalView.remove()}return{displayModal:n,hideModal:i}}),define("grasshopperBaseView",["backbone","masseuse","resources","underscore","mousetrap","constants","mixins/alertBox","mixins/modal"],function(e,t,n,i,s,o,r,a){"use strict";function l(e){e.viewOptions=e.viewOptions||[],e.viewOptions=e.viewOptions.concat(v),this.options=e,m.prototype.initialize.apply(this,arguments)}function c(){i.has(this.options,"hotkeys")&&i.each(this.options.hotkeys,function(e){s.bind(e.keys,this[e.method].bind(this))},this)}function d(){this.breadcrumbs&&!this.privateBreadcrumbs&&this.channels.views.trigger("updateMastheadBreadcrumbs",this),this.$el.foundation()}function u(){return this.permissions&&-1===this.permissions.indexOf(this.app.user.get("role"))?void this.app.router.navigateTrigger(o.internalRoutes.forbidden,{replace:!0}):(this.channels.views.trigger("checkHeaderTab",this),m.prototype.start.apply(this,arguments).done(d.bind(this),this.enter,c.bind(this)))}function h(e){return this.displayModal({header:n.error,type:"error",msg:e})}function p(){i.has(this.options,"transitions")&&i.has(this.options.transitions,"enter")?this.$el.velocity(this.options.transitions.enter.type,this.options.transitions.enter.options):i.has(this.options,"transitions")&&"none"===this.options.transitions||this.$el.velocity(o.defaultPageTransitions.enter.type,o.defaultPageTransitions.enter.options)}function f(){i.has(this.options,"hotkeys")&&i.each(this.options.hotkeys,function(e){s.unbind(e.keys)},this),i.has(this.options,"transitions")&&i.has(this.options.transitions,"exit")?this.$el.velocity(this.options.transitions.exit,{complete:m.prototype.remove.bind(this,arguments)}):m.prototype.remove.apply(this,arguments)}var m=t.plugins.rivets.RivetsView,v=["$deferred","type","defaultBreadcrumbs","defaultMastheadButtons","breadcrumbs","privateBreadcrumbs","mastheadButtons","permissions","nodeId","wrapper","appendTo","collection","browserTitle","headerTab"];return m.extend({initialize:l,start:u,fireErrorModal:h,enter:p,remove:f,mastheadButtonsSelector:"#mastheadButtons"}).extend(r).extend(a)}),define("text!views/login/template.html",[],function(){return'<div id="login-page"  data-rv-hide="model:hideLoginForm">\n    <div class="row">\n        <div class="large-5 small-centered columns">\n            <form onsubmit="return false;">\n            <div class="account-container login stacked">\n                <div class="clearfix">\n                    <div class="row">\n                        <div class="small-centered columns">\n                            <h1>\n                                {{model:resources->user->signIn}}\n                            </h1>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="small-centered columns">\n                            <div class="login-fields">\n\n                                <p>{{model:resources->user->signInRegisteredUser}}</p>\n\n\n                                <div class="field row collapse">\n                                    <div class="small-2 columns">\n                                        <span class="prefix"><i class="fa fa-user"></i></span>\n                                    </div>\n                                    <div class="small-10 columns">\n                                        <input type="text" data-rv-class-error="model:usernameError" placeholder="User Name" data-rv-value="model:username" class="login username-field">\n                                        <div class="validation-error login-validation-error"\n                                             data-rv-text="model:usernameError"  data-rv-show="model:usernameError"></div>\n                                    </div>\n                                </div>\n\n                                <div class="field row collapse">\n                                    <div class="small-2 columns">\n                                        <span class="prefix"><i class="fa fa-key"></i></span>\n                                    </div>\n                                    <div class="small-10 columns">\n                                        <input type="password" data-rv-class-error="model:passwordError" placeholder="Password" data-rv-value="model:password" class="login password-field">\n                                        <div class="validation-error login-validation-error"\n                                             data-rv-text="model:passwordError" data-rv-show="model:passwordError"></div>\n                                    </div>\n                                </div>\n\n                            </div>\n\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="small-12 columns">\n\n                            <button id="loginButton" class="button success radius tiny right noMarginBottom" data-rv-class-disabled="model:hasError" data-rv-on-click="view.login"  data-swap-html="<i class=\'fa fa-refresh fa-spin\'></i>" data-rv-swap-text-while="model:loggingIn">\n                                {{model:resources->user->signIn}}\n                            </button>\n\n                            <button id="loginWithGoogleButton" class="button success radius tiny left noMarginBottom" data-rv-on-click="view.loginWithGoogle" data-swap-html="<i class=\'fa fa-refresh fa-spin\'></i>" data-rv-swap-text-while="model:loggingIn">\n                                {{model:resources->logInWithGoogle}}\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            </form>\n        </div>\n    </div>\n</div>\n'
}),define("validationLibrary",[],function(){"use strict";return{stringHasLength:function(e){return!(!e||e.constructor!==String)}}}),define("login/model",["grasshopperModel","masseuse","validationLibrary","underscore","resources"],function(e,t,n,i,s){"use strict";function o(e){var t,s=this;return i.forEach(["username","password"],function(i){var o=e[i];s.set(i,o),n.stringHasLength(o)||(t=!0)}),t}function r(e){return n.stringHasLength(e)?void 0:"Too Short."}function a(e,t,n){return!!(e||t||n)}var l=t.ComputedProperty;return e.extend({validate:o,defaults:{oauthError:null,resources:s,loggingIn:!1,username:"",password:"",hideLoginForm:!1,usernameError:new l(["username"],r,!0),passwordError:new l(["password"],r,!0),hasError:new l(["usernameError","passwordError","oauthError"],a)}})}),define("text!views/pluginWrapper/pluginWrapperView.html",[],function(){return'<div class="row pluginWrapper">\n    <div class="large-12 small-centered columns">\n        <div class="row">\n\n            <div class="small-2 columns">\n                <label data-rv-for="model:_id | prepend pluginWrapper" class="right inline">{{model:label}}</label>\n            </div>\n\n            <div class="small-10 columns">\n\n                <div class="row emptyFieldMessage" data-rv-hide="collection: | hasLength">\n                    <div class="small-12 columns">\n                        <label>\n                            {{model:label | spaceAfter}}{{model:resources->pluginWrapper->emptyFieldsMessage}}\n                            <a data-rv-on-click="view.addField">{{model:resources->pluginWrapper->clickToAdd}}</a>\n                        </label>\n                    </div>\n                </div>\n\n\n                <div class="row" data-rv-id="model.cid | prepend sortableMulti" data-rv-show="collection: | hasLength">\n                    <div data-rv-id="model:_id | prepend pluginWrapper" data-rv-each-field="collection:" data-rv-sortIndex="index | prepend sort">\n\n                        <div class="row collapse sortableMulti" data-rv-modelid="field.cid">\n                            <div data-rv-sortable-multi-columns="model:showSortableButton" class="small-10 columns">\n                                <div data-rv-fieldtype="field"></div>\n                            </div>\n                            <div data-rv-if="model:showSortableButton" class="small-1 columns text-center">\n                                <div class="button radius tiny sortableMultiHandle"><i class="fa fa-sort"></i></div>\n                            </div>\n                            <div class="small-1 columns">\n                                <button type="button" id="removeField" class="button radius tiny" data-rv-on-click="view.removeField" data-rv-show="model:showSubtractionButton"><i class="fa fa-minus"></i></button>\n                            </div>\n                        </div>\n\n                    </div>\n                </div>\n\n                <div class="row">\n                    <div class="small-11 columns">\n                        <blockquote data-rv-show="model:helpText" data-rv-text="model:helpText"></blockquote>\n                    </div>\n                    <div class="small-1 columns" style="padding-left: 0;">\n                        <button type="button" id="addField" class="button radius tiny noMarginBottom" data-rv-on-click="view.addField" data-rv-show="model:showAdditionButton">\n                            <i class="fa fa-plus"></i>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <hr>\n    </div>\n</div>\n'}),define("pluginWrapperViewModel",["grasshopperModel","resources"],function(e,t){"use strict";return e.extend({defaults:{resources:t}})}),define("text!plugins/author/template.html",[],function(){return' <div class="row">\n    <div class="large-12 small-centered columns">\n    	<select>\n            <option disabled selected>{{model:resources->plugins->author->selectUser}}</option>\n            <option data-rv-each-user="model:users:" data-rv-value="user:_id">\n                {{user:displayname}}\n            </option>\n        </select>\n        <div class="author_no_permissions" data-rv-show="model:no_permissions">\n            {{model:resources->plugins->author->noPermissions}}\n        </div>\n	</div>\n</div>\n'}),define("grasshopperCollection",["backbone","resources","constants","underscore","helpers"],function(e,t,n,i,s){"use strict";function o(){c.prototype.set=function(e,t){e&&e.results&&(e=e.results),d.call(this,e,t)}}function r(t){var n=u.get("authToken"),s=Array.prototype.slice.call(arguments,0),o={data:{},headers:{Authorization:n},success:function(){}};return t&&(i.extend(o.data,t.data),i.extend(o.headers,t.headers),i.extend(o.success,t.success)),s[0]=o,e.Collection.prototype.fetch.apply(this,s)}function a(){var t={headers:{Authorization:u.get("authToken")}};return e.Collection.prototype.save.call(this,null,t)}function l(t){return t=t||{},t.headers=i.extend({},t.headers,{Authorization:u.get("authToken")}),e.Collection.prototype.destroy.call(this,t)}var c=e.Collection,d=e.Collection.prototype.set,u=s.localStorage;return c.extend({initialize:o,fetch:r,save:a,destroy:l})}),define("userDetail/model",["grasshopperModel","constants","resources","masseuse","underscore"],function(e,t,n,i,s){"use strict";function o(){var t=e.prototype.toJSON.apply(this);return s.omit(t,["userIsChangingTheirProfile","saving","userModel","fullname"])}var r=i.ComputedProperty;return e.extend({idAttribute:"_id",defaults:{resources:n,enabled:!0,profile:{},fullname:new r(["firstname","lastname"],function(e,t){return e+" "+t}),href:new r(["_id"],function(e){return t.internalRoutes.userDetail.replace(":id",e)}),saving:!1,userIsChangingTheirProfile:r(["_id","userModel"],function(e,t){return e&&t&&e===t.get("_id")}),hasGoogle:new r(["linkedidentities"],function(e){return s.contains(e,"google")}),hasBasic:new r(["linkedidentities"],function(e){return s.contains(e,"basic")})},toJSON:o,urlRoot:t.api.users.url,url:function(){return this.has("userModel")&&this.get("_id")===this.get("userModel")._id?t.api.user.url:t.api.users.url+"/"+this.get("_id")}})}),define("plugins/author/model",["grasshopperModel","resources","grasshopperCollection","constants","userDetail/model","underscore"],function(e,t,n,i,s,o){"use strict";function r(){var t=n.extend({model:s,url:function(){return i.api.users.url},parse:function(e){return o.filter(e,function(e){return o.contains(["admin","editor","author"],e.role)})}});e.prototype.initialize.apply(this,arguments),this.set("users",new t)}return e.extend({initialize:r,defaults:{resources:t,no_permissions:!1,users:null}})}),define("text!plugins/author/setupTemplate.html",[],function(){return""}),define("plugins/author/config.js",["text!plugins/author/template.html","plugins/author/model","text!plugins/author/setupTemplate.html"],function(e,t,n){"use strict";return{name:"authorPlugin",ModelType:t,modelData:{min:1,max:1,options:!1,label:"",type:"author",dataType:"dropdown",validation:[],value:{displayname:"",_id:""}},wrapper:!1,template:e,setupTemplate:n}}),define("mixins/pluginSaveHook",["underscore"],function(e){"use strict";function t(e){this.activeSubscribers.push(e)}function n(t){this.activeSubscribers=e.reject(this.activeSubscribers,function(e){return e.cid===t.cid})}return{activeSubscribers:[],register:t,remove:n}}),define("pluginBaseView",["grasshopperBaseView","mixins/pluginSaveHook"],function(e,t){"use strict";function n(){return t.register(this),e.prototype.start.apply(this,arguments)}function i(){return t.remove(this),e.prototype.remove.apply(this,arguments)}return e.extend({start:n,remove:i})}),define("plugins/author/view.js",["pluginBaseView","underscore","jquery","require","resources"],function(e,t,n,i,s){"use strict";function o(e){this.model.get("inSetup")||this.model.get("users").fetch().fail(a.bind(this)).always(e.resolve),e.resolve()}function r(){this.model.get("inSetup")||l.call(this)}function a(){this.model.get("users").reset([this.app.user]),this.model.toggle("no_permissions")}function l(){var e=this.model.get("value"),t=this.$("select");t.select2({containerCssClass:"authorDropdownSelectContainer",dropdownCssClass:"authorDropdownSelectDrop",placeholder:s.plugins.author.selectUser,allowClear:!0}).on("change",d.bind(this)),setTimeout(function(){t.select2("val",e._id.toString())},500)}function c(e){var t=this.model.get("users").findWhere({_id:e});return t?{_id:e,displayname:t.get("displayname")}:void 0}function d(e){this.model.set("value",c.call(this,e.val))}return e.extend({beforeRender:o,afterRender:r})}),define("text!plugins/boolean/template.html",[],function(){return'<div class="row">\n    <div class="large-12 small-centered columns checkboxMarginTop">\n        <input type="checkbox" data-rv-checked="model:value">\n    </div>\n</div>\n'}),define("plugins/boolean/model",["grasshopperModel","resources"],function(e,t){"use strict";return e.extend({defaults:{resources:t}})}),define("text!plugins/boolean/setupTemplate.html",[],function(){return""}),define("plugins/boolean/config.js",["text!plugins/boolean/template.html","plugins/boolean/model","text!plugins/boolean/setupTemplate.html"],function(e,t,n){"use strict";return{name:"booleanPlugin",ModelType:t,modelData:function(){return{min:1,max:1,options:!1,label:"",type:"boolean",dataType:"boolean",validation:[],value:!1}},template:e,setupTemplate:n,wrapper:!1}}),define("plugins/boolean/view.js",["pluginBaseView"],function(e){"use strict";return e.extend({})}),define("text!plugins/checkbox/template.html",[],function(){return'<div class="row">\n    <div class="large-12 small-centered columns checkboxMarginTop">\n        <div data-rv-each-option="collection:">\n            <input data-rv-id="option:_id | prepend checkboxlist" class="checkboxListCheckbox" type="checkbox" data-rv-checked="option:checked">\n            <label data-rv-for="option:_id | prepend checkboxlist">{{option:label}}</label>\n        </div>\n    </div>\n</div>\n'}),define("plugins/checkbox/model",["grasshopperModel","resources"],function(e,t){"use strict";return e.extend({defaults:{resources:t}})}),define("text!plugins/checkbox/setupTemplate.html",[],function(){return'<div class="row">\n    <div class="small-12 columns">\n        <div data-rv-each-option="collection:">\n\n            <div class="row-collapse">\n                <div class="small-11 columns">\n\n                    <div class="row">\n                        <div class="small-2 columns">\n                            <label class="right inline">{{model:resources->label}}</label>\n                        </div>\n                        <div class="small-10 columns">\n                            <input type="text" class="optionInput" placeholder="dropdown option" data-rv-value="option:label" style="margin-bottom: 2px;">\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="small-2 columns">\n                            <label class="right inline">{{model:resources->key}}</label>\n                        </div>\n                        <div class="small-10 columns">\n                            <input type="text" class="optionInput" placeholder="dropdown option" data-rv-value="option:_id" style="margin-bottom: 2px;">\n                        </div>\n                    </div>\n\n                </div>\n\n                <div class="small-1 columns">\n                    <button id="removeOption" data-rv-on-click="view.removeOption" class="button radius tiny"><i class="fa fa-minus"></i></button>\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="small-11 columns small-offset-1">\n                    <hr>\n                </div>\n            </div>\n        </div>\n\n        <button id="addOption" class="right tiny radius"><i class="fa fa-plus"></i></button>\n\n\n    </div>\n</div>\n'}),define("plugins/checkbox/config.js",["text!plugins/checkbox/template.html","plugins/checkbox/model","text!plugins/checkbox/setupTemplate.html"],function(e,t,n){"use strict";return{name:"checkboxPlugin",ModelType:t,modelData:function(){return{min:1,max:1,options:!0,label:"",type:"checkbox",dataType:"boolean",validation:[]}},template:e,setupTemplate:n,events:{"click #addOption":"addOption","blur .optionInput":"reduceOptions","click .checkboxListCheckbox":"reduceValues"},wrapper:!1}}),define("plugins/checkbox/optionsCollection",["grasshopperCollection","backbone","underscore"],function(e,t,n){"use strict";function i(){var e=t.Collection.prototype.toJSON.apply(this);return n.map(e,function(e){return n.pick(e,"_id","label")})}function s(){var e=t.Collection.prototype.toJSON.apply(this),i={};return n.each(e,function(e){i[e._id]=!!e.checked}),i}function o(e){var t=this;n.each(e,function(e,n){t.findWhere({_id:n}).set("checked",e)})}return e.extend({reduceOptions:i,reduceValues:s,hydrateOptionsWithValues:o})}),define("plugins/checkbox/view.js",["pluginBaseView","underscore","plugins/checkbox/optionsCollection"],function(e,t,n){"use strict";function i(e){this.collection=new n(this.model.get("options")),this.model.get("inSetup")?c.call(this):d.call(this),t.defer(e.resolve)}function s(){this.model.get("value")?this.collection.hydrateOptionsWithValues(this.model.get("value")):this.reduceValues()}function o(){this.collection.add({_id:"",label:""})}function r(e,t){this.collection.remove(t.option)}function a(){this.model.set("options",this.collection.reduceOptions())}function l(){this.model.set("value",this.collection.reduceValues())}function c(){this.collection.on("all",this.reduceOptions.bind(this))}function d(){this.collection.on("all",this.reduceValues.bind(this))}return e.extend({beforeRender:i,afterRender:s,addOption:o,removeOption:r,reduceOptions:a,reduceValues:l})}),define("text!plugins/codeeditor/template.html",[],function(){return'<div class="row">\n    <div class="small-12 columns">\n        <div id="loadingSpinner" data-rv-show="model:loading">\n            <span>{{model:resources->plugins->codeEditor->loading}}</span>\n            <i data-rv-show="model:loading" class="fa fa-refresh fa fa-spin"></i>\n        </div>\n        <div id="codeEditor" class="codeEditor" data-rv-hide="model:loading"></div>\n    </div>\n</div>\n'}),define("plugins/codeeditor/model",["grasshopperModel","resources","masseuse","underscore"],function(e,t,n,i){"use strict";var s=n.ComputedProperty;return e.extend({defaults:function(){return{resources:t,loading:!1,possibleLanguages:["javascript","html","css","json","markdown"],possibleThemes:["light","dark"],currentThemeLocation:new s(["options"],function(e){return i.has(e,"theme")?"ace/theme/"+e.theme.replace("light","github").replace("dark","monokai"):void 0}),currentModeLocation:new s(["options"],function(e){return i.has(e,"language")?"ace/mode/"+e.language.replace(" ","_"):void 0})}}})}),define("text!plugins/codeeditor/setupTemplate.html",[],function(){return'<div class="row">\n\n    <div class="row">\n        <div class="small-2 columns">\n            <label class="right inline">{{model:resources->plugins->codeEditor->theme | withEditor}}</label>\n        </div>\n        <div class="small-10 columns">\n            <select data-rv-value="model:options->theme">\n                <option data-rv-each-option="model:possibleThemes" data-rv-value="option">{{option}}</option>\n            </select>\n        </div>\n    </div>\n    <div class="row">\n        <div class="small-2 columns">\n            <label class="right inline">{{model:resources->plugins->codeEditor->language | withEditor}}</label>\n        </div>\n        <div class="small-10 columns">\n            <select data-rv-value="model:options->language">\n                <option data-rv-each-option="model:possibleLanguages" data-rv-value="option">{{option}}</option>\n            </select>\n        </div>\n    </div>\n\n</div>\n'}),define("plugins/codeeditor/config.js",["text!plugins/codeeditor/template.html","plugins/codeeditor/model","text!plugins/codeeditor/setupTemplate.html"],function(e,t,n){"use strict";return{name:"codeEditorPlugin",ModelType:t,modelData:function(){return{min:1,max:1,options:{theme:"light",language:"javascript"},label:"",type:"codeeditor",dataType:"code",validation:[],value:""}},template:e,setupTemplate:n,wrapper:!1}}),define("plugins/codeeditor/view.js",["pluginBaseView","underscore","jquery","require"],function(e,t,n,i){"use strict";function s(){this.model.get("inSetup")||o.call(this)}function o(){var e=this;f.call(this),i(["ace/editor","ace/virtual_renderer"],function(t,n){var i=t.Editor,s=n.VirtualRenderer;e.editor=new i(new s(e.$("#codeEditor")[0])),r.call(e),a.call(e),l.call(e),c.call(e),d.call(e),u.call(e),p.call(e),f.call(e)})}function r(){this.editor.setOptions({maxLines:500,minLines:10})}function a(){this.editor.setShowPrintMargin(!1)}function l(){this.editor.getSession().setUseWrapMode(!0)}function c(){this.editor.setTheme(this.model.get("currentThemeLocation"))}function d(){this.editor.getSession().setMode(this.model.get("currentModeLocation"))}function u(){this.editor.on("blur",h.bind(this))}function h(){this.model.set("value",this.editor.getValue())}function p(){var e=this.model.get("value");t.isUndefined(e)||this.editor.setValue(e)}function f(){this.model.toggle("loading")}return e.extend({afterRender:s})}),define("text!plugins/contentreference/template.html",[],function(){return'<div class="row">\n\n    <div class="small-8 columns">\n        <input type="text" data-rv-value="model:selectedContentLabel" readonly="true" data-rv-swap-text-while="model:loading" data-swap-html="<i class=\'fa fa-refresh fa-spin\'></i>">\n    </div>\n\n    <div class="small-4 columns">\n\n        <ul class="button-group radius">\n            <li>\n                <button class="button tiny" data-rv-on-click="view.fireSelectContentModal">\n                    {{model:resources->plugins->contentReference->selectContent}}\n                </button>\n            </li>\n            <li data-rv-if="model:selectedContentLabel">\n                <a class="button tiny" data-rv-href="model:selectedContentHref" target="_blank">\n                    {{model:resources->plugins->contentReference->viewContent}}\n                </a>\n            </li>\n        </ul>\n\n    </div>\n\n</div>\n'}),define("plugins/contentreference/model",["grasshopperModel","resources","backbone","constants","grasshopperCollection","masseuse"],function(e,t,n,i,s,o){"use strict";function r(){var t=this;e.prototype.initialize.apply(this,arguments),this.set("childNodesDeep",new(s.extend({comparator:"ancestors",url:function(){return i.api.nodesChildrenDeep.url.replace(":id",t.get("_id"))}})))}var a=o.ComputedProperty;return e.extend({initialize:r,defaults:{resources:t,selectedContentHref:new a(["value"],function(e){return i.internalRoutes.contentDetail.replace(":id",e)}),selectedContentLabel:new a(["contentDetails"],function(){return this.get("contentDetails.fields."+this.get("contentDetails.meta.labelfield"))}),_id:"0",nodeId:new a(["options"],function(){return this.get("options.defaultNode")}),inSetup:!1,loading:!1,childNodesDeep:null,contentDetails:null,availableTypes:null,allowedTypes:null},urlRoot:i.api.node.url})}),define("text!plugins/contentreference/setupTemplate.html",[],function(){return'<div class="row contentReferenceSetup">\n    <div class="row">\n        <div class="small-6 columns">\n            <label><span>{{model:resources->plugins->contentReference->defaultFolder | withColon}}</span>\n                <div class="row collapse">\n                    <div class="small-11 columns">\n                        <input type="text" data-rv-value="model:selectedNodeLabel" readonly="true">\n                    </div>\n                    <div class="small-1 columns" style="padding-left: 0;">\n                        <span class="postfix radius"><i class="fa fa-lock"></i></span>\n                    </div>\n                </div>\n            </label>\n        </div>\n    </div>\n\n\n    <div class="row">\n        <div class="small-6 columns">\n            <div class="small-12 columns">\n                <span>{{model:resources->plugins->contentReference->selectDefaultFolder | withColon}}</span>\n\n                <section id="selectDefaultNode">\n                    <ul class="no-bullet noMarginBottom">\n                        <li>\n                            <input type="radio" value="0" name="nodeRadio" data-label="Root" id="0">\n                            <label for="0">{{model:resources->root}}</label>\n                        </li>\n                    </ul>\n                    <section class="nodeRadio" id="nodeRadioList"></section>\n                </section>\n            </div>\n\n        </div>\n\n        <div class="small-6 columns">\n            <div class="small=12 columns">\n                <span>{{model:resources->plugins->contentReference->allowedContentTypes | withColon}}</span>\n\n                <section class="availableTypes">\n                    <div data-rv-each-option="model:availableTypes">\n                        <input data-rv-id="option._id" type="checkbox" data-rv-checked="option.checked">\n                        <label data-rv-for="option._id">{{option.label}}</label>\n                    </div>\n                </section>\n            </div>\n        </div>\n    </div>\n\n</div>\n'}),define("plugins/contentreference/config.js",["text!plugins/contentreference/template.html","plugins/contentreference/model","text!plugins/contentreference/setupTemplate.html","appBinders","formatters"],function(e,t,n,i,s){"use strict";return{name:"contentReferencePlugin",ModelType:t,modelData:{min:1,max:1,options:{allowedTypes:[],defaultNode:"0"},label:"",type:"contentreference",dataType:"ref",validation:[],value:""},template:e,setupTemplate:n,events:{"click .availableTypes":"setAvailableContentTypes","click #selectDefaultNode":"selectDefaultNode"},rivetsConfig:{formatters:[s],binders:[i]},wrapper:!1}}),define("contentTypeWorker",["api","jquery","resources","underscore"],function(e,t,n,i){"use strict";function s(n){var s=new t.Deferred;return e.getContentTypes().done(function(e){n&&(n=i.map(n,function(e){return e._id}),i.each(e.results,function(e){i.contains(n,e._id)&&(e.checked=!0)})),s.resolve(e.results)}),s.promise()}function o(n){var i=new t.Deferred;return e.getNodeDetail(n).done(r.bind(this,i)).fail(a.bind(this,i)),i.promise()}function r(e,t){e.resolve(t)}function a(e,t){e.reject(t)}return{getAvailableContentTypes:s,getNodesContentTypes:o}}),define("text!views/itemSelectModal/contentTemplate.html",[],function(){return'<div id="modalContainer" class="itemSelectModal">\n    <div id="modalContents">\n\n        <header id="modalHeader" class="row">\n            <h3 class="modalHeader-title">{{model:header}}</h3>\n            <nav class="modalHeader-nav">\n                <a class="modalHeader-nav-item" data-rv-breadcrumb="model:breadcrumbs"></a>\n            </nav>\n            <div id="contentSearch">\n                <input class="contentSearchInput" type="text" placeholder="Search by content label " data-rv-value="model:content.searchValue" data-rv-on-keyup="model:content.search"/>\n                <span class="contentSearchIcon" data-rv-swap-text-while="model:content.searching" data-swap-html="<i class=\'fa fa-refresh fa-spin\'></i>">\n                    <i class="fa fa-search"></i>\n                </span>\n            </div>\n        </header>\n\n        <section id="modalBody" class="row">\n\n            <div class="inputContainer itemSelection table-wrapper spinner-loading">\n\n                <div id="table-loading-overlay" data-rv-if="model:content.searching">\n                    <img class="loading-overlay-image" src="themes/img/loading-spinner-horizontal.gif">\n                </div>\n\n                <div class="childNode" data-rv-each-node="model:childNodes:" data-rv-on-click="view.navigateToFolder" data-rv-nodeid="node:_id">\n                    <i data-rv-nodeid="node:_id" class="fa fa-folder"></i>\n                    <a data-rv-nodeid="node:_id">{{node:label | spaceBefore}}</a>\n                </div>\n\n                <ul class="no-bullet childContent" data-rv-hide="model:inRoot">\n                    <li data-rv-each-item="model:content:">\n                        <input data-rv-id="item.cid" type="radio" name="selectedContent" data-rv-value="item:_id" data-rv-checked="model:value">\n                        <label data-rv-for="item.cid">{{item:label}}</label>\n                    </li>\n\n                    <li data-rv-unless="model:content.length | greaterThan 0">\n                        {{model:resources->node->emptyContent}}\n                    </li>\n                </ul>\n\n            </div>\n\n        </section>\n\n        <footer id="buttonContainer" class="row" data-rv-hide="model:loading">\n            <div class="right">\n                <button id="confirm" class="button tiny radius noMarginBottom">{{model:resources->confirm}}</button>\n                <button id="cancel" class="button tiny radius noMarginBottom">{{model:resources->cancel}}</button>\n            </div>\n        </footer>\n\n    </div>\n</div>\n'}),define("text!views/itemSelectModal/fileTemplate.html",[],function(){return'<div id="modalContainer" class="itemSelectModal">\n    <div id="modalContents">\n\n        <div id="modalHeader" class="row">\n            {{model:header}}\n        </div>\n\n        <div class="row modalPadding">\n            <span data-rv-breadcrumb="model:breadcrumbs"></span>\n        </div>\n\n        </br>\n\n        <div id="modalBody" class="row">\n\n            <section class="inputContainer itemSelection">\n\n                <div class="childNode" data-rv-each-node="model:childNodes:" data-rv-on-click="view.navigateToFolder" data-rv-nodeid="node:_id">\n                    <i data-rv-nodeid="node:_id" class="fa fa-folder"></i>\n                    <a data-rv-nodeid="node:_id">{{node:label | spaceBefore}}</a>\n                </div>\n\n                <ul data-rv-hide="model:inRoot" class="no-bullet childContent">\n                    <li data-rv-each-asset="model:assets:">\n                        <input data-rv-id="asset.cid" type="radio" name="selectedContent" data-rv-value="asset:path" data-rv-checked="model:value">\n\n                        <label data-rv-for="asset.cid">\n\n                            <div class="thumbnailContainer">\n                                <img class="th thumbNail left" data-rv-src="asset:url" data-rv-alt="asset:fileName">\n                            </div>\n\n                            <div class="fileName">\n                                <a>{{asset:fileName}}</a>\n                            </div>\n\n                        </label>\n                    </li>\n\n                    <li data-rv-if="model:assets.length | equals 0">\n                        {{model:resources->asset->emptyNode}}\n                    </li>\n                </ul>\n\n            </section>\n\n        </div>\n\n        <div id="buttonContainer" class="row" data-rv-hide="model:loading">\n            <div class="left" data-rv-hide="model:inRoot">\n                <button class="button tiny radius noMarginBottom" data-rv-on-click="view.startUploadWorkflow" data-rv-swap-text-while="model:uploading" data-swap-html="<i class=\'fa fa-refresh fa-spin\'></i>">\n                    {{model:resources->uploadFile}}\n                </button>\n            </div>\n            <div class="right">\n                <button id="confirm" class="button tiny radius noMarginBottom">{{model:resources->confirm}}</button>\n                <button id="cancel" class="button tiny radius noMarginBottom">{{model:resources->cancel}}</button>\n            </div>\n        </div>\n\n    </div>\n</div>\n'}),define("itemSelectModal/contentModel",["grasshopperModel","masseuse"],function(e,t){"use strict";var n=t.ComputedProperty;return e.extend({defaults:{label:new n(["fields"],function(){return this.get("meta.labelfield")?this.get("fields."+[this.get("meta.labelfield")]):void 0})}})}),define("assetDetailViewModel",["grasshopperModel","resources","underscore","constants","masseuse"],function(e,t,n,i,s){"use strict";function o(){return i.api.assets.url.replace(":id",this.get("nodeId"))}var r=s.ComputedProperty;return e.extend({defaults:{resources:t,fileName:new r(["url"],function(e){return e?n.last(e.split("/")):""}),path:new r(["url"],function(e){return e?n.last(e.split("/"),2).join("/"):""}),id:new r(["fileName"],function(e){return e?e:""}),progressWidth:0,uploadError:!1},urlRoot:o})}),define("searchCollection",["grasshopperCollection","underscore","constants","api","jquery"],function(e,t,n,i,s){"use strict";function o(){this.searching=!0,this.throttledQuery(this.searchValue)}function r(e){var n=s.Deferred(),o={filters:[{key:t.result(this,"filterKey"),cmp:"%",value:e||""}],nodes:[t.result(this,"nodeId")]||[],options:{limit:parseInt(t.result(this,"limit"),10),skip:parseInt(t.result(this,"skip",10)-1)*t.result(this,"limit")}};return i.makeQuery(o).done(function(e){this.reset(e,{parse:!0}),this.searching=!1,n.resolve()}.bind(this)),n.promise()}return e.extend({search:o,query:r,throttledQuery:t.throttle(r,n.contentSearchThrottle,{leading:!1}),limit:n.pagination.defaultLimit,skip:n.pagination.defaultSkip,filterKey:null,nodeId:null,searching:!1})}),define("itemSelectModal/model",["grasshopperModel","resources","grasshopperCollection","constants","masseuse","underscore","itemSelectModal/contentModel","assetDetailViewModel","searchCollection"],function(e,t,n,i,s,o,r,a,l){"use strict";function c(){var t=this;e.prototype.initialize.apply(this,arguments),this.set("childNodes",new(n.extend({url:function(){return i.api.nodesChildren.url.replace(":id",t.get("_id"))}}))),this.set("content",new(l.extend({parse:function(e){var n=t.get("allowedTypes");return o.isEmpty(n)?e:o.filter(e,function(e){return o.contains(n,e.meta.type)})},model:r,nodeId:function(){return t.get("_id")},filterKey:"virtual.label",limit:1e4,url:function(){return i.api.nodesContent.url.replace(":id",t.get("_id"))}}))),this.set("assets",new(n.extend({model:a,url:function(){return i.api.assets.url.replace(":id",t.get("_id"))}})))}var d=s.ComputedProperty;return e.extend({initialize:c,idAttribute:"_id",defaults:{header:"Select Item",nodeId:new d(["_id"],function(e){return e}),breadcrumbs:[],inRoot:new d(["_id"],function(e){return"0"===e||0===e}),resources:t,uploading:!1,childNodes:null,content:null,assets:null},urlRoot:i.api.node.url})}),define("itemSelectModal/binders",["jquery","underscore"],function(e,t){"use strict";function n(n,i){var s=e(n);s.empty(),i&&i.length>1?(t.each(t.initial(i),function(e){s.append('<a class="modalBreadcrumb" nodeId="'+e.nodeId+'">'+e.text+" / </a>")}),s.append("<span>"+t.last(i).text+"</span>")):i&&!t.isEmpty(i)&&s.append("<span>"+t.last(i).text+"</span>")}return{breadcrumb:n}}),define("itemSelectModal/config",["text!views/itemSelectModal/contentTemplate.html","text!views/itemSelectModal/fileTemplate.html","itemSelectModal/model","appBinders","resources","itemSelectModal/binders"],function(e,t,n,i,s,o){"use strict";return{name:"itemSelectModal",ModelType:n,appendTo:"#modal",wrapper:!1,contentTemplate:e,fileTemplate:t,rivetsConfig:{instaUpdate:!0,binders:[i,o]},privateBreadcrumbs:!0,breadcrumbs:[{text:s.root,nodeId:"0"}],events:{"click #confirm":"confirmModal","click #cancel":"cancelModal","click .modalBreadcrumb":"navigateToFolder"},transitions:"none"}}),define("breadcrumbWorker",["api","constants","jquery","resources","masseuse","underscore"],function(e,t,n,i,s,o){"use strict";function r(e){var t=this.model.get("meta.node"),n=this.model.get("isNew"),i=this;f.call(this),h.call(this,t).then(function(){n?d.call(i,e,t):u.call(i,e)})}function a(e,t){f.call(this),t?d.call(this,e,"new"):u.call(this,e)}function l(e,t){var n=this.model.get("nodeId");
f.call(this),h.call(this,n).then(p.bind(this,e,t))}function c(e,t){t?d.call(this,e,"new"):(this.breadcrumbs.crumbs.push({text:o.escape(this.model.get("fullname")),href:this.model.get("href")}),p.call(this,e))}function d(e,n){this.breadcrumbs.crumbs.push({text:i.newWord,href:t.internalRoutes[this.name].replace(":id",n)}),p.call(this,e)}function u(e){this.breadcrumbs.crumbs.push({text:o.escape(this.model.get("label")),href:t.internalRoutes[this.name].replace(":id",this.model.get("_id"))}),p.call(this,e)}function h(i,s,r){var a=this;return s=s?s:new n.Deferred,r=r?r:0,e.getNodeDetail(i).done(function(e){o.isEmpty(e)?s.resolve():(a.breadcrumbs.crumbs.splice(a.breadcrumbs.crumbs.length-r,0,{text:o.escape(e.label),href:t.internalRoutes.nodeDetail.replace(":id",e._id),nodeId:e._id}),r++,null!==e.parent?h.call(a,e.parent._id,s,r):s.resolve())}),s.promise()}function p(e,t){t=t||{trigger:!0},t.trigger&&v.views.trigger("updateMastheadBreadcrumbs",this),e&&e.resolve()}function f(){o.has(this,"originalBreadcrumbs")||(this.originalBreadcrumbs=o.clone(this.breadcrumbs))}function m(){this.breadcrumbs=o.clone(this.originalBreadcrumbs)}var v=new s.utilities.channels;return{contentBreadcrumb:r,contentTypeBreadcrumb:a,contentBrowse:l,userBreadcrumb:c,resetBreadcrumb:m}}),define("assetWorker",["constants","masseuse","jquery","helpers"],function(e,t,n,i){"use strict";function s(t,i){var s,r=o.get("authToken"),a=new FormData,l=new n.Deferred;return a.append("file",i),s=new XMLHttpRequest,s.upload.addEventListener("progress",function(e){l.notify(e.loaded/e.total*100+"%")},!1),s.open("POST",e.api.assets.url.replace(":id",t)),s.setRequestHeader("Authorization",r),s.setRequestHeader("Accept","*/*"),s.onreadystatechange=function(){4===s.readyState&&(-1===[200,304].indexOf(s.status)?l.reject(s.status):l.resolve(JSON.parse(s.response).message))},s.send(a),l.promise()}var o=i.localStorage;return{postNewAsset:s}}),define("itemSelectModal/view",["grasshopperBaseView","itemSelectModal/config","jquery","breadcrumbWorker","resources","assetWorker","underscore"],function(e,t,n,i,s,o,r){"use strict";function a(n){switch(n.type){case"file":n.template=t.fileTemplate;break;case"content":n.template=t.contentTemplate;break;default:n.template=t.contentTemplate}this.options=n,e.prototype.initialize.apply(this,arguments)}function l(e){f.call(this),n.when(c.call(this),d.call(this)).done(e.resolve)}function c(){return this.model.get("childNodes").fetch()}function d(){return"file"===this.options.type?this.model.get("assets").fetch():this.model.get("content").fetch()}function u(){this.$deferred.resolve(this.model.get("value")),p.call(this)}function h(){this.$deferred.reject(),p.call(this)}function p(){this.remove()}function f(){var e=new n.Deferred,t=this;e.done(function(){t.model.set("breadcrumbs",t.breadcrumbs)}),i.contentBrowse.call(this,e,{trigger:!1})}function m(e){this.model.set("_id",n(e.target).attr("nodeId")),i.resetBreadcrumb.call(this),f.call(this),c.call(this),d.call(this)}function v(){var e=this.model.get("_id"),t=[],i=this;y.call(this),g.call(this).done(function(s){r.each(s,function(n){t.push(o.postNewAsset(e,n))}),n.when(t).then(d.bind(i)).then(y.bind(i))})}function g(){var e=n.Deferred();return this.displayModal({header:s.asset.uploadAssetModalMsg,type:"upload",data:{}}).done(function(t){e.resolve(t.files)}),e.promise()}function y(){this.model.toggle("uploading")}return e.extend({defaultOptions:t,initialize:a,beforeRender:l,confirmModal:u,cancelModal:h,navigateToFolder:m,startUploadWorkflow:v})}),define("mixins/itemSelectModal",["itemSelectModal/view","jquery"],function(e,t){"use strict";function n(e,t,n){var i={type:"content",header:"Select Content",value:e,nodeId:t,allowedTypes:n};return s.call(this,i)}function i(e,t){var n={type:"file",header:"Select File",value:e,nodeId:t,allowedTypes:[]};return s.call(this,n)}function s(n){var i=new t.Deferred,s=new e({type:n.type,modelData:{header:n.header,value:n.value,_id:n.nodeId,allowedTypes:n.allowedTypes},$deferred:i});return s.start(),i.promise()}return{fireContentSelectModal:n,fireFileSelectModal:i}}),define("mixins/buildNodeRadioList",["jquery","underscore"],function(e,t){"use strict";function n(n,s){var o=e(n),r=e('<ul class="no-bullet"/>'),a=[];s.length&&(s.each(function(e){e.get("ancestors").length?a.push(e):r.append(i(e))}),t.each(a,function(e){var n=r.find('[value="'+t.last(e.get("ancestors"))._id+'"]');n?n.closest("li").append("<ul>"+i(e)+"</ul>"):a.push(e)}),o.append(r))}function i(e){return'<li><input class="nodeRadio" type="radio" value="'+e.get("_id")+'" name="nodeRadio" data-label="'+e.get("label")+'" id="'+e.get("_id")+'"/><label for="'+e.get("_id")+'">'+e.get("label")+"</label></li>"}return{buildNodeRadioList:n}}),define("plugins/contentreference/view.js",["pluginBaseView","underscore","api","contentTypeWorker","jquery","masseuse","mixins/itemSelectModal","mixins/buildNodeRadioList"],function(e,t,n,i,s,o,r,a){"use strict";function l(){this.model.get("inSetup")?s.when(this.model.get("childNodesDeep").fetch(),p.call(this)).done(this.buildNodeRadioList.bind(this,this.$("#nodeRadioList"),this.model.get("childNodesDeep")),h.bind(this)):(w.call(this),c.call(this).done(w.bind(this)),this.model.on("change:value",c.bind(this))),this.parent&&this.parent.resortMulti&&this.parent.resortMulti()}function c(){var e=this.model.get("value"),t=new s.Deferred;return e?d.call(this,e).done(u.bind(this),t.resolve):t.resolve(),t.promise()}function d(e){return n.getContentDetail(e)}function u(e){this.model.set("contentDetails",e)}function h(){var e=this.model.get("options.defaultNode"),t=this.$("#selectDefaultNode").find("#"+e);t.prop("checked",!0),this.selectDefaultNode()}function p(){var e=new s.Deferred;return i.getAvailableContentTypes().done(f.bind(this,e)),e.promise()}function f(e,n){var i=this.model.get("options.allowedTypes");t.each(n,function(e){e.checked=t.contains(i,e._id)?!0:!1}),this.model.set("availableTypes",n),e.resolve()}function m(){var e=this.model.get("availableTypes"),n=t.pluck(t.where(e,{checked:!0}),"_id");this.model.set("options.allowedTypes",n)}function v(){var e=this.$("#selectDefaultNode").find('input:radio[name="nodeRadio"]:checked'),t=e.val(),n=e.attr("data-label");this.model.set("selectedNodeLabel",n),this.model.set("options.defaultNode",t)}function g(){b.call(this).done(y.bind(this))}function y(e){this.model.set("value",e)}function b(){var e=this.model.get("value"),t=this.model.get("nodeId"),n=this.model.get("options.allowedTypes");return this.fireContentSelectModal(e,t,n)}function w(){this.model.toggle("loading")}return e.extend({afterRender:l,setAvailableContentTypes:m,fireSelectContentModal:g,selectDefaultNode:v}).extend(r).extend(a)}),define("text!plugins/date/template.html",[],function(){return'<div class="row">\n    <div class="large-12 small-centered columns">\n        <input class="datetimepicker" data-rv-id="model:_id" data-rv-placeholder="model:type" data-rv-value="model:value">\n    </div>\n</div>\n'}),define("plugins/date/model",["grasshopperModel","resources"],function(e,t){"use strict";return e.extend({defaults:{resources:t}})}),define("text!plugins/date/setupTemplate.html",[],function(){return""}),define("plugins/date/config.js",["text!plugins/date/template.html","plugins/date/model","text!plugins/date/setupTemplate.html"],function(e,t,n){"use strict";return{name:"datePlugin",ModelType:t,modelData:{min:1,max:1,options:!1,label:"",type:"date",defaultValueType:"date",dataType:"date",validation:[],value:""},template:e,setupTemplate:n,wrapper:!1}}),function(e){function t(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function n(e,t){return function(n){return d(e.call(this,n),t)}}function i(e,t){return function(n){return this.lang().ordinal(e.call(this,n),t)}}function s(){}function o(e){C(e),a(this,e)}function r(e){var t=v(e),n=t.year||0,i=t.month||0,s=t.week||0,o=t.day||0,r=t.hour||0,a=t.minute||0,l=t.second||0,c=t.millisecond||0;this._milliseconds=+c+1e3*l+6e4*a+36e5*r,this._days=+o+7*s,this._months=+i+12*n,this._data={},this._bubble()}function a(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return t.hasOwnProperty("toString")&&(e.toString=t.toString),t.hasOwnProperty("valueOf")&&(e.valueOf=t.valueOf),e}function l(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&vt.hasOwnProperty(t)&&(n[t]=e[t]);return n}function c(e){return 0>e?Math.ceil(e):Math.floor(e)}function d(e,t,n){for(var i=""+Math.abs(e),s=e>=0;i.length<t;)i="0"+i;return(s?n?"+":"":"-")+i}function u(e,t,n,i){var s,o,r=t._milliseconds,a=t._days,l=t._months;r&&e._d.setTime(+e._d+r*n),(a||l)&&(s=e.minute(),o=e.hour()),a&&e.date(e.date()+a*n),l&&e.month(e.month()+l*n),r&&!i&&it.updateOffset(e),(a||l)&&(e.minute(s),e.hour(o))}function h(e){return"[object Array]"===Object.prototype.toString.call(e)}function p(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function f(e,t,n){var i,s=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),r=0;for(i=0;s>i;i++)(n&&e[i]!==t[i]||!n&&y(e[i])!==y(t[i]))&&r++;return r+o}function m(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=zt[e]||$t[t]||t}return e}function v(e){var t,n,i={};for(n in e)e.hasOwnProperty(n)&&(t=m(n),t&&(i[t]=e[n]));return i}function g(t){var n,i;if(0===t.indexOf("week"))n=7,i="day";else{if(0!==t.indexOf("month"))return;n=12,i="month"}it[t]=function(s,o){var r,a,l=it.fn._lang[t],c=[];if("number"==typeof s&&(o=s,s=e),a=function(e){var t=it().utc().set(i,e);return l.call(it.fn._lang,t,s||"")},null!=o)return a(o);for(r=0;n>r;r++)c.push(a(r));return c}}function y(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function b(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function w(e){return x(e)?366:365}function x(e){return e%4===0&&e%100!==0||e%400===0}function C(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[ct]<0||e._a[ct]>11?ct:e._a[dt]<1||e._a[dt]>b(e._a[lt],e._a[ct])?dt:e._a[ut]<0||e._a[ut]>23?ut:e._a[ht]<0||e._a[ht]>59?ht:e._a[pt]<0||e._a[pt]>59?pt:e._a[ft]<0||e._a[ft]>999?ft:-1,e._pf._overflowDayOfYear&&(lt>t||t>dt)&&(t=dt),e._pf.overflow=t)}function T(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length)),e._isValid}function k(e){return e?e.toLowerCase().replace("_","-"):e}function S(e,t){return t._isUTC?it(e).zone(t._offset||0):it(e).local()}function _(e,t){return t.abbr=e,mt[e]||(mt[e]=new s),mt[e].set(t),mt[e]}function D(e){delete mt[e]}function E(e){var t,n,i,s,o=0,r=function(e){if(!mt[e]&&gt)try{require("./lang/"+e)}catch(t){}return mt[e]};if(!e)return it.fn._lang;if(!h(e)){if(n=r(e))return n;e=[e]}for(;o<e.length;){for(s=k(e[o]).split("-"),t=s.length,i=k(e[o+1]),i=i?i.split("-"):null;t>0;){if(n=r(s.slice(0,t).join("-")))return n;if(i&&i.length>=t&&f(s,i,!0)>=t-1)break;t--}o++}return it.fn._lang}function M(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function A(e){var t,n,i=e.match(xt);for(t=0,n=i.length;n>t;t++)i[t]=Xt[i[t]]?Xt[i[t]]:M(i[t]);return function(s){var o="";for(t=0;n>t;t++)o+=i[t]instanceof Function?i[t].call(s,e):i[t];return o}}function N(e,t){return e.isValid()?(t=F(t,e.lang()),Yt[t]||(Yt[t]=A(t)),Yt[t](e)):e.lang().invalidDate()}function F(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(Ct.lastIndex=0;i>=0&&Ct.test(e);)e=e.replace(Ct,n),Ct.lastIndex=0,i-=1;return e}function O(e,t){var n,i=t._strict;switch(e){case"DDDD":return jt;case"YYYY":case"GGGG":case"gggg":return i?It:St;case"Y":case"G":case"g":return Vt;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?Pt:_t;case"S":if(i)return Ft;case"SS":if(i)return Ot;case"SSS":if(i)return jt;case"DDD":return kt;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Et;case"a":case"A":return E(t._l)._meridiemParse;case"X":return Nt;case"Z":case"ZZ":return Mt;case"T":return At;case"SSSS":return Dt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?Ot:Tt;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Tt;default:return n=new RegExp(H(L(e.replace("\\","")),"i"))}}function j(e){e=e||"";var t=e.match(Mt)||[],n=t[t.length-1]||[],i=(n+"").match(qt)||["-",0,0],s=+(60*i[1])+y(i[2]);return"+"===i[0]?-s:s}function I(e,t,n){var i,s=n._a;switch(e){case"M":case"MM":null!=t&&(s[ct]=y(t)-1);break;case"MMM":case"MMMM":i=E(n._l).monthsParse(t),null!=i?s[ct]=i:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(s[dt]=y(t));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=y(t));break;case"YY":s[lt]=y(t)+(y(t)>68?1900:2e3);break;case"YYYY":case"YYYYY":case"YYYYYY":s[lt]=y(t);break;case"a":case"A":n._isPm=E(n._l).isPM(t);break;case"H":case"HH":case"h":case"hh":s[ut]=y(t);break;case"m":case"mm":s[ht]=y(t);break;case"s":case"ss":s[pt]=y(t);break;case"S":case"SS":case"SSS":case"SSSS":s[ft]=y(1e3*("0."+t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=j(t);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":e=e.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=t)}}function P(e){var t,n,i,s,o,r,a,l,c,d,u=[];if(!e._d){for(i=R(e),e._w&&null==e._a[dt]&&null==e._a[ct]&&(o=function(t){var n=parseInt(t,10);return t?t.length<3?n>68?1900+n:2e3+n:n:null==e._a[lt]?it().weekYear():e._a[lt]},r=e._w,null!=r.GG||null!=r.W||null!=r.E?a=K(o(r.GG),r.W||1,r.E,4,1):(l=E(e._l),c=null!=r.d?Y(r.d,l):null!=r.e?parseInt(r.e,10)+l._week.dow:0,d=parseInt(r.w,10)||1,null!=r.d&&c<l._week.dow&&d++,a=K(o(r.gg),d,c,l._week.doy,l._week.dow)),e._a[lt]=a.year,e._dayOfYear=a.dayOfYear),e._dayOfYear&&(s=null==e._a[lt]?i[lt]:e._a[lt],e._dayOfYear>w(s)&&(e._pf._overflowDayOfYear=!0),n=$(s,0,e._dayOfYear),e._a[ct]=n.getUTCMonth(),e._a[dt]=n.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=u[t]=i[t];for(;7>t;t++)e._a[t]=u[t]=null==e._a[t]?2===t?1:0:e._a[t];u[ut]+=y((e._tzm||0)/60),u[ht]+=y((e._tzm||0)%60),e._d=(e._useUTC?$:z).apply(null,u)}}function V(e){var t;e._d||(t=v(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],P(e))}function R(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function B(e){e._a=[],e._pf.empty=!0;var t,n,i,s,o,r=E(e._l),a=""+e._i,l=a.length,c=0;for(i=F(e._f,r).match(xt)||[],t=0;t<i.length;t++)s=i[t],n=(a.match(O(s,e))||[])[0],n&&(o=a.substr(0,a.indexOf(n)),o.length>0&&e._pf.unusedInput.push(o),a=a.slice(a.indexOf(n)+n.length),c+=n.length),Xt[s]?(n?e._pf.empty=!1:e._pf.unusedTokens.push(s),I(s,n,e)):e._strict&&!n&&e._pf.unusedTokens.push(s);e._pf.charsLeftOver=l-c,a.length>0&&e._pf.unusedInput.push(a),e._isPm&&e._a[ut]<12&&(e._a[ut]+=12),e._isPm===!1&&12===e._a[ut]&&(e._a[ut]=0),P(e),C(e)}function L(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,s){return t||n||i||s})}function H(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function q(e){var n,i,s,o,r;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(0/0));for(o=0;o<e._f.length;o++)r=0,n=a({},e),n._pf=t(),n._f=e._f[o],B(n),T(n)&&(r+=n._pf.charsLeftOver,r+=10*n._pf.unusedTokens.length,n._pf.score=r,(null==s||s>r)&&(s=r,i=n));a(e,i||n)}function W(e){var t,n,i=e._i,s=Rt.exec(i);if(s){for(e._pf.iso=!0,t=0,n=Lt.length;n>t;t++)if(Lt[t][1].exec(i)){e._f=Lt[t][0]+(s[6]||" ");break}for(t=0,n=Ht.length;n>t;t++)if(Ht[t][1].exec(i)){e._f+=Ht[t][0];break}i.match(Mt)&&(e._f+="Z"),B(e)}else e._d=new Date(i)}function U(t){var n=t._i,i=yt.exec(n);n===e?t._d=new Date:i?t._d=new Date(+i[1]):"string"==typeof n?W(t):h(n)?(t._a=n.slice(0),P(t)):p(n)?t._d=new Date(+n):"object"==typeof n?V(t):t._d=new Date(n)}function z(e,t,n,i,s,o,r){var a=new Date(e,t,n,i,s,o,r);return 1970>e&&a.setFullYear(e),a}function $(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function Y(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function G(e,t,n,i,s){return s.relativeTime(t||1,!!n,e,i)}function J(e,t,n){var i=at(Math.abs(e)/1e3),s=at(i/60),o=at(s/60),r=at(o/24),a=at(r/365),l=45>i&&["s",i]||1===s&&["m"]||45>s&&["mm",s]||1===o&&["h"]||22>o&&["hh",o]||1===r&&["d"]||25>=r&&["dd",r]||45>=r&&["M"]||345>r&&["MM",at(r/30)]||1===a&&["y"]||["yy",a];return l[2]=t,l[3]=e>0,l[4]=n,G.apply({},l)}function X(e,t,n){var i,s=n-t,o=n-e.day();return o>s&&(o-=7),s-7>o&&(o+=7),i=it(e).add("d",o),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function K(e,t,n,i,s){var o,r,a=$(e,0,1).getUTCDay();return n=null!=n?n:s,o=s-a+(a>i?7:0)-(s>a?7:0),r=7*(t-1)+(n-s)+o+1,{year:r>0?e:e-1,dayOfYear:r>0?r:w(e-1)+r}}function Z(e){var t=e._i,n=e._f;return null===t?it.invalid({nullInput:!0}):("string"==typeof t&&(e._i=t=E().preparse(t)),it.isMoment(t)?(e=l(t),e._d=new Date(+t._d)):n?h(n)?q(e):B(e):U(e),new o(e))}function Q(e,t){it.fn[e]=it.fn[e+"s"]=function(e){var n=this._isUTC?"UTC":"";return null!=e?(this._d["set"+n+t](e),it.updateOffset(this),this):this._d["get"+n+t]()}}function et(e){it.duration.fn[e]=function(){return this._data[e]}}function tt(e,t){it.duration.fn["as"+e]=function(){return+this/t}}function nt(e){var t=!1,n=it;"undefined"==typeof ender&&(e?(rt.moment=function(){return!t&&console&&console.warn&&(t=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),n.apply(null,arguments)},a(rt.moment,n)):rt.moment=it)}for(var it,st,ot="2.5.1",rt=this,at=Math.round,lt=0,ct=1,dt=2,ut=3,ht=4,pt=5,ft=6,mt={},vt={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},gt="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require,yt=/^\/?Date\((\-?\d+)/i,bt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,wt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,xt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Ct=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Tt=/\d\d?/,kt=/\d{1,3}/,St=/\d{1,4}/,_t=/[+\-]?\d{1,6}/,Dt=/\d+/,Et=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Mt=/Z|[\+\-]\d\d:?\d\d/gi,At=/T/i,Nt=/[\+\-]?\d+(\.\d{1,3})?/,Ft=/\d/,Ot=/\d\d/,jt=/\d{3}/,It=/\d{4}/,Pt=/[+-]?\d{6}/,Vt=/[+-]?\d+/,Rt=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Bt="YYYY-MM-DDTHH:mm:ssZ",Lt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Ht=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],qt=/([\+\-]|\d\d)/gi,Wt="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Ut={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},zt={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},$t={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Yt={},Gt="DDD w W M D d".split(" "),Jt="M D H h m s w W".split(" "),Xt={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return d(this.year()%100,2)},YYYY:function(){return d(this.year(),4)},YYYYY:function(){return d(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+d(Math.abs(e),6)},gg:function(){return d(this.weekYear()%100,2)},gggg:function(){return d(this.weekYear(),4)},ggggg:function(){return d(this.weekYear(),5)},GG:function(){return d(this.isoWeekYear()%100,2)},GGGG:function(){return d(this.isoWeekYear(),4)},GGGGG:function(){return d(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return y(this.milliseconds()/100)},SS:function(){return d(y(this.milliseconds()/10),2)},SSS:function(){return d(this.milliseconds(),3)},SSSS:function(){return d(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+d(y(e/60),2)+":"+d(y(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+d(y(e/60),2)+d(y(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},Kt=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Gt.length;)st=Gt.pop(),Xt[st+"o"]=i(Xt[st],st);for(;Jt.length;)st=Jt.pop(),Xt[st+st]=n(Xt[st],2);for(Xt.DDDD=n(Xt.DDD,3),a(s.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,n,i;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(n=it.utc([2e3,t]),i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[t]=new RegExp(i.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=it([2e3,1]).day(t),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return"function"==typeof n?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,i){var s=this._relativeTime[n];return"function"==typeof s?s(e,t,n,i):s.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return X(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),it=function(n,i,s,o){var r;return"boolean"==typeof s&&(o=s,s=e),r={},r._isAMomentObject=!0,r._i=n,r._f=i,r._l=s,r._strict=o,r._isUTC=!1,r._pf=t(),Z(r)},it.utc=function(n,i,s,o){var r;return"boolean"==typeof s&&(o=s,s=e),r={},r._isAMomentObject=!0,r._useUTC=!0,r._isUTC=!0,r._l=s,r._i=n,r._f=i,r._strict=o,r._pf=t(),Z(r).utc()},it.unix=function(e){return it(1e3*e)},it.duration=function(e,t){var n,i,s,o=e,a=null;return it.isDuration(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(o={},t?o[t]=e:o.milliseconds=e):(a=bt.exec(e))?(n="-"===a[1]?-1:1,o={y:0,d:y(a[dt])*n,h:y(a[ut])*n,m:y(a[ht])*n,s:y(a[pt])*n,ms:y(a[ft])*n}):(a=wt.exec(e))&&(n="-"===a[1]?-1:1,s=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*n},o={y:s(a[2]),M:s(a[3]),d:s(a[4]),h:s(a[5]),m:s(a[6]),s:s(a[7]),w:s(a[8])}),i=new r(o),it.isDuration(e)&&e.hasOwnProperty("_lang")&&(i._lang=e._lang),i},it.version=ot,it.defaultFormat=Bt,it.updateOffset=function(){},it.lang=function(e,t){var n;return e?(t?_(k(e),t):null===t?(D(e),e="en"):mt[e]||E(e),n=it.duration.fn._lang=it.fn._lang=E(e),n._abbr):it.fn._lang._abbr},it.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),E(e)},it.isMoment=function(e){return e instanceof o||null!=e&&e.hasOwnProperty("_isAMomentObject")},it.isDuration=function(e){return e instanceof r},st=Kt.length-1;st>=0;--st)g(Kt[st]);for(it.normalizeUnits=function(e){return m(e)},it.invalid=function(e){var t=it.utc(0/0);return null!=e?a(t._pf,e):t._pf.userInvalidated=!0,t},it.parseZone=function(e){return it(e).parseZone()},a(it.fn=o.prototype,{clone:function(){return it(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=it(this).utc();return 0<e.year()&&e.year()<=9999?N(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):N(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return T(this)},isDSTShifted:function(){return this._a?this.isValid()&&f(this._a,(this._isUTC?it.utc(this._a):it(this._a)).toArray())>0:!1},parsingFlags:function(){return a({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(e){var t=N(this,e||it.defaultFormat);return this.lang().postformat(t)},add:function(e,t){var n;return n="string"==typeof e?it.duration(+t,e):it.duration(e,t),u(this,n,1),this},subtract:function(e,t){var n;return n="string"==typeof e?it.duration(+t,e):it.duration(e,t),u(this,n,-1),this},diff:function(e,t,n){var i,s,o=S(e,this),r=6e4*(this.zone()-o.zone());return t=m(t),"year"===t||"month"===t?(i=432e5*(this.daysInMonth()+o.daysInMonth()),s=12*(this.year()-o.year())+(this.month()-o.month()),s+=(this-it(this).startOf("month")-(o-it(o).startOf("month")))/i,s-=6e4*(this.zone()-it(this).startOf("month").zone()-(o.zone()-it(o).startOf("month").zone()))/i,"year"===t&&(s/=12)):(i=this-o,s="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-r)/864e5:"week"===t?(i-r)/6048e5:i),n?s:c(s)},from:function(e,t){return it.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!t)},fromNow:function(e){return this.from(it(),e)},calendar:function(){var e=S(it(),this).startOf("day"),t=this.diff(e,"days",!0),n=-6>t?"sameElse":-1>t?"lastWeek":0>t?"lastDay":1>t?"sameDay":2>t?"nextDay":7>t?"nextWeek":"sameElse";return this.format(this.lang().calendar(n,this))},isLeapYear:function(){return x(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Y(e,this.lang()),this.add({d:e-t})):t},month:function(e){var t,n=this._isUTC?"UTC":"";return null!=e?"string"==typeof e&&(e=this.lang().monthsParse(e),"number"!=typeof e)?this:(t=this.date(),this.date(1),this._d["set"+n+"Month"](e),this.date(Math.min(t,this.daysInMonth())),it.updateOffset(this),this):this._d["get"+n+"Month"]()},startOf:function(e){switch(e=m(e)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),this},endOf:function(e){return e=m(e),this.startOf(e).add("isoWeek"===e?"week":e,1).subtract("ms",1)},isAfter:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)>+it(e).startOf(t)},isBefore:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)<+it(e).startOf(t)},isSame:function(e,t){return t=t||"ms",+this.clone().startOf(t)===+S(e,this).startOf(t)},min:function(e){return e=it.apply(null,arguments),this>e?this:e},max:function(e){return e=it.apply(null,arguments),e>this?this:e},zone:function(e){var t=this._offset||0;return null==e?this._isUTC?t:this._d.getTimezoneOffset():("string"==typeof e&&(e=j(e)),Math.abs(e)<16&&(e=60*e),this._offset=e,this._isUTC=!0,t!==e&&u(this,it.duration(t-e,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?it(e).zone():0,(this.zone()-e)%60===0},daysInMonth:function(){return b(this.year(),this.month())},dayOfYear:function(e){var t=at((it(this).startOf("day")-it(this).startOf("year"))/864e5)+1;return null==e?t:this.add("d",e-t)},quarter:function(){return Math.ceil((this.month()+1)/3)},weekYear:function(e){var t=X(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==e?t:this.add("y",e-t)},isoWeekYear:function(e){var t=X(this,1,4).year;return null==e?t:this.add("y",e-t)},week:function(e){var t=this.lang().week(this);return null==e?t:this.add("d",7*(e-t))},isoWeek:function(e){var t=X(this,1,4).week;return null==e?t:this.add("d",7*(e-t))},weekday:function(e){var t=(this.day()+7-this.lang()._week.dow)%7;return null==e?t:this.add("d",e-t)},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},get:function(e){return e=m(e),this[e]()},set:function(e,t){return e=m(e),"function"==typeof this[e]&&this[e](t),this},lang:function(t){return t===e?this._lang:(this._lang=E(t),this)}}),st=0;st<Wt.length;st++)Q(Wt[st].toLowerCase().replace(/s$/,""),Wt[st]);Q("year","FullYear"),it.fn.days=it.fn.day,it.fn.months=it.fn.month,it.fn.weeks=it.fn.week,it.fn.isoWeeks=it.fn.isoWeek,it.fn.toJSON=it.fn.toISOString,a(it.duration.fn=r.prototype,{_bubble:function(){var e,t,n,i,s=this._milliseconds,o=this._days,r=this._months,a=this._data;a.milliseconds=s%1e3,e=c(s/1e3),a.seconds=e%60,t=c(e/60),a.minutes=t%60,n=c(t/60),a.hours=n%24,o+=c(n/24),a.days=o%30,r+=c(o/30),a.months=r%12,i=c(r/12),a.years=i},weeks:function(){return c(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*y(this._months/12)},humanize:function(e){var t=+this,n=J(t,!e,this.lang());
return e&&(n=this.lang().pastFuture(t,n)),this.lang().postformat(n)},add:function(e,t){var n=it.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=it.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=m(e),this[e.toLowerCase()+"s"]()},as:function(e){return e=m(e),this["as"+e.charAt(0).toUpperCase()+e.slice(1)+"s"]()},lang:it.fn.lang,toIsoString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),s=Math.abs(this.minutes()),o=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(i||s||o?"T":"")+(i?i+"H":"")+(s?s+"M":"")+(o?o+"S":""):"P0D"}});for(st in Ut)Ut.hasOwnProperty(st)&&(tt(st,Ut[st]),et(st.toLowerCase()));tt("Weeks",6048e5),it.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},it.lang("en",{ordinal:function(e){var t=e%10,n=1===y(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),gt?(module.exports=it,nt(!0)):"function"==typeof define&&define.amd?define("moment",["require","exports","module"],function(t,n,i){return i.config&&i.config()&&i.config().noGlobal!==!0&&nt(i.config().noGlobal===e),it}):nt()}.call(this),function(e){"use strict";var t={i18n:{ar:{months:["كانون الثاني","شباط","آذار","نيسان","مايو","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول"],dayOfWeek:["ن","ث","ع","خ","ج","س","ح"]},ro:{months:["ianuarie","februarie","martie","aprilie","mai","iunie","iulie","august","septembrie","octombrie","noiembrie","decembrie"],dayOfWeek:["l","ma","mi","j","v","s","d"]},id:{months:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],dayOfWeek:["Sen","Sel","Rab","Kam","Jum","Sab","Min"]},bg:{months:["Януари","Февруари","Март","Април","Май","Юни","Юли","Август","Септември","Октомври","Ноември","Декември"],dayOfWeek:["Нд","Пн","Вт","Ср","Чт","Пт","Сб"]},fa:{months:["فروردین","اردیبهشت","خرداد","تیر","مرداد","شهریور","مهر","آبان","آذر","دی","بهمن","اسفند"],dayOfWeek:["یکشنبه","دوشنبه","سه شنبه","چهارشنبه","پنجشنبه","جمعه","شنبه"]},ru:{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayOfWeek:["Вск","Пн","Вт","Ср","Чт","Пт","Сб"]},uk:{months:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],dayOfWeek:["Ндл","Пнд","Втр","Срд","Чтв","Птн","Сбт"]},en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},el:{months:["Ιανουάριος","Φεβρουάριος","Μάρτιος","Απρίλιος","Μάιος","Ιούνιος","Ιούλιος","Αύγουστος","Σεπτέμβριος","Οκτώβριος","Νοέμβριος","Δεκέμβριος"],dayOfWeek:["Κυρ","Δευ","Τρι","Τετ","Πεμ","Παρ","Σαβ"]},de:{months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],dayOfWeek:["So","Mo","Di","Mi","Do","Fr","Sa"]},nl:{months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],dayOfWeek:["zo","ma","di","wo","do","vr","za"]},tr:{months:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],dayOfWeek:["Paz","Pts","Sal","Çar","Per","Cum","Cts"]},fr:{months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],dayOfWeek:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]},es:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayOfWeek:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"]},th:{months:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],dayOfWeek:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."]},pl:{months:["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"],dayOfWeek:["nd","pn","wt","śr","cz","pt","sb"]},pt:{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"]},ch:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeek:["日","一","二","三","四","五","六"]},se:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeek:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"]},kr:{months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayOfWeek:["일","월","화","수","목","금","토"]},it:{months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],dayOfWeek:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"]},da:{months:["January","Februar","Marts","April","Maj","Juni","July","August","September","Oktober","November","December"],dayOfWeek:["Søn","Man","Tir","Ons","Tor","Fre","Lør"]},no:{months:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],dayOfWeek:["Søn","Man","Tir","Ons","Tor","Fre","Lør"]},ja:{months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["日","月","火","水","木","金","土"]},vi:{months:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],dayOfWeek:["CN","T2","T3","T4","T5","T6","T7"]},sl:{months:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],dayOfWeek:["Ned","Pon","Tor","Sre","Čet","Pet","Sob"]},cs:{months:["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"],dayOfWeek:["Ne","Po","Út","St","Čt","Pá","So"]},hu:{months:["Január","Február","Március","Április","Május","Június","Július","Augusztus","Szeptember","Október","November","December"],dayOfWeek:["Va","Hé","Ke","Sze","Cs","Pé","Szo"]}},value:"",lang:"en",format:"Y/m/d H:i",formatTime:"H:i",formatDate:"Y/m/d",startDate:!1,step:60,monthChangeSpinner:!0,closeOnDateSelect:!1,closeOnWithoutClick:!0,closeOnInputClick:!0,timepicker:!0,datepicker:!0,weeks:!1,defaultTime:!1,defaultDate:!1,minDate:!1,maxDate:!1,minTime:!1,maxTime:!1,allowTimes:[],opened:!1,initTime:!0,inline:!1,theme:"",onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onChangeYear:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:!0,inverseButton:!1,hours12:!1,next:"xdsoft_next",prev:"xdsoft_prev",dayOfWeekStart:0,parentID:"body",timeHeightInTimePicker:25,timepickerScrollbar:!0,todayButton:!0,defaultSelect:!0,scrollMonth:!0,scrollTime:!0,scrollInput:!0,lazyInit:!1,mask:!1,validateOnBlur:!0,allowBlank:!0,yearStart:1950,yearEnd:2050,style:"",id:"",fixed:!1,roundTime:"round",className:"",weekends:[],disabledDates:[],yearOffset:0,beforeShowDay:null,enterLikeTab:!0};Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n,i;for(n=t||0,i=this.length;i>n;n+=1)if(this[n]===e)return n;return-1}),Date.prototype.countDaysInMonth=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()},e.fn.xdsoftScroller=function(t){return this.each(function(){var n,i,s,o,r,a=e(this),l=function(e){var t,n={x:0,y:0};return"touchstart"===e.type||"touchmove"===e.type||"touchend"===e.type||"touchcancel"===e.type?(t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],n.x=t.clientX,n.y=t.clientY):("mousedown"===e.type||"mouseup"===e.type||"mousemove"===e.type||"mouseover"===e.type||"mouseout"===e.type||"mouseenter"===e.type||"mouseleave"===e.type)&&(n.x=e.clientX,n.y=e.clientY),n},c=100,d=!1,u=0,h=0,p=0,f=!1,m=0,v=function(){};return"hide"===t?void a.find(".xdsoft_scrollbar").hide():(e(this).hasClass("xdsoft_scroller_box")||(n=a.children().eq(0),i=a[0].clientHeight,s=n[0].offsetHeight,o=e('<div class="xdsoft_scrollbar"></div>'),r=e('<div class="xdsoft_scroller"></div>'),o.append(r),a.addClass("xdsoft_scroller_box").append(o),v=function(e){var t=l(e).y-u+m;0>t&&(t=0),t+r[0].offsetHeight>p&&(t=p-r[0].offsetHeight),a.trigger("scroll_element.xdsoft_scroller",[c?t/c:0])},r.on("touchstart.xdsoft_scroller mousedown.xdsoft_scroller",function(n){i||a.trigger("resize_scroll.xdsoft_scroller",[t]),u=l(n).y,m=parseInt(r.css("margin-top"),10),p=o[0].offsetHeight,"mousedown"===n.type?(document&&e(document.body).addClass("xdsoft_noselect"),e([document.body,window]).on("mouseup.xdsoft_scroller",function s(){e([document.body,window]).off("mouseup.xdsoft_scroller",s).off("mousemove.xdsoft_scroller",v).removeClass("xdsoft_noselect")}),e(document.body).on("mousemove.xdsoft_scroller",v)):(f=!0,n.stopPropagation(),n.preventDefault())}).on("touchmove",function(e){f&&(e.preventDefault(),v(e))}).on("touchend touchcancel",function(){f=!1,m=0}),a.on("scroll_element.xdsoft_scroller",function(e,t){i||a.trigger("resize_scroll.xdsoft_scroller",[t,!0]),t=t>1?1:0>t||isNaN(t)?0:t,r.css("margin-top",c*t),setTimeout(function(){n.css("marginTop",-parseInt((n[0].offsetHeight-i)*t,10))},10)}).on("resize_scroll.xdsoft_scroller",function(e,t,l){var d,u;i=a[0].clientHeight,s=n[0].offsetHeight,d=i/s,u=d*o[0].offsetHeight,d>1?r.hide():(r.show(),r.css("height",parseInt(u>10?u:10,10)),c=o[0].offsetHeight-r[0].offsetHeight,l!==!0&&a.trigger("scroll_element.xdsoft_scroller",[t||Math.abs(parseInt(n.css("marginTop"),10))/(s-i)]))}),a.on("mousewheel",function(e){var t=Math.abs(parseInt(n.css("marginTop"),10));return t-=20*e.deltaY,0>t&&(t=0),a.trigger("scroll_element.xdsoft_scroller",[t/(s-i)]),e.stopPropagation(),!1}),a.on("touchstart",function(e){d=l(e),h=Math.abs(parseInt(n.css("marginTop"),10))}),a.on("touchmove",function(e){if(d){e.preventDefault();var t=l(e);a.trigger("scroll_element.xdsoft_scroller",[(h-(t.y-d.y))/(s-i)])}}),a.on("touchend touchcancel",function(){d=!1,h=0})),void a.trigger("resize_scroll.xdsoft_scroller",[t]))})},e.fn.datetimepicker=function(n){var i,s,o,r=48,a=57,l=96,c=105,d=17,u=46,h=13,p=27,f=8,m=37,v=38,g=39,y=40,b=9,w=116,x=65,C=67,T=86,k=90,S=89,_=!1,D=e.isPlainObject(n)||!n?e.extend(!0,{},t,n):e.extend(!0,{},t),E=0,M=function(e){e.on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function t(){e.is(":disabled")||e.is(":hidden")||!e.is(":visible")||e.data("xdsoft_datetimepicker")||(clearTimeout(E),E=setTimeout(function(){e.data("xdsoft_datetimepicker")||i(e),e.off("open.xdsoft focusin.xdsoft mousedown.xdsoft",t).trigger("open.xdsoft")},100))})};return i=function(t){function i(){var e,n=!1;return D.startDate?n=o.strToDate(D.startDate):(n=D.value||(t&&t.val&&t.val()?t.val():""),n?n=o.strToDateTime(n):D.defaultDate&&(n=o.strToDate(D.defaultDate),D.defaultTime&&(e=o.strtotime(D.defaultTime),n.setHours(e.getHours()),n.setMinutes(e.getMinutes())))),n&&o.isValidDate(n)?F.data("changed",!0):n="",n||0}var s,E,M,A,N,F=e("<div "+(D.id?'id="'+D.id+'"':"")+" "+(D.style?'style="'+D.style+'"':"")+' class="xdsoft_datetimepicker xdsoft_'+D.theme+" xdsoft_noselect "+(D.weeks?" xdsoft_showweeks":"")+D.className+'"></div>'),O=e('<div class="xdsoft_copyright"><a target="_blank" href="http://xdsoft.net/jqplugins/datetimepicker/">xdsoft.net</a></div>'),j=e('<div class="xdsoft_datepicker active"></div>'),I=e('<div class="xdsoft_mounthpicker"><button type="button" class="xdsoft_prev"></button><button type="button" class="xdsoft_today_button"></button><div class="xdsoft_label xdsoft_month"><span></span><i></i></div><div class="xdsoft_label xdsoft_year"><span></span><i></i></div><button type="button" class="xdsoft_next"></button></div>'),P=e('<div class="xdsoft_calendar"></div>'),V=e('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev"></button><div class="xdsoft_time_box"></div><button type="button" class="xdsoft_next"></button></div>'),R=V.find(".xdsoft_time_box").eq(0),B=e('<div class="xdsoft_time_variant"></div>'),L=e('<div class="xdsoft_select xdsoft_monthselect"><div></div></div>'),H=e('<div class="xdsoft_select xdsoft_yearselect"><div></div></div>'),q=!1,W=0,U=0;I.find(".xdsoft_month span").after(L),I.find(".xdsoft_year span").after(H),I.find(".xdsoft_month,.xdsoft_year").on("mousedown.xdsoft",function(t){var n,i,s=e(this).find(".xdsoft_select").eq(0),r=0,a=0,l=s.is(":visible");for(I.find(".xdsoft_select").hide(),o.currentTime&&(r=o.currentTime[e(this).hasClass("xdsoft_month")?"getMonth":"getFullYear"]()),s[l?"hide":"show"](),n=s.find("div.xdsoft_option"),i=0;i<n.length&&n.eq(i).data("value")!==r;i+=1)a+=n[0].offsetHeight;return s.xdsoftScroller(a/(s.children()[0].offsetHeight-s[0].clientHeight)),t.stopPropagation(),!1}),I.find(".xdsoft_select").xdsoftScroller().on("mousedown.xdsoft",function(e){e.stopPropagation(),e.preventDefault()}).on("mousedown.xdsoft",".xdsoft_option",function(){var t=o.currentTime.getFullYear();o&&o.currentTime&&o.currentTime[e(this).parent().parent().hasClass("xdsoft_monthselect")?"setMonth":"setFullYear"](e(this).data("value")),e(this).parent().parent().hide(),F.trigger("xchange.xdsoft"),D.onChangeMonth&&e.isFunction(D.onChangeMonth)&&D.onChangeMonth.call(F,o.currentTime,F.data("input")),t!==o.currentTime.getFullYear()&&e.isFunction(D.onChangeYear)&&D.onChangeYear.call(F,o.currentTime,F.data("input"))}),F.setOptions=function(n){if(D=e.extend(!0,{},D,n),n.allowTimes&&e.isArray(n.allowTimes)&&n.allowTimes.length&&(D.allowTimes=e.extend(!0,[],n.allowTimes)),n.weekends&&e.isArray(n.weekends)&&n.weekends.length&&(D.weekends=e.extend(!0,[],n.weekends)),n.disabledDates&&e.isArray(n.disabledDates)&&n.disabledDates.length&&(D.disabledDates=e.extend(!0,[],n.disabledDates)),!D.open&&!D.opened||D.inline||t.trigger("open.xdsoft"),D.inline&&(q=!0,F.addClass("xdsoft_inline"),t.after(F).hide()),D.inverseButton&&(D.next="xdsoft_prev",D.prev="xdsoft_next"),D.datepicker?j.addClass("active"):j.removeClass("active"),D.timepicker?V.addClass("active"):V.removeClass("active"),D.value&&(t&&t.val&&t.val(D.value),o.setCurrentTime(D.value)),D.dayOfWeekStart=isNaN(D.dayOfWeekStart)?0:parseInt(D.dayOfWeekStart,10)%7,D.timepickerScrollbar||R.xdsoftScroller("hide"),D.minDate&&/^-(.*)$/.test(D.minDate)&&(D.minDate=o.strToDateTime(D.minDate).dateFormat(D.formatDate)),D.maxDate&&/^\+(.*)$/.test(D.maxDate)&&(D.maxDate=o.strToDateTime(D.maxDate).dateFormat(D.formatDate)),I.find(".xdsoft_today_button").css("visibility",D.todayButton?"visible":"hidden"),D.mask){var i=function(e){try{if(document.selection&&document.selection.createRange){var t=document.selection.createRange();return t.getBookmark().charCodeAt(2)-2}if(e.setSelectionRange)return e.selectionStart}catch(n){return 0}},s=function(e,t){if(e="string"==typeof e||e instanceof String?document.getElementById(e):e,!e)return!1;if(e.createTextRange){var n=e.createTextRange();return n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select(),!0}return e.setSelectionRange?(e.setSelectionRange(t,t),!0):!1},E=function(e,t){var n=e.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,"\\$1").replace(/_/g,"{digit+}").replace(/([0-9]{1})/g,"{digit$1}").replace(/\{digit([0-9]{1})\}/g,"[0-$1_]{1}").replace(/\{digit[\+]\}/g,"[0-9_]{1}");return new RegExp(n).test(t)};t.off("keydown.xdsoft"),D.mask===!0&&(D.mask=D.format.replace(/Y/g,"9999").replace(/F/g,"9999").replace(/m/g,"19").replace(/d/g,"39").replace(/H/g,"29").replace(/i/g,"59").replace(/s/g,"59")),"string"===e.type(D.mask)&&(E(D.mask,t.val())||t.val(D.mask.replace(/[0-9]/g,"_")),t.on("keydown.xdsoft",function(n){var o,M,A=this.value,N=n.which;if(N>=r&&a>=N||N>=l&&c>=N||N===f||N===u){for(o=i(this),M=N!==f&&N!==u?String.fromCharCode(N>=l&&c>=N?N-r:N):"_",N!==f&&N!==u||!o||(o-=1,M="_");/[^0-9_]/.test(D.mask.substr(o,1))&&o<D.mask.length&&o>0;)o+=N===f||N===u?-1:1;if(A=A.substr(0,o)+M+A.substr(o+1),""===e.trim(A))A=D.mask.replace(/[0-9]/g,"_");else if(o===D.mask.length)return n.preventDefault(),!1;for(o+=N===f||N===u?0:1;/[^0-9_]/.test(D.mask.substr(o,1))&&o<D.mask.length&&o>0;)o+=N===f||N===u?-1:1;E(D.mask,A)?(this.value=A,s(this,o)):""===e.trim(A)?this.value=D.mask.replace(/[0-9]/g,"_"):t.trigger("error_input.xdsoft")}else if(-1!==[x,C,T,k,S].indexOf(N)&&_||-1!==[p,v,y,m,g,w,d,b,h].indexOf(N))return!0;return n.preventDefault(),!1}))}D.validateOnBlur&&t.off("blur.xdsoft").on("blur.xdsoft",function(){D.allowBlank&&!e.trim(e(this).val()).length?(e(this).val(null),F.data("xdsoft_datetime").empty()):Date.parseDate(e(this).val(),D.format)?F.data("xdsoft_datetime").setCurrentTime(e(this).val()):(e(this).val(o.now().dateFormat(D.format)),F.data("xdsoft_datetime").setCurrentTime(e(this).val())),F.trigger("changedatetime.xdsoft")}),D.dayOfWeekStartPrev=0===D.dayOfWeekStart?6:D.dayOfWeekStart-1,F.trigger("xchange.xdsoft").trigger("afterOpen.xdsoft")},F.data("options",D).on("mousedown.xdsoft",function(e){return e.stopPropagation(),e.preventDefault(),H.hide(),L.hide(),!1}),R.append(B),R.xdsoftScroller(),F.on("afterOpen.xdsoft",function(){R.xdsoftScroller()}),F.append(j).append(V),D.withoutCopyright!==!0&&F.append(O),j.append(I).append(P),e(D.parentID).append(F),s=function(){var t=this;t.now=function(e){var n,i,s=new Date;return!e&&D.defaultDate&&(n=t.strToDate(D.defaultDate),s.setFullYear(n.getFullYear()),s.setMonth(n.getMonth()),s.setDate(n.getDate())),D.yearOffset&&s.setFullYear(s.getFullYear()+D.yearOffset),!e&&D.defaultTime&&(i=t.strtotime(D.defaultTime),s.setHours(i.getHours()),s.setMinutes(i.getMinutes())),s},t.isValidDate=function(e){return"[object Date]"!==Object.prototype.toString.call(e)?!1:!isNaN(e.getTime())},t.setCurrentTime=function(e){t.currentTime="string"==typeof e?t.strToDateTime(e):t.isValidDate(e)?e:t.now(),F.trigger("xchange.xdsoft")},t.empty=function(){t.currentTime=null},t.getCurrentTime=function(){return t.currentTime},t.nextMonth=function(){var n,i=t.currentTime.getMonth()+1;return 12===i&&(t.currentTime.setFullYear(t.currentTime.getFullYear()+1),i=0),n=t.currentTime.getFullYear(),t.currentTime.setDate(Math.min(new Date(t.currentTime.getFullYear(),i+1,0).getDate(),t.currentTime.getDate())),t.currentTime.setMonth(i),D.onChangeMonth&&e.isFunction(D.onChangeMonth)&&D.onChangeMonth.call(F,o.currentTime,F.data("input")),n!==t.currentTime.getFullYear()&&e.isFunction(D.onChangeYear)&&D.onChangeYear.call(F,o.currentTime,F.data("input")),F.trigger("xchange.xdsoft"),i},t.prevMonth=function(){var n=t.currentTime.getMonth()-1;return-1===n&&(t.currentTime.setFullYear(t.currentTime.getFullYear()-1),n=11),t.currentTime.setDate(Math.min(new Date(t.currentTime.getFullYear(),n+1,0).getDate(),t.currentTime.getDate())),t.currentTime.setMonth(n),D.onChangeMonth&&e.isFunction(D.onChangeMonth)&&D.onChangeMonth.call(F,o.currentTime,F.data("input")),F.trigger("xchange.xdsoft"),n},t.getWeekOfYear=function(e){var t=new Date(e.getFullYear(),0,1);return Math.ceil(((e-t)/864e5+t.getDay()+1)/7)},t.strToDateTime=function(e){var n,i,s=[];return e&&e instanceof Date&&t.isValidDate(e)?e:(s=/^(\+|\-)(.*)$/.exec(e),s&&(s[2]=Date.parseDate(s[2],D.formatDate)),s&&s[2]?(n=s[2].getTime()-6e4*s[2].getTimezoneOffset(),i=new Date(o.now().getTime()+parseInt(s[1]+"1",10)*n)):i=e?Date.parseDate(e,D.format):t.now(),t.isValidDate(i)||(i=t.now()),i)},t.strToDate=function(e){if(e&&e instanceof Date&&t.isValidDate(e))return e;var n=e?Date.parseDate(e,D.formatDate):t.now(!0);return t.isValidDate(n)||(n=t.now(!0)),n},t.strtotime=function(e){if(e&&e instanceof Date&&t.isValidDate(e))return e;var n=e?Date.parseDate(e,D.formatTime):t.now(!0);return t.isValidDate(n)||(n=t.now(!0)),n},t.str=function(){return t.currentTime.dateFormat(D.format)},t.currentTime=this.now()},o=new s,I.find(".xdsoft_today_button").on("mousedown.xdsoft",function(){F.data("changed",!0),o.setCurrentTime(0),F.trigger("afterOpen.xdsoft")}).on("dblclick.xdsoft",function(){t.val(o.str()),F.trigger("close.xdsoft")}),I.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var t=e(this),n=0,i=!1;!function s(e){o.currentTime.getMonth();t.hasClass(D.next)?o.nextMonth():t.hasClass(D.prev)&&o.prevMonth(),D.monthChangeSpinner&&(i||(n=setTimeout(s,e||100)))}(500),e([document.body,window]).on("mouseup.xdsoft",function r(){clearTimeout(n),i=!0,e([document.body,window]).off("mouseup.xdsoft",r)})}),V.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var t=e(this),n=0,i=!1,s=110;!function o(e){var r=R[0].clientHeight,a=B[0].offsetHeight,l=Math.abs(parseInt(B.css("marginTop"),10));t.hasClass(D.next)&&a-r-D.timeHeightInTimePicker>=l?B.css("marginTop","-"+(l+D.timeHeightInTimePicker)+"px"):t.hasClass(D.prev)&&l-D.timeHeightInTimePicker>=0&&B.css("marginTop","-"+(l-D.timeHeightInTimePicker)+"px"),R.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(B.css("marginTop"),10)/(a-r))]),s=s>10?10:s-10,i||(n=setTimeout(o,e||s))}(500),e([document.body,window]).on("mouseup.xdsoft",function r(){clearTimeout(n),i=!0,e([document.body,window]).off("mouseup.xdsoft",r)})}),E=0,F.on("xchange.xdsoft",function(t){clearTimeout(E),E=setTimeout(function(){for(var t,i,s,r,a,l,c,d="",u=new Date(o.currentTime.getFullYear(),o.currentTime.getMonth(),1,12,0,0),h=0,p=o.now(),f=!1,m=!1,v=[],g=!0,y="",b="";u.getDay()!==D.dayOfWeekStart;)u.setDate(u.getDate()-1);for(d+="<table><thead><tr>",D.weeks&&(d+="<th></th>"),t=0;7>t;t+=1)d+="<th>"+D.i18n[D.lang].dayOfWeek[(t+D.dayOfWeekStart)%7]+"</th>";for(d+="</tr></thead>",d+="<tbody>",D.maxDate!==!1&&(f=o.strToDate(D.maxDate),f=new Date(f.getFullYear(),f.getMonth(),f.getDate(),23,59,59,999)),D.minDate!==!1&&(m=o.strToDate(D.minDate),m=new Date(m.getFullYear(),m.getMonth(),m.getDate()));h<o.currentTime.countDaysInMonth()||u.getDay()!==D.dayOfWeekStart||o.currentTime.getMonth()===u.getMonth();)v=[],h+=1,i=u.getDate(),s=u.getFullYear(),r=u.getMonth(),a=o.getWeekOfYear(u),v.push("xdsoft_date"),l=D.beforeShowDay&&e.isFunction(D.beforeShowDay.call)?D.beforeShowDay.call(F,u):null,f!==!1&&u>f||m!==!1&&m>u||l&&l[0]===!1?v.push("xdsoft_disabled"):-1!==D.disabledDates.indexOf(u.dateFormat(D.formatDate))&&v.push("xdsoft_disabled"),l&&""!==l[1]&&v.push(l[1]),o.currentTime.getMonth()!==r&&v.push("xdsoft_other_month"),(D.defaultSelect||F.data("changed"))&&o.currentTime.dateFormat(D.formatDate)===u.dateFormat(D.formatDate)&&v.push("xdsoft_current"),p.dateFormat(D.formatDate)===u.dateFormat(D.formatDate)&&v.push("xdsoft_today"),(0===u.getDay()||6===u.getDay()||-1===D.weekends.indexOf(u.dateFormat(D.formatDate)))&&v.push("xdsoft_weekend"),D.beforeShowDay&&e.isFunction(D.beforeShowDay)&&v.push(D.beforeShowDay(u)),g&&(d+="<tr>",g=!1,D.weeks&&(d+="<th>"+a+"</th>")),d+='<td data-date="'+i+'" data-month="'+r+'" data-year="'+s+'" class="xdsoft_date xdsoft_day_of_week'+u.getDay()+" "+v.join(" ")+'"><div>'+i+"</div></td>",u.getDay()===D.dayOfWeekStartPrev&&(d+="</tr>",g=!0),u.setDate(i+1);if(d+="</tbody></table>",P.html(d),I.find(".xdsoft_label span").eq(0).text(D.i18n[D.lang].months[o.currentTime.getMonth()]),I.find(".xdsoft_label span").eq(1).text(o.currentTime.getFullYear()),y="",b="",r="",c=function(e,t){var n=o.now();n.setHours(e),e=parseInt(n.getHours(),10),n.setMinutes(t),t=parseInt(n.getMinutes(),10),v=[],(D.maxTime!==!1&&o.strtotime(D.maxTime).getTime()<n.getTime()||D.minTime!==!1&&o.strtotime(D.minTime).getTime()>n.getTime())&&v.push("xdsoft_disabled"),(D.initTime||D.defaultSelect||F.data("changed"))&&parseInt(o.currentTime.getHours(),10)===parseInt(e,10)&&(D.step>59||Math[D.roundTime](o.currentTime.getMinutes()/D.step)*D.step===parseInt(t,10))&&(D.defaultSelect||F.data("changed")?v.push("xdsoft_current"):D.initTime&&v.push("xdsoft_init_time")),parseInt(p.getHours(),10)===parseInt(e,10)&&parseInt(p.getMinutes(),10)===parseInt(t,10)&&v.push("xdsoft_today"),y+='<div class="xdsoft_time '+v.join(" ")+'" data-hour="'+e+'" data-minute="'+t+'">'+n.dateFormat(D.formatTime)+"</div>"},D.allowTimes&&e.isArray(D.allowTimes)&&D.allowTimes.length)for(h=0;h<D.allowTimes.length;h+=1)b=o.strtotime(D.allowTimes[h]).getHours(),r=o.strtotime(D.allowTimes[h]).getMinutes(),c(b,r);else for(h=0,t=0;h<(D.hours12?12:24);h+=1)for(t=0;60>t;t+=D.step)b=(10>h?"0":"")+h,r=(10>t?"0":"")+t,c(b,r);for(B.html(y),n="",h=0,h=parseInt(D.yearStart,10)+D.yearOffset;h<=parseInt(D.yearEnd,10)+D.yearOffset;h+=1)n+='<div class="xdsoft_option '+(o.currentTime.getFullYear()===h?"xdsoft_current":"")+'" data-value="'+h+'">'+h+"</div>";for(H.children().eq(0).html(n),h=0,n="";11>=h;h+=1)n+='<div class="xdsoft_option '+(o.currentTime.getMonth()===h?"xdsoft_current":"")+'" data-value="'+h+'">'+D.i18n[D.lang].months[h]+"</div>";L.children().eq(0).html(n),e(F).trigger("generate.xdsoft")},10),t.stopPropagation()}).on("afterOpen.xdsoft",function(){if(D.timepicker){var e,t,n,i;B.find(".xdsoft_current").length?e=".xdsoft_current":B.find(".xdsoft_init_time").length&&(e=".xdsoft_init_time"),e?(t=R[0].clientHeight,n=B[0].offsetHeight,i=B.find(e).index()*D.timeHeightInTimePicker+1,i>n-t&&(i=n-t),R.trigger("scroll_element.xdsoft_scroller",[parseInt(i,10)/(n-t)])):R.trigger("scroll_element.xdsoft_scroller",[0])}}),M=0,P.on("click.xdsoft","td",function(n){n.stopPropagation(),M+=1;var i=e(this),s=o.currentTime;return(void 0===s||null===s)&&(o.currentTime=o.now(),s=o.currentTime),i.hasClass("xdsoft_disabled")?!1:(s.setDate(1),s.setFullYear(i.data("year")),s.setMonth(i.data("month")),s.setDate(i.data("date")),F.trigger("select.xdsoft",[s]),t.val(o.str()),(M>1||D.closeOnDateSelect===!0||0===D.closeOnDateSelect&&!D.timepicker)&&!D.inline&&F.trigger("close.xdsoft"),D.onSelectDate&&e.isFunction(D.onSelectDate)&&D.onSelectDate.call(F,o.currentTime,F.data("input"),n),F.data("changed",!0),F.trigger("xchange.xdsoft"),F.trigger("changedatetime.xdsoft"),void setTimeout(function(){M=0},200))}),B.on("click.xdsoft","div",function(t){t.stopPropagation();var n=e(this),i=o.currentTime;return(void 0===i||null===i)&&(o.currentTime=o.now(),i=o.currentTime),n.hasClass("xdsoft_disabled")?!1:(i.setHours(n.data("hour")),i.setMinutes(n.data("minute")),F.trigger("select.xdsoft",[i]),F.data("input").val(o.str()),D.inline||F.trigger("close.xdsoft"),D.onSelectTime&&e.isFunction(D.onSelectTime)&&D.onSelectTime.call(F,o.currentTime,F.data("input"),t),F.data("changed",!0),F.trigger("xchange.xdsoft"),void F.trigger("changedatetime.xdsoft"))}),j.on("mousewheel.xdsoft",function(e){return D.scrollMonth?(e.deltaY<0?o.nextMonth():o.prevMonth(),!1):!0}),t.on("mousewheel.xdsoft",function(e){return D.scrollInput?!D.datepicker&&D.timepicker?(A=B.find(".xdsoft_current").length?B.find(".xdsoft_current").eq(0).index():0,A+e.deltaY>=0&&A+e.deltaY<B.children().length&&(A+=e.deltaY),B.children().eq(A).length&&B.children().eq(A).trigger("mousedown"),!1):D.datepicker&&!D.timepicker?(j.trigger(e,[e.deltaY,e.deltaX,e.deltaY]),t.val&&t.val(o.str()),F.trigger("changedatetime.xdsoft"),!1):void 0:!0}),F.on("changedatetime.xdsoft",function(t){if(D.onChangeDateTime&&e.isFunction(D.onChangeDateTime)){var n=F.data("input");D.onChangeDateTime.call(F,o.currentTime,n,t),delete D.value,n.trigger("change")}}).on("generate.xdsoft",function(){D.onGenerate&&e.isFunction(D.onGenerate)&&D.onGenerate.call(F,o.currentTime,F.data("input")),q&&(F.trigger("afterOpen.xdsoft"),q=!1)}).on("click.xdsoft",function(e){e.stopPropagation()}),A=0,N=function(){var t=F.data("input").offset(),n=t.top+F.data("input")[0].offsetHeight-1,i=t.left,s="absolute";D.fixed?(n-=e(window).scrollTop(),i-=e(window).scrollLeft(),s="fixed"):(n+F[0].offsetHeight>e(window).height()+e(window).scrollTop()&&(n=t.top-F[0].offsetHeight+1),0>n&&(n=0),i+F[0].offsetWidth>e(window).width()&&(i=e(window).width()-F[0].offsetWidth)),F.css({left:i,top:n,position:s})},F.on("open.xdsoft",function(t){var n=!0;D.onShow&&e.isFunction(D.onShow)&&(n=D.onShow.call(F,o.currentTime,F.data("input"),t)),n!==!1&&(F.show(),N(),e(window).off("resize.xdsoft",N).on("resize.xdsoft",N),D.closeOnWithoutClick&&e([document.body,window]).on("mousedown.xdsoft",function i(){F.trigger("close.xdsoft"),e([document.body,window]).off("mousedown.xdsoft",i)}))}).on("close.xdsoft",function(t){var n=!0;I.find(".xdsoft_month,.xdsoft_year").find(".xdsoft_select").hide(),D.onClose&&e.isFunction(D.onClose)&&(n=D.onClose.call(F,o.currentTime,F.data("input"),t)),n===!1||D.opened||D.inline||F.hide(),t.stopPropagation()}).data("input",t),W=0,U=0,F.data("xdsoft_datetime",o),F.setOptions(D),o.setCurrentTime(i()),t.data("xdsoft_datetimepicker",F).on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function(){t.is(":disabled")||t.is(":hidden")||!t.is(":visible")||t.data("xdsoft_datetimepicker").is(":visible")&&D.closeOnInputClick||(clearTimeout(W),W=setTimeout(function(){t.is(":disabled")||t.is(":hidden")||!t.is(":visible")||(q=!0,o.setCurrentTime(i()),F.trigger("open.xdsoft"))},100))}).on("keydown.xdsoft",function(t){var n,i=(this.value,t.which);return-1!==[h].indexOf(i)&&D.enterLikeTab?(n=e("input:visible,textarea:visible"),F.trigger("close.xdsoft"),n.eq(n.index(this)+1).focus(),!1):-1!==[b].indexOf(i)?(F.trigger("close.xdsoft"),!0):void 0})},s=function(t){var n=t.data("xdsoft_datetimepicker");n&&(n.data("xdsoft_datetime",null),n.remove(),t.data("xdsoft_datetimepicker",null).off(".xdsoft"),e(window).off("resize.xdsoft"),e([window,document.body]).off("mousedown.xdsoft"),t.unmousewheel&&t.unmousewheel())},e(document).off("keydown.xdsoftctrl keyup.xdsoftctrl").on("keydown.xdsoftctrl",function(e){e.keyCode===d&&(_=!0)}).on("keyup.xdsoftctrl",function(e){e.keyCode===d&&(_=!1)}),this.each(function(){var t=e(this).data("xdsoft_datetimepicker");if(t){if("string"===e.type(n))switch(n){case"show":e(this).select().focus(),t.trigger("open.xdsoft");break;case"hide":t.trigger("close.xdsoft");break;case"destroy":s(e(this));break;case"reset":this.value=this.defaultValue,this.value&&t.data("xdsoft_datetime").isValidDate(Date.parseDate(this.value,D.format))||t.data("changed",!1),t.data("xdsoft_datetime").setCurrentTime(this.value)}else t.setOptions(n);return 0}"string"!==e.type(n)&&(!D.lazyInit||D.open||D.inline?i(e(this)):M(e(this)))})},e.fn.datetimepicker.defaults=t}(jQuery),function(){!function(e){"function"==typeof define&&define.amd?define("datetimepicker",["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var r=t||window.event,a=l.call(arguments,1),c=0,u=0,h=0,p=0,f=0,m=0;if(t=e.event.fix(r),t.type="mousewheel","detail"in r&&(h=-1*r.detail),"wheelDelta"in r&&(h=r.wheelDelta),"wheelDeltaY"in r&&(h=r.wheelDeltaY),"wheelDeltaX"in r&&(u=-1*r.wheelDeltaX),"axis"in r&&r.axis===r.HORIZONTAL_AXIS&&(u=-1*h,h=0),c=0===h?u:h,"deltaY"in r&&(h=-1*r.deltaY,c=h),"deltaX"in r&&(u=r.deltaX,0===h&&(c=-1*u)),0!==h||0!==u){if(1===r.deltaMode){var v=e.data(this,"mousewheel-line-height");c*=v,h*=v,u*=v}else if(2===r.deltaMode){var g=e.data(this,"mousewheel-page-height");c*=g,h*=g,u*=g}if(p=Math.max(Math.abs(h),Math.abs(u)),(!o||o>p)&&(o=p,i(r,p)&&(o/=40)),i(r,p)&&(c/=40,u/=40,h/=40),c=Math[c>=1?"floor":"ceil"](c/o),u=Math[u>=1?"floor":"ceil"](u/o),h=Math[h>=1?"floor":"ceil"](h/o),d.settings.normalizeOffset&&this.getBoundingClientRect){var y=this.getBoundingClientRect();f=t.clientX-y.left,m=t.clientY-y.top}return t.deltaX=u,t.deltaY=h,t.deltaFactor=o,t.offsetX=f,t.offsetY=m,t.deltaMode=0,a.unshift(t,c,u,h),s&&clearTimeout(s),s=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,a)}}function n(){o=null}function i(e,t){return d.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var s,o,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(e.event.fixHooks)for(var c=r.length;c;)e.event.fixHooks[r[--c]]=e.event.mouseHooks;var d=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=a.length;n;)this.addEventListener(a[--n],t,!1);
else this.onmousewheel=t;e.data(this,"mousewheel-line-height",d.getLineHeight(this)),e.data(this,"mousewheel-page-height",d.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=a.length;n;)this.removeEventListener(a[--n],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var n=e(t),i=n["offsetParent"in e.fn?"offsetParent":"parent"]();return i.length||(i=e("body")),parseInt(i.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),Date.parseFunctions={count:0},Date.parseRegexes=[],Date.formatFunctions={count:0},Date.prototype.dateFormat=function(e){if("unixtime"==e)return parseInt(this.getTime()/1e3);null==Date.formatFunctions[e]&&Date.createNewFormat(e);var t=Date.formatFunctions[e];return this[t]()},Date.createNewFormat=function(format){var funcName="format"+Date.formatFunctions.count++;Date.formatFunctions[format]=funcName;for(var code="Date.prototype."+funcName+" = function() {return ",special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,code+="'"+String.escape(ch)+"' + "):code+=Date.getFormatCode(ch):special=!0;eval(code.substring(0,code.length-3)+";}")},Date.getFormatCode=function(e){switch(e){case"d":return"String.leftPad(this.getDate(), 2, '0') + ";case"D":return"Date.dayNames[this.getDay()].substring(0, 3) + ";case"j":return"this.getDate() + ";case"l":return"Date.dayNames[this.getDay()] + ";case"S":return"this.getSuffix() + ";case"w":return"this.getDay() + ";case"z":return"this.getDayOfYear() + ";case"W":return"this.getWeekOfYear() + ";case"F":return"Date.monthNames[this.getMonth()] + ";case"m":return"String.leftPad(this.getMonth() + 1, 2, '0') + ";case"M":return"Date.monthNames[this.getMonth()].substring(0, 3) + ";case"n":return"(this.getMonth() + 1) + ";case"t":return"this.getDaysInMonth() + ";case"L":return"(this.isLeapYear() ? 1 : 0) + ";case"Y":return"this.getFullYear() + ";case"y":return"('' + this.getFullYear()).substring(2, 4) + ";case"a":return"(this.getHours() < 12 ? 'am' : 'pm') + ";case"A":return"(this.getHours() < 12 ? 'AM' : 'PM') + ";case"g":return"((this.getHours() %12) ? this.getHours() % 12 : 12) + ";case"G":return"this.getHours() + ";case"h":return"String.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + ";case"H":return"String.leftPad(this.getHours(), 2, '0') + ";case"i":return"String.leftPad(this.getMinutes(), 2, '0') + ";case"s":return"String.leftPad(this.getSeconds(), 2, '0') + ";case"O":return"this.getGMTOffset() + ";case"T":return"this.getTimezone() + ";case"Z":return"(this.getTimezoneOffset() * -60) + ";default:return"'"+String.escape(e)+"' + "}},Date.parseDate=function(e,t){if("unixtime"==t)return new Date(isNaN(parseInt(e))?0:1e3*parseInt(e));null==Date.parseFunctions[t]&&Date.createParser(t);var n=Date.parseFunctions[t];return Date[n](e)},Date.createParser=function(format){var funcName="parse"+Date.parseFunctions.count++,regexNum=Date.parseRegexes.length,currentGroup=1;Date.parseFunctions[format]=funcName;for(var code="Date."+funcName+" = function(input) {\nvar y = -1, m = -1, d = -1, h = -1, i = -1, s = -1, z = -1;\nvar d = new Date();\ny = d.getFullYear();\nm = d.getMonth();\nd = d.getDate();\nvar results = input.match(Date.parseRegexes["+regexNum+"]);\nif (results && results.length > 0) {",regex="",special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,regex+=String.escape(ch)):(obj=Date.formatCodeToRegex(ch,currentGroup),currentGroup+=obj.g,regex+=obj.s,obj.g&&obj.c&&(code+=obj.c)):special=!0;code+="if (y > 0 && z > 0){\nvar doyDate = new Date(y,0);\ndoyDate.setDate(z);\nm = doyDate.getMonth();\nd = doyDate.getDate();\n}",code+="if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0)\n{return new Date(y, m, d, h, i, s);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0)\n{return new Date(y, m, d, h, i);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0)\n{return new Date(y, m, d, h);}\nelse if (y > 0 && m >= 0 && d > 0)\n{return new Date(y, m, d);}\nelse if (y > 0 && m >= 0)\n{return new Date(y, m);}\nelse if (y > 0)\n{return new Date(y);}\n}return null;}",Date.parseRegexes[regexNum]=new RegExp("^"+regex+"$"),eval(code)},Date.formatCodeToRegex=function(e,t){switch(e){case"D":return{g:0,c:null,s:"(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)"};case"j":case"d":return{g:1,c:"d = parseInt(results["+t+"], 10);\n",s:"(\\d{1,2})"};case"l":return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"};case"S":return{g:0,c:null,s:"(?:st|nd|rd|th)"};case"w":return{g:0,c:null,s:"\\d"};case"z":return{g:1,c:"z = parseInt(results["+t+"], 10);\n",s:"(\\d{1,3})"};case"W":return{g:0,c:null,s:"(?:\\d{2})"};case"F":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+t+"].substring(0, 3)], 10);\n",s:"("+Date.monthNames.join("|")+")"};case"M":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+t+"]], 10);\n",s:"(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)"};case"n":case"m":return{g:1,c:"m = parseInt(results["+t+"], 10) - 1;\n",s:"(\\d{1,2})"};case"t":return{g:0,c:null,s:"\\d{1,2}"};case"L":return{g:0,c:null,s:"(?:1|0)"};case"Y":return{g:1,c:"y = parseInt(results["+t+"], 10);\n",s:"(\\d{4})"};case"y":return{g:1,c:"var ty = parseInt(results["+t+"], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"};case"a":return{g:1,c:"if (results["+t+"] == 'am') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(am|pm)"};case"A":return{g:1,c:"if (results["+t+"] == 'AM') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(AM|PM)"};case"g":case"G":case"h":case"H":return{g:1,c:"h = parseInt(results["+t+"], 10);\n",s:"(\\d{1,2})"};case"i":return{g:1,c:"i = parseInt(results["+t+"], 10);\n",s:"(\\d{2})"};case"s":return{g:1,c:"s = parseInt(results["+t+"], 10);\n",s:"(\\d{2})"};case"O":return{g:0,c:null,s:"[+-]\\d{4}"};case"T":return{g:0,c:null,s:"[A-Z]{3}"};case"Z":return{g:0,c:null,s:"[+-]\\d{1,5}"};default:return{g:0,c:null,s:String.escape(e)}}},Date.prototype.getTimezone=function(){return this.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3")},Date.prototype.getGMTOffset=function(){return(this.getTimezoneOffset()>0?"-":"+")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+String.leftPad(Math.abs(this.getTimezoneOffset())%60,2,"0")},Date.prototype.getDayOfYear=function(){var e=0;Date.daysInMonth[1]=this.isLeapYear()?29:28;for(var t=0;t<this.getMonth();++t)e+=Date.daysInMonth[t];return e+this.getDate()},Date.prototype.getWeekOfYear=function(){var e=this.getDayOfYear()+(4-this.getDay()),t=new Date(this.getFullYear(),0,1),n=7-t.getDay()+4;return String.leftPad(Math.ceil((e-n)/7)+1,2,"0")},Date.prototype.isLeapYear=function(){var e=this.getFullYear();return 0==(3&e)&&(e%100||e%400==0&&e)},Date.prototype.getFirstDayOfMonth=function(){var e=(this.getDay()-(this.getDate()-1))%7;return 0>e?e+7:e},Date.prototype.getLastDayOfMonth=function(){var e=(this.getDay()+(Date.daysInMonth[this.getMonth()]-this.getDate()))%7;return 0>e?e+7:e},Date.prototype.getDaysInMonth=function(){return Date.daysInMonth[1]=this.isLeapYear()?29:28,Date.daysInMonth[this.getMonth()]},Date.prototype.getSuffix=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},String.escape=function(e){return e.replace(/('|\\)/g,"\\$1")},String.leftPad=function(e,t,n){var i=new String(e);for(null==n&&(n=" ");i.length<t;)i=n+i;return i},Date.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31],Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Date.y2kYear=50,Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},Date.patterns={ISO8601LongPattern:"Y-m-d H:i:s",ISO8601ShortPattern:"Y-m-d",ShortDatePattern:"n/j/Y",LongDatePattern:"l, F d, Y",FullDateTimePattern:"l, F d, Y g:i:s A",MonthDayPattern:"F d",ShortTimePattern:"g:i A",LongTimePattern:"g:i:s A",SortableDateTimePattern:"Y-m-d\\TH:i:s",UniversalSortableDateTimePattern:"Y-m-d H:i:sO",YearMonthPattern:"F, Y"}}(),define("plugins/date/view.js",["pluginBaseView","moment","jquery","datetimepicker"],function(e,t,n){"use strict";function i(){Date.parseDate=function(e,n){return t(e,n).toDate()},Date.prototype.dateFormat=function(e){return t(this).format(e)}}function s(e){setTimeout(o.bind(this,e),100)}function o(e){this.$el.find(".datetimepicker").each(function(){n(this).datetimepicker({startDate:t(),timepicker:!1,format:"YYYY/MM/DD",formatDate:"YYYY/MM/DD",step:1})}),e.resolve()}return e.extend({beforeRender:i,afterRender:s})}),define("text!plugins/datetime/template.html",[],function(){return'<div class="row">\n    <div class="large-12 small-centered columns">\n        <input class="datetimepicker" data-rv-id="model:_id" data-rv-placeholder="model:type" data-rv-value="model:value">\n    </div>\n</div>\n'}),define("plugins/datetime/model",["grasshopperModel","resources"],function(e,t){"use strict";return e.extend({defaults:{resources:t}})}),define("text!plugins/datetime/setupTemplate.html",[],function(){return""}),define("plugins/datetime/config.js",["text!plugins/datetime/template.html","plugins/datetime/model","text!plugins/datetime/setupTemplate.html"],function(e,t,n){"use strict";return{name:"datetimePlugin",ModelType:t,modelData:{min:1,max:1,options:!1,label:"",type:"datetime",dataType:"date",validation:[],value:""},template:e,setupTemplate:n,wrapper:!1}}),define("plugins/datetime/view.js",["pluginBaseView","moment","jquery","datetimepicker"],function(e,t,n){"use strict";function i(){Date.parseDate=function(e,n){return t(e,n).toDate()},Date.prototype.dateFormat=function(e){return t(this).format(e)}}function s(e){setTimeout(o.bind(this,e),100)}function o(e){this.$el.find(".datetimepicker").each(function(){n(this).datetimepicker({startDate:t(),timepicker:!0,format:"YYYY/MM/DD h:mm a",formatTime:"h:mm a",formatDate:"YYYY/MM/DD",step:1})}),e.resolve()}return e.extend({beforeRender:i,afterRender:s})}),define("text!plugins/dropdown/template.html",[],function(){return'<div class="row">\n    <div class="large-12 small-centered columns">\n        <select data-rv-value="model:value">\n            <option disabled selected>{{model:resources->plugins->dropdown->selectOption}}</option>\n            <option data-rv-each-option="model:options" data-rv-value="option._id">{{option.label}}</option>\n        </select>\n    </div>\n</div>\n'}),define("plugins/dropdown/model",["grasshopperModel","resources"],function(e,t){"use strict";return e.extend({defaults:{resources:t}})}),define("text!plugins/dropdown/setupTemplate.html",[],function(){return'<div class="row">\n    <div class="small-12 columns">\n        <div data-rv-each-option="collection:">\n            <div class="row-collapse">\n                <div class="small-11 columns">\n                    <div class="row">\n                        <div class="small-2 columns">\n                            <label class="right inline">{{model:resources->label}}</label>\n                        </div>\n                        <div class="small-10 columns">\n                            <input type="text" class="optionInput" placeholder="dropdown option" data-rv-value="option:label" style="margin-bottom: 2px;">\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="small-2 columns">\n                            <label class="right inline">{{model:resources->value}}</label>\n                        </div>\n                        <div class="small-10 columns">\n                            <input type="text" class="optionInput" placeholder="dropdown option" data-rv-value="option:_id" style="margin-bottom: 2px;">\n                        </div>\n                    </div>\n                </div>\n\n                <div class="small-1 columns">\n                    <button id="removeOptionFromDropdown" data-rv-on-click="view.removeOptionFromDropdown" class="button radius tiny"><i class="fa fa-minus"></i></button>\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="small-11 columns small-offset-1">\n                    <hr>\n                </div>\n            </div>\n        </div>\n        <button id="addOptionToDropdown" class="right tiny radius"><i class="fa fa-plus"></i></button>\n    </div>\n</div>\n'}),define("plugins/dropdown/config.js",["text!plugins/dropdown/template.html","plugins/dropdown/model","text!plugins/dropdown/setupTemplate.html","backbone"],function(e,t,n,i){"use strict";return{name:"dropdownPlugin",ModelType:t,modelData:{min:1,max:1,options:!0,label:"",type:"dropdown",dataType:"dropdown",validation:[],value:void 0},wrapper:!1,template:e,setupTemplate:n,events:{"click #addOptionToDropdown":"addOptionToDropdown","blur .optionInput":"reduceCollection"},collection:new i.Collection}}),define("plugins/dropdown/view.js",["pluginBaseView"],function(e){"use strict";function t(){this.collection.reset(this.model.get("options"))}function n(){this.collection.add({_id:"",label:""}),this.reduceCollection()}function i(e,t){this.collection.remove(t.option),this.reduceCollection()}function s(){var e=[];this.collection.each(function(t){var n=t.toJSON();e.push(n)}),this.model.set("options",e)}return e.extend({beforeRender:t,addOptionToDropdown:n,removeOptionFromDropdown:i,reduceCollection:s})}),define("text!plugins/editorialwindow/template.html",[],function(){return'<div class="row">\n\n    <div class="row">\n        <div class="small-2 columns">\n\n            <label data-rv-for="model.cid | prepend startDate" class="right inline">{{model:resources->plugins->editorialWindow->start}}</label>\n\n        </div>\n\n        <div class="small-10 columns">\n\n            <div class="small-7 large-4 columns">\n\n                <input class="datetimepicker" data-rv-id="model.cid | prepend startDate"\n                       data-rv-value="model:value->validFrom  | asEditorialDate">\n                <small data-rv-if="model:orderError" class="error small-4">\n                    {{model:resources->plugins->editorialWindow->startAfterEnd}}\n                </small>\n\n            </div>\n            <div class="small-5 large-8 columns">\n\n                <button class="button tiny radius" data-rv-on-click="view.setValidFromToNow">\n                    {{model:resources->plugins->editorialWindow->setToNow}}\n                </button>\n\n            </div>\n\n        </div>\n    </div>\n\n    <div class="row">\n        <div class="small-2 columns">\n\n            <label data-rv-for="model.cid | prepend endDate" class="right inline">{{model:resources->plugins->editorialWindow->end}}</label>\n\n        </div>\n\n        <div class="small-10 columns">\n\n            <div class="small-7 large-4 columns">\n\n                <input class="datetimepicker" data-rv-id="model.cid | prepend endDate"\n                       data-rv-value="model:value->validTo | asEditorialDate">\n\n            </div>\n\n            <div class="small-5 large-8 columns">\n\n                <ul class="button-group radius">\n\n                    <li>\n                        <button class="button tiny" data-rv-on-click="view.setValidToToNow">\n                            {{model:resources->plugins->editorialWindow->setToNow}}\n                        </button>\n                    </li>\n                    <li>\n                        <button class="button tiny" data-rv-on-click="view.setValidToNeverExpire">\n                            {{model:resources->plugins->editorialWindow->neverExpire}}\n                        </button>\n                    </li>\n\n                </ul>\n\n            </div>\n\n        </div>\n\n    </div>\n\n</div>\n'}),define("plugins/editorialwindow/model",["grasshopperModel","resources","moment"],function(e,t,n){"use strict";function i(){this.on("change:value",s.bind(this))}function s(){var e=this.get("value.validFrom"),t=this.get("value.validTo");n(t).isAfter(e)?this.set("orderError",!1):this.set("orderError",!0)}return e.extend({initialize:i,defaults:{resources:t,orderError:!1,value:{validFrom:"",validTo:""}}})}),define("text!plugins/editorialwindow/setupTemplate.html",[],function(){return""}),define("plugins/editorialwindow/formatters",["moment","resources"],function(e,t){"use strict";function n(n){return n?e(n).format(t.plugins.editorialWindow.dateFormat):void 0}function i(t){return t?e(t).toISOString():void 0}return{asEditorialDate:{read:n,publish:i}}}),define("plugins/editorialwindow/config.js",["text!plugins/editorialwindow/template.html","plugins/editorialwindow/model","text!plugins/editorialwindow/setupTemplate.html","plugins/editorialwindow/formatters"],function(e,t,n,i){"use strict";return{name:"editorialWindowPlugin",ModelType:t,modelData:{min:1,max:1,options:!1,label:"",type:"editorialwindow",dataType:"date",validation:[],value:{validFrom:"",validTo:""}},template:e,setupTemplate:n,wrapper:!1,rivetsConfig:{formatters:i}}}),define("plugins/editorialwindow/view.js",["pluginBaseView","moment","jquery","datetimepicker","resources"],function(e,t,n,i,s){"use strict";function o(){Date.parseDate=function(e,n){return t(e,n).toDate()},Date.prototype.dateFormat=function(e){return t(this).format(e)}}function r(e){setTimeout(a.bind(this,e),100)}function a(e){this.$el.find(".datetimepicker").each(function(){n(this).datetimepicker({startDate:t(),timepicker:!0,formatTime:"h:mm a",format:s.plugins.editorialWindow.dateFormat,step:1})}),e.resolve()}function l(){this.model.set("value.validFrom",t().format(s.plugins.editorialWindow.dateFormat))}function c(){this.model.set("value.validTo",t().format(s.plugins.editorialWindow.dateFormat))}function d(){this.model.set("value.validTo",t("December 31 3000").format(s.plugins.editorialWindow.dateFormat))}return e.extend({beforeRender:o,afterRender:r,setValidFromToNow:l,setValidToToNow:c,setValidToNeverExpire:d})}),define("text!plugins/embeddedtype/template.html",[],function(){return'<div class="row">\n    <div class="large-12 small-centered columns">\n\n        <div data-rv-show="model:loading">\n            <div>\n                <i class="fa fa-refresh fa fa-spin"></i>\n            </div>\n        </div>\n\n        <span class="accordionError" data-rv-if="model:invalidContentType">Content type is invalid. Please update your content type.</span>\n\n        <div data-rv-unless="model:invalidContentType" data-rv-hide="model:loading" id="embeddedTypeAccordion">\n\n            <div class="accordionHeader">\n                {{model:accordionLabel | existsOr -- }}\n            </div>\n\n            <div class="accordionContent">\n                <div data-rv-each-field="model:activeContentType->fields">\n                    <div data-rv-fieldwrapper="field"></div>\n                </div>\n            </div>\n\n        </div>\n\n    </div>\n</div>\n'}),define("plugins/embeddedtype/model",["grasshopperModel","resources","constants"],function(e,t,n){"use strict";function i(){return"string"!=typeof this.get("options")?t.plugins.embeddedType.validation.setup.nooptions:void 0}function s(){return!1}return e.extend({idAttribute:"options",defaults:function(){return{resources:t,accordionLabel:"",fields:{},value:{},availableContentTypes:null,activeContentType:null,invalidContentType:null,validations:{setup:i,content:s}}},urlRoot:n.api.contentTypes.url})}),define("text!plugins/embeddedtype/setupTemplate.html",[],function(){return'<div class="row">\n    <div class="small-2 columns">\n        <label class="right inline">{{model:resources->plugins->embeddedType->contentType | withColon}}</label>\n    </div>\n    <div class="small-10 columns">\n        <select data-rv-value="model:options">\n            <option disabled selected>{{model:resources->selectOption}}</option>\n            <option data-rv-each-option="model:availableContentTypes" data-rv-value="option._id">{{option.label}}</option>\n        </select>\n    </div>\n</div>\n'}),define("plugins/embeddedtype/config.js",["text!plugins/embeddedtype/template.html","plugins/embeddedtype/model","text!plugins/embeddedtype/setupTemplate.html","appBinders"],function(e,t,n,i){"use strict";return{name:"embeddedtypePlugin",ModelType:t,modelData:function(){return{min:1,max:1,options:!0,label:"",type:"embeddedtype",dataType:"ref",validation:[],value:{}}},template:e,setupTemplate:n,wrapper:!1,rivetsConfig:{binders:[i]}}}),define("plugins/embeddedtype/view.js",["pluginBaseView","contentTypeWorker","jquery","underscore","masseuse"],function(e,t,n,i,s){"use strict";function o(){this.model.toggle("loading"),r.call(this).done(l.bind(this)),u.call(this)}function r(){var e=new n.Deferred;return t.getAvailableContentTypes().always(a.bind(this,e)),e.promise()}function a(e,t){var n=this.model.get("contentTypeId");t=i.filter(t,function(e){return e._id!==n}),this.model.set("availableContentTypes",t),e.resolve()}function l(){var e,t=this.model.get("options");i.isEmpty(t)&&i.isBoolean(t)?i.isBoolean(t)&&this.model.set("invalidContentType",!0):(e=i.findWhere(this.model.get("availableContentTypes"),{_id:t}),this.model.set("activeContentType",e),c.call(this)),this.model.toggle("loading"),this.parent&&this.parent.resortMulti&&this.parent.resortMulti()}function c(){var e=this.model.get("activeContentType"),t=this;i.each(e.fields,function(e){t.model.set("fields."+e._id,new h("value."+e._id,t.model))}),d.call(this)}function d(){var e=this.model.get("activeContentType.fields"),t=i.first(e)._id;this.model.set("accordionLabel",new h("value."+t,this.model))}function u(){var e=this.$("#embeddedTypeAccordion");e.accordion({header:".accordionHeader",icons:{header:"fa fa-chevron-right",activeHeader:"fa fa-chevron-down"},active:!1,collapsible:!0,heightStyle:"content"})}var h=s.ProxyProperty;return e.extend({afterRender:o})}),define("text!plugins/filereference/template.html",[],function(){return'<div class="row">\n    <div class="small-8 columns">\n        <input type="text" data-rv-value="model:selectedFileName" readonly="true">\n    </div>\n    <div class="small-4 columns">\n\n        <ul class="button-group radius">\n            <li>\n                <button class="button tiny" data-rv-on-click="view.fireSelectFileModal">\n                    {{model:resources->plugins->fileReference->selectFile}}\n                </button>\n            </li>\n            <li data-rv-show="model:selectedFileName">\n                <a class="button tiny" data-rv-on-click="view.fireFileDetailModal">\n                    {{model:resources->plugins->fileReference->viewSelectedFile}}\n                </a>\n            </li>\n        </ul>\n\n    </div>\n</div>\n'}),define("plugins/filereference/model",["grasshopperModel","resources","constants","grasshopperCollection","masseuse","underscore","assetDetailViewModel"],function(e,t,n,i,s,o,r){"use strict";function a(){var t=this;e.prototype.initialize.apply(this,arguments),this.set("childNodesDeep",new(i.extend({comparator:"ancestors",url:function(){return n.api.nodesChildrenDeep.url.replace(":id",t.get("_id"))}})))}var l=s.ComputedProperty;return e.extend({initialize:a,defaults:{resources:t,inSetup:!1,selectedFileName:new l(["value"],function(e){return e?o.last(e.split("/")):""}),assetModel:new l(["value"],function(e){return e?new r({nodeId:o.first(e.split("/")),url:e}):void 0}),nodeId:new l(["options"],function(){return this.get("options.defaultNode")}),value:"",_id:"0",childNodesDeep:null,selectedNodeLabel:null},urlRoot:n.api.node.url})}),define("text!plugins/filereference/setupTemplate.html",[],function(){return'<div class="row fileReferenceSetup">\n\n    <div class="small-12 columns">\n        <div class="small-2 columns">\n            <label data-rv-for="model:_id | prepend fileReference" class="right inline">{{model:resources->plugins->fileReference->defaultFolder | withColon}}</label>\n        </div>\n        <div class="small-10 columns">\n            <div class="row collapse" data-rv-id="model:_id | prepend fileReference">\n                <div class="small-11 columns">\n                    <input type="text" data-rv-value="model:selectedNodeLabel" readonly="true">\n                </div>\n                <div class="small-1 columns" style="padding-left: 0;">\n                    <span class="postfix radius"><i class="fa fa-lock"></i></span>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="small-12 columns">\n        <span>{{model:resources->plugins->contentReference->selectDefaultFolder | withColon}}</span>\n\n        <section id="selectDefaultNode">\n            <ul class="no-bullet noMarginBottom">\n                <li>\n                    <input type="radio" value="0" name="nodeRadio" data-label="Root" id="0">\n                    <label for="0">{{model:resources->root}}</label>\n                </li>\n            </ul>\n            <section class="nodeRadio" id="nodeRadioList"></section>\n        </section>\n    </div>\n\n</div>\n'}),define("plugins/filereference/config.js",["text!plugins/filereference/template.html","plugins/filereference/model","text!plugins/filereference/setupTemplate.html","appBinders","formatters"],function(e,t,n,i,s){"use strict";return{name:"fileReferencePlugin",ModelType:t,modelData:{min:1,max:1,options:{allowedTypes:[],defaultNode:"0"},label:"",type:"filereference",dataType:"ref",validation:[],value:""},template:e,setupTemplate:n,events:{"click #selectDefaultNode":"selectDefaultNode"},rivetsConfig:{formatters:[s],binders:[i]},wrapper:!1}}),define("plugins/filereference/view.js",["pluginBaseView","underscore","jquery","mixins/itemSelectModal","mixins/buildNodeRadioList"],function(e,t,n,i,s){"use strict";function o(){this.model.get("inSetup")&&this.model.get("childNodesDeep").fetch().done(this.buildNodeRadioList.bind(this,this.$("#nodeRadioList"),this.model.get("childNodesDeep")),r.bind(this))}function r(){var e=this.model.get("options.defaultNode"),t=this.$("#selectDefaultNode").find("#"+e);t.prop("checked",!0),this.selectDefaultNode()}function a(){var e=this.$("#selectDefaultNode").find('input:radio[name="nodeRadio"]:checked'),t=e.val(),n=e.attr("data-label");this.model.set("selectedNodeLabel",n),this.model.set("options.defaultNode",t)}function l(){c.call(this).done(d.bind(this))}function c(){var e=this.model.get("value"),t=this.model.get("nodeId");return this.fireFileSelectModal(e,t)}function d(e){this.model.set("value",e)}function u(){this.model.get("assetModel").fetch().done(h.bind(this))}function h(e){this.displayModal({header:this.model.get("selectedContentName"),type:"image",data:e.url})}return e.extend({afterRender:o,fireSelectFileModal:l,selectDefaultNode:a,fireFileDetailModal:u}).extend(i).extend(s)}),define("text!plugins/jsoneditor/template.html",[],function(){return'<div class="row" id="jsonEditor">\n    <div class="small-12 columns">\n        <div id="loadingSpinner" data-rv-show="model:loading">\n            <span>{{model:resources->plugins->jsonEditor->loading}}</span>\n            <i data-rv-show="model:loading" class="fa fa-refresh fa fa-spin"></i>\n        </div>\n        <div id="jsonEditor" class="jsonEditor" data-rv-hide="model:loading"></div>\n        <div class="jsonEditorError" data-rv-if="model:isError">Oooops! Looks like that your JSON is invalid.</div>\n    </div>\n</div>\n'}),define("plugins/jsoneditor/model",["grasshopperModel","resources"],function(e,t){"use strict";return e.extend({defaults:function(){return{resources:t,loading:!1}}})}),define("plugins/jsoneditor/config.js",["text!plugins/jsoneditor/template.html","plugins/jsoneditor/model"],function(e,t){"use strict";return{name:"jsonEditorPlugin",ModelType:t,modelData:function(){return{min:1,max:1,theme:"light",language:"json",label:"",type:"jsoneditor",dataType:"code",validation:[],value:"",allowMultiple:!1}},template:e,wrapper:!1}}),define("plugins/jsoneditor/view.js",["pluginBaseView","underscore","jquery","require"],function(e,t,n,i){"use strict";function s(){this.model.get("inSetup")||o.call(this)}function o(){var e=this;f.call(this),i(["ace/editor","ace/virtual_renderer"],function(t,n){var i=t.Editor,s=n.VirtualRenderer;e.editor=new i(new s(e.$("#jsonEditor")[0])),r.call(e),a.call(e),l.call(e),c.call(e),d.call(e),u.call(e),p.call(e),f.call(e)})}function r(){this.editor.setOptions({maxLines:1/0,minLines:10})}function a(){this.editor.setShowPrintMargin(!1)}function l(){this.editor.getSession().setUseWrapMode(!0)}function c(){this.editor.setTheme("ace/theme/github")}function d(){this.editor.getSession().setMode("ace/mode/json")}function u(){this.editor.on("blur",h.bind(this))}function h(){var e=this.editor.getValue();m()?(this.model.set("isError",!1),this.model.set("value",JSON.parse(e))):this.model.set("isError",!0)}function p(){var e=JSON.stringify(this.model.get("value"),null,4);t.isUndefined(e)||this.editor.setValue(e)}function f(){this.model.toggle("loading")}function m(){try{}catch(e){return!1}return!0}return e.extend({afterRender:s})}),define("text!plugins/keyvalue/template.html",[],function(){return'<div class="row">\n    <div class="small-6 columns">\n        <div class="row">\n            <div class="small-2 columns">\n                <label class="right inline">Key:</label>\n            </div>\n            <div class="small-10 columns">\n                <input type="text" placeholder="key" class="keyValueInput" data-rv-value="model:objKey" style="margin-bottom: 2px;">\n            </div>\n        </div>\n    </div>\n    <div class="small-6 columns">\n        <div class="row">\n            <div class="small-2 columns">\n                <label class="right inline">Value:</label>\n            </div>\n            <div class="small-10 columns">\n                <input type="text" placeholder="value" class="keyValueInput" data-rv-value="model:objValue" style="margin-bottom: 2px;">\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("plugins/keyvalue/model",["grasshopperModel","resources"],function(e,t){"use strict";return e.extend({defaults:{resources:t,objKey:"",objValue:""}})}),define("text!plugins/keyvalue/setupTemplate.html",[],function(){return""}),define("plugins/keyvalue/config.js",["text!plugins/keyvalue/template.html","plugins/keyvalue/model","text!plugins/keyvalue/setupTemplate.html"],function(e,t,n){"use strict";return{name:"keyvaluePlugin",ModelType:t,modelData:{min:1,max:1,options:!1,label:"",type:"keyvalue",dataType:"object",validation:[],value:{"":""}},template:e,setupTemplate:n,events:{"blur .keyValueInput":"buildObj"},wrapper:!1}}),define("plugins/keyvalue/view.js",["pluginBaseView"],function(e){"use strict";function t(){var e,t=this.model.get("value");if(t)for(e in t)this.model.set("objKey",e),this.model.set("objValue",t[e])}function n(){var e=this.model.get("objKey"),t=this.model.get("objValue"),n={};n[e]=t,this.model.set("value",n)}return e.extend({beforeRender:t,buildObj:n})}),define("text!plugins/number/template.html",[],function(){return'<div class="row">\n    <div class="small-6 columns">\n        <div class="row">\n            <div class="small-10 columns">\n                <input type="text" class="numberInput" data-rv-value="model:value">\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("plugins/number/model",["grasshopperModel","resources"],function(e,t){"use strict";return e.extend({defaults:{resources:t,objKey:"",objValue:""}})}),define("text!plugins/number/setupTemplate.html",[],function(){return""}),define("plugins/number/config.js",["text!plugins/number/template.html","plugins/number/model","text!plugins/number/setupTemplate.html"],function(e,t,n){"use strict";
return{name:"numberPlugin",ModelType:t,modelData:{min:1,max:1,options:!1,label:"",type:"number",dataType:"object",validation:[],value:""},template:e,setupTemplate:n,wrapper:!1}}),define("plugins/number/view.js",["pluginBaseView"],function(e){"use strict";function t(){var e,t=this.model.get("value");if(t)for(e in t)this.model.set("objKey",e),this.model.set("objValue",t[e])}function n(){var e=this.model.get("objKey"),t=this.model.get("objValue"),n={};n[e]=t,this.model.set("value",n)}return e.extend({beforeRender:t,buildObj:n})}),define("text!plugins/password/template.html",[],function(){return'<div class="row">\n    <div class="large-12 small-centered columns">\n        <input type="password" data-rv-id="model:_id" data-rv-placeholder="model:type" data-rv-value="model:value">\n        <small class="error" data-rv-show="model:hasError" data-rv-text="model:errorMessage"></small>\n    </div>\n</div>\n'}),define("plugins/password/model",["grasshopperModel","resources"],function(e,t){"use strict";return e.extend({defaults:{resources:t}})}),define("text!plugins/password/setupTemplate.html",[],function(){return""}),define("plugins/password/config.js",["text!plugins/password/template.html","plugins/password/model","text!plugins/password/setupTemplate.html"],function(e,t,n){"use strict";return{name:"passwordPlugin",ModelType:t,modelData:{min:1,max:1,options:!1,label:"",type:"password",defaultValueType:"text",dataType:"string",validation:[],value:""},template:e,setupTemplate:n,wrapper:!1}}),define("plugins/password/view.js",["pluginBaseView"],function(e){"use strict";return e.extend({})}),define("text!plugins/radio/template.html",[],function(){return'<div class="row">\n    <div class="large-12 small-centered columns">\n        radio TEMPLATE has not been made.\n    </div>\n</div>\n'}),define("plugins/radio/model",["grasshopperModel","resources"],function(e,t){"use strict";return e.extend({defaults:{resources:t}})}),define("text!plugins/radio/setupTemplate.html",[],function(){return""}),define("plugins/radio/config.js",["text!plugins/radio/template.html","plugins/radio/model","text!plugins/radio/setupTemplate.html"],function(e,t,n){"use strict";return{name:"radioPlugin",ModelType:t,modelData:{min:1,max:1,options:!1,label:"",type:"radio",dataType:"boolean",validation:[],value:!1},template:e,setupTemplate:n,wrapper:!1}}),define("plugins/radio/view.js",["pluginBaseView"],function(e){"use strict";return e.extend({})}),define("text!plugins/readonly/template.html",[],function(){return'<div class="row">\n    <div class="small-11 columns" style="padding-right: 0;">\n        <input type="text" data-rv-placeholder="model:type" data-rv-value="model:value" readonly="true">\n    </div>\n    <div class="small-1 columns" style="padding-left: 0;">\n        <span class="postfix radius"><i class="fa fa-lock"></i></span>\n    </div>\n</div>\n'}),define("plugins/readonly/model",["grasshopperModel","resources"],function(e,t){"use strict";return e.extend({defaults:{resources:t}})}),define("text!plugins/readonly/setupTemplate.html",[],function(){return""}),define("plugins/readonly/config.js",["text!plugins/readonly/template.html","plugins/readonly/model","text!plugins/readonly/setupTemplate.html"],function(e,t,n){"use strict";return{name:"readonlyPlugin",ModelType:t,modelData:{min:1,max:1,options:!1,label:"",type:"readonly",defaultValueType:"text",dataType:"string",validation:[],value:""},wrapper:!1,template:e,setupTemplate:n}}),define("plugins/readonly/view.js",["pluginBaseView"],function(e){"use strict";return e.extend({})}),define("text!plugins/richtext/template.html",[],function(){return'<div class="row">\n    <div class="large-12 small-centered columns">\n        <div data-rv-show="model:loading">\n            <span>{{model:resources->plugins->richText->loading}}</span>\n            <i data-rv-show="model:loading" class="fa fa-refresh fa fa-spin"></i>\n        </div>\n\n        <textarea data-rv-id="model.cid | prepend ckeditor" data-rv-value="model:value" style="display: none;"></textarea>\n        <div class="richTextEditorPadding"></div>\n    </div>\n</div>\n'}),define("plugins/richtext/model",["grasshopperModel","resources","masseuse","assetDetailViewModel","underscore"],function(e,t,n,i,s){"use strict";var o=n.ComputedProperty;return e.extend({defaults:{resources:t,loading:!1,assetModel:new o(["selectedFile"],function(e){return e?new i({nodeId:s.first(e.split("/")),url:e}):void 0})}})}),define("text!plugins/richtext/setupTemplate.html",[],function(){return""}),define("plugins/richtext/config.js",["text!plugins/richtext/template.html","plugins/richtext/model","text!plugins/richtext/setupTemplate.html"],function(e,t,n){"use strict";return{name:"richTextPlugin",ModelType:t,modelData:{min:1,max:1,options:!1,label:"",type:"richtext",dataType:"string",validation:[],value:""},listeners:[["channels.views","pluginWrapperSortStart","sortStart"],["channels.views","pluginWrapperSortStop","stopSort"]],template:e,setupTemplate:n,wrapper:!1}}),define("plugins/richtext/ckeditorConfig",[],function(){"use strict";return{customConfig:"",filebrowserBrowseUrl:"dummylocation",skin:"moono",allowedContent:!0}}),define("plugins/richtext/view.js",["pluginBaseView","underscore","jquery","plugins/richtext/ckeditorConfig","require","mixins/itemSelectModal"],function(e,t,n,i,s,o){"use strict";function r(){this.model.get("inSetup")||a.call(this).done(c.bind(this),d.bind(this),h.bind(this))}function a(){var e=new n.Deferred;return f.call(this),s(["ckeditorAdapter"],l.bind(this,e)),e.promise()}function l(e){var t=this;this.ckeditor=this.$("#ckeditor"+this.model.cid).ckeditor(i,function(){f.call(t),e&&e.resolve()}).editor}function c(){t.isUndefined(this.model.get("value"))||this.ckeditor.setData(this.model.get("value"))}function d(){this.ckeditor.on("change",u.bind(this))}function u(){this.model.set("value",this.ckeditor.getData())}function h(){this.oldWindowOpen=window.open,window.open=window.opener=m.bind(this)}function p(){this.model&&!this.model.get("inSetup")&&(window.open=this.oldWindowOpen,this.ckeditor.destroy()),e.prototype.remove.apply(this,arguments)}function f(){this.model.toggle("loading")}function m(){v.call(this).done(g.bind(this))}function v(){var e,t=0;return this.fireFileSelectModal(e,t)}function g(e){this.model.set("selectedFile",e),this.model.get("assetModel").fetch().done(function(){var e=this.model.get("assetModel.url");window.CKEDITOR.tools.callFunction(this.ckeditor._.filebrowserFn,e)}.bind(this))}function y(){var e=this.$("#ckeditor"+this.model.cid),t=this.$("#cke_ckeditor"+this.model.cid).clone().addClass("cloned");u.call(this),e.after(t),this.ckeditor.destroy(),e.hide()}function b(){this.$("cloned").remove()}return e.extend({afterRender:r,remove:p,sortStart:y,stopSort:b}).extend(o)}),define("text!plugins/slug/template.html",[],function(){return'<div class="row">\n    <div class="small-12 columns">\n        <input type="text" data-rv-value="model:value | asSlug">\n    </div>\n</div>\n'}),define("plugins/slug/model",["grasshopperModel","resources","grasshopperCollection"],function(e,t,n){"use strict";return e.extend({defaults:{resources:t,oldSlugValue:"",possibleFieldsToSlug:new n}})}),define("text!plugins/slug/setupTemplate.html",[],function(){return'<div class="row">\n    <div class="small-2 columns">\n        <label class="right inline">{{model:resources->plugins->slug->selectField}}</label>\n    </div>\n    <div class="small-10 columns">\n        <select data-rv-value="model:options">\n            <option disabled selected>{{model:resources->selectOption}}</option>\n            <option data-rv-each-option="model:possibleFieldsToSlug:" data-rv-value="option:_id">{{option:label}}</option>\n        </select>\n    </div>\n</div>\n'}),define("plugins/slug/formatters",[],function(){"use strict";function e(e){return e?e.toLowerCase().trim().replace(/[\s]+/g,"-").replace(/[^-a-zA-Z0-9._~]/g,""):""}function t(e){return e?e.toLowerCase().trim().replace(/[\s]+/g,"-").replace(/[^-a-zA-Z0-9._~]/g,""):""}return{asSlug:{read:e,publish:t}}}),define("plugins/slug/config.js",["text!plugins/slug/template.html","plugins/slug/model","text!plugins/slug/setupTemplate.html","plugins/slug/formatters"],function(e,t,n,i){"use strict";return{name:"slugPlugin",ModelType:t,modelData:{min:1,max:1,options:!0,label:"",type:"slug",defaultValueType:"text",dataType:"reference",validation:[],value:""},template:e,setupTemplate:n,wrapper:!1,listeners:[["channels.views","contentFieldsChange","calculateSlug"]],rivetsConfig:{formatters:[i]}}}),define("plugins/slug/view.js",["pluginBaseView","underscore"],function(e,t){"use strict";function n(){this.model.get("inSetup")&&(i.call(this),s.call(this))}function i(){if(this.model){var e=this.parent.parent.collection.where({dataType:"string"}),n=t.filter(e,function(e){return"slug"!==e.get("type")});this.model.get("possibleFieldsToSlug").reset(n)}}function s(){this.parent.parent.collection.on("add remove reset change",i.bind(this))}function o(e){var t=this.model.get("options"),n=e[t],i=e[this.model.get("fieldId")];i===this.model.get("oldSlugValue")&&(this.model.set("oldSlugValue",r.call(this,n)),this.model.set("value",r.call(this,n)))}function r(e){return t.isUndefined(e)?void 0:e.toLowerCase().trim().replace(/[\s]+/g,"-").replace(/[^-a-zA-Z0-9._~]/g,"")}return e.extend({afterRender:n,calculateSlug:t.debounce(o,100)})}),define("text!plugins/svgeditor/template.html",[],function(){return'<div class="row">\n    <div class="large-12 small-centered columns">\n        <iframe id="svgEdit" src="vendor/svg-edit-2.7/svg-editor.html?no_save_warning=true" data-rv-on-load="view.initializeSvgEdit" style="width: 100%; height: 600px"/>\n    </div>\n</div>\n'}),define("plugins/svgeditor/model",["grasshopperModel","resources"],function(e,t){"use strict";return e.extend({defaults:{resources:t}})}),define("text!plugins/svgeditor/setupTemplate.html",[],function(){return""}),define("plugins/svgeditor/config.js",["text!plugins/svgeditor/template.html","plugins/svgeditor/model","text!plugins/svgeditor/setupTemplate.html"],function(e,t,n){"use strict";return{name:"svgeditorPlugin",ModelType:t,modelData:{min:1,max:1,options:!1,label:"",type:"svgeditor",defaultValueType:"text",defaultValue:"",dataType:"string",validation:[],value:""},template:e,setupTemplate:n,wrapper:!1}}),function(){"use strict";function e(e){return function(){var t=this,n=[].slice.call(arguments),i=t.send(e,n,function(){});return function(e){t.callbacks[i]=e}}}function t(e,t){var n=t.result||t.error;o=t.id,e.callbacks[o]&&(t.result?e.callbacks[o](n):e.callbacks[o](n,"error"))}function n(e){if("string"==typeof e.data){var n=this.allowedOrigins,i=e.data&&JSON.parse(e.data);!i||"object"!=typeof i||"svg-edit"!==i.namespace||e.source!==this.frame.contentWindow||-1===n.indexOf("*")&&-1===n.indexOf(e.origin)||t(this,i)}}function i(e){return function(t){n.call(e,t)}}function s(t,n){if(!(this instanceof s))return new s(t);this.allowedOrigins=n||[],this.frame=t,this.callbacks={};var o,r=["updateElementFromJson","embedImage","fixOperaXML","clearSelection","addToSelection","removeFromSelection","addNodeToSelection","open","save","getSvgString","setSvgString","createLayer","deleteCurrentLayer","getCurrentDrawing","setCurrentLayer","renameCurrentLayer","setCurrentLayerPosition","setLayerVisibility","moveSelectedToLayer","clear","clearPath","getNodePoint","clonePathNode","deletePathNode","getResolution","getImageTitle","setImageTitle","setResolution","setBBoxZoom","setZoom","getMode","setMode","getStrokeColor","setStrokeColor","getFillColor","setFillColor","setStrokePaint","setFillPaint","getStrokeWidth","setStrokeWidth","getStrokeStyle","setStrokeStyle","getOpacity","setOpacity","getFillOpacity","setFillOpacity","getStrokeOpacity","setStrokeOpacity","getTransformList","getBBox","getRotationAngle","setRotationAngle","each","bind","setIdPrefix","getBold","setBold","getItalic","setItalic","getFontFamily","setFontFamily","getFontSize","setFontSize","getText","setTextContent","setImageURL","setRectRadius","setSegType","quickClone","changeSelectedAttributeNoUndo","changeSelectedAttribute","deleteSelectedElements","groupSelectedElements","zoomChanged","ungroupSelectedElement","moveToTopSelectedElement","moveToBottomSelectedElement","moveSelectedElements","getStrokedBBox","getVisibleElements","cycleElement","getUndoStackSize","getRedoStackSize","getNextUndoCommandText","getNextRedoCommandText","undo","redo","cloneSelectedElements","alignSelectedElements","getZoom","getVersion","setIconSize","setLang","setCustomHandlers"];for(o=0;o<r.length;o++)this[r[o]]=e(r[o]);window.addEventListener("message",i(this),!1)}var o=0;s.prototype.send=function(e,n,i){var s=this;return o++,this.callbacks[o]=i,setTimeout(function(){if(window.location.origin===s.frame.contentWindow.location.origin){var i={id:o},r=s.frame.contentWindow.svgCanvas;try{i.result=r[e].apply(r,n)}catch(a){i.error=a.message}t(s,i)}else s.frame.contentWindow.postMessage(JSON.stringify({namespace:"svgCanvas",id:o,name:e,args:n}),"*")},0),o},window.embedded_svg_edit=s,window.EmbeddedSVGEdit=s}(),define("svg-edit-embed-api",function(){}),define("plugins/svgeditor/view.js",["grasshopperBaseView","jquery","helpers","svg-edit-embed-api"],function(e,t,n){"use strict";function i(e){a.remove("svgedit-default").done(e.resolve)}function s(){var e=document.getElementById("svgEdit"),t=this.$(e),n=new window.EmbeddedSVGEdit(e),i=t.contents().find("#main_button");this.model.get("value")&&n.setSvgString(this.model.get("value")),this.svgCanvas=n,t.contents().mouseup(this.saveSvg.bind(this)),i.find("#tool_save").hide()}function o(){var e=this;r.call(this).done(function(t){e.model.set("value",t)}).fail()}function r(){var e=new t.Deferred;return this.svgCanvas.getSvgString()(function(t,n){return n?void e.reject(n):void e.resolve(t)}),e.promise()}var a=n.localStorage;return e.extend({beforeRender:i,initializeSvgEdit:s,saveSvg:o})}),define("text!plugins/textarea/template.html",[],function(){return'<div class="row">\n    <div class="large-12 small-centered columns">\n        <textarea type="text" data-rv-placeholder="model:type" data-rv-value="model:value" style="max-width: 100%"></textarea>\n        <small class="error" data-rv-show="model:hasError">{{model:errorMessage}}</small>\n    </div>\n</div>\n'}),define("plugins/textarea/model",["grasshopperModel","resources"],function(e,t){"use strict";return e.extend({defaults:{resources:t}})}),define("text!plugins/textarea/setupTemplate.html",[],function(){return""}),define("plugins/textarea/config.js",["text!plugins/textarea/template.html","plugins/textarea/model","text!plugins/textarea/setupTemplate.html"],function(e,t,n){"use strict";return{name:"textareaPlugin",ModelType:t,modelData:{min:1,max:1,options:!1,label:"",type:"textarea",defaultValueType:"textarea",dataType:"string",validation:[],value:""},wrapper:!1,template:e,setupTemplate:n}}),define("plugins/textarea/view.js",["pluginBaseView"],function(e){"use strict";return e.extend({})}),define("text!plugins/textbox/template.html",[],function(){return'<div class="row">\n    <div class="large-12 small-centered columns">\n        <input type="text" data-rv-id="model:_id" data-rv-placeholder="model:type" data-rv-value="model:value">\n        <small class="error" data-rv-show="model:hasError" data-rv-text="model:errorMessage"></small>\n    </div>\n</div>\n'}),define("plugins/textbox/model",["grasshopperModel","resources"],function(e,t){"use strict";return e.extend({defaults:{resources:t}})}),define("text!plugins/textbox/setupTemplate.html",[],function(){return""}),define("plugins/textbox/config.js",["text!plugins/textbox/template.html","plugins/textbox/model","text!plugins/textbox/setupTemplate.html"],function(e,t,n){"use strict";return{name:"textBoxPlugin",ModelType:t,modelData:{min:1,max:1,options:!1,label:"",type:"textbox",defaultValueType:"text",defaultValue:"",dataType:"string",validation:[],value:""},template:e,setupTemplate:n,wrapper:!1}}),define("plugins/textbox/view.js",["pluginBaseView"],function(e){"use strict";return e.extend({})}),define("plugins",["plugins/author/config.js","plugins/author/view.js","plugins/boolean/config.js","plugins/boolean/view.js","plugins/checkbox/config.js","plugins/checkbox/view.js","plugins/codeeditor/config.js","plugins/codeeditor/view.js","plugins/contentreference/config.js","plugins/contentreference/view.js","plugins/date/config.js","plugins/date/view.js","plugins/datetime/config.js","plugins/datetime/view.js","plugins/dropdown/config.js","plugins/dropdown/view.js","plugins/editorialwindow/config.js","plugins/editorialwindow/view.js","plugins/embeddedtype/config.js","plugins/embeddedtype/view.js","plugins/filereference/config.js","plugins/filereference/view.js","plugins/jsoneditor/config.js","plugins/jsoneditor/view.js","plugins/keyvalue/config.js","plugins/keyvalue/view.js","plugins/number/config.js","plugins/number/view.js","plugins/password/config.js","plugins/password/view.js","plugins/radio/config.js","plugins/radio/view.js","plugins/readonly/config.js","plugins/readonly/view.js","plugins/richtext/config.js","plugins/richtext/view.js","plugins/slug/config.js","plugins/slug/view.js","plugins/svgeditor/config.js","plugins/svgeditor/view.js","plugins/textarea/config.js","plugins/textarea/view.js","plugins/textbox/config.js","plugins/textbox/view.js"],function(e,t,n,i,s,o,r,a,l,c,d,u,h,p,f,m,v,g,y,b,w,x,C,T,k,S,_,D,E,M,A,N,F,O,j,I,P,V,R,B,L,H,q,W){return{fields:[{type:"author",id:1,config:e,helpText:"Author Help Text",name:"Author",view:t},{type:"boolean",id:2,config:n,helpText:"boolean Help Text",name:"Boolean",view:i},{type:"checkbox",id:3,config:s,helpText:"Checkbox Help Text",name:"Checkbox",view:o},{type:"codeeditor",id:4,config:r,helpText:"Code Editor Help Text",name:"Code Editor",view:a},{type:"contentreference",id:5,config:l,helpText:"Content Reference Help Text",name:"Content Reference",view:c},{type:"date",id:6,config:d,helpText:"Date Help Text",name:"Date",view:u},{type:"datetime",id:7,config:h,helpText:"DateTime Help Text",name:"Date Time",view:p},{type:"dropdown",id:8,config:f,helpText:"Dropdown Help Text",name:"Dropdown",view:m},{type:"editorialwindow",id:9,config:v,helpText:"Editorial Window Help Text",name:"Editorial Window",view:g},{type:"embeddedtype",id:10,config:y,helpText:"embedded type Help Text",name:"Embedded Type",view:b},{type:"filereference",id:11,config:w,helpText:"File Reference Help Text",name:"File Reference",view:x},{type:"jsoneditor",id:12,config:C,helpText:"JSON Editor Help Text",name:"JSON Editor",view:T},{type:"keyvalue",id:13,config:k,helpText:"keyvalue Help Text",name:"Key : Value",view:S},{type:"number",id:14,config:_,helpText:"number Help Text",name:"Number",view:D},{type:"password",id:15,config:E,helpText:"password Help Text",name:"Password",view:M},{type:"radio",id:16,config:A,helpText:"radio Help Text",name:"Radio",view:N},{type:"readonly",id:17,config:F,helpText:"Readonly Help Text",name:"Readonly",view:O},{type:"richtext",id:18,config:j,helpText:"Rich Text Help Text",name:"Rich Text",view:I},{type:"slug",id:19,config:P,helpText:"Slug Help Text",name:"Slug",view:V},{type:"svgeditor",id:20,config:R,helpText:"Svg Editor Help Text",name:"Svg Editor",view:B},{type:"textarea",id:21,config:L,helpText:"TextArea Help Text",name:"TextArea",view:H},{type:"textbox",id:22,config:q,helpText:"TextBox Help Text",name:"TextBox",view:W}]}}),define("pluginWrapperBinders",["underscore","masseuse","plugins","jquery"],function(e,t,n,i){"use strict";return{fieldtype:{bind:function(){},unbind:function(){},routine:function(e,n){var s=this,o=s.model.model.get("ViewModule"),r=s.model.model.get("configModule");s.viewInstance&&(s.model.view.removeChild(this.viewInstance),s.viewInstance.remove()),s.viewInstance=new o(i.extend(!0,{},r,{modelData:{value:t.ProxyProperty("value",n),options:n.get("options"),fieldId:n.get("fieldId")},appendTo:e})),this.model.view.addChild(s.viewInstance)},publish:!0},"sortable-multi-columns":function(e,t){var n=i(e);n.removeClass().addClass(t?"small-10 columns":"small-11 columns")}}}),define("pluginWrapperViewConfig",["text!views/pluginWrapper/pluginWrapperView.html","pluginWrapperViewModel","appBinders","pluginWrapperBinders","formatters"],function(e,t,n,i,s){"use strict";return{name:"pluginWrapperView",ModelType:t,appendTo:"#stage",wrapper:!1,template:e,permissions:["admin","editor"],rivetsConfig:{formatters:[s],binders:[n,i]}}}),define("pluginWrapperView",["grasshopperBaseView","pluginWrapperViewConfig","underscore","require","jquery"],function(e,t,n,i,s){"use strict";function o(e){r.call(this).done(c.bind(this),e.resolve)}function r(){var e=this,t=s.Deferred();return i(["plugins"],function(i){var s=n.find(i.fields,{type:e.model.get("type")});s.config.modelData=n.result(s.config,"modelData"),e.model.set({ViewModule:s.view,configModule:s.config}),t.resolve()}),t.promise()}function a(){d.call(this,void 0)}function l(e,t){this.collection.remove(t.field),h.call(this)}function c(){var e=this.model.get("value"),t=this.model.get("min"),i=this.model.get("configModule.modelData.allowMultiple"),s=0,o=this;if(e&&!n.isUndefined(i)&&i===!1)d.call(this,e);else if(e&&n.isArray(e)&&!n.isEmpty(e))n.each(e,function(e){d.call(o,e)});else if(e&&n.isArray(e)&&n.isEmpty(e))h.call(this);else if(e||n.isString(e))d.call(this,e);else if(0===t)this.collection.setValuesOnParentFieldsObject(),h.call(this);else for(h.call(this);t>s;)d.call(o),s++}function d(e){var t={value:u.call(this,e),options:this.model.get("options"),fieldId:this.model.get("_id")};this.collection.add(t),v.call(this),h.call(this)}function u(e){var t=this.model.get("defaultValue")||this.model.get("configModule.modelData.value"),i={};return n.isUndefined(e)?"object"==typeof t?(s.extend(!0,i,t),i):t:e}function h(){p.call(this),f.call(this),m.call(this)}function p(){this.model.set("showAdditionButton",this.collection.length<this.model.get("max"))}function f(){this.model.set("showSubtractionButton",this.collection.length>this.model.get("min"))}function m(){this.model.set("showSortableButton",this.model.get("max")>1&&this.collection.length>1)}function v(){var e=this.$("#sortableMulti"+this.model.cid);this.model.get("max")>1&&e.sortable({revert:!0,handle:".sortableMultiHandle",axis:"y",start:g.bind(this),stop:b.bind(this,e)})}function g(){this.channels.views.trigger("pluginWrapperSortStart")}function y(){this.channels.views.trigger("pluginWrapperSortStop")}function b(e){var t=[],i={},o=e.children(),r=o.length,a=this;o.each(function(){var e=s(this).children(".sortableMulti").attr("modelid");t.push(a.collection.get(e)),i[s(this).attr("sortIndex")]=this}),n.times(r,function(t){e.append(i["sort"+t])}),this.collection.reset(t),y.call(this)}return e.extend({defaultOptions:t,beforeRender:o,addField:a,removeField:l,resortMulti:v})}),define("pluginWrapperViewCollection",["grasshopperCollection","underscore"],function(e,t){"use strict";function n(e,t){return new r([],{parentView:e,thisField:t})}function i(e,t){this.parentView=t.parentView,this.thisField=t.thisField,this.on("all",function(e){this.setValuesOnParentFieldsObject(e)})}function s(){var e=this.toJSON(),t=this.thisField.max;1===t&&(e=e[0]),this.parentView.model.set("fields."+this.thisField._id,e)}function o(){var n=e.prototype.toJSON.apply(this);return t.pluck(n,"value")}var r=e.extend({initialize:i,setValuesOnParentFieldsObject:s,toJSON:o,thisField:null,parentView:null});return r.createFromParentView=n,r}),define("appBinders",["jquery","underscore","masseuse","pluginWrapperView","backbone","pluginWrapperViewCollection","resources"],function(e,t,n,i,s,o,r){"use strict";function a(t,n){var i=e(t);n?i.velocity({opacity:1},{display:""}):i.hide()}return{fieldwrapper:{bind:function(){},unbind:function(){this.viewInstance.remove()},routine:function(e){var s=this,r=this.model.view,a=this.model.field;s.viewInstance=new i({modelData:t.extend({},a,{value:n.ProxyProperty("fields."+a._id,r.model)}),collection:o.createFromParentView(r,a),appendTo:e}),r.addChild(s.viewInstance)},publish:!0},"move-to":function(t,n){var i=e(n);i.append(e(t).contents()),i.foundation()},"stop-propagation":function(t){e(t).on("click",function(e){e.stopPropagation()})},"swap-text-while":function(t,n){var i=e(t);n?(i.attr("oldText")||(i.attr("oldText",i.html()),i.width(i.width())),i.html(i.attr("data-swap-html")||"Saving...")):i.html(i.attr("oldText"))},select2:function(t){var n=e(t);n.select2({width:"100%",matcher:function(e,t,n){return e=e.toUpperCase(),t.toUpperCase().indexOf(e)>=0||n.parent("optgroup").attr("label").toUpperCase().indexOf(e)>=0}})},"multiple-select":function(n,i){var s=e(n);t.has(s,"multipleSelect")?s.multipleSelect("refresh"):s.multipleSelect({selectAlltext:r.selectAll,filter:s.attr("filter"),width:"100%",minumimCountSelected:12,etcaetera:!1}).change(function(){i.trigger("selection",t.map(s.val(),function(e){return{_id:e}}))})},"velocity-show":function(e,t){a(e,t)},"velocity-hide":function(e,t){a(e,!t)}}}),define("login/options",["text!views/login/template.html","login/model","appBinders"],function(e,t,n){"use strict";return{name:"loginView",modelData:{},ModelType:t,browserTitle:"Sign In",appendTo:"#stage",wrapper:!1,template:e,rivetsConfig:{binders:[n]}}}),define("loginWorker",["api","jquery","resources","masseuse","helpers","constants"],function(e,t,n,i,s,o){"use strict";function r(){var e=this,i=t.Deferred();return a.call(this,this.model.get("username"),this.model.get("password")).done(function(t){l.call(e,t),c.call(e).done(d.bind(e)).fail(u.bind(e))}).fail(function(t){e.throwLoginError(n.api.login.errors[t.status])}).always(i.resolve),i.promise()}function a(t,n){return e.getToken(t,n)}function l(e){"Token"===e.token_type&&g.set("authToken","Basic "+e.access_token)}function c(){return e.authenticateToken(g.get("authToken"))}function d(e){var t=g.get(o.loginRedirectKey);"external"!==e.role?(this.app.user.set(e),t&&void 0!==t?g.remove(o.loginRedirectKey).done(this.app.router.navigateTrigger.bind(this.app.router,t)):this.app.router.navigateTrigger(o.internalRoutes.content),this.model.clear(),this.model.set("hideLoginForm",!0)):(this.model.clear(),this.app.router.navigateTrigger(o.internalRoutes.logout))}function u(){this.app.router.navigateTrigger(o.internalRoutes.login)}function h(e){var t=this,n=g.get("authToken");n?p.call(this,n,t,e):(t.removeHeader(),e.reject())}function p(t,n,i){this.user.get("_id")?(v.call(n,i),n.headerView||n.startHeader(),i.resolve()):(this.$deferred=i,e.authenticateToken(t).done(f.bind(n)).fail(m.bind(n)))}function f(e){this.user.set(e),this.headerView||this.startHeader(),this.$deferred.resolve()}function m(){this.goLogout(),this.$deferred.reject()}function v(t){var n=this;e.authenticateToken(g.get("authToken")).error(function(){t.reject(),n.goLogout()})}var g=s.localStorage;return{doLogin:r,userIsStillValidUser:h}}),define("login/view",["grasshopperBaseView","login/options","loginWorker","api"],function(e,t,n,i){"use strict";function s(){this.model.get("hasError")&&l.call(this,this.model.get("oauthError"))}function o(){return this.model.isValid()&&(a.call(this),n.doLogin.call(this).always(a.bind(this))),!1}function r(){a.call(this),i.getGoogleUrl().done(function(e){window.location.href=e}).fail(this.throwLoginError.bind(this))}function a(){this.model.toggle("loggingIn")}function l(e){this.fireErrorModal(e)}return e.extend({defaultOptions:t,afterRender:s,login:o,loginWithGoogle:r,throwLoginError:l})}),define("logoutWorker",["helpers","api","jquery"],function(e,t,n){"use strict";function i(){var e=new n.Deferred;return o.get("authToken")?n.when(s.call(this),o.remove("authToken")).always(this.user.clear.bind(this.user),e.resolve):e.resolve(),e.promise()}function s(){return t.removeAuthToken()}var o=e.localStorage;return{doLogout:i}}),define("text!views/forbidden/forbiddenView.html",[],function(){return'<div class="error_page forbiden_page">\n    <div class="error_sidetext">\n        <h1>Error: Forbidden</h1>\n\n        <h3>We cannot find what you are looking for.</h3>\n        <a href="javascript:history.back()">Go back?</a>\n    </div>\n    <div class="error_image"><img src="/themes/img/grasshopper_error.png"></div>\n</div>\n'}),define("forbiddenViewConfig",["text!views/forbidden/forbiddenView.html","resources","constants"],function(e,t,n){"use strict";return{name:"forbiddenView",modelData:{},browserTitle:"Forbidden",appendTo:"#stage",wrapper:!1,template:e,events:{},listeners:[],breadcrumbs:{icon:"fa-moon-o",crumbs:[{text:n.home,href:n.internalRoutes.content},{text:t.forbidden,href:n.internalRoutes.forbidden}]}}}),define("forbiddenView",["grasshopperBaseView","forbiddenViewConfig"],function(e,t){"use strict";return e.extend({defaultOptions:t})}),define("text!views/notFound/notFoundView.html",[],function(){return'<div class="error_page notFound_page">\n    <div class="error_sidetext">\n        <h1>Error: Not Found</h1>\n\n        <h3>We cannot find what you are looking for.</h3>\n        <a href="javascript:history.back()">Go back?</a>\n    </div>\n    <div class="error_image"><img\n            src="/themes/img/grasshopper_error.59ee16e1.png"></div>\n</div>\n'}),define("notFoundViewConfig",["text!views/notFound/notFoundView.html","resources","constants"],function(e,t,n){"use strict";return{name:"notFoundView",modelData:{},browserTitle:"Not Found",appendTo:"#stage",wrapper:!1,template:e,events:{},listeners:[],breadcrumbs:{icon:"fa-bolt",crumbs:[{text:n.home,href:n.internalRoutes.content},{text:t.notFound,href:n.internalRoutes.notFound}]}}}),define("notFoundView",["grasshopperBaseView","notFoundViewConfig"],function(e,t){"use strict";return e.extend({defaultOptions:t})}),define("text!views/userDetail/template.html",[],function(){return'<div id="userDetail" class="row">\n    <div class="large-12 small-centered columns">\n        <fieldset>\n            <legend>\n                {{model:resources->user->userDetailHeaderText}}{{model:firstname | spaceAfter}}{{model:lastname}}\n            </legend>\n\n            <div class="row">\n\n                <div class="large-12 columns">\n                    <div class="row">\n                        <div class="large-3 columns">\n                            <label for="firstName" class="right inline">{{model:resources->user->attributeTitles->firstName | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <input id="firstName" type="text" data-rv-value="model:firstname" />\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="large-3 columns">\n                            <label for="lastName" class="right inline">{{model:resources->user->attributeTitles->lastName | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <input id="lastName" type="text" data-rv-value="model:lastname" />\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="large-3 columns">\n                            <label for="displayname" class="right inline">{{model:resources->user->attributeTitles->displayname | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <input id="displayname" type="text" data-rv-value="model:displayname" />\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="large-3 columns">\n                            <label for="role" class="right inline">{{model:resources->user->attributeTitles->role | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <select id="role" data-rv-enabled="model:userModel->role | equals admin" data-rv-value="model:role | humanize">\n                                <option data-rv-each-role="model:resources->user->roles" data-rv-text="role | humanize"></option>\n                            </select>\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="large-3 columns">\n                            <label for="email" class="right inline">{{model:resources->user->attributeTitles->email | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <input id="email" type="text" data-rv-value="model:email" />\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="large-3 columns">\n                            <label for="username" class="right inline">{{model:resources->user->attributeTitles->username | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <input id="username" type="text" data-rv-value="model:identities->basic->username" data-rv-placeholder="model:resources->user->attributeTitles->username" />\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="large-3 columns">\n                            <label for="password" class="right inline">{{model:resources->user->attributeTitles->password | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <input id="password" type="password" data-rv-value="model:identities->basic->password" data-rv-placeholder="model:resources->user->attributeTitles->password" />\n                        </div>\n                    </div>\n\n                    <div class="row" data-rv-if="model:createdby">\n                        <div class="large-3 columns">\n                            <label class="right inline">{{model:resources->user->attributeTitles->createdby | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <a class="form-valigned-text" data-rv-href="model:createdby.id | asUserDetailsLink" data-rv-text="model:createdby.displayname"></a>\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="large-3 columns">\n                            <label class="right inline">{{model:resources->user->attributeTitles->linkedidentities | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <div id="identities">\n                                <i data-rv-class-linked="model:hasGoogle" class="fa fa-google" data-rv-on-click="view.toggleGoogle | stopImmediatePropagation"></i>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="large-3 columns">\n                            <label class="right inline">{{model:resources->user->attributeTitles->profile | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <div id="profile"></div>\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="large-3 columns">\n\n                        </div>\n                        <div class="large-9 columns">\n                            <div class="user-lock-delete-buttons">\n                                <div class="user-lock-delete-button-block lock-user-block">\n\n                                    <div class="user-lock-delete-block-header" data-rv-if="model:enabled">\n                                        {{model:resources->user->blocks->lockUser}}\n                                    </div>\n                                    <div class="user-lock-delete-block-header" data-rv-unless="model:enabled", data-rv-text="model:resources->user->blocks->unlockUser">\n                                    </div>\n                                    <div class="user-lock-delete-block-text" data-rv-if="model:enabled">{{model:resources->user->blocks->lockUserSubtext}}</div>\n                                    <div class="user-lock-delete-block-action">\n                                        <a data-rv-on-click="view.toggleEnabled | stopImmediatePropagation" data-rv-show="model:enabled" class="button tiny radius alert">\n                                               {{model:resources->user->blocks->lockUserButton}}\n                                           </a>\n                                        <a data-rv-on-click="view.toggleEnabled | stopImmediatePropagation" data-rv-hide="model:enabled" class="button tiny radius alert">\n                                               {{model:resources->user->blocks->unlockUserButton}}\n                                           </a>\n                                    </div>\n\n\n                                </div>\n                                <div class="user-lock-delete-button-block delete-user-block">\n\n                                    <div class="user-lock-delete-block-header">{{model:resources->user->blocks->deleteUser}}</div>\n                                    <div class="user-lock-delete-block-text">{{model:resources->user->blocks->deleteUserSubtext}}</div>\n                                    <div class="user-lock-delete-block-action">\n                                        <a data-rv-on-click="view.deleteUser | stopImmediatePropagation" class="button tiny radius alert">\n                                               {{model:resources->user->blocks->deleteUserButton}}\n                                           </a>\n                                    </div>\n\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n        </fieldset>\n\n        <div class="row">\n            <div class="small-12 columns">\n                <ul class="button-group radius right">\n                    <li>\n                        <a data-rv-on-click="view.saveUser | preventDefault" class="button tiny" data-rv-disabled="model:saving" data-swap-html="<i class=\'fa fa-refresh fa-spin\'></i>" data-rv-swap-text-while="model:saving">\n                            {{model:resources->save}}\n                        </a>\n                    </li>\n\n                    <li>\n                        <a data-rv-on-click="view.saveAndClose | preventDefault" class="button tiny" data-rv-disabled="model:saving" data-swap-html="<i class=\'fa fa-refresh fa-spin\'></i>" data-rv-swap-text-while="model:saving">\n                            {{model:resources->saveAndClose}}\n                        </a>\n                    </li>\n                </ul>\n            </div>\n        </div>\n\n    </div>\n\n    <section data-rv-move-to="view.mastheadButtonsSelector">\n        <div class="button-bar">\n            <ul class="button-group radius">\n\n                <li>\n                    <a data-rv-on-click="view.addNewUser" class="button tiny">\n                        {{model:resources->mastheadButtons->addNewUser}}\n                    </a>\n                </li>\n\n            </ul>\n\n            <ul class="button-group radius">\n\n                <li>\n                    <a data-rv-on-click="view.saveUser | preventDefault" class="button tiny" data-rv-disabled="model:saving" data-swap-html="<i class=\'fa fa-refresh fa-spin\'></i>" data-rv-swap-text-while="model:saving">\n                        {{model:resources->save}}\n                    </a>\n                </li>\n\n                <li>\n                    <a data-rv-on-click="view.saveAndClose | preventDefault" class="button tiny" data-rv-disabled="model:saving" data-swap-html="<i class=\'fa fa-refresh fa-spin\'></i>" data-rv-swap-text-while="model:saving">\n                        {{model:resources->saveAndClose}}\n                    </a>\n                </li>\n\n            </ul>\n        </div>\n    </section>\n\n</div>\n'
}),define("userDetail/options",["text!views/userDetail/template.html","userDetail/model","resources","constants","appBinders"],function(e,t,n,i,s){"use strict";return{name:"userDetail",modelData:{},ModelType:t,browserTitle:"User Details",headerTab:"users",appendTo:"#stage",wrapper:!1,template:e,breadcrumbs:{icon:"fa-user",crumbs:[{text:i.home,href:i.internalRoutes.content},{text:n.users,href:i.internalRoutes.users}]},rivetsConfig:{binders:[s]}}}),define("mixins/handleRowClick",[],function(){"use strict";function e(e){e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||2==e.which||this.app.router.navigateTrigger(this.model.get("href"))}return{handleRowClick:e}}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("JSONEditor",t):"object"==typeof exports?exports.JSONEditor=t():e.JSONEditor=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var s=n[i]={exports:{},id:i,loaded:!1};return e[i].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var i,s;i=[n(1),n(2),n(3)],s=function(e,t,n){function i(e,t,s){if(!(this instanceof i))throw new Error('JSONEditor constructor called without "new".');var o=n.getInternetExplorerVersion();if(-1!=o&&9>o)throw new Error("Unsupported browser, IE9 or newer required. Please install the newest version of your browser.");arguments.length&&this._create(e,t,s)}return i.modes={},i.prototype._create=function(e,t,n){this.container=e,this.options=t||{},this.json=n||{};var i=this.options.mode||"tree";this.setMode(i)},i.prototype._delete=function(){},i.prototype.set=function(e){this.json=e},i.prototype.get=function(){return this.json},i.prototype.setText=function(e){this.json=n.parse(e)},i.prototype.getText=function(){return JSON.stringify(this.json)},i.prototype.setName=function(e){this.options||(this.options={}),this.options.name=e},i.prototype.getName=function(){return this.options&&this.options.name},i.prototype.setMode=function(e){var t,s,o=this.container,r=n.extend({},this.options);r.mode=e;var a=i.modes[e];if(!a)throw new Error('Unknown mode "'+r.mode+'"');try{var l="text"==a.data;if(s=this.getName(),t=this[l?"getText":"get"](),this._delete(),n.clear(this),n.extend(this,a.mixin),this.create(o,r),this.setName(s),this[l?"setText":"set"](t),"function"==typeof a.load)try{a.load.call(this)}catch(c){}}catch(c){this._onError(c)}},i.prototype._onError=function(e){if("function"==typeof this.onError&&(n.log("WARNING: JSONEditor.onError is deprecated. Use options.error instead."),this.onError(e)),!this.options||"function"!=typeof this.options.error)throw e;this.options.error(e)},i.registerMode=function(e){var t,s;if(n.isArray(e))for(t=0;t<e.length;t++)i.registerMode(e[t]);else{if(!("mode"in e))throw new Error('Property "mode" missing');if(!("mixin"in e))throw new Error('Property "mixin" missing');if(!("data"in e))throw new Error('Property "data" missing');var o=e.mode;if(o in i.modes)throw new Error('Mode "'+o+'" already registered');if("function"!=typeof e.mixin.create)throw new Error('Required function "create" missing on mixin');var r=["setMode","registerMode","modes"];for(t=0;t<r.length;t++)if(s=r[t],s in e.mixin)throw new Error('Reserved property "'+s+'" not allowed in mixin');i.modes[o]=e}},i.registerMode(e),i.registerMode(t),i}.apply(t,i),!(void 0!==s&&(e.exports=s))},function(e,t,n){var i,s;i=[n(4),n(5),n(6),n(7),n(8),n(3)],s=function(e,t,n,i,s,o){var r={};r.create=function(n,i){if(!n)throw new Error("No container element provided.");this.container=n,this.dom={},this.highlighter=new e,this.selection=void 0,this._setOptions(i),this.options.history&&"view"!==this.options.mode&&(this.history=new t(this)),this._createFrame(),this._createTable()},r._delete=function(){this.frame&&this.container&&this.frame.parentNode==this.container&&this.container.removeChild(this.frame)},r._setOptions=function(e){if(this.options={search:!0,history:!0,mode:"tree",name:void 0},e)for(var t in e)e.hasOwnProperty(t)&&(this.options[t]=e[t])};var a=void 0,l=null;return r.set=function(e,t){if(t&&(o.log('Warning: second parameter "name" is deprecated. Use setName(name) instead.'),this.options.name=t),e instanceof Function||void 0===e)this.clear();else{this.content.removeChild(this.table);var n={field:this.options.name,value:e},s=new i(this,n);this._setRoot(s);var r=!1;this.node.expand(r),this.content.appendChild(this.table)}this.history&&this.history.clear()},r.get=function(){return a&&a.blur(),this.node?this.node.getValue():void 0},r.getText=function(){return JSON.stringify(this.get())},r.setText=function(e){this.set(o.parse(e))},r.setName=function(e){this.options.name=e,this.node&&this.node.updateField(this.options.name)},r.getName=function(){return this.options.name},r.clear=function(){this.node&&(this.node.collapse(),this.tbody.removeChild(this.node.getDom()),delete this.node)},r._setRoot=function(e){this.clear(),this.node=e,this.tbody.appendChild(e.getDom())},r.search=function(e){var t;return this.node?(this.content.removeChild(this.table),t=this.node.search(e),this.content.appendChild(this.table)):t=[],t},r.expandAll=function(){this.node&&(this.content.removeChild(this.table),this.node.expand(),this.content.appendChild(this.table))},r.collapseAll=function(){this.node&&(this.content.removeChild(this.table),this.node.collapse(),this.content.appendChild(this.table))},r._onAction=function(e,t){if(this.history&&this.history.add(e,t),this.options.change)try{this.options.change()}catch(n){o.log("Error in change callback: ",n)}},r.startAutoScroll=function(e){var t=this,n=this.content,i=o.getAbsoluteTop(n),s=n.clientHeight,r=i+s,a=24,l=50;this.autoScrollStep=i+a>e&&n.scrollTop>0?(i+a-e)/3:e>r-a&&s+n.scrollTop<n.scrollHeight?(r-a-e)/3:void 0,this.autoScrollStep?this.autoScrollTimer||(this.autoScrollTimer=setInterval(function(){t.autoScrollStep?n.scrollTop-=t.autoScrollStep:t.stopAutoScroll()},l)):this.stopAutoScroll()},r.stopAutoScroll=function(){this.autoScrollTimer&&(clearTimeout(this.autoScrollTimer),delete this.autoScrollTimer),this.autoScrollStep&&delete this.autoScrollStep},r.setSelection=function(e){e&&("scrollTop"in e&&this.content&&(this.content.scrollTop=e.scrollTop),e.range&&o.setSelectionOffset(e.range),e.dom&&e.dom.focus())},r.getSelection=function(){return{dom:l,scrollTop:this.content?this.content.scrollTop:0,range:o.getSelectionOffset()}},r.scrollTo=function(e,t){var n=this.content;if(n){var i=this;i.animateTimeout&&(clearTimeout(i.animateTimeout),delete i.animateTimeout),i.animateCallback&&(i.animateCallback(!1),delete i.animateCallback);var s=n.clientHeight,o=n.scrollHeight-s,r=Math.min(Math.max(e-s/4,0),o),a=function(){var e=n.scrollTop,s=r-e;Math.abs(s)>3?(n.scrollTop+=s/3,i.animateCallback=t,i.animateTimeout=setTimeout(a,50)):(t&&t(!0),n.scrollTop=r,delete i.animateTimeout,delete i.animateCallback)};a()}else t&&t(!1)},r._createFrame=function(){function e(e){t._onEvent(e)}this.frame=document.createElement("div"),this.frame.className="jsoneditor",this.container.appendChild(this.frame);var t=this;this.frame.onclick=function(t){var n=t.target;e(t),"BUTTON"==n.nodeName&&t.preventDefault()},this.frame.oninput=e,this.frame.onchange=e,this.frame.onkeydown=e,this.frame.onkeyup=e,this.frame.oncut=e,this.frame.onpaste=e,this.frame.onmousedown=e,this.frame.onmouseup=e,this.frame.onmouseover=e,this.frame.onmouseout=e,o.addEventListener(this.frame,"focus",e,!0),o.addEventListener(this.frame,"blur",e,!0),this.frame.onfocusin=e,this.frame.onfocusout=e,this.menu=document.createElement("div"),this.menu.className="menu",this.frame.appendChild(this.menu);var i=document.createElement("button");i.className="expand-all",i.title="Expand all fields",i.onclick=function(){t.expandAll()},this.menu.appendChild(i);var r=document.createElement("button");if(r.title="Collapse all fields",r.className="collapse-all",r.onclick=function(){t.collapseAll()},this.menu.appendChild(r),this.history){var a=document.createElement("button");a.className="undo separator",a.title="Undo last action (Ctrl+Z)",a.onclick=function(){t._onUndo()},this.menu.appendChild(a),this.dom.undo=a;var l=document.createElement("button");l.className="redo",l.title="Redo (Ctrl+Shift+Z)",l.onclick=function(){t._onRedo()},this.menu.appendChild(l),this.dom.redo=l,this.history.onChange=function(){a.disabled=!t.history.canUndo(),l.disabled=!t.history.canRedo()},this.history.onChange()}if(this.options&&this.options.modes&&this.options.modes.length){var c=s.create(this,this.options.modes,this.options.mode);this.menu.appendChild(c),this.dom.modeBox=c}this.options.search&&(this.searchBox=new n(this,this.menu))},r._onUndo=function(){this.history&&(this.history.undo(),this.options.change&&this.options.change())},r._onRedo=function(){this.history&&(this.history.redo(),this.options.change&&this.options.change())},r._onEvent=function(e){var t=e.target;"keydown"==e.type&&this._onKeyDown(e),"focus"==e.type&&(l=t);var n=i.getNodeFromTarget(t);n&&n.onEvent(e)},r._onKeyDown=function(e){var t=e.which||e.keyCode,n=e.ctrlKey,i=e.shiftKey,s=!1;if(9==t&&setTimeout(function(){o.selectContentEditable(l)},0),this.searchBox)if(n&&70==t)this.searchBox.dom.search.focus(),this.searchBox.dom.search.select(),s=!0;else if(114==t||n&&71==t){var r=!0;i?this.searchBox.previous(r):this.searchBox.next(r),s=!0}this.history&&(n&&!i&&90==t?(this._onUndo(),s=!0):n&&i&&90==t&&(this._onRedo(),s=!0)),s&&(e.preventDefault(),e.stopPropagation())},r._createTable=function(){var e=document.createElement("div");e.className="outer",this.contentOuter=e,this.content=document.createElement("div"),this.content.className="tree",e.appendChild(this.content),this.table=document.createElement("table"),this.table.className="tree",this.content.appendChild(this.table);var t;this.colgroupContent=document.createElement("colgroup"),"tree"===this.options.mode&&(t=document.createElement("col"),t.width="24px",this.colgroupContent.appendChild(t)),t=document.createElement("col"),t.width="24px",this.colgroupContent.appendChild(t),t=document.createElement("col"),this.colgroupContent.appendChild(t),this.table.appendChild(this.colgroupContent),this.tbody=document.createElement("tbody"),this.table.appendChild(this.tbody),this.frame.appendChild(e)},[{mode:"tree",mixin:r,data:"json"},{mode:"view",mixin:r,data:"json"},{mode:"form",mixin:r,data:"json"}]}.apply(t,i),!(void 0!==s&&(e.exports=s))},function(e,t,n){var i,s;i=[n(8),n(3)],s=function(e,t){var n={};return n.create=function(n,i){i=i||{},this.options=i,this.indentation=i.indentation?Number(i.indentation):2,this.mode="code"==i.mode?"code":"text","code"==this.mode&&"undefined"==typeof ace&&(this.mode="text",t.log("WARNING: Cannot load code editor, Ace library not loaded. Falling back to plain text editor"));var s=this;this.container=n,this.dom={},this.editor=void 0,this.textarea=void 0,this.width=n.clientWidth,this.height=n.clientHeight,this.frame=document.createElement("div"),this.frame.className="jsoneditor",this.frame.onclick=function(e){e.preventDefault()},this.menu=document.createElement("div"),this.menu.className="menu",this.frame.appendChild(this.menu);var o=document.createElement("button");o.className="format",o.title="Format JSON data, with proper indentation and line feeds",this.menu.appendChild(o),o.onclick=function(){try{s.format()}catch(e){s._onError(e)}};var r=document.createElement("button");if(r.className="compact",r.title="Compact JSON data, remove all whitespaces",this.menu.appendChild(r),r.onclick=function(){try{s.compact()}catch(e){s._onError(e)}},this.options&&this.options.modes&&this.options.modes.length){var a=e.create(this,this.options.modes,this.options.mode);this.menu.appendChild(a),this.dom.modeBox=a}if(this.content=document.createElement("div"),this.content.className="outer",this.frame.appendChild(this.content),this.container.appendChild(this.frame),"code"==this.mode){this.editorDom=document.createElement("div"),this.editorDom.style.height="100%",this.editorDom.style.width="100%",this.content.appendChild(this.editorDom);var l=ace.edit(this.editorDom);l.setTheme("ace/theme/jsoneditor"),l.setShowPrintMargin(!1),l.setFontSize(13),l.getSession().setMode("ace/mode/json"),l.getSession().setTabSize(2),l.getSession().setUseSoftTabs(!0),l.getSession().setUseWrapMode(!0),this.editor=l;var c=document.createElement("a");c.appendChild(document.createTextNode("powered by ace")),c.href="http://ace.ajax.org",c.target="_blank",c.className="poweredBy",c.onclick=function(){window.open(c.href,c.target)},this.menu.appendChild(c),i.change&&l.on("change",function(){i.change()})}else{var d=document.createElement("textarea");d.className="text",d.spellcheck=!1,this.content.appendChild(d),this.textarea=d,i.change&&(null===this.textarea.oninput?this.textarea.oninput=function(){i.change()}:this.textarea.onchange=function(){i.change()})}},n._delete=function(){this.frame&&this.container&&this.frame.parentNode==this.container&&this.container.removeChild(this.frame)},n._onError=function(e){if("function"==typeof this.onError&&(t.log("WARNING: JSONEditor.onError is deprecated. Use options.error instead."),this.onError(e)),!this.options||"function"!=typeof this.options.error)throw e;this.options.error(e)},n.compact=function(){var e=t.parse(this.getText());this.setText(JSON.stringify(e))},n.format=function(){var e=t.parse(this.getText());this.setText(JSON.stringify(e,null,this.indentation))},n.focus=function(){this.textarea&&this.textarea.focus(),this.editor&&this.editor.focus()},n.resize=function(){if(this.editor){var e=!1;this.editor.resize(e)}},n.set=function(e){this.setText(JSON.stringify(e,null,this.indentation))},n.get=function(){return t.parse(this.getText())},n.getText=function(){return this.textarea?this.textarea.value:this.editor?this.editor.getValue():""},n.setText=function(e){this.textarea&&(this.textarea.value=e),this.editor&&this.editor.setValue(e,-1)},[{mode:"text",mixin:n,data:"text",load:n.format},{mode:"code",mixin:n,data:"text",load:n.format}]}.apply(t,i),!(void 0!==s&&(e.exports=s))},function(e,t,n){var i;i=function(){var e={};e.parse=function(t){try{return JSON.parse(t)}catch(n){try{return e.parseJS(t)}catch(i){throw e.validate(t),n}}},e.parseJS=function(e){for(var t=[],n=!1,i=0;i<e.length;){var s=e.charAt(i),o="\\"===e.charAt(i-1);'"'!==s&&"'"!==s||o||(s===n?n=!1:n?t.push("\\"):n=s),t.push(s),i++}var r=t.join("");return r=r.replace(/(.?)'/g,function(e,t){return"\\"==t?"'":t+'"'}),r=r.replace(/([{,]\s*)([a-zA-Z_][a-zA-Z0-9_]*)(\s*:)/g,function(e,t,n,i){return t+'"'+n+'"'+i}),JSON.parse(r)},e.validate=function(e){"undefined"!=typeof jsonlint?jsonlint.parse(e):JSON.parse(e)},e.extend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},e.clear=function(e){for(var t in e)e.hasOwnProperty(t)&&delete e[t];return e},e.log=function(){"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)},e.type=function(t){return null===t?"null":void 0===t?"undefined":t instanceof Number||"number"==typeof t?"number":t instanceof String||"string"==typeof t?"string":t instanceof Boolean||"boolean"==typeof t?"boolean":t instanceof RegExp||"regexp"==typeof t?"regexp":e.isArray(t)?"array":"object"};var t=/^https?:\/\/\S+$/;e.isUrl=function(e){return("string"==typeof e||e instanceof String)&&t.test(e)},e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.getAbsoluteLeft=function(e){var t=e.getBoundingClientRect();return t.left+window.pageXOffset||document.scrollLeft||0},e.getAbsoluteTop=function(e){var t=e.getBoundingClientRect();return t.top+window.pageYOffset||document.scrollTop||0},e.addClassName=function(e,t){var n=e.className.split(" ");-1==n.indexOf(t)&&(n.push(t),e.className=n.join(" "))},e.removeClassName=function(e,t){var n=e.className.split(" "),i=n.indexOf(t);-1!=i&&(n.splice(i,1),e.className=n.join(" "))},e.stripFormatting=function(t){for(var n=t.childNodes,i=0,s=n.length;s>i;i++){var o=n[i];o.style&&o.removeAttribute("style");var r=o.attributes;if(r)for(var a=r.length-1;a>=0;a--){var l=r[a];1==l.specified&&o.removeAttribute(l.name)}e.stripFormatting(o)}},e.setEndOfContentEditable=function(e){var t,n;document.createRange&&(t=document.createRange(),t.selectNodeContents(e),t.collapse(!1),n=window.getSelection(),n.removeAllRanges(),n.addRange(t))},e.selectContentEditable=function(e){if(e&&"DIV"==e.nodeName){var t,n;window.getSelection&&document.createRange&&(n=document.createRange(),n.selectNodeContents(e),t=window.getSelection(),t.removeAllRanges(),t.addRange(n))}},e.getSelection=function(){if(window.getSelection){var e=window.getSelection();if(e.getRangeAt&&e.rangeCount)return e.getRangeAt(0)}return null},e.setSelection=function(e){if(e&&window.getSelection){var t=window.getSelection();t.removeAllRanges(),t.addRange(e)}},e.getSelectionOffset=function(){var t=e.getSelection();return t&&"startOffset"in t&&"endOffset"in t&&t.startContainer&&t.startContainer==t.endContainer?{startOffset:t.startOffset,endOffset:t.endOffset,container:t.startContainer.parentNode}:null},e.setSelectionOffset=function(t){if(document.createRange&&window.getSelection){var n=window.getSelection();if(n){var i=document.createRange();i.setStart(t.container.firstChild,t.startOffset),i.setEnd(t.container.firstChild,t.endOffset),e.setSelection(i)}}},e.getInnerText=function(t,n){var i=void 0==n;if(i&&(n={text:"",flush:function(){var e=this.text;return this.text="",e},set:function(e){this.text=e}}),t.nodeValue)return n.flush()+t.nodeValue;if(t.hasChildNodes()){for(var s=t.childNodes,o="",r=0,a=s.length;a>r;r++){var l=s[r];if("DIV"==l.nodeName||"P"==l.nodeName){var c=s[r-1],d=c?c.nodeName:void 0;d&&"DIV"!=d&&"P"!=d&&"BR"!=d&&(o+="\n",n.flush()),o+=e.getInnerText(l,n),n.set("\n")}else"BR"==l.nodeName?(o+=n.flush(),n.set("\n")):o+=e.getInnerText(l,n)}return o}return"P"==t.nodeName&&-1!=e.getInternetExplorerVersion()?n.flush():""},e.getInternetExplorerVersion=function(){if(-1==n){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=i.exec(t)&&(e=parseFloat(RegExp.$1))}n=e}return n},e.isFirefox=function(){return-1!=navigator.userAgent.indexOf("Firefox")};var n=-1;return e.addEventListener=function(t,n,i,s){if(t.addEventListener)return void 0===s&&(s=!1),"mousewheel"===n&&e.isFirefox()&&(n="DOMMouseScroll"),t.addEventListener(n,i,s),i;if(t.attachEvent){var o=function(){return i.call(t,window.event)};return t.attachEvent("on"+n,o),o}},e.removeEventListener=function(t,n,i,s){t.removeEventListener?(void 0===s&&(s=!1),"mousewheel"===n&&e.isFirefox()&&(n="DOMMouseScroll"),t.removeEventListener(n,i,s)):t.detachEvent&&t.detachEvent("on"+n,i)},e}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(){function e(){this.locked=!1}return e.prototype.highlight=function(e){this.locked||(this.node!=e&&(this.node&&this.node.setHighlight(!1),this.node=e,this.node.setHighlight(!0)),this._cancelUnhighlight())},e.prototype.unhighlight=function(){if(!this.locked){var e=this;this.node&&(this._cancelUnhighlight(),this.unhighlightTimer=setTimeout(function(){e.node.setHighlight(!1),e.node=void 0,e.unhighlightTimer=void 0},0))}},e.prototype._cancelUnhighlight=function(){this.unhighlightTimer&&(clearTimeout(this.unhighlightTimer),this.unhighlightTimer=void 0)},e.prototype.lock=function(){this.locked=!0},e.prototype.unlock=function(){this.locked=!1},e}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i,s;i=[n(3)],s=function(e){function t(e){this.editor=e,this.clear(),this.actions={editField:{undo:function(e){e.node.updateField(e.oldValue)},redo:function(e){e.node.updateField(e.newValue)}},editValue:{undo:function(e){e.node.updateValue(e.oldValue)},redo:function(e){e.node.updateValue(e.newValue)}},appendNode:{undo:function(e){e.parent.removeChild(e.node)},redo:function(e){e.parent.appendChild(e.node)}},insertBeforeNode:{undo:function(e){e.parent.removeChild(e.node)},redo:function(e){e.parent.insertBefore(e.node,e.beforeNode)}},insertAfterNode:{undo:function(e){e.parent.removeChild(e.node)},redo:function(e){e.parent.insertAfter(e.node,e.afterNode)}},removeNode:{undo:function(e){var t=e.parent,n=t.childs[e.index]||t.append;t.insertBefore(e.node,n)},redo:function(e){e.parent.removeChild(e.node)}},duplicateNode:{undo:function(e){e.parent.removeChild(e.clone)},redo:function(e){e.parent.insertAfter(e.clone,e.node)}},changeType:{undo:function(e){e.node.changeType(e.oldType)},redo:function(e){e.node.changeType(e.newType)}},moveNode:{undo:function(e){e.startParent.moveTo(e.node,e.startIndex)},redo:function(e){e.endParent.moveTo(e.node,e.endIndex)}},sort:{undo:function(e){var t=e.node;t.hideChilds(),t.sort=e.oldSort,t.childs=e.oldChilds,t.showChilds()},redo:function(e){var t=e.node;t.hideChilds(),t.sort=e.newSort,t.childs=e.newChilds,t.showChilds()}}}}return t.prototype.onChange=function(){},t.prototype.add=function(e,t){this.index++,this.history[this.index]={action:e,params:t,timestamp:new Date},this.index<this.history.length-1&&this.history.splice(this.index+1,this.history.length-this.index-1),this.onChange()},t.prototype.clear=function(){this.history=[],this.index=-1,this.onChange()},t.prototype.canUndo=function(){return this.index>=0},t.prototype.canRedo=function(){return this.index<this.history.length-1},t.prototype.undo=function(){if(this.canUndo()){var t=this.history[this.index];if(t){var n=this.actions[t.action];n&&n.undo?(n.undo(t.params),t.params.oldSelection&&this.editor.setSelection(t.params.oldSelection)):e.log('Error: unknown action "'+t.action+'"')}this.index--,this.onChange()}},t.prototype.redo=function(){if(this.canRedo()){this.index++;var t=this.history[this.index];if(t){var n=this.actions[t.action];n&&n.redo?(n.redo(t.params),t.params.newSelection&&this.editor.setSelection(t.params.newSelection)):e.log('Error: unknown action "'+t.action+'"')}this.onChange()}},t}.apply(t,i),!(void 0!==s&&(e.exports=s))},function(e,t,n){var i;i=function(){function e(e,t){var n=this;this.editor=e,this.timeout=void 0,this.delay=200,this.lastText=void 0,this.dom={},this.dom.container=t;var i=document.createElement("table");this.dom.table=i,i.className="search",t.appendChild(i);var s=document.createElement("tbody");this.dom.tbody=s,i.appendChild(s);var o=document.createElement("tr");s.appendChild(o);var r=document.createElement("td");o.appendChild(r);var a=document.createElement("div");this.dom.results=a,a.className="results",r.appendChild(a),r=document.createElement("td"),o.appendChild(r);var l=document.createElement("div");this.dom.input=l,l.className="frame",l.title="Search fields and values",r.appendChild(l);var c=document.createElement("table");l.appendChild(c);var d=document.createElement("tbody");c.appendChild(d),o=document.createElement("tr"),d.appendChild(o);var u=document.createElement("button");u.className="refresh",r=document.createElement("td"),r.appendChild(u),o.appendChild(r);var h=document.createElement("input");this.dom.search=h,h.oninput=function(e){n._onDelayedSearch(e)},h.onchange=function(e){n._onSearch(e)},h.onkeydown=function(e){n._onKeyDown(e)},h.onkeyup=function(e){n._onKeyUp(e)},u.onclick=function(){h.select()},r=document.createElement("td"),r.appendChild(h),o.appendChild(r);var p=document.createElement("button");p.title="Next result (Enter)",p.className="next",p.onclick=function(){n.next()},r=document.createElement("td"),r.appendChild(p),o.appendChild(r);var f=document.createElement("button");f.title="Previous result (Shift+Enter)",f.className="previous",f.onclick=function(){n.previous()},r=document.createElement("td"),r.appendChild(f),o.appendChild(r)}return e.prototype.next=function(e){if(void 0!=this.results){var t=void 0!=this.resultIndex?this.resultIndex+1:0;t>this.results.length-1&&(t=0),this._setActiveResult(t,e)}},e.prototype.previous=function(e){if(void 0!=this.results){var t=this.results.length-1,n=void 0!=this.resultIndex?this.resultIndex-1:t;0>n&&(n=t),this._setActiveResult(n,e)}},e.prototype._setActiveResult=function(e,t){if(this.activeResult){var n=this.activeResult.node,i=this.activeResult.elem;"field"==i?delete n.searchFieldActive:delete n.searchValueActive,n.updateDom()}if(!this.results||!this.results[e])return this.resultIndex=void 0,void(this.activeResult=void 0);this.resultIndex=e;var s=this.results[this.resultIndex].node,o=this.results[this.resultIndex].elem;"field"==o?s.searchFieldActive=!0:s.searchValueActive=!0,this.activeResult=this.results[this.resultIndex],s.updateDom(),s.scrollTo(function(){t&&s.focus(o)})},e.prototype._clearDelay=function(){void 0!=this.timeout&&(clearTimeout(this.timeout),delete this.timeout)},e.prototype._onDelayedSearch=function(){this._clearDelay();var e=this;this.timeout=setTimeout(function(t){e._onSearch(t)},this.delay)},e.prototype._onSearch=function(e,t){this._clearDelay();var n=this.dom.search.value,i=n.length>0?n:void 0;if(i!=this.lastText||t)if(this.lastText=i,this.results=this.editor.search(i),this._setActiveResult(void 0),void 0!=i){var s=this.results.length;switch(s){case 0:this.dom.results.innerHTML="no&nbsp;results";break;case 1:this.dom.results.innerHTML="1&nbsp;result";break;default:this.dom.results.innerHTML=s+"&nbsp;results"}}else this.dom.results.innerHTML=""},e.prototype._onKeyDown=function(e){var t=e.which;27==t?(this.dom.search.value="",this._onSearch(e),e.preventDefault(),e.stopPropagation()):13==t&&(e.ctrlKey?this._onSearch(e,!0):e.shiftKey?this.previous():this.next(),e.preventDefault(),e.stopPropagation())},e.prototype._onKeyUp=function(e){var t=e.keyCode;27!=t&&13!=t&&this._onDelayedSearch(e)},e}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i,s;i=[n(9),n(10),n(3)],s=function(e,t,n){function i(e,t){this.editor=e,this.dom={},this.expanded=!1,t&&t instanceof Object?(this.setField(t.field,t.fieldEditable),this.setValue(t.value,t.type)):(this.setField(""),this.setValue(null))}i.prototype._updateEditability=function(){if(this.editable={field:!0,value:!0},this.editor&&(this.editable.field="tree"===this.editor.options.mode,this.editable.value="view"!==this.editor.options.mode,"tree"===this.editor.options.mode&&"function"==typeof this.editor.options.editable)){var e=this.editor.options.editable({field:this.field,value:this.value,path:this.path()});"boolean"==typeof e?(this.editable.field=e,this.editable.value=e):("boolean"==typeof e.field&&(this.editable.field=e.field),"boolean"==typeof e.value&&(this.editable.value=e.value))}},i.prototype.path=function(){for(var e=this,t=[];e;){var n=e.field||e.index;void 0!==n&&t.unshift(n),e=e.parent}return t},i.prototype.setParent=function(e){this.parent=e},i.prototype.setField=function(e,t){this.field=e,this.fieldEditable=1==t},i.prototype.getField=function(){return void 0===this.field&&this._getDomField(),this.field},i.prototype.setValue=function(e,t){var n,s,o=this.childs;if(o)for(;o.length;)this.removeChild(o[0]);if(this.type=this._getType(e),t&&t!=this.type){if("string"!=t||"auto"!=this.type)throw new Error('Type mismatch: cannot cast value of type "'+this.type+' to the specified type "'+t+'"');this.type=t}if("array"==this.type){this.childs=[];for(var r=0,a=e.length;a>r;r++)n=e[r],void 0===n||n instanceof Function||(s=new i(this.editor,{value:n}),this.appendChild(s));this.value=""}else if("object"==this.type){this.childs=[];for(var l in e)e.hasOwnProperty(l)&&(n=e[l],void 0===n||n instanceof Function||(s=new i(this.editor,{field:l,value:n}),this.appendChild(s)));this.value=""}else this.childs=void 0,this.value=e},i.prototype.getValue=function(){if("array"==this.type){var e=[];return this.childs.forEach(function(t){e.push(t.getValue())}),e}if("object"==this.type){var t={};return this.childs.forEach(function(e){t[e.getField()]=e.getValue()}),t}return void 0===this.value&&this._getDomValue(),this.value},i.prototype.getLevel=function(){return this.parent?this.parent.getLevel()+1:0},i.prototype.clone=function(){var e=new i(this.editor);if(e.type=this.type,e.field=this.field,e.fieldInnerText=this.fieldInnerText,e.fieldEditable=this.fieldEditable,e.value=this.value,e.valueInnerText=this.valueInnerText,e.expanded=this.expanded,this.childs){var t=[];this.childs.forEach(function(n){var i=n.clone();i.setParent(e),t.push(i)}),e.childs=t}else e.childs=void 0;return e},i.prototype.expand=function(e){this.childs&&(this.expanded=!0,this.dom.expand&&(this.dom.expand.className="expanded"),this.showChilds(),0!=e&&this.childs.forEach(function(t){t.expand(e)}))},i.prototype.collapse=function(e){this.childs&&(this.hideChilds(),0!=e&&this.childs.forEach(function(t){t.collapse(e)}),this.dom.expand&&(this.dom.expand.className="collapsed"),this.expanded=!1)},i.prototype.showChilds=function(){var e=this.childs;if(e&&this.expanded){var t=this.dom.tr,n=t?t.parentNode:void 0;if(n){var i=this.getAppend(),s=t.nextSibling;s?n.insertBefore(i,s):n.appendChild(i),this.childs.forEach(function(e){n.insertBefore(e.getDom(),i),e.showChilds()})}}},i.prototype.hide=function(){var e=this.dom.tr,t=e?e.parentNode:void 0;t&&t.removeChild(e),this.hideChilds()},i.prototype.hideChilds=function(){var e=this.childs;if(e&&this.expanded){var t=this.getAppend();t.parentNode&&t.parentNode.removeChild(t),this.childs.forEach(function(e){e.hide()})}},i.prototype.appendChild=function(e){if(this._hasChilds()){if(e.setParent(this),e.fieldEditable="object"==this.type,"array"==this.type&&(e.index=this.childs.length),this.childs.push(e),this.expanded){var t=e.getDom(),n=this.getAppend(),i=n?n.parentNode:void 0;n&&i&&i.insertBefore(t,n),e.showChilds()}this.updateDom({updateIndexes:!0}),e.updateDom({recurse:!0})}},i.prototype.moveBefore=function(e,t){if(this._hasChilds()){var n=this.dom.tr?this.dom.tr.parentNode:void 0;if(n){var i=document.createElement("tr");i.style.height=n.clientHeight+"px",n.appendChild(i)}e.parent&&e.parent.removeChild(e),t instanceof s?this.appendChild(e):this.insertBefore(e,t),n&&n.removeChild(i)}},i.prototype.moveTo=function(e,t){if(e.parent==this){var n=this.childs.indexOf(e);t>n&&t++}var i=this.childs[t]||this.append;this.moveBefore(e,i)},i.prototype.insertBefore=function(e,t){if(this._hasChilds()){if(t==this.append)e.setParent(this),e.fieldEditable="object"==this.type,this.childs.push(e);else{var n=this.childs.indexOf(t);if(-1==n)throw new Error("Node not found");e.setParent(this),e.fieldEditable="object"==this.type,this.childs.splice(n,0,e)}if(this.expanded){var i=e.getDom(),s=t.getDom(),o=s?s.parentNode:void 0;s&&o&&o.insertBefore(i,s),e.showChilds()}this.updateDom({updateIndexes:!0}),e.updateDom({recurse:!0})}},i.prototype.insertAfter=function(e,t){if(this._hasChilds()){var n=this.childs.indexOf(t),i=this.childs[n+1];i?this.insertBefore(e,i):this.appendChild(e)}},i.prototype.search=function(e){var t,n=[],i=e?e.toLowerCase():void 0;if(delete this.searchField,delete this.searchValue,void 0!=this.field){var s=String(this.field).toLowerCase();t=s.indexOf(i),-1!=t&&(this.searchField=!0,n.push({node:this,elem:"field"})),this._updateDomField()}if(this._hasChilds()){if(this.childs){var o=[];this.childs.forEach(function(t){o=o.concat(t.search(e))}),n=n.concat(o)}if(void 0!=i){var r=!1;0==o.length?this.collapse(r):this.expand(r)}}else{if(void 0!=this.value){var a=String(this.value).toLowerCase();t=a.indexOf(i),-1!=t&&(this.searchValue=!0,n.push({node:this,elem:"value"}))}this._updateDomValue()}return n},i.prototype.scrollTo=function(e){if(!this.dom.tr||!this.dom.tr.parentNode)for(var t=this.parent,n=!1;t;)t.expand(n),t=t.parent;this.dom.tr&&this.dom.tr.parentNode&&this.editor.scrollTo(this.dom.tr.offsetTop,e)},i.focusElement=void 0,i.prototype.focus=function(e){if(i.focusElement=e,this.dom.tr&&this.dom.tr.parentNode){var t=this.dom;switch(e){case"drag":t.drag?t.drag.focus():t.menu.focus();break;case"menu":t.menu.focus();break;case"expand":this._hasChilds()?t.expand.focus():t.field&&this.fieldEditable?(t.field.focus(),n.selectContentEditable(t.field)):t.value&&!this._hasChilds()?(t.value.focus(),n.selectContentEditable(t.value)):t.menu.focus();break;case"field":t.field&&this.fieldEditable?(t.field.focus(),n.selectContentEditable(t.field)):t.value&&!this._hasChilds()?(t.value.focus(),n.selectContentEditable(t.value)):this._hasChilds()?t.expand.focus():t.menu.focus();
break;case"value":default:t.value&&!this._hasChilds()?(t.value.focus(),n.selectContentEditable(t.value)):t.field&&this.fieldEditable?(t.field.focus(),n.selectContentEditable(t.field)):this._hasChilds()?t.expand.focus():t.menu.focus()}}},i.select=function(e){setTimeout(function(){n.selectContentEditable(e)},0)},i.prototype.blur=function(){this._getDomValue(!1),this._getDomField(!1)},i.prototype._duplicate=function(e){var t=e.clone();return this.insertAfter(t,e),t},i.prototype.containsNode=function(e){if(this==e)return!0;var t=this.childs;if(t)for(var n=0,i=t.length;i>n;n++)if(t[n].containsNode(e))return!0;return!1},i.prototype._move=function(e,t){if(e!=t){if(e.containsNode(this))throw new Error("Cannot move a field into a child of itself");e.parent&&e.parent.removeChild(e);var n=e.clone();e.clearDom(),t?this.insertBefore(n,t):this.appendChild(n)}},i.prototype.removeChild=function(e){if(this.childs){var t=this.childs.indexOf(e);if(-1!=t){e.hide(),delete e.searchField,delete e.searchValue;var n=this.childs.splice(t,1)[0];return this.updateDom({updateIndexes:!0}),n}}return void 0},i.prototype._remove=function(e){this.removeChild(e)},i.prototype.changeType=function(e){var t=this.type;if(t!=e){if("string"!=e&&"auto"!=e||"string"!=t&&"auto"!=t){var n,i=this.dom.tr?this.dom.tr.parentNode:void 0;n=this.expanded?this.getAppend():this.getDom();var s=n&&n.parentNode?n.nextSibling:void 0;this.hide(),this.clearDom(),this.type=e,"object"==e?(this.childs||(this.childs=[]),this.childs.forEach(function(e){e.clearDom(),delete e.index,e.fieldEditable=!0,void 0==e.field&&(e.field="")}),("string"==t||"auto"==t)&&(this.expanded=!0)):"array"==e?(this.childs||(this.childs=[]),this.childs.forEach(function(e,t){e.clearDom(),e.fieldEditable=!1,e.index=t}),("string"==t||"auto"==t)&&(this.expanded=!0)):this.expanded=!1,i&&(s?i.insertBefore(this.getDom(),s):i.appendChild(this.getDom())),this.showChilds()}else this.type=e;("auto"==e||"string"==e)&&(this.value="string"==e?String(this.value):this._stringCast(String(this.value)),this.focus()),this.updateDom({updateIndexes:!0})}},i.prototype._getDomValue=function(e){if(this.dom.value&&"array"!=this.type&&"object"!=this.type&&(this.valueInnerText=n.getInnerText(this.dom.value)),void 0!=this.valueInnerText)try{var t;if("string"==this.type)t=this._unescapeHTML(this.valueInnerText);else{var i=this._unescapeHTML(this.valueInnerText);t=this._stringCast(i)}if(t!==this.value){var s=this.value;this.value=t,this.editor._onAction("editValue",{node:this,oldValue:s,newValue:t,oldSelection:this.editor.selection,newSelection:this.editor.getSelection()})}}catch(o){if(this.value=void 0,1!=e)throw o}},i.prototype._updateDomValue=function(){var e=this.dom.value;if(e){var t=this.value,i="auto"==this.type?n.type(t):this.type,s="string"==i&&n.isUrl(t),o="";o=s&&!this.editable.value?"":"string"==i?"green":"number"==i?"red":"boolean"==i?"darkorange":this._hasChilds()?"":null===t?"#004ED0":"black",e.style.color=o;var r=""==String(this.value)&&"array"!=this.type&&"object"!=this.type;if(r?n.addClassName(e,"empty"):n.removeClassName(e,"empty"),s?n.addClassName(e,"url"):n.removeClassName(e,"url"),"array"==i||"object"==i){var a=this.childs?this.childs.length:0;e.title=this.type+" containing "+a+" items"}else"string"==i&&n.isUrl(t)?this.editable.value&&(e.title="Ctrl+Click or Ctrl+Enter to open url in new window"):e.title="";this.searchValueActive?n.addClassName(e,"highlight-active"):n.removeClassName(e,"highlight-active"),this.searchValue?n.addClassName(e,"highlight"):n.removeClassName(e,"highlight"),n.stripFormatting(e)}},i.prototype._updateDomField=function(){var e=this.dom.field;if(e){var t=""==String(this.field)&&"array"!=this.parent.type;t?n.addClassName(e,"empty"):n.removeClassName(e,"empty"),this.searchFieldActive?n.addClassName(e,"highlight-active"):n.removeClassName(e,"highlight-active"),this.searchField?n.addClassName(e,"highlight"):n.removeClassName(e,"highlight"),n.stripFormatting(e)}},i.prototype._getDomField=function(e){if(this.dom.field&&this.fieldEditable&&(this.fieldInnerText=n.getInnerText(this.dom.field)),void 0!=this.fieldInnerText)try{var t=this._unescapeHTML(this.fieldInnerText);if(t!==this.field){var i=this.field;this.field=t,this.editor._onAction("editField",{node:this,oldValue:i,newValue:t,oldSelection:this.editor.selection,newSelection:this.editor.getSelection()})}}catch(s){if(this.field=void 0,1!=e)throw s}},i.prototype.clearDom=function(){this.dom={}},i.prototype.getDom=function(){var e=this.dom;if(e.tr)return e.tr;if(this._updateEditability(),e.tr=document.createElement("tr"),e.tr.node=this,"tree"===this.editor.options.mode){var t=document.createElement("td");if(this.editable.field&&this.parent){var n=document.createElement("button");e.drag=n,n.className="dragarea",n.title="Drag to move this field (Alt+Shift+Arrows)",t.appendChild(n)}e.tr.appendChild(t);var i=document.createElement("td"),s=document.createElement("button");e.menu=s,s.className="contextmenu",s.title="Click to open the actions menu (Ctrl+M)",i.appendChild(e.menu),e.tr.appendChild(i)}var o=document.createElement("td");return e.tr.appendChild(o),e.tree=this._createDomTree(),o.appendChild(e.tree),this.updateDom({updateIndexes:!0}),e.tr},i.prototype._onDragStart=function(e){var t=this;this.mousemove||(this.mousemove=n.addEventListener(document,"mousemove",function(e){t._onDrag(e)})),this.mouseup||(this.mouseup=n.addEventListener(document,"mouseup",function(e){t._onDragEnd(e)})),this.editor.highlighter.lock(),this.drag={oldCursor:document.body.style.cursor,startParent:this.parent,startIndex:this.parent.childs.indexOf(this),mouseX:e.pageX,level:this.getLevel()},document.body.style.cursor="move",e.preventDefault()},i.prototype._onDrag=function(e){var t,o,r,a,l,c,d,u,h,p,f,m,v,g,y=e.pageY,b=e.pageX,w=!1;if(t=this.dom.tr,h=n.getAbsoluteTop(t),m=t.offsetHeight,h>y){o=t;do o=o.previousSibling,d=i.getNodeFromTarget(o),p=o?n.getAbsoluteTop(o):0;while(o&&p>y);d&&!d.parent&&(d=void 0),d||(c=t.parentNode.firstChild,o=c?c.nextSibling:void 0,d=i.getNodeFromTarget(o),d==this&&(d=void 0)),d&&(o=d.dom.tr,p=o?n.getAbsoluteTop(o):0,y>p+m&&(d=void 0)),d&&(d.parent.moveBefore(this,d),w=!0)}else if(l=this.expanded&&this.append?this.append.getDom():this.dom.tr,a=l?l.nextSibling:void 0){f=n.getAbsoluteTop(a),r=a;do u=i.getNodeFromTarget(r),r&&(v=r.nextSibling?n.getAbsoluteTop(r.nextSibling):0,g=r?v-f:0,1==u.parent.childs.length&&u.parent.childs[0]==this&&(h+=23)),r=r.nextSibling;while(r&&y>h+g);if(u&&u.parent){var x=b-this.drag.mouseX,C=Math.round(x/24/2),T=this.drag.level+C,k=u.getLevel();for(o=u.dom.tr.previousSibling;T>k&&o;){if(d=i.getNodeFromTarget(o),d==this||d._isChildOf(this));else{if(!(d instanceof s))break;var S=d.parent.childs;if(!(S.length>1||1==S.length&&S[0]!=this))break;u=i.getNodeFromTarget(o),k=u.getLevel()}o=o.previousSibling}l.nextSibling!=u.dom.tr&&(u.parent.moveBefore(this,u),w=!0)}}w&&(this.drag.mouseX=b,this.drag.level=this.getLevel()),this.editor.startAutoScroll(y),e.preventDefault()},i.prototype._onDragEnd=function(e){var t={node:this,startParent:this.drag.startParent,startIndex:this.drag.startIndex,endParent:this.parent,endIndex:this.parent.childs.indexOf(this)};(t.startParent!=t.endParent||t.startIndex!=t.endIndex)&&this.editor._onAction("moveNode",t),document.body.style.cursor=this.drag.oldCursor,this.editor.highlighter.unlock(),delete this.drag,this.mousemove&&(n.removeEventListener(document,"mousemove",this.mousemove),delete this.mousemove),this.mouseup&&(n.removeEventListener(document,"mouseup",this.mouseup),delete this.mouseup),this.editor.stopAutoScroll(),e.preventDefault()},i.prototype._isChildOf=function(e){for(var t=this.parent;t;){if(t==e)return!0;t=t.parent}return!1},i.prototype._createDomField=function(){return document.createElement("div")},i.prototype.setHighlight=function(e){this.dom.tr&&(this.dom.tr.className=e?"highlight":"",this.append&&this.append.setHighlight(e),this.childs&&this.childs.forEach(function(t){t.setHighlight(e)}))},i.prototype.updateValue=function(e){this.value=e,this.updateDom()},i.prototype.updateField=function(e){this.field=e,this.updateDom()},i.prototype.updateDom=function(e){var t=this.dom.tree;t&&(t.style.marginLeft=24*this.getLevel()+"px");var n=this.dom.field;if(n){this.fieldEditable?(n.contentEditable=this.editable.field,n.spellcheck=!1,n.className="field"):n.className="readonly";var i;i=void 0!=this.index?this.index:void 0!=this.field?this.field:this._hasChilds()?this.type:"",n.innerHTML=this._escapeHTML(i)}var s=this.dom.value;if(s){var o=this.childs?this.childs.length:0;s.innerHTML="array"==this.type?"["+o+"]":"object"==this.type?"{"+o+"}":this._escapeHTML(this.value)}this._updateDomField(),this._updateDomValue(),e&&1==e.updateIndexes&&this._updateDomIndexes(),e&&1==e.recurse&&this.childs&&this.childs.forEach(function(t){t.updateDom(e)}),this.append&&this.append.updateDom()},i.prototype._updateDomIndexes=function(){var e=this.dom.value,t=this.childs;e&&t&&("array"==this.type?t.forEach(function(e,t){e.index=t;var n=e.dom.field;n&&(n.innerHTML=t)}):"object"==this.type&&t.forEach(function(e){void 0!=e.index&&(delete e.index,void 0==e.field&&(e.field=""))}))},i.prototype._createDomValue=function(){var e;return"array"==this.type?(e=document.createElement("div"),e.className="readonly",e.innerHTML="[...]"):"object"==this.type?(e=document.createElement("div"),e.className="readonly",e.innerHTML="{...}"):!this.editable.value&&n.isUrl(this.value)?(e=document.createElement("a"),e.className="value",e.href=this.value,e.target="_blank",e.innerHTML=this._escapeHTML(this.value)):(e=document.createElement("div"),e.contentEditable=this.editable.value,e.spellcheck=!1,e.className="value",e.innerHTML=this._escapeHTML(this.value)),e},i.prototype._createDomExpandButton=function(){var e=document.createElement("button");return this._hasChilds()?(e.className=this.expanded?"expanded":"collapsed",e.title="Click to expand/collapse this field (Ctrl+E). \nCtrl+Click to expand/collapse including all childs."):(e.className="invisible",e.title=""),e},i.prototype._createDomTree=function(){var e=this.dom,t=document.createElement("table"),n=document.createElement("tbody");t.style.borderCollapse="collapse",t.className="values",t.appendChild(n);var i=document.createElement("tr");n.appendChild(i);var s=document.createElement("td");s.className="tree",i.appendChild(s),e.expand=this._createDomExpandButton(),s.appendChild(e.expand),e.tdExpand=s;var o=document.createElement("td");o.className="tree",i.appendChild(o),e.field=this._createDomField(),o.appendChild(e.field),e.tdField=o;var r=document.createElement("td");r.className="tree",i.appendChild(r),"object"!=this.type&&"array"!=this.type&&(r.appendChild(document.createTextNode(":")),r.className="separator"),e.tdSeparator=r;var a=document.createElement("td");return a.className="tree",i.appendChild(a),e.value=this._createDomValue(),a.appendChild(e.value),e.tdValue=a,t},i.prototype.onEvent=function(e){var t,i=e.type,s=e.target||e.srcElement,o=this.dom,r=this,a=this._hasChilds();if((s==o.drag||s==o.menu)&&("mouseover"==i?this.editor.highlighter.highlight(this):"mouseout"==i&&this.editor.highlighter.unhighlight()),"mousedown"==i&&s==o.drag&&this._onDragStart(e),"click"==i&&s==o.menu){var l=r.editor.highlighter;l.highlight(r),l.lock(),n.addClassName(o.menu,"selected"),this.showContextMenu(o.menu,function(){n.removeClassName(o.menu,"selected"),l.unlock(),l.unhighlight()})}if("click"==i&&s==o.expand&&a){var c=e.ctrlKey;this._onExpand(c)}var d=o.value;if(s==d)switch(i){case"focus":t=this;break;case"blur":case"change":this._getDomValue(!0),this._updateDomValue(),this.value&&(d.innerHTML=this._escapeHTML(this.value));break;case"input":this._getDomValue(!0),this._updateDomValue();break;case"keydown":case"mousedown":this.editor.selection=this.editor.getSelection();break;case"click":(e.ctrlKey||!this.editable.value)&&n.isUrl(this.value)&&window.open(this.value,"_blank");break;case"keyup":this._getDomValue(!0),this._updateDomValue();break;case"cut":case"paste":setTimeout(function(){r._getDomValue(!0),r._updateDomValue()},1)}var u=o.field;if(s==u)switch(i){case"focus":t=this;break;case"blur":case"change":this._getDomField(!0),this._updateDomField(),this.field&&(u.innerHTML=this._escapeHTML(this.field));break;case"input":this._getDomField(!0),this._updateDomField();break;case"keydown":case"mousedown":this.editor.selection=this.editor.getSelection();break;case"keyup":this._getDomField(!0),this._updateDomField();break;case"cut":case"paste":setTimeout(function(){r._getDomField(!0),r._updateDomField()},1)}var h=o.tree;if(s==h.parentNode)switch(i){case"click":var p=void 0!=e.offsetX?e.offsetX<24*(this.getLevel()+1):e.pageX<n.getAbsoluteLeft(o.tdSeparator);p||a?u&&(n.setEndOfContentEditable(u),u.focus()):d&&(n.setEndOfContentEditable(d),d.focus())}if(s==o.tdExpand&&!a||s==o.tdField||s==o.tdSeparator)switch(i){case"click":u&&(n.setEndOfContentEditable(u),u.focus())}"keydown"==i&&this.onKeyDown(e)},i.prototype.onKeyDown=function(e){var t,o,r,a,l=e.which||e.keyCode,c=e.target||e.srcElement,d=e.ctrlKey,u=e.shiftKey,h=e.altKey,p=!1,f="tree"===this.editor.options.mode;if(13==l){if(c==this.dom.value)(!this.editable.value||e.ctrlKey)&&n.isUrl(this.value)&&(window.open(this.value,"_blank"),p=!0);else if(c==this.dom.expand){var m=this._hasChilds();if(m){var v=e.ctrlKey;this._onExpand(v),c.focus(),p=!0}}}else if(68==l)d&&f&&(this._onDuplicate(),p=!0);else if(69==l)d&&(this._onExpand(u),c.focus(),p=!0);else if(77==l&&f)d&&(this.showContextMenu(c),p=!0);else if(46==l&&f)d&&(this._onRemove(),p=!0);else if(45==l&&f)d&&!u?(this._onInsertBefore(),p=!0):d&&u&&(this._onInsertAfter(),p=!0);else if(35==l){if(h){var g=this._lastNode();g&&g.focus(i.focusElement||this._getElementName(c)),p=!0}}else if(36==l){if(h){var y=this._firstNode();y&&y.focus(i.focusElement||this._getElementName(c)),p=!0}}else if(37==l){if(h&&!u){var b=this._previousElement(c);b&&this.focus(this._getElementName(b)),p=!0}else if(h&&u&&f){if(this.expanded){var w=this.getAppend();r=w?w.nextSibling:void 0}else{var x=this.getDom();r=x.nextSibling}r&&(o=i.getNodeFromTarget(r),a=r.nextSibling,k=i.getNodeFromTarget(a),o&&o instanceof s&&1!=this.parent.childs.length&&k&&k.parent&&(k.parent.moveBefore(this,k),this.focus(i.focusElement||this._getElementName(c))))}}else if(38==l)h&&!u?(t=this._previousNode(),t&&t.focus(i.focusElement||this._getElementName(c)),p=!0):h&&u&&(t=this._previousNode(),t&&t.parent&&(t.parent.moveBefore(this,t),this.focus(i.focusElement||this._getElementName(c))),p=!0);else if(39==l){if(h&&!u){var C=this._nextElement(c);C&&this.focus(this._getElementName(C)),p=!0}else if(h&&u){x=this.getDom();var T=x.previousSibling;T&&(t=i.getNodeFromTarget(T),t&&t.parent&&t instanceof s&&!t.isVisible()&&(t.parent.moveBefore(this,t),this.focus(i.focusElement||this._getElementName(c))))}}else if(40==l)if(h&&!u)o=this._nextNode(),o&&o.focus(i.focusElement||this._getElementName(c)),p=!0;else if(h&&u&&f){o=this.expanded?this.append?this.append._nextNode():void 0:this._nextNode(),r=o?o.getDom():void 0,a=1==this.parent.childs.length?r:r?r.nextSibling:void 0;var k=i.getNodeFromTarget(a);k&&k.parent&&(k.parent.moveBefore(this,k),this.focus(i.focusElement||this._getElementName(c))),p=!0}p&&(e.preventDefault(),e.stopPropagation())},i.prototype._onExpand=function(e){if(e){var t=this.dom.tr.parentNode,n=t.parentNode,i=n.scrollTop;n.removeChild(t)}this.expanded?this.collapse(e):this.expand(e),e&&(n.appendChild(t),n.scrollTop=i)},i.prototype._onRemove=function(){this.editor.highlighter.unhighlight();var e=this.parent.childs,t=e.indexOf(this),n=this.editor.getSelection();e[t+1]?e[t+1].focus():e[t-1]?e[t-1].focus():this.parent.focus();var i=this.editor.getSelection();this.parent._remove(this),this.editor._onAction("removeNode",{node:this,parent:this.parent,index:t,oldSelection:n,newSelection:i})},i.prototype._onDuplicate=function(){var e=this.editor.getSelection(),t=this.parent._duplicate(this);t.focus();var n=this.editor.getSelection();this.editor._onAction("duplicateNode",{node:this,clone:t,parent:this.parent,oldSelection:e,newSelection:n})},i.prototype._onInsertBefore=function(e,t,n){var s=this.editor.getSelection(),o=new i(this.editor,{field:void 0!=e?e:"",value:void 0!=t?t:"",type:n});o.expand(!0),this.parent.insertBefore(o,this),this.editor.highlighter.unhighlight(),o.focus("field");var r=this.editor.getSelection();this.editor._onAction("insertBeforeNode",{node:o,beforeNode:this,parent:this.parent,oldSelection:s,newSelection:r})},i.prototype._onInsertAfter=function(e,t,n){var s=this.editor.getSelection(),o=new i(this.editor,{field:void 0!=e?e:"",value:void 0!=t?t:"",type:n});o.expand(!0),this.parent.insertAfter(o,this),this.editor.highlighter.unhighlight(),o.focus("field");var r=this.editor.getSelection();this.editor._onAction("insertAfterNode",{node:o,afterNode:this,parent:this.parent,oldSelection:s,newSelection:r})},i.prototype._onAppend=function(e,t,n){var s=this.editor.getSelection(),o=new i(this.editor,{field:void 0!=e?e:"",value:void 0!=t?t:"",type:n});o.expand(!0),this.parent.appendChild(o),this.editor.highlighter.unhighlight(),o.focus("field");var r=this.editor.getSelection();this.editor._onAction("appendNode",{node:o,parent:this.parent,oldSelection:s,newSelection:r})},i.prototype._onChangeType=function(e){var t=this.type;if(e!=t){var n=this.editor.getSelection();this.changeType(e);var i=this.editor.getSelection();this.editor._onAction("changeType",{node:this,oldType:t,newType:e,oldSelection:n,newSelection:i})}},i.prototype._onSort=function(e){if(this._hasChilds()){var t="desc"==e?-1:1,n="array"==this.type?"value":"field";this.hideChilds();var i=this.childs,s=this.sort;this.childs=this.childs.concat(),this.childs.sort(function(e,i){return e[n]>i[n]?t:e[n]<i[n]?-t:0}),this.sort=1==t?"asc":"desc",this.editor._onAction("sort",{node:this,oldChilds:i,oldSort:s,newChilds:this.childs,newSort:this.sort}),this.showChilds()}},i.prototype.getAppend=function(){return this.append||(this.append=new s(this.editor),this.append.setParent(this)),this.append.getDom()},i.getNodeFromTarget=function(e){for(;e;){if(e.node)return e.node;e=e.parentNode}return void 0},i.prototype._previousNode=function(){var e=null,t=this.getDom();if(t&&t.parentNode){var n=t;do n=n.previousSibling,e=i.getNodeFromTarget(n);while(n&&e instanceof s&&!e.isVisible())}return e},i.prototype._nextNode=function(){var e=null,t=this.getDom();if(t&&t.parentNode){var n=t;do n=n.nextSibling,e=i.getNodeFromTarget(n);while(n&&e instanceof s&&!e.isVisible())}return e},i.prototype._firstNode=function(){var e=null,t=this.getDom();if(t&&t.parentNode){var n=t.parentNode.firstChild;e=i.getNodeFromTarget(n)}return e},i.prototype._lastNode=function(){var e=null,t=this.getDom();if(t&&t.parentNode){var n=t.parentNode.lastChild;for(e=i.getNodeFromTarget(n);n&&e instanceof s&&!e.isVisible();)n=n.previousSibling,e=i.getNodeFromTarget(n)}return e},i.prototype._previousElement=function(e){var t=this.dom;switch(e){case t.value:if(this.fieldEditable)return t.field;case t.field:if(this._hasChilds())return t.expand;case t.expand:return t.menu;case t.menu:if(t.drag)return t.drag;default:return null}},i.prototype._nextElement=function(e){var t=this.dom;switch(e){case t.drag:return t.menu;case t.menu:if(this._hasChilds())return t.expand;case t.expand:if(this.fieldEditable)return t.field;case t.field:if(!this._hasChilds())return t.value;default:return null}},i.prototype._getElementName=function(e){var t=this.dom;for(var n in t)if(t.hasOwnProperty(n)&&t[n]==e)return n;return null},i.prototype._hasChilds=function(){return"array"==this.type||"object"==this.type},i.TYPE_TITLES={auto:'Field type "auto". The field type is automatically determined from the value and can be a string, number, boolean, or null.',object:'Field type "object". An object contains an unordered set of key/value pairs.',array:'Field type "array". An array contains an ordered collection of values.',string:'Field type "string". Field type is not determined from the value, but always returned as string.'},i.prototype.showContextMenu=function(t,n){var s=this,o=i.TYPE_TITLES,r=[];if(this.editable.value&&r.push({text:"Type",title:"Change the type of this field",className:"type-"+this.type,submenu:[{text:"Auto",className:"type-auto"+("auto"==this.type?" selected":""),title:o.auto,click:function(){s._onChangeType("auto")}},{text:"Array",className:"type-array"+("array"==this.type?" selected":""),title:o.array,click:function(){s._onChangeType("array")}},{text:"Object",className:"type-object"+("object"==this.type?" selected":""),title:o.object,click:function(){s._onChangeType("object")}},{text:"String",className:"type-string"+("string"==this.type?" selected":""),title:o.string,click:function(){s._onChangeType("string")}}]}),this._hasChilds()){var a="asc"==this.sort?"desc":"asc";r.push({text:"Sort",title:"Sort the childs of this "+this.type,className:"sort-"+a,click:function(){s._onSort(a)},submenu:[{text:"Ascending",className:"sort-asc",title:"Sort the childs of this "+this.type+" in ascending order",click:function(){s._onSort("asc")}},{text:"Descending",className:"sort-desc",title:"Sort the childs of this "+this.type+" in descending order",click:function(){s._onSort("desc")}}]})}if(this.parent&&this.parent._hasChilds()){r.length&&r.push({type:"separator"});var l=s.parent.childs;s==l[l.length-1]&&r.push({text:"Append",title:"Append a new field with type 'auto' after this field (Ctrl+Shift+Ins)",submenuTitle:"Select the type of the field to be appended",className:"append",click:function(){s._onAppend("","","auto")},submenu:[{text:"Auto",className:"type-auto",title:o.auto,click:function(){s._onAppend("","","auto")}},{text:"Array",className:"type-array",title:o.array,click:function(){s._onAppend("",[])}},{text:"Object",className:"type-object",title:o.object,click:function(){s._onAppend("",{})}},{text:"String",className:"type-string",title:o.string,click:function(){s._onAppend("","","string")}}]}),r.push({text:"Insert",title:"Insert a new field with type 'auto' before this field (Ctrl+Ins)",submenuTitle:"Select the type of the field to be inserted",className:"insert",click:function(){s._onInsertBefore("","","auto")},submenu:[{text:"Auto",className:"type-auto",title:o.auto,click:function(){s._onInsertBefore("","","auto")}},{text:"Array",className:"type-array",title:o.array,click:function(){s._onInsertBefore("",[])}},{text:"Object",className:"type-object",title:o.object,click:function(){s._onInsertBefore("",{})}},{text:"String",className:"type-string",title:o.string,click:function(){s._onInsertBefore("","","string")}}]}),this.editable.field&&(r.push({text:"Duplicate",title:"Duplicate this field (Ctrl+D)",className:"duplicate",click:function(){s._onDuplicate()}}),r.push({text:"Remove",title:"Remove this field (Ctrl+Del)",className:"remove",click:function(){s._onRemove()}}))}var c=new e(r,{close:n});c.show(t)},i.prototype._getType=function(e){return e instanceof Array?"array":e instanceof Object?"object":"string"==typeof e&&"string"!=typeof this._stringCast(e)?"string":"auto"},i.prototype._stringCast=function(e){var t=e.toLowerCase(),n=Number(e),i=parseFloat(e);return""==e?"":"null"==t?null:"true"==t?!0:"false"==t?!1:isNaN(n)||isNaN(i)?e:n},i.prototype._escapeHTML=function(e){var t=String(e).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/  /g," &nbsp;").replace(/^ /,"&nbsp;").replace(/ $/,"&nbsp;"),n=JSON.stringify(t);return n.substring(1,n.length-1)},i.prototype._unescapeHTML=function(e){var t='"'+this._escapeJSON(e)+'"',i=n.parse(t);return i.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;|\u00A0/g," ")},i.prototype._escapeJSON=function(e){for(var t="",n=0,i=e.length;i>n;){var s=e.charAt(n);"\n"==s?t+="\\n":"\\"==s?(t+=s,n++,s=e.charAt(n),-1=='"\\/bfnrtu'.indexOf(s)&&(t+="\\"),t+=s):t+='"'==s?'\\"':s,n++}return t};var s=t(i);return i}.apply(t,i),!(void 0!==s&&(e.exports=s))},function(e,t,n){var i,s;i=[n(9)],s=function(e){function t(t,n,i){function s(e){t.setMode(e);var n=t.dom&&t.dom.modeBox;n&&n.focus()}for(var o={code:{text:"Code",title:"Switch to code highlighter",click:function(){s("code")}},form:{text:"Form",title:"Switch to form editor",click:function(){s("form")}},text:{text:"Text",title:"Switch to plain text editor",click:function(){s("text")}},tree:{text:"Tree",title:"Switch to tree editor",click:function(){s("tree")}},view:{text:"View",title:"Switch to tree view",click:function(){s("view")}}},r=[],a=0;a<n.length;a++){var l=n[a],c=o[l];if(!c)throw new Error('Unknown mode "'+l+'"');c.className="type-modes"+(i==l?" selected":""),r.push(c)}var d=o[i];if(!d)throw new Error('Unknown mode "'+i+'"');var u=d.text,h=document.createElement("button");return h.className="modes separator",h.innerHTML=u+" &#x25BE;",h.title="Switch editor mode",h.onclick=function(){var t=new e(r);t.show(h)},h}return{create:t}}.apply(t,i),!(void 0!==s&&(e.exports=s))},function(e,t,n){var i,s;i=[n(3)],s=function(e){function t(e,t){function n(e,t,s){s.forEach(function(s){if("separator"==s.type){var o=document.createElement("div");o.className="separator",a=document.createElement("li"),a.appendChild(o),e.appendChild(a)}else{var r={},a=document.createElement("li");e.appendChild(a);var l=document.createElement("button");if(l.className=s.className,r.button=l,s.title&&(l.title=s.title),s.click&&(l.onclick=function(){i.hide(),s.click()}),a.appendChild(l),s.submenu){var c=document.createElement("div");c.className="icon",l.appendChild(c),l.appendChild(document.createTextNode(s.text));var d;if(s.click){l.className+=" default";var u=document.createElement("button");r.buttonExpand=u,u.className="expand",u.innerHTML='<div class="expand"></div>',a.appendChild(u),s.submenuTitle&&(u.title=s.submenuTitle),d=u}else{var h=document.createElement("div");h.className="expand",l.appendChild(h),d=l}d.onclick=function(){i._onExpandItem(r),d.focus()};var p=[];r.subItems=p;var f=document.createElement("ul");r.ul=f,f.className="menu",f.style.height="0",a.appendChild(f),n(f,p,s.submenu)}else l.innerHTML='<div class="icon"></div>'+s.text;t.push(r)}})}this.dom={};var i=this,s=this.dom;this.anchor=void 0,this.items=e,this.eventListeners={},this.selection=void 0,this.visibleSubmenu=void 0,this.onClose=t?t.close:void 0;var o=document.createElement("div");o.className="jsoneditor-contextmenu",s.menu=o;var r=document.createElement("ul");r.className="menu",o.appendChild(r),s.list=r,s.items=[];var a=document.createElement("button");s.focusButton=a;var l=document.createElement("li");l.style.overflow="hidden",l.style.height="0",l.appendChild(a),r.appendChild(l),n(r,this.dom.items,e),this.maxHeight=0,e.forEach(function(t){var n=24*(e.length+(t.submenu?t.submenu.length:0));i.maxHeight=Math.max(i.maxHeight,n)})}return t.prototype._getVisibleButtons=function(){var e=[],t=this;return this.dom.items.forEach(function(n){e.push(n.button),n.buttonExpand&&e.push(n.buttonExpand),n.subItems&&n==t.expandedItem&&n.subItems.forEach(function(t){e.push(t.button),t.buttonExpand&&e.push(t.buttonExpand)})}),e},t.visibleMenu=void 0,t.prototype.show=function(n){this.hide();var i=window.innerHeight,s=window.pageYOffset||document.scrollTop||0,o=i+s,r=n.offsetHeight,a=this.maxHeight,l=e.getAbsoluteLeft(n),c=e.getAbsoluteTop(n);o>c+r+a?(this.dom.menu.style.left=l+"px",this.dom.menu.style.top=c+r+"px",this.dom.menu.style.bottom=""):(this.dom.menu.style.left=l+"px",this.dom.menu.style.top="",this.dom.menu.style.bottom=i-c+"px"),document.body.appendChild(this.dom.menu);var d=this,u=this.dom.list;this.eventListeners.mousedown=e.addEventListener(document,"mousedown",function(e){var t=e.target;t==u||d._isChildOf(t,u)||(d.hide(),e.stopPropagation(),e.preventDefault())}),this.eventListeners.mousewheel=e.addEventListener(document,"mousewheel",function(e){e.stopPropagation(),e.preventDefault()}),this.eventListeners.keydown=e.addEventListener(document,"keydown",function(e){d._onKeyDown(e)}),this.selection=e.getSelection(),this.anchor=n,setTimeout(function(){d.dom.focusButton.focus()},0),t.visibleMenu&&t.visibleMenu.hide(),t.visibleMenu=this},t.prototype.hide=function(){this.dom.menu.parentNode&&(this.dom.menu.parentNode.removeChild(this.dom.menu),this.onClose&&this.onClose());for(var n in this.eventListeners)if(this.eventListeners.hasOwnProperty(n)){var i=this.eventListeners[n];i&&e.removeEventListener(document,n,i),delete this.eventListeners[n]}t.visibleMenu==this&&(t.visibleMenu=void 0)},t.prototype._onExpandItem=function(t){var n=this,i=t==this.expandedItem,s=this.expandedItem;if(s&&(s.ul.style.height="0",s.ul.style.padding="",setTimeout(function(){n.expandedItem!=s&&(s.ul.style.display="",e.removeClassName(s.ul.parentNode,"selected"))},300),this.expandedItem=void 0),!i){var o=t.ul;o.style.display="block";{o.clientHeight}setTimeout(function(){n.expandedItem==t&&(o.style.height=24*o.childNodes.length+"px",o.style.padding="5px 10px")},0),e.addClassName(o.parentNode,"selected"),this.expandedItem=t}},t.prototype._onKeyDown=function(t){var n,i,s,o,r=t.target,a=t.which,l=!1;27==a?(this.selection&&e.setSelection(this.selection),this.anchor&&this.anchor.focus(),this.hide(),l=!0):9==a?t.shiftKey?(n=this._getVisibleButtons(),i=n.indexOf(r),0==i&&(n[n.length-1].focus(),l=!0)):(n=this._getVisibleButtons(),i=n.indexOf(r),i==n.length-1&&(n[0].focus(),l=!0)):37==a?("expand"==r.className&&(n=this._getVisibleButtons(),i=n.indexOf(r),s=n[i-1],s&&s.focus()),l=!0):38==a?(n=this._getVisibleButtons(),i=n.indexOf(r),s=n[i-1],s&&"expand"==s.className&&(s=n[i-2]),s||(s=n[n.length-1]),s&&s.focus(),l=!0):39==a?(n=this._getVisibleButtons(),i=n.indexOf(r),o=n[i+1],o&&"expand"==o.className&&o.focus(),l=!0):40==a&&(n=this._getVisibleButtons(),i=n.indexOf(r),o=n[i+1],o&&"expand"==o.className&&(o=n[i+2]),o||(o=n[0]),o&&(o.focus(),l=!0),l=!0),l&&(t.stopPropagation(),t.preventDefault())},t.prototype._isChildOf=function(e,t){for(var n=e.parentNode;n;){if(n==t)return!0;n=n.parentNode}return!1},t}.apply(t,i),!(void 0!==s&&(e.exports=s))},function(e,t,n){var i,s;i=[n(9),n(3)],s=function(e,t){function n(n){function i(e){this.editor=e,this.dom={}}return i.prototype=new n,i.prototype.getDom=function(){var e=this.dom;if(e.tr)return e.tr;this._updateEditability();var t=document.createElement("tr");if(t.node=this,e.tr=t,this.editable.field){e.tdDrag=document.createElement("td");var n=document.createElement("td");e.tdMenu=n;var i=document.createElement("button");i.className="contextmenu",i.title="Click to open the actions menu (Ctrl+M)",e.menu=i,n.appendChild(e.menu)}var s=document.createElement("td"),o=document.createElement("div");return o.innerHTML="(empty)",o.className="readonly",s.appendChild(o),e.td=s,e.text=o,this.updateDom(),t},i.prototype.updateDom=function(){var e=this.dom,t=e.td;t&&(t.style.paddingLeft=24*this.getLevel()+26+"px");var n=e.text;n&&(n.innerHTML="(empty "+this.parent.type+")");var i=e.tr;this.isVisible()?e.tr.firstChild||(e.tdDrag&&i.appendChild(e.tdDrag),e.tdMenu&&i.appendChild(e.tdMenu),i.appendChild(t)):e.tr.firstChild&&(e.tdDrag&&i.removeChild(e.tdDrag),e.tdMenu&&i.removeChild(e.tdMenu),i.removeChild(t))},i.prototype.isVisible=function(){return 0==this.parent.childs.length},i.prototype.showContextMenu=function(t,i){var s=this,o=n.TYPE_TITLES,r=[{text:"Append",title:"Append a new field with type 'auto' (Ctrl+Shift+Ins)",submenuTitle:"Select the type of the field to be appended",className:"insert",click:function(){s._onAppend("","","auto")},submenu:[{text:"Auto",className:"type-auto",title:o.auto,click:function(){s._onAppend("","","auto")}},{text:"Array",className:"type-array",title:o.array,click:function(){s._onAppend("",[])}},{text:"Object",className:"type-object",title:o.object,click:function(){s._onAppend("",{})}},{text:"String",className:"type-string",title:o.string,click:function(){s._onAppend("","","string")}}]}],a=new e(r,{close:i});a.show(t)},i.prototype.onEvent=function(e){var n=e.type,i=e.target||e.srcElement,s=this.dom,o=s.menu;if(i==o&&("mouseover"==n?this.editor.highlighter.highlight(this.parent):"mouseout"==n&&this.editor.highlighter.unhighlight()),"click"==n&&i==s.menu){var r=this.editor.highlighter;
r.highlight(this.parent),r.lock(),t.addClassName(s.menu,"selected"),this.showContextMenu(s.menu,function(){t.removeClassName(s.menu,"selected"),r.unlock(),r.unhighlight()})}"keydown"==n&&this.onKeyDown(e)},i}return n}.apply(t,i),!(void 0!==s&&(e.exports=s))}])}),define("mixins/jsonEditor",["constants","JSONEditor","underscore"],function(e,t,n){"use strict";function i(i,s){var o;return o=document.getElementById(i),n.extend(s?s:{},e.jsoneditor),new t(o,s,s.json)}return{init:i}}),define("userDetail/view",["grasshopperBaseView","userDetail/options","resources","constants","breadcrumbWorker","underscore","mixins/handleRowClick","mixins/jsonEditor","helpers","api"],function(e,t,n,i,s,o,r,a,l,c){"use strict";function d(e){this.model.fetch().done(E.bind(this,e))}function u(){S.call(this),M.call(this)}function h(){this.model.get("hasGoogle")?p.call(this):g.call(this)}function p(){this.model.get("hasBasic")?x.call(this):C.call(this)}function f(){this.model.fetch().done(m.bind(this)).fail(v.bind(this))}function m(){this.displayModal(n.user.unlinkSuccessModal)}function v(){this.app.router.goLogout()}function g(){this.displayModal(n.user.linkModal).done(y.bind(this))}function y(){q.set(i.loginRedirectKey,i.profileGoogleLinkRedirect.url.replace(":id",this.model.get("_id"))),b.call(this)}function b(){c.getGoogleUrl().done(function(e){window.location.href=e}).fail(w.bind(this))}function w(e){this.fireErrorModal(e)}function x(){this.displayModal(n.user.unlinkModalWithBasic).done(T.bind(this))}function C(){this.displayModal(n.user.unlinkModalWithoutBasic).done(T.bind(this))}function T(){this.model.get("userModel").unlinkGoogle().done(f.bind(this))}function k(){this.model.toggle("enabled"),this.model.trigger("change:enabled"),this.saveUser()}function S(){var e=this;this.model.on("change:enabled",function(){e.model.get("userIsChangingTheirProfile")&&"false"===e.model.get("enabled").toString()&&_.call(e).fail(function(){e.model.set("enabled",e.model.previous("enabled"))})})}function _(){return this.displayModal({header:n.warning,msg:n.user.selfLockWarning})}function D(){this.app.router.navigateTrigger(i.internalRoutes.addUser)}function E(e){s.userBreadcrumb.call(this,e)}function M(){var e=this.model.get("profile");this.jsonEditor=a.init("profile",{change:A.bind(this),json:e})}function A(){this.model.set("profile",this.jsonEditor.get())}function N(){this.model.toggle("saving"),O.call(this,{})}function F(){this.model.toggle("saving"),O.call(this,{close:!0})}function O(e){this.model.save().done(j.bind(this,e)).fail(I.bind(this))}function j(e,t){this.displayTemporaryAlertBox({header:n.success,style:"success",msg:n.user.successfullyUpdated}),e.close?this.app.router.navigateTrigger(i.internalRoutes.users):this.model.toggle("saving"),P.call(this,t)}function I(e){this.model.toggle("saving"),this.fireErrorModal(e.responseJSON.message)}function P(e){this.app.user.get("_id")===e._id&&this.app.user.set(e)}function V(){R.call(this).done(B.bind(this))}function R(){return this.displayModal({header:n.warning,msg:n.user["delete"].warningMessage})}function B(){this.model.destroy().then(L.bind(this)).fail(H.bind(this))}function L(){this.app.router.navigateTrigger(i.internalRoutes.users),this.displayTemporaryAlertBox({header:n.success,style:"success",msg:n.user["delete"].success})}function H(){this.displayTemporaryAlertBox({header:n.error,style:"error",msg:n.user["delete"].failure})}var q=l.localStorage;return e.extend({defaultOptions:t,beforeRender:d,afterRender:u,saveUser:N,saveAndClose:F,toggleEnabled:k,deleteUser:V,addNewUser:D,toggleGoogle:h}).extend(r)}),define("UserModel",["grasshopperModel","masseuse","resources","constants","underscore","api"],function(e,t,n,i,s,o){"use strict";function r(){return o.unlinkGoogle(this.get("_id"))}var a=t.ComputedProperty;return e.extend({idAttribute:"_id",defaults:{username:!1,role:!1,enabled:!1,email:!1,profile:{},loggedIn:new a(["enabled"],function(e){return e}),href:new a(["_id"],function(e){return i.internalRoutes.userDetail.replace(":id",e)}),hasGoogle:new a(["linkedidentities"],function(e){return s.contains(e,"google")}),hasBasic:new a(["linkedidentities"],function(e){return s.contains(e,"basic")})},unlinkGoogle:r})}),define("text!views/header/headerView.html",[],function(){return'<div>\n\n    <div id="topbar" class="contain-to-grid sticky">\n        <div id="top-nav">\n            <ul class="pull-right">\n                <li>\n                    <a data-rv-href="model:userModel->href">\n                        <img data-rv-src="model:userModel->email | gravatarUrl 24" class="gravatar-img">\n                        <span data-rv-text="model:resources->user->loggedInAs | spaceAfter"></span>\n                        <span>{{model:userModel->displayname | spaceAfter}}</span>\n                    </a>\n                </li>\n                <li>\n                    <a id="logOutButton" data-rv-href="model:constants->internalRoutes->logout" data-rv-show="model:userModel->loggedIn">\n                        {{model:resources->log_out}}\n                    </a>\n                </li>\n                <li>\n                    <a id="logInButton" data-rv-href="model:constants->internalRoutes->login" data-rv-hide="model:userModel->loggedIn">\n                        {{model:resources->log_in}}\n                    </a>\n                </li>\n            </ul>\n\n        </div>\n    </div>\n\n    <div id="headerbar">\n        <div class="container">\n\n            <div class="row">\n                <div class="large-12 columns">\n                    <a data-rv-href="model:constants->internalRoutes->content" class="brand">{{model:resources->siteName}}</a>\n\n                    <a class="btn-navbar" data-toggle="collapse" data-target=".nav-collapse" data-rv-on-click="view.toggleNavigation | stopImmediatePropagation">\n                        <i class="fa fa-align-justify"></i>\n                    </a>\n\n                    <div class="nav-collapse">\n                        <ul id="main-nav" class="nav pull-right">\n\n                            <li class="nav-item" data-rv-show="model:userModel->role | includes admin reader editor">\n                                <a id="items" class="nav-item-link" data-rv-href="model:constants->internalRoutes->content">\n                                    <i class="fa fa-th"></i>\n                                    <span>{{model:resources->content}}</span>\n                                </a>\n                            </li>\n\n                            <li class="nav-item" data-rv-show="model:userModel->role | includes admin editor">\n                                <a id="contentTypes" class="nav-item-link" data-rv-href="model:constants->internalRoutes->contentTypes">\n                                    <i class="fa fa-cogs"></i>\n                                    <span>{{model:resources->types}}</span>\n                                </a>\n                            </li>\n\n                            <li class="nav-item" data-rv-show="model:userModel->role | equals admin">\n                                <a id="users" class="nav-item-link" data-rv-href="model:constants->internalRoutes->users">\n                                    <i class="fa fa-user"></i>\n                                    <span>{{model:resources->users}}</span>\n                                </a>\n                            </li>\n\n                            <li class="nav-item" data-rv-show="model:userModel->role | equals admin reader editor">\n                                <a id="advancedSearch" class="nav-item-link" data-rv-href="model:constants->internalRoutes->advancedSearch">\n                                    <i class="fa fa-search"></i>\n                                    <span>{{model:resources->advancedSearch}}</span>\n                                </a>\n                            </li>\n\n                            <li class="nav-item"\n                                data-rv-show="model:userModel->role | includes admin reader editor author">\n                                <a id="sysInfo" class="nav-item-link"\n                                   data-rv-href="model:constants->internalRoutes->sysInfo">\n                                    <i class="fa fa-info"></i>\n                                    <span>{{model:resources->sysInfo}}</span>\n                                </a>\n                            </li>\n\n                        </ul>\n                    </div>\n\n                </div>\n            </div>\n\n        </div>\n    </div>\n\n</div>\n'}),define("headerViewModel",["masseuse","resources","constants"],function(e,t,n){"use strict";var i=e.MasseuseModel;return i.extend({defaults:{resources:t,constants:n}})}),define("headerViewConfig",["text!views/header/headerView.html","headerViewModel","formatters"],function(e,t,n){"use strict";return{name:"headerView",modelData:{},ModelType:t,appendTo:"#header",wrapper:!1,template:e,events:{},listeners:[["channels.views","checkHeaderTab","checkHeaderTab"]],rivetsConfig:{formatters:[n]}}}),define("headerView",["grasshopperBaseView","headerViewConfig","constants","underscore"],function(e,t,n,i){"use strict";function s(){this.$el.find("#main-nav").slideToggle("fast")}function o(e){if(i.has(e,"headerTab"))switch(e.headerTab){case"advancedSearch":this.setActive("#advancedSearch");break;case"users":this.setActive("#users");break;case"content":this.setActive("#items");break;case"contentTypes":this.setActive("#contentTypes");break;case"sysInfo":this.setActive("#sysInfo");break;default:this.setActive("#items")}}function r(e){this.$el.find(".nav-item-link").removeClass("active"),this.$el.find(e).addClass("active")}return e.extend({defaultOptions:t,toggleNavigation:s,checkHeaderTab:o,setActive:r})}),define("text!views/masthead/mastheadView.html",[],function(){return'<div class="container">\n    <div class="row">\n        <div class="small-12 columns clearfix">\n\n            <div id="breadcrumbs" class="left">\n                <span data-rv-breadcrumb="model:breadcrumbs"></span>\n            </div>\n\n            <div class="right" id="mastheadButtons"></div>\n\n        </div>\n    </div>\n</div>\n'}),define("mastheadViewModel",["grasshopperModel"],function(e){"use strict";return e.extend({defaults:{}})}),define("mastheadViewBinders",["jquery","underscore"],function(e,t){"use strict";function n(n,i){var s=e(n);s.empty(),s.append('<i class="fa '+i.icon+'"></i>'),t.each(t.initial(i.crumbs),function(e){s.append("<a href="+e.href+">"+e.text+" / </a>")}),s.append("<span>"+t.last(i.crumbs).text+"</span>")}return{breadcrumb:n}}),define("mastheadViewConfig",["text!views/masthead/mastheadView.html","mastheadViewModel","resources","mastheadViewBinders","constants"],function(e,t,n,i,s){"use strict";return{name:"mastheadView",modelData:{},ModelType:t,appendTo:"#masthead",wrapper:!1,template:e,listeners:[["channels.views","updateMastheadButtons","setButtons"],["channels.views","updateMastheadBreadcrumbs","setBreadcrumbs"]],defaultBreadcrumbs:{icon:"fa-search",crumbs:[{text:s.home,href:"#"}]},defaultMastheadButtons:[{text:n.mastheadButtons.createFolder,href:"#"}],rivetsConfig:{binders:[i]}}}),define("mastheadView",["grasshopperBaseView","mastheadViewConfig","underscore","jquery"],function(e,t,n,i){"use strict";function s(){this.setBreadcrumbs()}function o(){i("#masthead").scrollToFixed()}function r(e){e&&e.model.has("breadcrumbs")?this.model.set("breadcrumbs",n.flatten(n.clone(e.model.get("breadcrumbs")))):e&&e.breadcrumbs?this.model.set("breadcrumbs",e.breadcrumbs):this.model.set("breadcrumbs",this.defaultBreadcrumbs)}return e.extend({defaultOptions:t,beforeRender:s,afterRender:o,setBreadcrumbs:r})}),define("text!views/userIndex/userIndexView.html",[],function(){return'<div>\n    <div class="small-12 columns">\n        <div class="row">\n            <div id="contentSearch" class="contentSearch-user">\n                <input class="contentSearchInput" type="text" placeholder="Users search" data-rv-value="model:contentSearchValue" data-rv-on-keyup="view.searchContent"/>\n                <span class="contentSearchIcon fa fa-search"></span>\n            </div>\n        </div>\n        <div class="row">\n            <div class="userIndexTableWrapper table-wrapper">\n                <div id="table-loading-overlay">\n                    <img class="loading-overlay-image" src="themes/img/loading-spinner-horizontal.gif">\n                </div>\n                <table width="100%">\n                    <thead>\n                    <tr>\n                        <th width=\'200\'>{{model:resources->name}}</th>\n                        <th>{{model:resources->displayname}}</th>\n                        <th>{{model:resources->role}}</th>\n                        <th width=\'200\'>{{model:resources->email}}</th>\n                        <th width=\'200\' style=\'text-align: center\'>{{model:resources->actions}}</th>\n                    </tr>\n                    </thead>\n                    <tbody id="userIndexTable">\n                    <tr data-rv-each-user="model:users:" data-rv-new-user-detail-row="user"></tr>\n                    </tbody>\n                </table>\n                <section data-rv-if="model:users.total | isGreaterThan 25" data-rv-new-pagination-view="model:users"></section>\n            </div>\n        </div>\n    </div>\n\n\n    <section data-rv-move-to="view.mastheadButtonsSelector">\n        <ul class="button-group radius right">\n\n            <li>\n                <a data-rv-on-click="view.addNewUser" class="button tiny">\n                    {{model:resources->mastheadButtons->addNewUser}}\n                </a>\n            </li>\n\n        </ul>\n    </section>\n</div>\n'}),define("paginatedCollection",["grasshopperModel","grasshopperCollection","constants","underscore","jquery","api"],function(e,t,n,i,s,o){"use strict";function r(e,t,n,i){return n=parseInt(n,10)||1,i=i||!1,i?this.skip=e>=1&&n>=e?e:1:this.skip+=this.skip+e>=1&&this.skip+e<=n?e:0,this.query(t)}function a(e,t){return this.limit=parseInt(e,10)?e:n.pagination.defaultAllLimit,this.query(t)}function l(e,t){this.skip=i.isUndefined(this.contentSearchValue)||this.contentSearchValue==e?this.skip:n.pagination.defaultSkip,this.contentSearchValue=e||"",this.limit=parseInt(this.limit,10)?this.limit:n.pagination.defaultAllLimit;var r=new s.Deferred,a={filters:[{key:this.filtersKey,cmp:"%",value:e||""}],nodes:[this.nodeId]||[],options:{limit:parseInt(this.limit,10),skip:(parseInt(this.skip,10)-1)*this.limit,sortBy:{"meta.lastmodified":-1}}};return this.queryRequest.call(o,a).done(function(e){this.reset(e.results),this.total=e.total,this.skip=parseInt(this.skip,10),this.trigger("paginatedCollection:query"),t&&t(),r.resolve()}.bind(this)),r.promise()}return t.extend({model:e,nodeId:"",query:l,searchQuery:i.throttle(l,n.contentSearchThrottle,{leading:!1}),doSkip:r,setLimit:a,total:0})}),define("userIndexViewModel",["grasshopperModel","resources","constants","grasshopperCollection","userDetail/model","paginatedCollection","api"],function(e,t,n,i,s,o,r){"use strict";function a(){e.prototype.initialize.apply(this,arguments),this.set("users",new(o.extend({model:s,url:function(){return n.api.users.url},limit:parseInt(this.get("limit")||n.pagination.defaultLimit,10),skip:parseInt(this.get("skip")||n.pagination.defaultSkip,10),filtersKey:["firstname","lastname","email","displayname"],queryRequest:r.makeUsersQuery})))}return e.extend({initialize:a,defaults:{resources:t,users:null}})}),define("text!views/userDetail/userDetailRow/template.html",[],function(){return'<td data-rv-on-click="view.handleRowClick">\n    <a data-rv-href="model:href">{{model:firstname | spaceAfter}}\n    {{model:lastname}}</a>\n</td>\n<td data-rv-on-click="view.handleRowClick">{{model:displayname}}</td>\n<td data-rv-on-click="view.handleRowClick">{{model:role | humanize}}</td>\n<td data-rv-on-click="view.handleRowClick">{{model:email}}</td>\n<td align="center" data-rv-on-click="view.handleRowClick">\n    <a data-rv-href="model:href">\n        <i class="fa fa-edit"></i>\n    </a>\n    <a data-rv-show="model:enabled" data-rv-on-click="view.toggleEnabled | stopImmediatePropagation">\n        <i class="fa fa-unlock"></i>\n    </a>\n    <a data-rv-hide="model:enabled" data-rv-on-click="view.toggleEnabled | stopImmediatePropagation">\n        <i class="fa fa-lock"></i>\n    </a>\n    <a data-rv-on-click="view.deleteUser | stopImmediatePropagation">\n        <i class="fa fa-trash-o"></i>\n    </a>\n</td>\n'}),define("userDetailRow/options",["userDetail/options","jquery","text!views/userDetail/userDetailRow/template.html"],function(e,t,n){"use strict";return t.extend(!0,{},e,{template:n})}),define("userDetailRow/view",["userDetail/view","userDetailRow/options"],function(e,t){"use strict";function n(){}return e.extend({defaultOptions:t,beforeRender:n,afterRender:n})}),define("text!views/pagination/template.html",[],function(){return'<div id="paginator">\n    <ul class="pagination pagination-limit">\n        <li class="pagination-item" data-rv-each-size="model:constants->pagination->defaultPageSize">\n            <a class="pagination-item-link" data-rv-on-click="view.setLimit" data-rv-text="size"></a>\n        </li>\n    </ul>\n    <ul class="pagination pagination-skip">\n        <li class="pagination-item">\n            <a class="pagination-item-link" data-rv-on-click="view.prev">&lt;prev</a>\n        </li>\n        <li class="pagination-item" data-rv-each-number="model:pageNumbers">\n            <a class="pagination-item-link" data-rv-if="number.isVisible" data-rv-on-click="view.goToPage">..</a>\n            <a class="pagination-item-link" data-rv-unless="number.isShowDot" data-rv-addClass="number.isCurrent" data-rv-on-click="view.goToPage" data-rv-text="number.linkTo"></a>\n        </li>\n        <li class="pagination-item">\n            <a class="pagination-item-link" data-rv-on-click="view.next">next&gt;</a>\n        </li>\n    </ul>\n</div>\n'}),define("pagination/model",["masseuse","resources","constants"],function(e,t,n){"use strict";function i(e,t,n){for(var i=0,r=[];t>i;)r.push({isShowDot:n?!1:s(e-1,i,t-1),linkTo:i+1,isCurrent:e-1===i?"active":"",isVisible:n?!1:s(e-1,i,t-1)&&o(e-1,i,t-1)}),i+=1;return r}function s(e,t,n){switch(!0){case 0===e&&(e+1===t||e+2===t):return!1;case e===n&&(e-1===t||e-2===t):return!1;case e===t||e+1===t||e-1===t||0===t||t===n:return!1;default:return!0}}function o(e,t,n){switch(!0){case 0===e&&(e+1===t||e+2===t||e+3===t):return!0;case e===n&&(e-1===t||e-2===t||e-3===t):return!0;case e===t||e+1===t||e+2===t||e-1===t||e-2===t||0===t||t===n:return!0;default:return!1}}var r=e.MasseuseModel;return r.extend({defaults:{constants:n,resources:t,pageNumbers:e.ComputedProperty(["limit","total","currentPage"],function(e,t,s){var o=t%e===0?t/e:parseInt(t/e,10)+1,r=[];return r=o<n.pagination.defaultPagesLimit?i(s,o,!0):i(s,o)},!0)}})}),define("pagination/options",["text!views/pagination/template.html","pagination/model"],function(e,t){"use strict";return{name:"paginationView",modelData:{},ModelType:t,wrapper:!1,template:e,events:{},listeners:[]}}),define("paginationWorker",["constants"],function(e){"use strict";function t(t,n,i){var s=this.app.router.getCurrentBreadcrumb();t=t===e.pagination.defaultAllLimit?"all":t,-1!==s.indexOf("/limit")&&(s=s.slice(0,s.indexOf("/limit"))),s+=i?"/limit/"+t+"/skip/"+n+"/query/"+i:"/limit/"+t+"/skip/"+n,this.app.router.navigate(s,{trigger:!1})}return{setUrl:t}}),define("pagination/view",["grasshopperBaseView","pagination/options","paginationWorker","constants","jquery"],function(e,t,n,i,s){"use strict";function o(){p.call(this),r.call(this),a.call(this),this.listenTo(this.collection,"paginatedCollection:query",r.bind(this)),this.listenTo(this.collection,"paginatedCollection:query",p.bind(this))}function r(){this.model.set({limit:this.collection.limit,total:this.collection.total,currentPage:this.collection.skip},!0)}function a(){this.collection.limit>this.collection.total||"all"===this.collection.total?this.$(".pagination-skip").hide():this.$(".pagination-skip").show()}function l(e,t){e.preventDefault();var s=this.model.get("contentSearchValue");this.model.set("limit",t.size),this.collection.skip=i.pagination.defaultSkip,this.collection.setLimit(t.size,s).done(n.setUrl.bind(this,t.size,this.collection.skip,s),a.call(this),p(e))}function c(e,t){e.preventDefault(),h.call(this,t.number.linkTo,!0)}function d(e){e.preventDefault();var t=this.collection.total,n=this.collection.limit,i=t%n===0?t/n:parseInt(t/n,10)+1;this.collection.skip+1>i?!1:h.call(this,1)}function u(e){e.preventDefault(),this.collection.skip-1<=0?!1:h.call(this,-1)}function h(e,t){var i=this.collection.contentSearchValue,s=this.model.get("pageNumbers").length;t=t||!1,this.collection.doSkip(e,i,s,t).done(this.model.set("currentPage",this.collection.skip),n.setUrl.bind(this,this.collection.limit,this.collection.skip,i))}function p(e){var t=s(".pagination-limit");t.find(".pagination-item-link").removeClass("active"),e?s(e.currentTarget).addClass("active"):t.find(".pagination-item-link:contains("+this.collection.limit+")").addClass("active")}return e.extend({defaultOptions:t,afterRender:o,goToPage:c,next:d,prev:u,setLimit:l})}),define("userIndexViewConfig",["text!views/userIndex/userIndexView.html","userIndexViewModel","resources","constants","userDetailRow/view","appBinders","pagination/view"],function(e,t,n,i,s,o,r){"use strict";return{name:"userIndexView",modelData:{},ModelType:t,browserTitle:"Users",headerTab:"users",appendTo:"#stage",wrapper:!1,template:e,events:{"change #limitDropdown":"changeLimit"},listeners:[],breadcrumbs:{icon:"fa-users",crumbs:[{text:i.home,href:i.internalRoutes.content},{text:n.users,href:i.internalRoutes.users}]},rivetsConfig:{instaUpdate:!0,binders:[o],childViewBinders:{"user-detail-row":s,"pagination-view":r}},permissions:["admin"]}}),define("searchWorker",["constants","paginationWorker","jquery","underscore"],function(e,t,n,i){"use strict";function s(s,r,a,l,c){var d,u;return l=l||!1,c=c||!1,i.isUndefined(s)||i.isUndefined(e.controlKeyCodeMap[s.keyCode])?(d=this.model.get(a),u=n.trim(this.model.get("contentSearchValue")),c?d.query(u):(o.call(this),d.searchQuery(u,function(){l&&t.setUrl.call(this,d.limit,d.skip,u),o.call(this,!0)}.bind(this)))):!1}function o(e){var t=this.$(".contentSearchIcon");e?(t.removeClass("fa-refresh fa-spin"),t.addClass("fa-search")):(t.removeClass("fa-search"),t.addClass("fa-refresh fa-spin"))}return{searchContent:s}}),define("userIndexView",["jquery","underscore","grasshopperBaseView","userIndexViewConfig","constants","searchWorker"],function(e,t,n,i,s,o){"use strict";function r(t){e.when(this.searchContent(void 0,void 0,!0)).done(t.resolve)}function a(){this.app.router.navigateTrigger(s.internalRoutes.addUser)}function l(e,t,n){return o.searchContent.call(this,e,t,"users",!0,n)}return n.extend({defaultOptions:i,beforeRender:r,addNewUser:a,searchContent:l})}),define("text!views/addUser/template.html",[],function(){return'<div id="addUser" class="row">\n    <div class="small-12 columns">\n\n        <fieldset>\n            <legend>\n                <h3>\n                    {{model:resources->user->addNewUser}}\n                </h3>\n            </legend>\n\n            <div class="row">\n                <div class="large-12 small-centered columns">\n\n                    <div class="row">\n                        <div class="large-3 columns">\n                            <label for="firstName" class="right inline">{{model:resources->user->attributeTitles->firstName | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <input id="firstName" type="text" data-rv-value="model:firstname" data-rv-placeholder="model:resources->user->attributeTitles->firstName"/>\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="large-3 columns">\n                            <label for="lastName" class="right inline">{{model:resources->user->attributeTitles->lastName | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <input id="lastName" type="text" data-rv-value="model:lastname" data-rv-placeholder="model:resources->user->attributeTitles->lastName"/>\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="large-3 columns">\n                            <label for="displayname" class="right inline">{{model:resources->user->attributeTitles->displayname | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <input id="displayname" type="text" data-rv-value="model:displayname" data-rv-placeholder="model:resources->user->attributeTitles->displayname"/>\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="large-3 columns">\n                            <label for="role" class="right inline">{{model:resources->user->attributeTitles->role | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <select id="role" data-rv-value="model:role | humanize">\n                                <option data-rv-each-role="model:resources->user->roles" data-rv-text="role | humanize"></option>\n                            </select>\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="large-3 columns">\n                            <label for="email" class="right inline">{{model:resources->user->attributeTitles->email | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <input id="email" type="text" data-rv-value="model:email" data-rv-placeholder="model:resources->user->attributeTitles->email"/>\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="large-3 columns">\n                            <label for="username" class="right inline">{{model:resources->user->attributeTitles->username | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <input id="username" type="text" data-rv-value="model:identities->basic->username" data-rv-placeholder="model:resources->user->attributeTitles->username"/>\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="large-3 columns">\n                            <label for="password" class="right inline">{{model:resources->user->attributeTitles->password | withColon}}</label>\n                        </div>\n                        <div class="large-9 columns">\n                            <input id="password" type="password" data-rv-value="model:identities->basic->password" data-rv-placeholder="model:resources->user->attributeTitles->password"/>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="large-12 small-centered columns">\n                    <button data-rv-on-click="view.saveUser" class="button tiny radius right">{{model:resources->save}}</button>\n                </div>\n            </div>\n\n        </fieldset>\n\n    </div>\n\n    <section data-rv-move-to="view.mastheadButtonsSelector">\n        <ul class="button-group radius right">\n\n            <li>\n                <a data-rv-on-click="view.addNewUser" class="button tiny">\n                    {{model:resources->mastheadButtons->addNewUser}}\n                </a>\n            </li>\n\n        </ul>\n    </section>\n</div>\n'}),define("addUser/model",["grasshopperModel","resources","constants"],function(e,t,n){"use strict";return e.extend({defaults:{resources:t},url:n.api.newUser.url})}),define("addUser/options",["text!views/addUser/template.html","addUser/model","resources","constants","appBinders"],function(e,t,n,i,s){"use strict";return{name:"addUser",ModelType:t,browserTitle:"Add New User",headerTab:"users",modelData:{},appendTo:"#stage",wrapper:!1,template:e,events:{},listeners:[],mastheadButtons:[],breadcrumbs:{icon:"fa-puzzle-piece",crumbs:[{text:i.home,href:i.internalRoutes.content},{text:n.users,href:i.internalRoutes.users}]},permissions:["admin"],rivetsConfig:{binders:[s]}}}),define("addUser/view",["grasshopperBaseView","addUser/options","resources","breadcrumbWorker","constants"],function(e,t,n,i,s){"use strict";function o(e){c.call(this,e)}function r(){this.model.save().success(a.bind(this)).error(l.bind(this))}function a(){this.app.router.navigateTrigger(s.internalRoutes.users),this.displayTemporaryAlertBox({header:n.success,style:"success",msg:n.user.newUserAdded})}function l(e){this.fireErrorModal(e.responseJSON.message)}function c(e){i.userBreadcrumb.call(this,e,!0)}function d(){this.app.router.displayAddUser()}return e.extend({defaultOptions:t,beforeRender:o,saveUser:r,addNewUser:d})}),define("text!views/contentBrowse/contentBrowseView.html",[],function(){return'<div class="row contentBrowse">\n    <div class="large-12 columns">\n        <dl class="tabs" data-tab>\n            <dd class="active" id="contentTab">\n                <a data-bypass href="#contentPanel">\n                    <p class="title">\n                        <i class="fa fa-list-alt"></i>\n                        {{model:resources->content | spaceBefore}}\n                    </p>\n                </a>\n            </dd>\n            <dd data-rv-hide="model:inRoot" id="filesTab">\n                <a data-bypass href="#filesPanel">\n                    <p class="title">\n                        <i class="fa fa-paperclip"></i>\n                        {{model:resources->fileIndex->files | spaceBefore}}\n                    </p>\n                </a>\n            </dd>\n        </dl>\n\n        <div id="contentSearch" data-rv-unless="model:inRoot">\n            <input class="contentSearchInput" type="text" placeholder="Search by content label " data-rv-value="model:contentSearchValue" data-rv-on-keyup="view.searchContent"/>\n            <span class="contentSearchIcon fa fa-search"></span>\n        </div>\n\n        <div class="tabs-content">\n            <div class="content active table-wrapper" id="contentPanel">\n                <div id="table-loading-overlay">\n                    <img class="loading-overlay-image" src="themes/img/loading-spinner-horizontal.gif">\n                </div>\n                <table class="content-table">\n                    <thead>\n                        <tr>\n                            <th>{{model:resources->label}}</th>\n                            <th>{{model:resources->type}}</th>\n                            <th>{{model:resources->contentBrowse->modified}}</th>\n                            <th style="text-align: center; width: 10%;">{{model:resources->actions}}</th>\n                        </tr>\n                    </thead>\n                    <tbody id="contentBrowseTable">\n                        <!--Nodes Come First-->\n                        <tr class="nodeDetailRow clipboardTargetRow" data-rv-each-node="model:childNodes:"\n                            data-rv-data-id="node.id" data-rv-new-node-detail-row="node"></tr>\n\n                        <!--Then Content-->\n                        <tr data-rv-unless="model:childContent.length | greaterThan 0">\n                            <td colspan="4" data-rv-unless="model:inRoot">\n                                {{model:resources->node->emptyContent}}\n                                <span>\n                                    <a data-rv-on-click="view.createContent">\n                                        {{model:resources->node->clickToAdd}}\n                                    </a>\n                                </span>\n                            </td>\n                        </tr>\n                        <tr class="contentDetailRow clipboardTargetRow" data-rv-each-content="model:childContent.models" data-rv-data-id="content.id" data-rv-new-content-detail-row="content"></tr>\n                    </tbody>\n                </table>\n\n                <section data-rv-if="model:childContent.total | isGreaterThan 25" data-rv-new-pagination-view="model:childContent"></section>\n\n            </div>\n            <div class="content" id="filesPanel" data-rv-hide="model:inRoot">\n                <div id="assetIndex">\n\n                    <table class="content-table">\n                        <thead>\n                            <tr>\n                                <th>{{model:resources->fileIndex->fileName}}</th>\n                                <th>{{model:resources->fileIndex->size}}</th>\n                                <th>{{model:resources->fileIndex->modified}}</th>\n                                <th style="text-align: center; width: 15%;">{{model:resources->actions}}</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n\n                            <tr data-rv-unless="model:childAssets.length | greaterThan 0">\n                                <td colspan="4">\n                                    {{model:resources->asset->emptyNode}}\n                                    <span>\n                                        <a data-rv-on-click="view.createAssets">\n                                            {{model:resources->asset->clickToAdd}}\n                                        </a>\n                                    </span>\n                                </td>\n                            </tr>\n\n                            <tr class="assetDetailRow clipboardTargetRow" data-rv-new-asset-detail-row="asset"\n                                data-rv-each-asset="model:childAssets:" data-rv-data-id="asset.id"></tr>\n\n                        </tbody>\n                    </table>\n                    <!--Built from assetIndex-->\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <section data-rv-move-to="view.mastheadButtonsSelector">\n        <ul class="button-group radius right">\n\n            <li data-rv-unless="model:inRoot">\n                <a data-rv-on-click="view.createContent" class="button tiny">\n                    {{model:resources->mastheadButtons->createContent}}\n                </a>\n            </li>\n\n            <li data-rv-unless="model:inRoot">\n                <a data-rv-on-click="view.createAssets" class="button tiny">\n                    {{model:resources->mastheadButtons->uploadFile}}\n                </a>\n            </li>\n\n            <li>\n                <a data-rv-on-click="view.createFolder" class="button tiny"\n                   data-rv-show="view.hasCreateFolderPermission">\n                    {{model:resources->mastheadButtons->createFolder}}\n                </a>\n            </li>\n\n            <li data-rv-unless="model:inRoot">\n                <a class="button tiny dropdown" id="actionsDropdown" data-dropdown="drop">\n                    {{model:resources->mastheadButtons->actions}}\n                </a>\n\n                <ul id="drop" class="f-dropdown" data-dropdown-content>\n                    <li data-rv-on-click="view.editNodeName">\n                        <a>\n                            {{model:resources->mastheadButtons->editNodeName}}\n                        </a>\n                    </li>\n\n                    <li data-rv-on-click="view.editNodeContentTypes">\n                        <a>\n                            {{model:resources->mastheadButtons->editNodeContentTypes}}\n                        </a>\n                    </li>\n\n                    <li data-rv-on-click="view.deleteNode">\n                        <a>\n                            {{model:resources->mastheadButtons->deleteNode}}\n                        </a>\n                    </li>\n                </ul>\n            </li>\n\n        </ul>\n    </section>\n</div>\n'
}),define("nodeDetailViewModel",["grasshopperModel","resources","masseuse","constants"],function(e,t,n,i){"use strict";var s=n.ComputedProperty;return e.extend({idAttribute:"_id",defaults:{resources:t,href:new s(["_id"],function(e){return i.internalRoutes.nodeDetail.replace(":id",e)})},urlRoot:i.api.node.url})}),define("mixins/validatePlugins",["mixins/pluginSaveHook","underscore"],function(e,t){"use strict";function n(n){return t.map(e.activeSubscribers,function(e){return e.model.get("validations")&&e.model.get("validations")[n]&&t(e.model.get("validations")[n]).isFunction()?e.model.get("validations")[n].call(e.model):void 0})}return{validateOnContentSave:n.bind(null,"content"),validateOnContentTypeSave:n.bind(null,"setup")}}),define("contentDetailViewModel",["grasshopperModel","resources","constants","masseuse","helpers","underscore","jquery","backbone","mixins/validatePlugins"],function(e,t,n,i,s,o,r,a,l){"use strict";function c(){var e=a.Model.prototype.toJSON.apply(this);return m(r.extend(!0,{},o.pick(e,["fields","meta","_id"])))}function d(){var e,t=!1;return e=o.compact(l.validateOnContentSave()),t=e.length?e:!1,t?t:void 0}function u(e,t){return t.smartParse===!0?void h(e,this,""):t.parse===!1?o.omit(e,["fields"]):e}function h(e,t,n){var i,s,r;for(i in e)s=e[i],r=n.length>0?n+"."+i:i,o.isObject(s)?h(s,t,r):t.set(r,s)}function p(){this.get("isNew")?this.set("label",t.newWord+" "+this.get("schema.label")):this.set("label",this.get("fields."+this.get("meta.labelfield")))}var f=i.ComputedProperty,m=s.cleanCollection;return e.extend({idAttribute:"_id",defaults:function(){return{resources:t,href:new f(["_id"],function(e){return n.internalRoutes.contentDetail.replace(":id",e)}),label:"",fields:{},saving:!1,schema:null}},urlRoot:n.api.content.url,toJSON:c,validate:d,parse:u,resetContentLabel:p})}),define("contentBrowseViewModel",["grasshopperModel","resources","constants","grasshopperCollection","paginatedCollection","nodeDetailViewModel","contentDetailViewModel","assetDetailViewModel","underscore","api"],function(e,t,n,i,s,o,r,a,l,c){"use strict";function d(){var e=this;this.set("childNodes",new(i.extend({model:o,url:function(){return n.api.nodesChildren.url.replace(":id",e.get("nodeId"))}}))),this.set("childContent",new(s.extend({model:r,url:function(){return n.api.nodesContent.url.replace(":id",e.get("nodeId"))},limit:parseInt(this.get("limit")||n.pagination.defaultLimit,10),skip:parseInt(this.get("skip")||n.pagination.defaultSkip,10),nodeId:this.get("nodeId"),filtersKey:"virtual.label",queryRequest:c.makeQuery}))),this.set("childAssets",new(i.extend({model:function(t,n){return new a(l.extend(t,{nodeId:e.get("nodeId")}),n)},url:function(){return n.api.assets.url.replace(":id",e.get("nodeId"))}})))}return e.extend({initialize:d,idAttribute:"nodeId",defaults:{resources:t,constants:n,childNodes:null,childContent:null,childAssets:null},urlRoot:n.api.node.url})}),define("text!views/nodeDetail/nodeDetailView.html",[],function(){return'<td data-rv-on-click="view.handleRowClick" class="clipboardTargetName">\n    <i class="fa fa-folder"></i>\n    <a data-rv-href="model:href">\n        {{model:label | spaceBefore}}\n    </a>\n</td>\n<td data-rv-on-click="view.handleRowClick">\n    --\n</td>\n<td data-rv-on-click="view.handleRowClick">\n    {{model:modified | existsOr --}}\n</td>\n<td data-rv-on-click="view.handleRowClick" align="center">\n    <a data-rv-on-click="view.editNodeName | stopImmediatePropagation">\n        <i class="fa fa-edit linkWithNoATag"></i>\n    </a>\n    <a data-rv-on-click="view.prepareToEditContentTypes  | stopImmediatePropagation">\n        <i class="fa fa-tasks"></i>\n    </a>\n    <a data-rv-on-click="view.prepareToDeleteNode  | stopImmediatePropagation">\n        <i class="fa fa-trash-o"></i>\n    </a>\n</td>\n'}),define("nodeDetailViewConfig",["text!views/nodeDetail/nodeDetailView.html","nodeDetailViewModel"],function(e,t){"use strict";return{name:"nodeDetailView",ModelType:t,appendTo:"#stage",wrapper:!1,template:e,permissions:["admin","reader","editor"]}}),define("nodeWorker",["api","jquery","resources","contentTypeWorker","underscore","constants"],function(e,t,n,i,s,o){"use strict";function r(){var e=this,n=new t.Deferred;return t.when(c.call(this),this.model.fetch()).then(function(t){e.model.set("label",t.data),d.call(e).done(n.resolve)}),n.promise()}function a(){p.call(this).then(f.bind(this)).then(m.bind(this))}function l(){y.call(this).done(b.bind(this,!0))}function c(){return this.displayModal({header:n.node.editName,type:"input",data:this.model.get("label")})}function d(){var e=new t.Deferred;return this.model.save().done(u.bind(this,e)).fail(h.bind(this,e)),e.promise()}function u(e){this.displayTemporaryAlertBox({header:n.success,style:"success",msg:n.node.successfullyUpdated}),e.resolve()}function h(e){this.fireErrorModal(n.node.errorUpdated),e.reject()}function p(){return i.getAvailableContentTypes(this.model.get("allowedTypes"))}function f(e){return this.displayModal({header:n.contentType.editContentTypes,type:"checkbox",withSearch:!0,data:e})}function m(e){var t=s.where(e.data,{checked:!0}),n=s.map(t,function(e){return s.pick(e,"label","helpText","_id")});this.model.set("allowedTypes",n),this.model.save().done(v.bind(this)).fail(g.bind(this))}function v(){this.displayTemporaryAlertBox({header:n.success,style:"success",msg:n.contentType.contentTypeAdded})}function g(e){this.fireErrorModal(e)}function y(){return this.displayModal({header:n.warning,msg:n.node.deletionWarning})}function b(){var e=this;this.model.fetch().then(function(){e.model.destroy().done(w.bind(e)).fail(x.bind(e))})}function w(){C.call(this),this.displayTemporaryAlertBox({header:n.success,style:"success",msg:n.node.successfullyDeleted.replace(":item",this.model.get("label"))})}function x(){this.fireErrorModal(n.node.errorDeleted+this.model.get("label"))}function C(){var e=this.model.get("parent");this.app.router.navigateTrigger(e&&e._id?o.internalRoutes.nodeDetail.replace(":id",e._id):o.internalRoutes.content)}return{editName:r,editContentTypes:a,deleteNode:l}}),define("nodeDetailView",["grasshopperBaseView","nodeDetailViewConfig","nodeWorker","mixins/handleRowClick"],function(e,t,n,i){"use strict";function s(){this.model.isNew()&&this.model.save().done(this.editContentTypes.bind(this))}function o(){n.deleteNode.call(this)}function r(){n.editName.call(this)}function a(){this.editContentTypes()}function l(){n.editContentTypes.call(this)}return e.extend({defaultOptions:t,afterRender:s,prepareToDeleteNode:o,prepareToEditContentTypes:a,editNodeName:r,editContentTypes:l}).extend(i)}),define("text!views/contentDetail/contentDetailView.html",[],function(){return'<div id="contentEdit">\n    <div class="row">\n        <div class="large-12 columns">\n            <fieldset>\n                <legend class="legendLabel">{{model:label}}</legend>\n\n                <div data-rv-each-field="model:schema->fields">\n                    <div data-rv-fieldwrapper="field"></div>\n                </div>\n\n            </fieldset>\n        </div>\n    </div>\n\n    <div class="row">\n        <div class="large-12 small-centered columns">\n            <ul class="button-group radius right">\n                <li>\n                    <a class="button tiny" data-rv-on-click="view.saveContent | preventDefault" data-rv-disabled="model:saving" data-swap-html="<i class=\'fa fa-refresh fa-spin\'></i>" data-rv-swap-text-while="model:saving">\n                        {{model:resources->save}}\n                    </a>\n                </li>\n\n                <li>\n                    <a class="button tiny" data-rv-on-click="view.saveAndClose | preventDefault" data-rv-disabled="model:saving" data-swap-html="<i class=\'fa fa-refresh fa-spin\'></i>" data-rv-swap-text-while="model:saving">\n                        {{model:resources->saveAndClose}}\n                    </a>\n                </li>\n            </ul>\n        </div>\n    </div>\n\n\n    <section data-rv-move-to="view.mastheadButtonsSelector">\n        <ul class="button-group radius right">\n\n            <li>\n                <a class="button tiny" data-rv-on-click="view.saveContent | preventDefault" data-rv-disabled="model:saving" data-swap-html="<i class=\'fa fa-refresh fa-spin\'></i>" data-rv-swap-text-while="model:saving">\n                    {{model:resources->save}}\n                </a>\n            </li>\n\n            <li>\n                <a class="button tiny" data-rv-on-click="view.saveAndClose | preventDefault" data-rv-disabled="model:saving" data-swap-html="<i class=\'fa fa-refresh fa-spin\'></i>" data-rv-swap-text-while="model:saving">\n                    {{model:resources->saveAndClose}}\n                </a>\n            </li>\n\n        </ul>\n    </section>\n</div>\n'}),define("contentDetailViewConfig",["text!views/contentDetail/contentDetailView.html","contentDetailViewModel","appBinders","resources","constants"],function(e,t,n,i,s){"use strict";return{name:"contentDetail",ModelType:t,browserTitle:"Content",headerTab:"content",modelData:{},appendTo:"#stage",wrapper:!1,template:e,events:{},listeners:[],breadcrumbs:{icon:"fa-file-o",crumbs:[{text:s.home,href:s.internalRoutes.content}]},permissions:["admin","reader","editor"],rivetsConfig:{binders:[n]}}}),define("contentDetailView",["grasshopperBaseView","contentDetailViewConfig","resources","jquery","api","breadcrumbWorker","constants","mixins/handleRowClick"],function(e,t,n,i,s,o,r,a){"use strict";function l(e){this.model.get("isNew")?D.call(this,e):c.call(this,e)}function c(e){"contentDetailRow"===this.name?u.call(this,e):d.call(this,e)}function d(e){S.call(this).done(D.bind(this,e)).fail(_.bind(this,e))}function u(e){this.model.resetContentLabel.call(this.model),e.resolve()}function h(){N.call(this)}function p(e){e.stopPropagation(),f.call(this).then(m.bind(this))}function f(){return this.displayModal({header:n.warning,msg:n.contentItem.deletionWarning})}function m(){this.model.destroy({success:g.bind(this),error:v.bind(this)})}function v(e){this.fireErrorModal(n.contentItem.errorDeleted+e.get("label"))}function g(e){this.displayTemporaryAlertBox({header:n.success,style:"success",msg:n.contentItem.successfullyDeleted.replace(":item",e.get("label"))})}function y(){w.call(this,{})}function b(){w.call(this,{close:!0})}function w(e){this.model.toggle("saving"),this.model.save({smartParse:!0}).done(x.bind(this,e)).fail(T.bind(this))}function x(e){this.displayTemporaryAlertBox({header:n.success,style:"success",msg:n.contentItem.successfullySaved}),C.call(this),e.close?this.app.router.navigateTrigger(r.internalRoutes.nodeDetail.replace(":id",this.model.get("meta.node"))):(this.model.toggle("saving"),this.app.router.navigateNinja(r.internalRoutes.contentDetail.replace(":id",this.model.get("_id"))),o.resetBreadcrumb.call(this),this.model.resetContentLabel(),A.call(this))}function C(){this.model.get("isNew")&&this.model.set("isNew",!1)}function T(e){this.model.toggle("saving"),this.fireErrorModal(e?k(e):this.model.validationError?this.model.validationError:n.contentType.failedSave)}function k(e){return e.responseJSON.message?e.responseJSON.message:n.contentItem.failedToSave}function S(){return this.model.fetch()}function _(e){this.fireErrorModal(n.contentItem.failedToFetch),e.reject()}function D(e){s.getContentType(this.model.get("meta.type")).done(E.bind(this,e)).fail(M.bind(this,e))}function E(e,t){this.model.set("schema",t),this.model.resetContentLabel(),A.call(this,e)}function M(e){this.fireErrorModal(n.contentItem.failedToFetchContentsContentType),e.reject()}function A(e){o.contentBreadcrumb.call(this,e)}function N(){var e=this;this.model.on("change:fields",function(){e.channels.views.trigger("contentFieldsChange",e.model.get("fields"))})}return e.extend({defaultOptions:t,beforeRender:l,afterRender:h,deleteContent:p,saveContent:y,saveAndClose:b}).extend(a)}),define("text!views/contentDetail/contentDetailRow/template.html",[],function(){return'<td data-rv-on-click="view.handleRowClick" class="clipboardTargetName"><a data-rv-href="model:href">{{model:label}}</a></td>\n<td data-rv-on-click="view.handleRowClick">{{model:meta->typelabel}}</td>\n<td data-rv-on-click="view.handleRowClick">{{model:meta->lastmodified | prettyDate | existsOr --}}</td>\n<td data-rv-on-click="view.handleRowClick" align="center" ><a data-rv-on-click="view.deleteContent"><i class="fa fa-trash-o"></i></a></td>\n'}),define("contentDetailRowViewConfig",["text!views/contentDetail/contentDetailRow/template.html","contentDetailViewModel"],function(e,t){"use strict";return{name:"contentDetailRow",ModelType:t,wrapper:!1,template:e,permissions:["admin","reader","editor"]}}),define("contentDetailRowView",["contentDetailView","contentDetailRowViewConfig"],function(e,t){"use strict";return e.extend({defaultOptions:t})}),define("text!views/assetDetail/assetDetailView.html",[],function(){return'<td data-rv-on-click="view.handleRowClick" class="clipboardTargetName"><a>{{model:fileName}}</a></td>\n<td data-rv-on-click="view.handleRowClick">{{model:size | prettyFileSize}}</td>\n<td data-rv-hide="model:fileData" data-rv-on-click="view.handleRowClick">{{model:lastmodified | prettyDate}}</td>\n<td data-rv-hide="model:fileData" align="center" data-rv-on-click="view.handleRowClick">\n    <a data-rv-on-click="view.editAsset">\n        <i class="fa fa-edit"></i>\n    </a>\n    <a data-rv-href="model:url" download data-rv-stop-propagation>\n        <i class="fa fa-download"></i>\n    </a>\n    <a data-rv-on-click="view.prepareToDeleteAsset">\n        <i class="fa fa-trash-o"></i>\n    </a>\n</td>\n\n\n<td data-rv-hide="model:uploadError" data-rv-show="model:fileData" colspan="2">\n    <div class="progress">\n        <span id="uploadProgressMeter" class="meter" data-rv-width="model:progressWidth"></span>\n    </div>\n</td>\n\n<td data-rv-show="model:uploadError" align="left">\n    {{model:resources->asset->uploadAssetError | spaceAfter}}\n</td>\n\n<td data-rv-show="model:uploadError" id="uploadError">\n\n    <ul class="button-group radius" style="display: inline-block;">\n        <li>\n            <a data-rv-on-click="view.postNewAsset" class="button alert tiny">\n                {{model:resources->retry}}\n            </a>\n        </li>\n        <li>\n            <a data-rv-on-click="view.cancelUpload" class="button alert tiny">\n                {{model:resources->cancel}}\n            </a>\n        </li>\n    </ul>\n\n</td>\n'}),define("assetDetailViewConfig",["text!views/assetDetail/assetDetailView.html","assetDetailViewModel"],function(e,t){"use strict";return{name:"assetDetailView",ModelType:t,appendTo:"#stage",wrapper:!1,template:e}}),define("assetDetailView",["grasshopperBaseView","assetDetailViewConfig","resources","api","assetWorker"],function(e,t,n,i,s){"use strict";function o(){this.model.has("fileData")&&c.call(this)}function r(e){e.stopPropagation(),this.displayModal({header:this.model.get("fileName"),type:"image",data:this.model.get("url")})}function a(e){e.stopPropagation(),this.displayModal({header:n.warning,msg:n.asset.deletionWarning}).done(u.bind(this))}function l(e){var t=this;e.stopPropagation(),f.call(this).done(function(e){m.call(t,e.data).done(v.bind(t,e.data)).fail(g.bind(this))})}function c(){s.postNewAsset(this.model.get("nodeId"),this.model.get("fileData")).done(b.bind(this)).fail(w.bind(this)).progress(y.bind(this))}function d(){this.remove()}function u(){this.model.destroy().done(h.bind(this)).fail(p.bind(this))}function h(){this.displayTemporaryAlertBox({header:n.success,msg:n.asset.successfullyDeleted.replace(":asset",this.model.get("fileName")),style:"success"})}function p(){this.fireErrorModal(n.asset.errorDeleted+this.model.get("fileName"))}function f(){return this.displayModal({msg:n.asset.editFileName,type:"input",data:this.model.get("fileName")})}function m(e){return i.renameAsset(this.model.urlRoot(),this.model.get("fileName"),e)}function v(e){var t=this;this.model.set("fileName",e),this.model.fetch().done(function(){t.displayTemporaryAlertBox({header:n.success,style:"success",msg:n.asset.editNameSuccess})})}function g(){this.fireErrorModal(n.asset.editNameFail)}function y(e){this.model.set("progressWidth",e)}function b(e){var t=this;this.model.fetch().done(function(){t.model.unset("fileData")}),this.displayTemporaryAlertBox({header:n.success,style:"success",msg:e})}function w(){this.model.set("uploadError",!0),y.call(this,0),this.fireErrorModal(n.asset.uploadAssetError)}return e.extend({defaultOptions:t,afterRender:o,handleRowClick:r,prepareToDeleteAsset:a,editAsset:l,cancelUpload:d})}),define("contentBrowseViewConfig",["text!views/contentBrowse/contentBrowseView.html","resources","contentBrowseViewModel","constants","appBinders","nodeDetailView","contentDetailRowView","assetDetailView","pagination/view"],function(e,t,n,i,s,o,r,a,l){"use strict";return{name:"contentBrowseView",ModelType:n,browserTitle:"Content",headerTab:"content",appendTo:"#stage",wrapper:!1,template:e,listeners:[["channels.views","activateTab","activateTab"],["channels.views","nodeAdded","addNewNode"],["channels.views","assetAdded","addNewAsset"]],events:{},breadcrumbs:{icon:"fa-th",crumbs:[{text:i.home,href:i.internalRoutes.content}]},permissions:["admin","reader","editor"],rivetsConfig:{instaUpdate:!0,binders:[s],childViewBinders:{"node-detail-row":o,"content-detail-row":r,"asset-detail-row":a,"pagination-view":l}},transitions:{enter:{type:"fadeIn",options:{duration:100}}},hotkeys:[{keys:"c",method:"createContent"}]}}),define("addFolderViewModel",["grasshopperModel","resources"],function(e,t){"use strict";return e.extend({defaults:{resources:t}})}),define("addFolderViewConfig",["addFolderViewModel"],function(e){"use strict";return{name:"addFolderView",ModelType:e,modelData:{},listeners:[],events:{},permissions:["admin","editor"]}}),define("clipboardWorker",["jquery","underscore","resources","constants","api","backbone"],function(e,t,n,i,s,o){"use strict";function r(){t.each(k,function(e){e.unset("clipboardContent",{silent:!0}),e.set({clipboardContent:T})})}function a(e){k.push(e)}function l(e,t){T={op:"move",values:[t]},r()}function c(e,t){T={op:"copy",values:[t]},r()}function d(e){e&&e.preventDefault(),T={},this.hasPasteItem&&(this.hasPasteItem=!1,this.trigger("pasteDone")),r()}function u(e){return t.map(e,function(e){return{id:e.id,type:e.type}})}function h(e,t){return{op:e.op,from:u(e.values),to:t.id}}function p(e,t,n,i){s.moveContent(h(t,n)).done(x.bind(this,i)).fail(C.bind(this,i,e))}function f(e,t,n,i){var o=t.values[0].id.split(/\/|\\/),r=o[0],a=o[1],l={nodeid:r,filename:a,newnodeid:n.id};"copy"==t.op?s.copyAsset(l).done(x.bind(this,i)).fail(C.bind(this,i,e)):"move"==t.op&&s.moveAsset(l).done(x.bind(this,i)).fail(C.bind(this,i,e))}function m(i,s){var o,r=new e.Deferred,a=t.pluck(T.values,"type");return T&&T.op?(o=y(s),1!=t.unique(a).length?g(r,a,i):b.call(this,i,o).then(v.bind(this,a,i,T,s,r))):r.reject(n.clipboard.noOperationSpecified),r.promise()}function v(e,t,n,i,s){"asset"==e[0]?f.call(this,t,n,i,s):("node"==e[0]||"content"==e[0])&&p.call(this,t,n,i,s)}function g(e,t,i){e.reject(n.clipboard.differentContentTypesWarning+t.join(", ")),w.call(this,i,n.clipboard.differentContentTypesWarning)}function y(e){var t=n.clipboard.warningPaste;return t=t.replace(":op",T.op),t=t.replace(":nr_items",T.values.length),t=t.replace(":items","item"+(1!==T.values.length?"s":"")),t=t.replace(":folder",e.name?e.name:"ROOT")}function b(e,t){return e.displayModal({header:n.warning,type:"warning",msg:t})}function w(e,t){return e.displayModal({header:n.error,type:"error",msg:t})}function x(e,t){d.call(this),e.resolve(t)}function C(e,t,i){e.reject(i),w.call(this,t,i&&i.responseJSON?i.responseJSON.message:n.clipboard.cannotCompleteOperation)}var T={},k=[];return t.extend({cutContent:l,copyContent:c,pasteContent:m,subscribe:a,clear:d,resources:n,hasPasteItem:!1},o.Events)}),define("mixins/clipboardContextMenu",["jquery","underscore","resources","helpers","constants","clipboardWorker"],function(e,t,n,i,s,o){"use strict";function r(){context.destroy("#assetIndex"),context.destroy("#contentPanel")}function a(e){var t=!1;context.destroy(e),t="#assetIndex"==e?u.call(this):h.call(this),t?c.call(this,e):o.hasPasteItem&&d.call(this,e)}function l(e){this.listenTo(o,"hasClipboardItem",a.bind(this,e)),this.listenTo(o,"pasteDone",a.bind(this,e)),this.listenTo(this.channels.views,"assetAdded",a.bind(this,"#assetIndex"))}function c(e){var t=[{text:g('<i class="fa fa-scissors"></i> ',n.clipboard.cut),action:p.bind(this)},{text:g('<i class="fa fa-files-o"></i> ',n.clipboard.copy),action:f.bind(this)}];context.init(s.contextConfig),o.hasPasteItem&&(t.unshift({text:g('<i class="fa fa-clipboard"></i> ',n.clipboard.paste),action:m.bind(this)}),t.push({text:g('<hr><i class="fa fa-trash-o"></i> ',n.clipboard.clear),action:o.clear.bind(o)})),context.attach(e,t)}function d(e){context.init(s.contextConfig),context.attach(e,[{text:g('<i class="fa fa-clipboard"></i> ',n.clipboard.paste),action:m.bind(this)}])}function u(){var e=!1;return this.model.get("childAssets").length&&(e=!0),e}function h(){var e=!1;return(this.model.get("childNodes").length||this.model.get("childContent").length)&&(e=!0),e}function p(t){var n=v(t);n&&e(n).closest(".clipboardTargetRow").trigger("clipboard:cut"),t.preventDefault()}function f(t){var n=v(t);n&&e(n).closest(".clipboardTargetRow").trigger("clipboard:copy"),t.preventDefault()}function m(t){var n,i=v(t),s=e(i);i&&(n=s.closest(".clipboardTargetRow"),n.length?n.trigger("clipboard:paste"):s.trigger("clipboard:paste")),t.preventDefault()}function v(t){return e(t.target).closest(".dropdown-context").data("contextTarget")}var g=i.text.join;return{initClipboardMenu:a,initializeClipboardListeners:l,removeClipboardMenu:r}}),define("mixins/clipboardEvents",["jquery","underscore","clipboardWorker","helpers","resources"],function(e,t,n,i,s){"use strict";function o(){this.$el.on("clipboard:cut",".clipboardTargetRow",a.bind(this)),this.$el.on("clipboard:copy",".clipboardTargetRow",l.bind(this)),this.$el.on("clipboard:paste",".clipboardTargetRow",c.bind(this)),this.$el.on("clipboard:paste","#contentBrowseTable",c.bind(this)),this.$el.on("clipboard:paste","#assetIndex",c.bind(this))}function r(){this.$el.off("clipboard:cut"),this.$el.off("clipboard:copy"),this.$el.off("clipboard:paste")}function a(e){n.cutContent(this,d.call(this,e.currentTarget,"cut")),n.hasPasteItem=!0,n.trigger("hasClipboardItem")}function l(e){n.copyContent(this,d.call(this,e.currentTarget,"copy")),n.hasPasteItem=!0,n.trigger("hasClipboardItem")}function c(e){var t={type:"node",id:this.model.id,name:this.model.get("label")};e.stopPropagation(),n.pasteContent(this,t).done(u.bind(this))}function d(n,i){var o,r=h(n),a=e(n).data("id"),l=t.contains(a,"\\")||t.contains(a,"/");return"asset"!=r||l||(a=p(this.model.id,"/",a)),o={type:r,id:a,name:e(".clipboardTargetName",n).text().trim()},this.displayTemporaryAlertBox({header:s.success,style:"success",msg:"copy"==i?p(s.clipboard.copied,o.name,s.clipboard.toClipboard):p(s.clipboard.cut,o.name,s.clipboard.toClipboard)}),o}function u(){e.when(this.model.fetch(),this.model.get("childNodes").fetch(),this.getChildContent(),this.addAssetIndexView()).done(function(){n.hasPasteItem=!1,n.trigger("pasteDone")})}function h(t){var n,i=e(t);return i.hasClass("nodeDetailRow")?n="node":i.hasClass("contentDetailRow")?n="content":i.hasClass("assetDetailRow")&&(n="asset"),n}var p=i.text.join;return{setupClipboardEvents:o,removeClipboardEvents:r}}),define("contentBrowseView",["grasshopperBaseView","contentBrowseViewConfig","jquery","searchWorker","underscore","breadcrumbWorker","constants","nodeWorker","addFolderViewConfig","mixins/clipboardContextMenu","mixins/clipboardEvents"],function(e,t,n,i,s,o,r,a,l,c,d){"use strict";function u(e){n.when(f.call(this),this.model.fetch(),this.model.get("childNodes").fetch(),this.getChildContent(),this.addAssetIndexView()).done(e.resolve).fail(e.reject)}function h(){this.initClipboardMenu("#contentPanel"),this.initializeClipboardListeners("#contentPanel"),this.initClipboardMenu("#assetIndex"),this.initializeClipboardListeners("#assetIndex"),this.setupClipboardEvents()}function p(){return this.model.get("inRoot")?void 0:(this.model.get("childAssets").reset(),this.model.get("childAssets").fetch())}function f(){var e=new n.Deferred;return o.contentBrowse.call(this,e),e.promise()}function m(){return this.model.get("inRoot")?void 0:this.searchContent(void 0,void 0,!0)}function v(e){n("#"+e+" a").click()}function g(){this.app.router.navigateTrigger(r.internalRoutes.addContent.replace(":id",this.model.get("nodeId")))}function y(){this.app.router.navigateTrigger(r.internalRoutes.createAssets.replace(":id",this.model.get("nodeId")))}function b(){this.app.router.navigateTrigger(r.internalRoutes.createFolder.replace(":id",this.model.get("nodeId")))}function w(e){this.model.get("childNodes").add({label:e,parent:this.model.get("nodeId")})}function x(e){this.model.get("childAssets").add(e)}function C(){a.editName.call(this).done(o.resetBreadcrumb.bind(this),f.bind(this)),S.call()}function T(){a.editContentTypes.call(this),S.call()}function k(){a.deleteNode.call(this),S.call()}function S(){n("#actionsDropdown").click()}function _(){var e=this.app.user?this.app.user.get("role"):void 0;return s.contains(l.permissions,e)}function D(e,t,n){return i.searchContent.call(this,e,t,"childContent",!0,n)}function E(){this.removeClipboardMenu(),this.removeClipboardEvents(),e.prototype.remove.call(this)}return e.extend({defaultOptions:t,beforeRender:u,afterRender:h,activateTab:v,addAssetIndexView:p,createContent:g,createAssets:y,createFolder:b,addNewNode:w,addNewAsset:x,editNodeName:C,editNodeContentTypes:T,deleteNode:k,getChildContent:m,searchContent:D,hasCreateFolderPermission:_,remove:E}).extend(c).extend(d)}),define("text!views/contentTypeIndex/contentTypeIndexView.html",[],function(){return'<div>\n    <div class="row">\n        <div class="large-12 columns">\n            <table width="100%">\n                <thead>\n                    <tr>\n                        <th style="width: 85%;">{{model:resources->name}}</th>\n                        <th style="text-align: center;">{{model:resources->actions}}</th>\n                    </tr>\n                </thead>\n                <tbody id="contentTypeIndexTable">\n                    <tr data-rv-unless="model:contentTypes.length | greaterThan 0">\n                        <td colspan="4" data-rv-unless="model:inRoot">\n                            {{model:resources->contentType->noContentTypesCreated}}\n                            <span>\n                                <a data-rv-on-click="view.newContentType">\n                                    {{model:resources->node->clickToAdd}}\n                                </a>\n                            </span>\n                        </td>\n                    </tr>\n                    <tr data-rv-each-type="model:contentTypes:" data-rv-new-content-type-detail-row="type"></tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n\n    <section data-rv-move-to="view.mastheadButtonsSelector">\n        <ul class="button-group radius right">\n\n            <li>\n                <a data-rv-on-click="view.newContentType" class="button tiny">\n                    {{model:resources->mastheadButtons->addContentType}}\n                </a>\n            </li>\n\n        </ul>\n    </section>\n</div>\n'}),define("contentTypeDetailViewModel",["grasshopperModel","resources","constants","masseuse","plugins","underscore","mixins/validatePlugins"],function(e,t,n,i,s,o,r){"use strict";function a(){var t=e.prototype.toJSON.apply(this);return o.omit(t,[])}function l(e){var n,i;return o.isEmpty(e.label)&&(n=t.contentType.validation.mustHaveLabel),n||o.each(e.fields,function(i){o.isEmpty(i.label)&&(n=t.contentType.validation.fieldsMustHaveLabel),o.isEmpty(i._id)&&(n=t.contentType.validation.fieldsMustHaveIds),o.where(e.fields,{_id:i._id}).length>1&&(n=t.contentType.validation.fieldsMustBeUnique)}),n||(i=o.compact(r.validateOnContentTypeSave()),n=i.length?i:!1),n?n:void 0}function c(){var e=o.first(this.attributes.fields).type,t=o.findWhere(s.fields,{type:e}).config,n=o.result(t,"modelData");return"string"===n.dataType}var d=i.ComputedProperty;return e.extend({idAttribute:"_id",defaults:{resources:t,plugins:s.fields,href:new d(["_id"],function(e){return n.internalRoutes.contentTypes+"/"+e}),saving:!1},toJSON:a,validate:l,isFirstFieldDataTypeAString:c,urlRoot:n.api.contentTypes.url})}),define("contentTypeIndexViewModel",["grasshopperModel","resources","constants","grasshopperCollection","contentTypeDetailViewModel"],function(e,t,n,i,s){"use strict";function o(){this.set("contentTypes",new(i.extend({model:s,comparator:function(e){return e.get("label").toLowerCase()},url:function(){return n.api.contentTypes.url}})))}return e.extend({defaults:{resources:t,contentTypes:null},url:n.api.contentTypes.url,initialize:o})}),define("text!views/contentTypeDetail/contentTypeDetailView.html",[],function(){return'<div id="contentTypeDetailView">\n    <div class="row">\n        <div class="large-12 columns">\n\n            <h4>{{model:resources->summary | withColon}}</h4>\n            <hr>\n\n            <div class="row">\n                <div class="small-2 columns">\n                    <label for="title" class="right inline">{{model:resources->title | withColon}}</label>\n                </div>\n                <div class="small-10 columns">\n                    <input type="text" id="title" data-rv-value="model:label">\n                </div>\n\n            </div>\n\n            <div class="row contentTypeDetailTextField">\n                <div class="small-2 columns">\n                    <label for="helpText" class="right inline">{{model:resources->contentType->helpText | withColon}}</label>\n                </div>\n                <div class="small-10 columns">\n                    <textarea id="helpText" data-rv-value="model:helpText" style="max-width: 100%;"></textarea>\n                </div>\n            </div>\n\n            <div class="row contentTypeDetailTextField">\n                <div class="small-2 columns">\n                    <label for="description" class="right inline">{{model:resources->contentType->description | withColon}}</label>\n                </div>\n                <div class="small-10 columns">\n                    <textarea id="description" data-rv-value="model:description" style="max-width: 100%;"></textarea>\n                </div>\n            </div>\n\n            <div class="row paddingTop20">\n                <div class="small-6 columns ">\n                    <h4>{{model:resources->contentType->fields | withColon}}</h4>\n                </div>\n\n                <div class="small-6 columns">\n                    <select class="contentTypesDropdownSelect right">\n                        <option data-rv-value="">\n\n                        </option>\n                        <option data-rv-each-field="model:plugins" data-rv-value="field.name">\n                                {{field.name}}\n                        </option>\n                    </select>\n                </div>\n\n            </div>\n\n            <table width="100%" style="margin-bottom: 0; table-layout: fixed;">\n                <thead>\n                    <tr>\n                        <th style="width: 30%;">{{model:resources->name | spaceBefore}}</th>\n                        <th>{{model:resources->contentType->fieldType}}</th>\n                        <th>{{model:resources->multiple}}</th>\n                        <th style="text-align: center;">{{model:resources->actions}}</th>\n                    </tr>\n                </thead>\n            </table>\n\n            <section id="contentTypeFieldAccordion">\n\n                <div data-rv-each-field="collection:" data-rv-sortIndex="index | prepend sort">\n\n                    <div data-rv-fieldaccordion="field"></div>\n\n                </div>\n\n            </section>\n\n        </div>\n    </div>\n    <div class="row">\n        <div class="large-12 columns">\n            <ul class="button-group radius right">\n\n                <li>\n                    <a class="button tiny" data-rv-on-click="view.saveContentType" data-rv-disabled="model:saving" style="margin-top: 20px;" data-swap-html="<i class=\'fa fa-refresh fa-spin\'></i>" data-rv-swap-text-while="model:saving">\n                        {{model:resources->save}}\n                    </a>\n                </li>\n\n                <li>\n                    <a class="button tiny" data-rv-on-click="view.saveAndClose" data-rv-disabled="model:saving" style="margin-top: 20px;" data-swap-html="<i class=\'fa fa-refresh fa-spin\'></i>" data-rv-swap-text-while="model:saving">\n                        {{model:resources->saveAndClose}}\n                    </a>\n                </li>\n\n            </ul>\n        </div>\n    </div>\n\n\n    <section data-rv-move-to="view.mastheadButtonsSelector">\n        <div class="button-bar">\n            <ul class="button-group radius">\n\n                <li>\n                    <a data-rv-on-click="view.newContentType" class="button tiny">\n                        {{model:resources->mastheadButtons->addContentType}}\n                    </a>\n                </li>\n\n            </ul>\n\n            <ul class="button-group radius">\n\n                <li>\n                    <a data-rv-on-click="view.saveContentType" data-rv-disabled="model:saving" class="button tiny" data-swap-html="<i class=\'fa fa-refresh fa-spin\'></i>" data-rv-swap-text-while="model:saving">\n                        {{model:resources->save}}\n                    </a>\n                </li>\n\n                <li>\n                    <a data-rv-on-click="view.saveAndClose" data-rv-disabled="model:saving" class="button tiny" data-swap-html="<i class=\'fa fa-refresh fa-spin\'></i>" data-rv-swap-text-while="model:saving">\n                        {{model:resources->saveAndClose}}\n                    </a>\n                </li>\n\n            </ul>\n        </div>\n    </section>\n</div>\n'
}),define("text!views/contentTypeDetail/_contentTypeDetailRow.html",[],function(){return""}),define("text!views/contentTypeDetail/fieldAccordion/template.html",[],function(){return'<div class="row accordionHeader fieldAccordion" data-rv-modelid="model.cid">\n    <div class="small-12 columns">\n        <table style="margin-bottom: 0; table-layout: fixed;">\n            <tbody>\n                <tr>\n                    <td style="width: 30%;"><i class="fa fa-sort"></i>{{model:label | existsOr -- | spaceBefore}}</td>\n                    <td data-rv-readable-type-name="model"></td>\n                    <td>{{model:min}}min / {{model:max}}max</td>\n                    <td style="text-align: center;">\n                        <span data-rv-on-click="view.removeThisField">\n                           <i class="fa fa-trash-o"></i>\n                        </span>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n</div>\n\n<div data-rv-id="model.cid" class="accordionContent">\n\n    <div class="row">\n        <div class="large-12 small-centered columns">\n\n            <div class="row">\n                <div class="small-2 columns">\n                    <label for="_id" class="right inline">{{model:resources->id}}</label>\n                </div>\n                <div class="small-10 columns">\n                    <input type="text" id="_id" placeholder="_id" data-rv-value="model:_id">\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="small-2 columns">\n                    <label for="label" class="right inline">{{model:resources->name}}</label>\n                </div>\n                <div class="small-10 columns">\n                    <input type="text" id="label" data-rv-placeholder="model:resources->name" data-rv-value="model:label">\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="small-2 columns">\n                    <label data-rv-for="model.cid  | prepend type" class="right inline">{{model:resources->type}}</label>\n                </div>\n                <div class="small-10 columns">\n                    <select data-rv-id="model.cid  | prepend type" data-rv-value="model:type" >\n                        <option data-rv-each-plugin="model:plugins" data-rv-value="plugin.type" data-rv-text="plugin.name"></option>\n                    </select>\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="small-2 columns">\n                    <label data-rv-for="model.cid  | prepend helpText" class="right inline">{{model:resources->helpText}}</label>\n                </div>\n                <div class="small-10 columns">\n                    <textarea data-rv-id="model.cid  | prepend helpText" data-rv-value="model:helpText" style="max-width: 100%;"></textarea>\n                </div>\n            </div>\n\n            <div class="row" data-rv-if="model:dataType | equals string">\n                <div class="small-2 columns">\n                    <label data-rv-for="model.cid  | prepend defaultValue" class="right inline">{{model:resources->defaultValue}}</label>\n                </div>\n                <div class="small-10 columns">\n                    <input data-rv-type="model:defaultValueType | existsOr text" data-rv-id="model.cid  | prepend defaultValue" data-rv-checked="model:defaultValue" data-rv-value="model:defaultValue">\n                </div>\n            </div>\n\n            <div class="row" data-rv-if="model:allowMultiple | hasAllowMultiple">\n                <div class="small-2 columns">\n                    <label data-rv-for="model.cid  | prepend multi" class="right inline">{{model:resources->showMultipleSettings}}</label>\n                </div>\n                <div class="small-10 columns">\n                    <input data-rv-id="model.cid  | prepend multi" type="checkbox" data-rv-checked="model:multi" class="align-10px">\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="small-2 columns">\n                    <label data-rv-for="model.cid  | prepend validation" class="right inline">Validation</label>\n                </div>\n                <div class="small-10 columns">\n                    <input data-rv-id="model.cid  | prepend validation" type="checkbox" data-rv-checked="model:hasValidation" class="align-10px">\n                </div>\n            </div>\n\n        </div>\n    </div>\n\n    <div class="row" data-rv-show="model:multi">\n        <fieldset>\n            <legend>\n                {{model:resources->allowMultipleSettings}}\n            </legend>\n            <div class="row">\n                <div class="small-2 columns">\n                    <label data-rv-for="model.cid  | prepend min" class="right inline">{{model:resources->minimum}}</label>\n                </div>\n                <div class="small-10 columns">\n                    <input data-rv-id="model.cid  | prepend min" min="0" type="number" data-rv-value="model:min | asNumber">\n                </div>\n            </div>\n            <div class="row">\n                <div class="small-2 columns">\n                    <label data-rv-for="model.cid  | prepend max" class="right inline">{{model:resources->maximum}}</label>\n                </div>\n                <div class="small-10 columns">\n                    <input data-rv-id="model.cid  | prepend max" min="1" type="number" data-rv-value="model:max | asNumber">\n                </div>\n            </div>\n        </fieldset>\n    </div>\n\n    <div class="row" data-rv-show="model:hasValidation">\n        <fieldset>\n            <legend>\n                Validation\n            </legend>\n            <div class="row">\n\n                <div class="small-2 columns">\n                    <label data-rv-for="model.cid  | prepend possibleValidations" class="right inline">{{model:resources->contentType->addValidationType | withColon}}</label>\n                </div>\n                <div class="small-10 columns">\n                    <select data-rv-id="model.cid  | prepend possibleValidations" data-rv-value="model:selectedValidation" >\n                        <option disabled selected>{{model:resources->contentType->selectOption}}</option>\n                        <option data-rv-each-validationtype="model:validationTypes" data-rv-value="validationtype" data-rv-text="validationtype"></option>\n                    </select>\n                </div>\n\n\n\n                <table width="100%" style="margin-bottom: 0; table-layout: fixed;">\n                    <thead>\n                        <tr>\n                            <th style="width: 15%;">{{model:resources->type}}</th>\n                            <th style="width: 70%;">{{model:resources->options}}</th>\n                            <th style="text-align: center;">{{model:resources->actions}}</th>\n                        </tr>\n                    </thead>\n                    <tbody data-rv-hide="model:validationCollection: | collectionHasLength">\n                        <tr>\n                            <td colspan="3">\n                                {{model:resources->contentType->thisFieldHasNoValidation}}\n                            </td>\n                        </tr>\n                    </tbody>\n                    <tbody>\n                        <tr data-rv-each-validationmodel="model:validationCollection:">\n                            <td style="width: 15%;">\n                                {{validationmodel:type | humanize | spaceBefore}}\n                            </td>\n                            <td data-rv-validationform="validationmodel" style="width: 70%;">\n                                <!--Built Dynamically from the validation views-->\n                            </td>\n                            <td style="text-align: center;">\n                                <span data-rv-on-click="view.removeValidationRule">\n                                   <i class="fa fa-trash-o"></i>\n                                </span>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n\n            </div>\n        </fieldset>\n    </div>\n\n    <div class="row" data-rv-show="model:options">\n        <fieldset>\n            <legend>\n                <span data-rv-readable-type-name="model"></span>\n                <span>{{model:resources->options}}</span>\n            </legend>\n            <div data-rv-fieldform="model"></div>\n        </fieldset>\n    </div>\n\n</div>\n'}),define("fieldAccordionBinders",["underscore","masseuse","plugins","require","jquery"],function(e,t,n,i,s){"use strict";function o(e){return e?e.charAt(0).toUpperCase()+e.slice(1):void 0}return{fieldform:{bind:function(){},unbind:function(){},routine:function(i,s){var o=this,r=this.model.view,a=e.find(n.fields,{type:s.get("type")}),l=a.view,c=a.config;o.viewInstance&&(o.model.view.removeChild(this.viewInstance),o.viewInstance.remove()),e.each(c.modelData,function(e,t){s.has(t)||s.set(t,e,{silent:!0})}),o.viewInstance=new l(c,{modelData:{contentTypeId:r.model.get("contentTypeId"),options:t.ProxyProperty("options",s),inSetup:!0},template:c.setupTemplate,mastheadButtons:o.model.view.mastheadButtons,appendTo:i}),r.addChild(o.viewInstance)},publishes:!0},validationform:{bind:function(){},unbind:function(){this.viewInstance.remove()},routine:function(e,t){var n=this;this.viewInstance&&(this.model.view.removeChild(this.viewInstance),this.viewInstance.remove()),t.get("type")&&i(["validation"+o(t.get("type"))],function(i){n.viewInstance=new i({model:t,appendTo:e}),n.model.view.addChild(n.viewInstance)})}},"readable-type-name":function(t,n){var i=n.get("type"),o=n.get("plugins"),r=e.findWhere(o,{type:i}).name;s(t).text(r)}}}),define("fieldAccordionConfig",["text!views/contentTypeDetail/fieldAccordion/template.html","fieldAccordionBinders"],function(e,t){"use strict";return{name:"fieldAccordion",modelData:{},wrapper:!1,template:e,events:{},listeners:[["model","change:type","changeFieldType"],["model","change:selectedValidation","addValidationRule"]],rivetsConfig:{binders:[t]}}}),define("fieldAccordionView",["grasshopperBaseView","fieldAccordionConfig","underscore","resources"],function(e,t,n,i){"use strict";function s(){r.call(this)}function o(e,t){var n=this.model.get("plugins"),i=this.model.previousAttributes().type,s=l.call(this,n,i),o=l.call(this,n,t);o!==s?c.call(this).done(a.bind(this,t)).fail(d.bind(this,i)):a.call(this,t)}function r(){var e=this.model.get("validation");e&&this.model.get("validationCollection").reset(e),e&&e.length>0&&this.model.toggle("hasValidation")}function a(e){var t=n.result(n.findWhere(this.model.get("plugins"),{type:e}).config,"modelData"),i=this.model.pick("label","min","max","multi","helpText","validation","_id"),s=this.parent.collection.indexOf(this.model),o=this.model;n.extend(t,i),this.parent.collection.remove(o),this.parent.collection.add(t,{at:s}),this.parent.refreshAccordion(),this.parent.openSpecificAccordion(s)}function l(e,t){return n.findWhere(e,{type:t}).config.modelData.dataType}function c(){return this.displayModal({header:i.warning,msg:i.contentType.switchingBetweenSimpleAndComplexTypesWarning})}function d(e){this.model.set("type",e,{silent:!0})}function u(){var e=this.model.get("selectedValidation");this.model.get("validationCollection").add({type:e}),this.model.set("selectedValidation",i.contentType.selectOption,{silent:!0})}function h(e,t){e.stopPropagation(),p.call(this).done(f.bind(this,t))}function p(){return this.displayModal({header:i.warning,msg:i.validationViews.deletionWarning})}function f(e){this.model.get("validationCollection").remove(e.validationmodel)}function m(e){var t=this;e.stopPropagation(),this.displayModal({header:i.warning,msg:i.contentType.removeFieldWarning}).done(function(){t.parent.collection.remove(t.model),t.parent.collection.reset(t.parent.collection.models),t.parent.refreshAccordion()})}return e.extend({defaultOptions:t,afterRender:s,changeFieldType:o,addValidationRule:u,removeValidationRule:h,removeThisField:m})}),define("contentTypeDetailBinders",["fieldAccordionView"],function(e){"use strict";return{fieldaccordion:{bind:function(){},unbind:function(){this.viewInstance.remove()},routine:function(t,n){var i=this.model.view;this.viewInstance&&(this.model.view.removeChild(this.viewInstance),this.viewInstance.remove()),n.set("contentTypeId",i.model.get("_id"),{silent:!0}),this.viewInstance=new e({appendTo:t,model:n}),i.addChild(this.viewInstance)}}}}),define("contentTypeDetailFormatters",["underscore"],function(e){"use strict";function t(e){return e.length}function n(e){return e?"Yes":"No"}function i(e){return e?"on":"off"}function s(e){return"on"===e?!0:!1}function o(t){return e.isUndefined(t)?!0:t}return{collectionHasLength:t,booleanToYesNo:n,radioToBoolean:{read:i,publish:s},hasAllowMultiple:o}}),define("validationTypes",[],function(){"use strict";return["required","alpha","alpha_numeric","number","email","url","date","regex","unique"]}),define("fieldAccordionValidationCollection",["grasshopperCollection","grasshopperModel","resources"],function(e,t,n){"use strict";return e.extend({model:t.extend({defaults:{resources:n}})})}),define("fieldAccordionModel",["grasshopperModel","resources","plugins","masseuse","underscore","validationTypes","fieldAccordionValidationCollection","helpers","constants"],function(e,t,n,i,s,o,r,a,l){"use strict";function c(){this.on("change:label",d,this),u.call(this),h.call(this),this.on("change:min",h,this),this.on("change:max",h,this),this.get("validationCollection").on("change add remove",this.updateValidationRulesOnModel,this)}function d(e,t){var n;if(t&&!e.get("_id")){switch(t=t.trim().toLowerCase().replace(/[^-\w\s._~ ]/g,""),l.typeSlugification){case"camelCase":t=t.split(/\s+/),n=t.slice(1),n=s.map(n,function(e){return e[0].toUpperCase()+e.slice(1)}).join(""),t=t.shift()+n;break;case"hyphen-case":t=t.replace(/[\s]+/g,"-");break;case"underscore_case":t=t.replace(/[\s]+/g,"_");break;case"onewordcase":t=t.replace(/[\s]+/g,"")}e.set("_id",t)}return""}function u(){var e=this.get("min"),t=this.get("max");this.set("multi",t>1||1!==e)}function h(){var e=this.get("min"),t=this.get("max");e>=t&&this.set("max",e)}function p(){this.set("validation",a.cleanCollection(this.get("validationCollection").toJSON()))}var f=i.ComputedProperty;return e.extend({initialize:c,updateValidationRulesOnModel:p,defaults:function(){return{_id:"",multi:!1,resources:t,plugins:n.fields,validation:[],validationCollection:new r,hasValidation:!1,validationTypes:o,dataType:new f(["type"],function(e){return e?s.findWhere(this.get("plugins"),{type:e}).config.modelData.dataType:void 0})}}})}),define("contentTypeDetailViewFieldsCollection",["backbone","fieldAccordionModel","underscore"],function(e,t,n){"use strict";return e.Collection.extend({model:t,toJSON:function(){var t=e.Collection.prototype.toJSON.apply(this);return n.map(t,function(e){return n.pick(e,"label","max","min","allowMultiple","options","type","validation","_id","_uid","helpText","defaultValue","dataType")})}})}),define("contentTypeDetailViewConfig",["text!views/contentTypeDetail/contentTypeDetailView.html","text!views/contentTypeDetail/_contentTypeDetailRow.html","contentTypeDetailViewModel","appBinders","contentTypeDetailBinders","formatters","resources","constants","contentTypeDetailFormatters","contentTypeDetailViewFieldsCollection"],function(e,t,n,i,s,o,r,a,l,c){"use strict";return{name:"contentTypeDetail",ModelType:n,modelData:{},browserTitle:"Content Types",headerTab:"contentTypes",appendTo:"#stage",wrapper:!1,template:e,breadcrumbs:{icon:"fa-cog",crumbs:[{text:a.home,href:a.internalRoutes.content},{text:r.contentTypes,href:a.internalRoutes.contentTypes}]},permissions:["admin","editor","reader"],rivetsConfig:{formatters:[o,l],binders:[i,s]},collection:new c}}),define("contentTypeDetailView",["grasshopperBaseView","contentTypeDetailViewConfig","resources","api","underscore","jquery","breadcrumbWorker","plugins","constants","mixins/handleRowClick"],function(e,t,n,i,s,o,r,a,l,c){"use strict";function d(e){var t=this;this.model.has("label")||this.model.isNew()?this.model.isNew()?p.call(this,e):e.resolve():this.model.fetch().done(h.bind(this,e)).fail(t.app.router.navigateNotFound,e.reject)}function u(){O.call(this),N.call(this)}function h(e){this.collection.reset(this.model.get("fields")),A.call(this,e,!1)}function p(e){var t=s.clone(s.findWhere(a.fields,{type:"textbox"}).config.modelData);t._id="title",t.label="Title",this.collection.reset(t),A.call(this,e,!0)}function f(e){e.stopPropagation(),v.call(this).then(m.bind(this)).then(g.bind(this))}function m(e){var t;return e?(t=e>1?"pieces":"piece",t=e+" "+t,this.displayModal({header:n.warning,msg:n.contentType.deletionWarningWithAssociatedContent.replace(":count",t)})):this.displayModal({header:n.warning,msg:n.contentType.deletionWarningWithoutAssociatedContent})}function v(){var e=new o.Deferred;return i.getContentByContentType(this.model.get("_id")).done(function(t){e.resolve(t.total)}).fail(e.reject),e.promise()}function g(){this.model.destroy({success:y.bind(this),error:b.bind(this)})}function y(e){this.displayTemporaryAlertBox({header:n.success,style:"success",msg:n.contentType.successfullyDeleted.replace(":item",e.get("label"))})}function b(e){this.fireErrorModal(n.contentType.errorDeleted+e.get("label"))}function w(){this.$("#contentTypeFieldAccordion").accordion({active:!1})}function x(){this.$("#contentTypeFieldAccordion").find('.accordionHeader[modelid="'+this.collection.last().cid+'"]').click()}function C(){this.$("#contentTypeFieldAccordion").accordion("refresh")}function T(e){this.$("#contentTypeFieldAccordion").find('.fieldAccordion[modelid="'+this.collection.at(e).cid+'"]').click()}function k(){_.call(this,{})}function S(){_.call(this,{close:!0})}function _(e){var t=this;this.model.toggle("saving"),this.model.set("fields",this.collection.toJSON()),D.call(this).done(function(){t.model.save().done(E.bind(t,e)).fail(M.bind(t))}).fail(function(){t.model.toggle("saving")})}function D(){var e=new o.Deferred;return this.model.isFirstFieldDataTypeAString()?e.resolve():this.displayModal({header:n.warning,msg:n.contentType.validation.firstFieldIsNotAStringWarning}).done(e.resolve).fail(e.reject),e.promise()}function E(e){this.collapseAccordion(),this.displayTemporaryAlertBox({header:n.success,msg:n.contentType.successfulSave,style:"success"}),e.close?this.app.router.navigateTrigger(l.internalRoutes.contentTypes):(this.model.toggle("saving"),this.app.router.navigateNinja(l.internalRoutes.contentTypeDetail.replace(":id",this.model.get("_id"))),r.resetBreadcrumb.call(this),A.call(this))}function M(){this.model.toggle("saving"),this.fireErrorModal(this.model.validationError?this.model.validationError:n.contentType.failedSave)}function A(e,t){r.contentTypeBreadcrumb.call(this,e,t)}function N(){this.$contentTypePicker=o(".contentTypesDropdownSelect"),this.$contentTypePicker.select2({containerCssClass:"contentTypesDropdownSelectContainer",dropdownCssClass:"contentTypesDropdownSelectDrop",placeholder:n.contentType.addNewField}).on("change",F.bind(this))}function F(e){if(e.val&&""!==e.val){var t=s.find(this.model.get("plugins"),function(t){return e.val==t.name}),n=s.result(t.config,"modelData");this.collapseAccordion(),n.isNew=!0,this.collection.add(n),this.refreshAccordion(),x.call(this),this.$contentTypePicker.select2("val","")}}function O(){var e=this.$("#contentTypeFieldAccordion");e.accordion({header:".accordionHeader",icons:!1,active:!1,collapsible:!0,disabled:!1,heightStyle:"content"}).sortable({handle:".fieldAccordion",revert:!0,axis:"y",start:I.bind(this,e),stop:j.bind(this,e)})}function j(e){var t,n=[],i={},s=e.children(),r=s.length,a=this;for(e.find(".fieldAccordion").each(function(){n.push(a.collection.get(o(this).attr("modelid")))}),s.each(function(){i[o(this).attr("sortIndex")]=this}),t=0;r>t;++t)e.append(i["sort"+t]),e.accordion("refresh");this.collection.reset(n),I.call(this,e)}function I(e){e.accordion("option","disabled")?(e.accordion({disabled:!1}),e.accordion({active:!1}),e.accordion("refresh")):(e.accordion({disabled:!0}),e.accordion("refresh"))}function P(){this.model.isNew()?this.app.router.displayContentTypeDetail():this.app.router.navigateTrigger(l.internalRoutes.newContentType)}return e.extend({defaultOptions:t,beforeRender:d,afterRender:u,prepareToDeleteContentType:f,saveContentType:k,saveAndClose:S,newContentType:P,refreshAccordion:C,collapseAccordion:w,openSpecificAccordion:T}).extend(c)}),define("text!views/contentTypeDetail/contentTypeDetailRow/template.html",[],function(){return'<td data-rv-on-click="view.handleRowClick">\n    <a data-rv-href="model:href">\n        {{model:label}}\n    </a>\n</td>\n<td data-rv-on-click="view.handleRowClick" class="actions" align="center">\n    <a data-rv-href="model:href">\n        <i class="fa fa-edit"></i>\n    </a>\n    <a data-rv-on-click="view.prepareToDeleteContentType">\n        <i class="fa fa-trash-o"></i>\n    </a>\n</td>\n'}),define("contentTypeDetailRowConfig",["text!views/contentTypeDetail/contentTypeDetailRow/template.html","contentTypeDetailViewConfig","underscore"],function(e,t,n){"use strict";return n.extend({},t,{name:"contentTypeDetailRow",template:e})}),define("contentTypeDetailRow",["contentTypeDetailView","contentTypeDetailRowConfig"],function(e,t){"use strict";return e.extend({defaultOptions:t})}),define("contentTypeIndexViewConfig",["text!views/contentTypeIndex/contentTypeIndexView.html","contentTypeIndexViewModel","resources","constants","appBinders","contentTypeDetailRow"],function(e,t,n,i,s,o){"use strict";return{name:"contentTypeIndexView",ModelType:t,browserTitle:"Content Types",headerTab:"contentTypes",appendTo:"#stage",wrapper:!1,template:e,listeners:[],events:{},breadcrumbs:{icon:"fa-cogs",crumbs:[{text:i.home,href:i.internalRoutes.content},{text:n.contentTypes,href:i.internalRoutes.contentTypes}]},permissions:["admin","editor"],rivetsConfig:{binders:[s],childViewBinders:{"content-type-detail-row":o}}}}),define("contentTypeIndexView",["grasshopperBaseView","contentTypeIndexViewConfig","constants"],function(e,t,n){"use strict";function i(e){this.model.get("contentTypes").fetch().done(e.resolve)}function s(){this.app.router.navigateTrigger(n.internalRoutes.newContentType)}return e.extend({defaultOptions:t,beforeRender:i,newContentType:s})}),define("addFolderView",["grasshopperBaseView","addFolderViewConfig","resources"],function(e,t,n){"use strict";function i(){s.call(this)}function s(){var e=this;this.displayModal({header:n.node.enterName,type:"input"}).done(function(t){r.call(e),o.call(e,t.data)}).always(a.bind(this))}function o(e){this.channels.views.trigger("nodeAdded",e)}function r(){this.channels.views.trigger("activateTab","contentTab")}function a(){this.app.router.removeThisRouteFromBreadcrumb(),this.app.router.navigateBack(),this.remove()}return e.extend({defaultOptions:t,afterRender:i})}),define("addContentViewModel",["grasshopperModel"],function(e){"use strict";return e.extend({})}),define("addContentViewConfig",["addContentViewModel"],function(e){"use strict";return{name:"addContent",ModelType:e,browserTitle:"Content",modelData:{},permissions:["admin","editor"]}}),define("addContentView",["grasshopperBaseView","addContentViewConfig","resources","contentTypeWorker"],function(e,t,n,i){"use strict";function s(e){o.call(this,e)}function o(e){r.call(this,this.model.get("meta.node")).done(a.bind(this,e)).fail(f.bind(this,e))}function r(e){return i.getNodesContentTypes(e)}function a(e,t){var n=this,i=t.allowedTypes;if(i)switch(i.length){case 0:l.call(n,e);break;case 1:c.call(n,e,i[0]);break;default:d.call(n,i).done(function(t){u.call(n,e,t.selectedType)}).fail(function(){p.call(n,e)})}else l.call(n,e)}function l(e){this.displayModal({msg:n.contentType.noContentTypes,hideConfirm:!0}).always(m.bind(this,e))}function c(e,t){this.model.set("meta.type",t._id),e.resolve(),h.call(this)}function d(e){return this.displayModal({header:n.contentType.selectContentType,data:e,type:"radio",withSearch:!0})}function u(e,t){this.model.set("meta.type",t),e.resolve(),h.call(this)}function h(){var e={meta:this.model.get("meta"),isNew:!0};this.app.router.displayContentDetail(void 0,e)}function p(e){e.reject(),v.call(this)}function f(e){e.reject()}function m(e){e.reject(),v.call(this)}function v(e){this.app.router.removeThisRouteFromBreadcrumb(),this.app.router.navigateBack(e)}return e.extend({defaultOptions:t,beforeRender:s})}),define("addAssetsViewModel",["grasshopperModel","resources"],function(e,t){"use strict";return e.extend({defaults:{resources:t}})}),define("addAssetsViewConfig",["addAssetsViewModel"],function(e){"use strict";return{name:"addAssetsView",ModelType:e,modelData:{},listeners:[],events:{},permissions:["admin","editor"]}}),define("addAssetsView",["grasshopperBaseView","addAssetsViewConfig","underscore","resources"],function(e,t,n,i){"use strict";function s(){o.call(this)}function o(){var e=this;this.displayModal({header:i.asset.uploadAssetModalMsg,type:"upload",data:{}}).done(function(t){e.channels.views.trigger("activateTab","filesTab"),n.each(t.files,function(t){a.call(e,t)}),r.call(e)}).fail(r.bind(this))}function r(e){this.app.router.removeThisRouteFromBreadcrumb(),this.app.router.navigateBack(e),this.remove()}function a(e){var t={fileName:e.name,size:e.size,lastmodified:e.lastModifiedDate,fileData:e,uploadError:!1};this.channels.views.trigger("assetAdded",t)}return e.extend({defaultOptions:t,afterRender:s})}),define("text!views/sysInfo/sysInfoView.html",[],function(){return'<div class="sysInfo_page">\n    <h1>Grasshopper Information</h1>\n\n    <div>\n        Grasshopper is released under the\n        <a data-bypass href="https://github.com/Solid-Interactive/grasshopper-core-nodejs/blob/master/LICENSE" target="_blank">MIT license</a>\n        and has been sponsored by <a data-bypass href="http://www.thinksolid.com/" target="_blank">Solid Interactive</a>. Further\n        <a data-bypass href="http://solid-interactive.github.io/grasshopper-core-nodejs/documentation.html" target="_blank">documentation</a>\n        is available on the <a data-bypass href="http://grasshopper.ws/" target="_blank">Grasshopper website</a>.<br/><br/>\n    </div>\n    <div class="sysInfo_versions">\n        <table>\n            <thead>\n            <tr>\n                <th width="50%">Package</th>\n                <th width="50%">Version</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr>\n                <td>grasshopper-admin</td>\n                <td>{{model:constants->version}}</td>\n            </tr>\n            <tr data-rv-each-component="model:apiVersions->components">\n                <td>{{component.name}}</td>\n                <td>{{component.version}}</td>\n            </tr>\n            </tbody>\n        </table>\n        <h2>Components:</h2>\n        <table>\n            <thead>\n            <tr>\n                <th width="50%">Package</th>\n                <th width="50%">Version</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr data-rv-each-lib="model:libraryVersions">\n                <td>{{lib.name}}</td>\n                <td>{{lib.version}}</td>\n            </tr>\n            </tbody>\n        </table>\n    </div>\n</div>\n'}),define("sysInfoViewConfig",["text!views/sysInfo/sysInfoView.html","resources","constants"],function(e,t,n){"use strict";return{name:"sysInfoView",modelData:{},browserTitle:t.sysInfo,headerTab:"sysInfo",appendTo:"#stage",wrapper:!1,template:e,events:{},listeners:[],breadcrumbs:{icon:"fa-info",crumbs:[{text:n.home,href:n.internalRoutes.content},{text:t.sysInfo,href:n.internalRoutes.sysInfo}]}}}),define("sysInfoView",["grasshopperBaseView","sysInfoViewConfig","jquery","api","constants"],function(e,t,n,i,s){"use strict";function o(e){this.model.set("constants",s),this.model.set("libraryVersions",JSON.parse(s.libraryVersions)),r.call(this).done(e.resolve)}function r(){var e=new n.Deferred,t=this;return i.getVersion().done(function(n){t.model.set("apiVersions",n),e.resolve()}),e.promise()}return e.extend({defaultOptions:t,beforeRender:o,constants:s})}),define("text!views/advancedSearch/template.html",[],function(){return'<div class="row advancedSearch">\n    <div class="large-12 columns">\n        <dl class="tabs" data-tab>\n            <dd class="active" id="contentTab">\n                <a data-bypass href="#contentPanel">\n                    <p class="title">\n                        <i class="fa fa-list-alt"></i>\n                        {{model:resources->content | spaceBefore}}\n                    </p>\n                </a>\n            </dd>\n            <dd data-rv-hide="model:inRoot" id="contentTypesTab">\n                <a data-bypass href="#contentTypesPanel">\n                    <p class="title">\n                        <i class="fa fa-gears"></i>\n                        {{model:resources->contentTypes | spaceBefore}}\n                    </p>\n                </a>\n            </dd>\n            <dd data-rv-hide="model:inRoot" id="usersTab">\n                <a data-bypass href="#usersPanel">\n                    <p class="title">\n                        <i class="fa fa-users"></i>\n                        {{model:resources->users | spaceBefore}}\n                    </p>\n                </a>\n            </dd>\n        </dl>\n\n        <div class="tabs-content">\n            <div class="content active table-wrapper" id="contentPanel">\n                <div data-rv-new-content-search-view="model.attributes.contentSearchModel"></div>\n            </div>\n            <div class="content" id="contentTypesPanel">\n                Content Type Search would be here.\n            </div>\n\n            <div class="content" id="usersPanel">\n                Content Type Search would be here.\n            </div>\n        </div>\n    </div>\n\n</div>\n'}),define("advancedSearch/content/model",["grasshopperModel","resources","grasshopperCollection","constants","jquery","api","underscore","contentDetailViewModel"],function(e,t,n,i,s,o,r,a){"use strict";function l(){e.prototype.initialize.apply(this,arguments),this.set("inTypesCollection",new(n.extend({idAttribute:"_id",toJSON:function(){var e=n.prototype.toJSON.apply(this);return r.pluck(e,"_id")}}))),this.set("inNodesCollection",new(n.extend({idAttribute:"_id",toJSON:function(){var e=n.prototype.toJSON.apply(this);return r.pluck(e,"_id")}}))),this.set("contentTypeCollection",new(n.extend({url:i.api.contentTypes.url}))),this.set("nodesCollection",new(n.extend({url:i.api.nodesChildrenDeep.url.replace(":id",0)}))),this.set("newFilterModel",new(e.extend({defaults:function(){return{cmp:"",key:"",value:""}}}))),this.set("filtersCollection",new(n.extend({}))),this.set("resultsCollection",new(n.extend({model:a}))),this.set("possibleQueryComparators",i.possibleQueryComparators),this.set("filteredContentTypeCollection",new(n.extend({})))}function c(){var e,t=s.Deferred();return e=this.buildQueryOptions(),this.set("loadingResults",!0),this.trigger("updateUrl",e),o.makeQuery(e).done(function(e){this.get("resultsCollection").reset(e.results,{parse:!0}),this.set("loadingResults",!1),t.resolve()}.bind(this)).fail(function(){this.trigger("failedQuery"),this.get("resultsCollection").reset(),this.set("loadingResults",!1),t.reject()}.bind(this)),t.promise()}function d(){var e={};return e.filters=this.get("filtersCollection").toJSON(),e.nodes=this.get("inNodesCollection").toJSON(),e.types=this.get("inTypesCollection").toJSON(),e.options={limit:1e3,skip:0},e}function u(){var e=r.throttle(this.query,i.contentSearchThrottle,{trailing:!1});this.listenTo(this.get("inTypesCollection"),"add remove reset",e),this.listenTo(this.get("inNodesCollection"),"add remove reset",e),this.listenTo(this.get("filtersCollection"),"add remove reset",e),this.listenTo(this.get("inTypesCollection"),"add remove reset",p),p.call(this,this.get("inTypesCollection")),this.get("inTypesCollection").listenTo(this.get("contentTypeCollection"),"selection",h),this.get("inNodesCollection").listenTo(this.get("nodesCollection"),"selection",h)
}function h(e){this.reset(e)}function p(e){var t=[],n=this.get("contentTypeCollection");e.size()?e.each(function(e){t.push(n.findWhere({_id:e.get("_id")}))}):t=n.models,this.get("filteredContentTypeCollection").reset(t)}return e.extend({initialize:l,query:c,buildQueryOptions:d,setupChangeListeners:u,defaults:{resources:t,loadingResults:!0,queryOptions:null,inTypesCollection:null,inNodesCollection:null,contentTypeCollection:null,nodesCollection:null,newFilterModel:null,filtersCollection:null,resultsCollection:null,possibleQueryComparators:null,filteredContentTypeCollection:null}})}),define("advancedSearch/model",["grasshopperModel","resources","advancedSearch/content/model"],function(e,t,n){"use strict";function i(){e.prototype.initialize.apply(this,arguments),this.set("contentSearchModel",new n),this.get("contentSearchModel").set("queryOptions",this.get("queryOptions"))}return e.extend({initialize:i,defaults:function(){return{resources:t,searchType:null,queryOptions:{filters:[],nodes:[],types:[],options:{limit:1e3,skip:0}},contentSearchModel:null}}})}),define("text!views/advancedSearch/content/template.html",[],function(){return'<div id="advancedContentSearch" class="small-12 columns">\n\n    <div class="row">\n\n        <div class="large-3 small-6 columns">\n            <select id="selectContentTypes" class="noMarginBottom" data-rv-data-placeholder="model:resources->contentTypes" data-rv-multiple-select="model:contentTypeCollection" multiple filter="true">\n\n                <option data-rv-each-contenttype="model:contentTypeCollection:" data-rv-value="contenttype:_id">\n                    {{contenttype:label}}\n                </option>\n\n            </select>\n        </div>\n\n        <div class="large-3 small-6 columns">\n            <select id="selectNodes" class="noMarginBottom" data-rv-data-placeholder="model:resources->nodes" data-rv-multiple-select="model:nodesCollection" multiple filter="true">\n\n                <option data-rv-each-node="model:nodesCollection:" data-rv-value="node:_id">\n                    {{node:label}}\n                </option>\n\n            </select>\n        </div>\n\n        <div class="newFilterSection large-6 small-12 columns">\n\n            {{model:resources->filters}}\n\n            <a href="#" id="addNewFilterButton" data-bypass data-dropdown="filterCreator">\n                <i class="fa fa-plus"></i>\n            </a>\n\n            <div id="filterCreator" data-dropdown-content class="f-dropdown small content">\n\n                <select id="newFilterKeys" data-rv-data-placeholder="model:resources->key" data-rv-value="model:newFilterModel.attributes.key" data-rv-select2="model:filteredContentTypeCollection">\n                    <option></option>\n\n                    <optgroup data-rv-each-contenttype="model:filteredContentTypeCollection:" data-rv-label="contenttype:label">\n                        <option data-rv-each-field="contenttype:fields" data-rv-value="field._id | prepend fields.">\n                            {{field.label}}\n                        </option>\n                    </optgroup>\n\n                </select>\n\n                <select id="newFilterComparator" data-rv-data-placeholder="model:resources->comparator" data-rv-value="model:newFilterModel.attributes.cmp" data-rv-select2>\n                    <option></option>\n\n                    <option data-rv-each-comparator="model:possibleQueryComparators" data-rv-value="comparator">\n                        {{comparator}}\n                    </option>\n\n                </select>\n\n                <input type="text" id="newFilterValue" class="noMarginBottom" data-rv-placeholder="model:resources->value" data-rv-on-enter-key-press="addFilterToFiltersCollection" data-rv-value="model:newFilterModel->value">\n\n                <div class="text-right newFilterButtons">\n                    <button class="button tiny radius noMarginBottom" data-rv-on-click="view.resetNewFilter">{{model:resources->reset}}</button>\n                    <button class="button tiny radius noMarginBottom" data-rv-on-click="view.addFilterToFiltersCollection">{{model:resources->add}}</button>\n                </div>\n\n            </div>\n        </div>\n    </div>\n\n    <section class="activeFiltersSection">\n\n        <div class="panel left" data-rv-each-filter="model:filtersCollection:">\n            <span>\n                {{model:resources->where | spaceAfter}} \'{{filter:key}}\' {{filter:cmp}} \'{{filter:value}}\'\n            </span>\n\n            <a data-bypass data-rv-on-click="view.removeFilterFromFiltersCollection">\n                <i class="fa fa-trash-o right"></i>\n            </a>\n        </div>\n\n    </section>\n\n    <section class="resultsSection">\n\n        <div class="small-12 columns text-center" data-rv-show="model:loadingResults">\n            <span>Loading...</span>\n            <i class="fa fa-refresh fa-spin"></i>\n        </div>\n\n        <table data-rv-hide="model:loadingResults">\n            <thead>\n                <tr>\n                    <th>{{model:resources->label}}</th>\n                    <th>{{model:resources->type}}</th>\n                    <th>{{model:resources->contentBrowse->modified}}</th>\n                    <th style="text-align: center; width: 10%;">{{model:resources->actions}}</th>\n                </tr>\n            </thead>\n\n            <tbody>\n                <tr data-rv-unless="model:resultsCollection.length | greaterThan 0">\n                    <td colspan="4">\n                        No Results\n                    </td>\n                </tr>\n\n                <tr class="contentDetailRow" data-rv-each-content="model:resultsCollection.models" data-rv-data-id="content.id" data-rv-new-content-detail-row="content"></tr>\n            </tbody>\n        </table>\n\n    </section>\n\n</div>\n'}),define("advancedSearch/content/config",["text!views/advancedSearch/content/template.html","resources","advancedSearch/content/model","constants","appBinders","contentDetailRowView"],function(e,t,n,i,s,o){"use strict";return{name:"contentSearchView",ModelType:n,browserTitle:"Content Search",wrapper:!1,template:e,listeners:[["model","updateUrl","updateUrl"],["model","failedQuery","fireFailedQueryAlert"]],events:{},breadcrumbs:{icon:"fa-search",crumbs:[{text:t.advancedSearch,href:i.internalRoutes.advancedSearch},{text:"content",href:i.internalRoutes.advancedSearch+"/content"}]},permissions:["admin","reader","editor"],rivetsConfig:{childViewBinders:{"content-detail-row":o},binders:[s]}}}),define("advancedSearch/content/view",["grasshopperBaseView","advancedSearch/content/config","jquery","constants","underscore"],function(e,t,n,i,s){"use strict";function o(e){n.when(this.model.get("contentTypeCollection").fetch(),this.model.get("nodesCollection").fetch()).done(e.resolve)}function r(){this.$("#selectContentTypes").add("#selectNodes").multipleSelect("refresh"),this.model.setupChangeListeners(),this.model.get("queryOptions")?this.buildQueryFromQueryOptions():this.model.query()}function a(){var e=this.model.get("queryOptions");s.isEmpty(e.filters)||this.model.get("filtersCollection").reset(e.filters),s.isEmpty(e.types)||this.$("#selectContentTypes").multipleSelect("setSelects",e.types),s.isEmpty(e.nodes)||this.$("#selectNodes").multipleSelect("setSelects",e.nodes),s.isEmpty(e.filters)&&s.isEmpty(e.filters)&&s.isEmpty(e.nodes)&&this.model.query()}function l(){this.displayAlertBox({header:"Error",style:"error",msg:"Invalid Query"})}function c(){this.model.get("filtersCollection").add(this.model.get("newFilterModel").toJSON()),this.resetNewFilter()}function d(e,t){this.model.get("filtersCollection").remove(t.filter)}function u(){this.model.get("newFilterModel").clear(),this.$("#addNewFilterButton").click(),this.$("#newFilterKeys").add("#newFilterComparator").select2("val","")}function h(e){var t=encodeURIComponent(JSON.stringify(e)),n=i.internalRoutes.advancedSearchWithOptions.replace(":type","content").replace(":queryOptions",t);this.app.router.navigateNinja(n)}return e.extend({defaultOptions:t,beforeRender:o,afterRender:r,addFilterToFiltersCollection:c,removeFilterFromFiltersCollection:d,resetNewFilter:u,updateUrl:h,buildQueryFromQueryOptions:a,fireFailedQueryAlert:l})}),define("advancedSearch/config",["text!views/advancedSearch/template.html","resources","advancedSearch/model","constants","appBinders","advancedSearch/content/view"],function(e,t,n,i,s,o){"use strict";return{name:"advancedSearchView",ModelType:n,browserTitle:"Advanced Search",headerTab:"advancedSearch",appendTo:"#stage",wrapper:!1,template:e,listeners:[],events:{},permissions:["admin","reader","editor"],rivetsConfig:{binders:[s],childViewBinders:{"content-search-view":o}}}}),define("advancedSearch/view",["grasshopperBaseView","advancedSearch/config"],function(e,t){"use strict";function n(){}return e.extend({defaultOptions:t,afterRender:n})}),define("router",["jquery","backbone","underscore","masseuse","api","constants","helpers","grasshopperBaseView","login/view","loginWorker","logoutWorker","forbiddenView","notFoundView","alertBoxView","resources","userDetail/view","UserModel","headerView","mastheadView","userIndexView","addUser/view","contentBrowseView","contentDetailView","contentTypeIndexView","contentTypeDetailView","addFolderView","addContentView","addAssetsView","sysInfoView","advancedSearch/view"],function(e,t,n,i,s,o,r,a,l,c,d,u,h,p,f,m,v,g,y,b,w,x,C,T,k,S,_,D,E,M){"use strict";function A(){this.goLogout()}function N(){var i=new e.Deferred,s=this;return i.done(function(){var e=t.history.getFragment();e!==n.last(s.breadcrumb)&&s.breadcrumb.push(e)}),c.userIsStillValidUser.call(this,i),i.promise()}function F(){return this.breadcrumb&&this.breadcrumb.length>1}function O(){this.breadcrumb.pop()}function j(){return n.last(this.breadcrumb)}function I(e){"0"===e?(e=null,this.breadcrumb.unshift(o.internalRoutes.content)):this.breadcrumb.unshift(o.internalRoutes.nodeDetail.replace(":id",e)),this.displayContentBrowse(e)}function P(e,t,n){t=t||{},t.trigger=!0,this.navigate(e,t,n)}function V(e,t){t=t||{},t.replace=!0,this.navigate(e,t)}function R(e,t){t=t||{},t.deferred=!0,this.navigate(e,t)}function B(){this.navigate(o.internalRoutes.notFound,{trigger:!0})}function L(e){e?this.navigateTrigger(this.breadcrumb[this.breadcrumb.length-1]):this.navigateNinja(this.breadcrumb[this.breadcrumb.length-1])}function H(e,n,i){ct instanceof t.View&&ct.hideAlertBox.call(ct),i&&this.beforeRouting(),t.Router.prototype.navigate.apply(this,arguments)}function q(){ut.prototype.initialize.apply(this,arguments),a.prototype.channels.addChannel("views"),a.prototype.app={router:this,user:this.user}}function W(t,n,i){var s=new e.Deferred,o=new t(n);return n=n||{},ct&&ct.name===n.name&&!i?s.resolve(ct).promise():(o.on(a.beforeRenderDone,function(){ct&&ct.remove(),ct=o,e("#mastheadButtons").empty()}),o.start().done(function(){s.resolve(o),r.browserTitles.setBrowserTitle(o.browserTitle)}).fail(function(){s.reject()}),s.promise())}function U(){this.headerView=new g({modelData:{userModel:this.user}}),this.headerView.start(),this.mastheadView=new y,this.mastheadView.start()}function z(){this.headerView&&this.mastheadView&&(this.headerView.remove(),this.mastheadView.remove(),this.headerView=null,this.mastheadView=null)}function $(){d.doLogout.call(this).done(this.navigate.bind(this,o.internalRoutes.login,{trigger:!0},!0))}function Y(e){var t=ht.get(o.loginRedirectKey);e?("error"==e.split("=")[0]&&this.loadMainContent(l,{modelData:{oauthError:e.split("=")[1]}}),ht.set("authToken","Google "+e),t&&void 0!==t?ht.remove(o.loginRedirectKey).done(this.navigateTrigger.bind(this,t)):this.navigateTrigger(o.internalRoutes.content)):this.loadMainContent(l)}function G(){this.navigate(o.internalRoutes.content,{trigger:!0})}function J(e){"admin"===this.user.get("role")||this.user.get("_id")===e?this.loadMainContent(m,{modelData:{_id:e,userModel:this.user}}):this.navigateTrigger(o.internalRoutes.forbidden)}function X(e,t,n){this.loadMainContent(b,{modelData:{limit:e?e:o.pagination.defaultLimit,skip:t?t:o.pagination.defaultSkip,contentSearchValue:n?n:""}})}function K(){this.loadMainContent(w)}function Z(){this.loadMainContent(E)}function Q(e,t,n,i){this.loadMainContent(x,{modelData:{nodeId:e?e:"0",inRoot:!e,limit:t?t:o.pagination.defaultLimit,skip:n?n:o.pagination.defaultSkip,contentSearchValue:i?i:""}})}function et(e,t){this.loadMainContent(C,{modelData:n.extend({},t,{_id:e})})}function tt(){this.loadMainContent(T)}function nt(e){this.loadMainContent(k,{modelData:{_id:e}},!0)}function it(e){this.userHasBreadcrumbs()||I.call(this,e);var t=new S({modelData:{nodeId:e?e:null}});t.start()}function st(e){this.userHasBreadcrumbs()||I.call(this,e),this.loadMainContent(_,{modelData:{meta:{node:e}}})}function ot(e){this.userHasBreadcrumbs()||I.call(this,e);var t=new D({modelData:{nodeId:e}});t.start()}function rt(e,t){this.loadMainContent(M,{modelData:{searchType:e?e:"content",queryOptions:t?JSON.parse(t):null}})}function at(){this.loadMainContent(u)}function lt(){this.loadMainContent(h)}var ct,dt,ut=i.MasseuseRouter,ht=r.localStorage,pt=new v;return dt=ut.extend({routes:{"login(/:token)":"displayLogin",logout:"goLogout","users(/limit/:limit/skip/:skip)":"displayUserIndex","users(/limit/:limit/skip/:skip/query/:query)":"displayUserIndex","user/:id":"displayUserDetail","sys-info":"displaySysinfo","add-user":"displayAddUser","content-types":"displayContentTypeIndex","content-types/new":"displayContentTypeDetail","content-types(/:id)":"displayContentTypeDetail","advanced-search(/:type/query=:queryOptions)":"displayAdvancedSearch","items/nodeid/:nodeId/create-assets":"displayCreateAssets","items/nodeid/:nodeId/create-folder":"displayCreateFolder","items/nodeid/:nodeId/create-content":"displayCreateContent","items(/nodeid/:nodeId/limit/:limit)":"displayContentBrowse","items(/nodeid/:nodeId/limit/:limit/skip/:skip)":"displayContentBrowse","items(/nodeid/:nodeId/limit/:limit/skip/:skip/query/:query)":"displayContentBrowse","items(/nodeid/:nodeId)":"displayContentBrowse","item/:id":"displayContentDetail",forbidden:"displayForbidden","not-found":"displayNotFound","*path":"goHome"},breadcrumb:[],user:pt,initialize:q,startHeader:U,removeHeader:z,onRouteFail:A,beforeRouting:N,excludeFromBeforeRouting:["login(/:token)","logout"],userHasBreadcrumbs:F,removeThisRouteFromBreadcrumb:O,getCurrentBreadcrumb:j,navigateTrigger:P,navigateNinja:V,navigateDeferred:R,navigateBack:L,navigateNotFound:B,loadMainContent:W,goHome:G,displayLogin:Y,goLogout:$,navigate:H,displayUserIndex:X,displayUserDetail:J,displaySysinfo:Z,displayAddUser:K,displayContentBrowse:Q,displayContentDetail:et,displayContentTypeIndex:tt,displayContentTypeDetail:nt,displayCreateFolder:it,displayCreateContent:st,displayCreateAssets:ot,displayAdvancedSearch:rt,displayForbidden:at,displayNotFound:lt})}),define("ajaxCounterWorker",["jquery","underscore","constants"],function(e,t,n){"use strict";function i(){e.ajaxSetup({beforeSend:function(t,n){if(s(t,n)){var i=new e.Deferred;a++,i.then(o),setTimeout(function(){i.resolve()},l),t.always(function(){a--,i.reject(),r()})}}})}function s(e,t){var n=t.type.toLowerCase(),i=t.url.toLowerCase();return"get"==n&&/\/node\/[^\/]+\/assets\/.+/.test(i)?!1:!0}function o(){a>0&&e("body").addClass("spinner-loading")}function r(){0>=a&&e("body").removeClass("spinner-loading")}var a=0,l=n.timeouts.showSpinnerLoadingTimeout;return{setupCounter:i}}),function(e,t,n,i){"use strict";function s(e){var t,n=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=e,!e||!e.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return s.prototype.onClick.apply(n,arguments)},this.onMouse=function(){return s.prototype.onMouse.apply(n,arguments)},this.onTouchStart=function(){return s.prototype.onTouchStart.apply(n,arguments)},this.onTouchMove=function(){return s.prototype.onTouchMove.apply(n,arguments)},this.onTouchEnd=function(){return s.prototype.onTouchEnd.apply(n,arguments)},this.onTouchCancel=function(){return s.prototype.onTouchCancel.apply(n,arguments)},s.notNeeded(e)||(this.deviceIsAndroid&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,i){var s=Node.prototype.removeEventListener;"click"===t?s.call(e,t,n.hijacked||n,i):s.call(e,t,n,i)},e.addEventListener=function(t,n,i){var s=Node.prototype.addEventListener;"click"===t?s.call(e,t,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),i):s.call(e,t,n,i)}),"function"==typeof e.onclick&&(t=e.onclick,e.addEventListener("click",function(e){t(e)},!1),e.onclick=null))}function o(e){return("string"==typeof e||e instanceof String)&&(e=e.replace(/^[\\/'"]+|(;\s?})+|[\\/'"]+$/g,"")),e}0===e("head").has(".foundation-mq-small").length&&e("head").append('<meta class="foundation-mq-small">'),0===e("head").has(".foundation-mq-medium").length&&e("head").append('<meta class="foundation-mq-medium">'),0===e("head").has(".foundation-mq-large").length&&e("head").append('<meta class="foundation-mq-large">'),0===e("head").has(".foundation-mq-xlarge").length&&e("head").append('<meta class="foundation-mq-xlarge">'),0===e("head").has(".foundation-mq-xxlarge").length&&e("head").append('<meta class="foundation-mq-xxlarge">'),s.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,s.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),s.prototype.deviceIsIOS4=s.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),s.prototype.deviceIsIOSWithBadTarget=s.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),s.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===e.type||e.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(e.className)},s.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":case"select":return!0;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},s.prototype.sendClick=function(e,i){var s,o;n.activeElement&&n.activeElement!==e&&n.activeElement.blur(),o=i.changedTouches[0],s=n.createEvent("MouseEvents"),s.initMouseEvent("click",!0,!0,t,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),s.forwardedTouchEvent=!0,e.dispatchEvent(s)},s.prototype.focus=function(e){var t;this.deviceIsIOS&&e.setSelectionRange?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},s.prototype.updateScrollParent=function(e){var t,n;if(t=e.fastClickScrollParent,!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},s.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},s.prototype.onTouchStart=function(e){var n,i,s;if(e.targetTouches.length>1)return!0;if(n=this.getTargetElementFromEventTarget(e.target),i=e.targetTouches[0],this.deviceIsIOS){if(s=t.getSelection(),s.rangeCount&&!s.isCollapsed)return!0;if(!this.deviceIsIOS4){if(i.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(n)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=n,this.touchStartX=i.pageX,this.touchStartY=i.pageY,e.timeStamp-this.lastClickTime<200&&e.preventDefault(),!0},s.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n?!0:!1},s.prototype.onTouchMove=function(e){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},s.prototype.findControl=function(e){return e.control!==i?e.control:e.htmlFor?n.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},s.prototype.onTouchEnd=function(e){var i,s,o,r,a,l=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.lastClickTime=e.timeStamp,s=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(a=e.changedTouches[0],l=n.elementFromPoint(a.pageX-t.pageXOffset,a.pageY-t.pageYOffset)||l,l.fastClickScrollParent=this.targetElement.fastClickScrollParent),o=l.tagName.toLowerCase(),"label"===o){if(i=this.findControl(l)){if(this.focus(l),this.deviceIsAndroid)return!1;l=i}}else if(this.needsFocus(l))return e.timeStamp-s>100||this.deviceIsIOS&&t.top!==t&&"input"===o?(this.targetElement=null,!1):(this.focus(l),this.deviceIsIOS4&&"select"===o||(this.targetElement=null,e.preventDefault()),!1);return this.deviceIsIOS&&!this.deviceIsIOS4&&(r=l.fastClickScrollParent,r&&r.fastClickLastScrollTop!==r.scrollTop)?!0:(this.needsClick(l)||(e.preventDefault(),this.sendClick(l,e)),!1)},s.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},s.prototype.onMouse=function(e){return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0},s.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},s.prototype.destroy=function(){var e=this.layer;this.deviceIsAndroid&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},s.notNeeded=function(e){var i;if("undefined"==typeof t.ontouchstart)return!0;if(/Chrome\/[0-9]+/.test(navigator.userAgent)){if(!s.prototype.deviceIsAndroid)return!0;if(i=n.querySelector("meta[name=viewport]"),i&&-1!==i.content.indexOf("user-scalable=no"))return!0}return"none"===e.style.msTouchAction?!0:!1},s.attach=function(e){return new s(e)},"undefined"!=typeof define&&define.amd?define("foundation",[],function(){return s}):"undefined"!=typeof module&&module.exports?(module.exports=s.attach,module.exports.FastClick=s):t.FastClick=s,"undefined"!=typeof s&&s.attach(n.body);var r=function(t,i){return"string"==typeof t?e(i?i.querySelectorAll(t):n.querySelectorAll(t)):e(t,i)};t.matchMedia=t.matchMedia||function(e){var t,n=e.documentElement,i=n.firstElementChild||n.firstChild,s=e.createElement("body"),o=e.createElement("div");return o.id="mq-test-1",o.style.cssText="position:absolute;top:-100em",s.style.background="none",s.appendChild(o),function(e){return o.innerHTML='&shy;<style media="'+e+'"> #mq-test-1 { width: 42px; }</style>',n.insertBefore(s,i),t=42===o.offsetWidth,n.removeChild(s),{matches:t,media:e}}}(n),function(){function e(){n&&(o(e),jQuery.fx.tick())}for(var n,i=0,s=["webkit","moz"],o=t.requestAnimationFrame,r=t.cancelAnimationFrame;i<s.length&&!o;i++)o=t[s[i]+"RequestAnimationFrame"],r=r||t[s[i]+"CancelAnimationFrame"]||t[s[i]+"CancelRequestAnimationFrame"];o?(t.requestAnimationFrame=o,t.cancelAnimationFrame=r,jQuery.fx.timer=function(t){t()&&jQuery.timers.push(t)&&!n&&(n=!0,e())},jQuery.fx.stop=function(){n=!1}):(t.requestAnimationFrame=function(e){var n=(new Date).getTime(),s=Math.max(0,16-(n-i)),o=t.setTimeout(function(){e(n+s)},s);return i=n+s,o},t.cancelAnimationFrame=function(e){clearTimeout(e)})}(jQuery),t.Foundation={name:"Foundation",version:"5.0.0",media_queries:{small:r(".foundation-mq-small").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),medium:r(".foundation-mq-medium").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),large:r(".foundation-mq-large").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xlarge:r(".foundation-mq-xlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xxlarge:r(".foundation-mq-xxlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,"")},stylesheet:e("<style></style>").appendTo("head")[0].sheet,init:function(e,t,n,i,s){var o=[e,n,i,s],a=[];if(this.rtl=/rtl/i.test(r("html").attr("dir")),this.scope=e||this.scope,t&&"string"==typeof t&&!/reflow/i.test(t))this.libs.hasOwnProperty(t)&&a.push(this.init_lib(t,o));else for(var l in this.libs)a.push(this.init_lib(l,t));return e},init_lib:function(e,t){return this.libs.hasOwnProperty(e)?(this.patch(this.libs[e]),t&&t.hasOwnProperty(e)?this.libs[e].init.apply(this.libs[e],[this.scope,t[e]]):this.libs[e].init.apply(this.libs[e],t)):function(){}},patch:function(e){e.scope=this.scope,e.data_options=this.lib_methods.data_options,e.bindings=this.lib_methods.bindings,e.S=r,e.rtl=this.rtl},inherit:function(e,t){for(var n=t.split(" "),i=n.length-1;i>=0;i--)this.lib_methods.hasOwnProperty(n[i])&&(this.libs[e.name][n[i]]=this.lib_methods[n[i]])},random_str:function(e){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");e||(e=Math.floor(Math.random()*t.length));for(var n="",i=0;e>i;i++)n+=t[Math.floor(Math.random()*t.length)];return n},libs:{},lib_methods:{throttle:function(e,t){var n=null;return function(){var i=this,s=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(i,s)},t)}},data_options:function(t){function n(e){return!isNaN(e-0)&&null!==e&&""!==e&&e!==!1&&e!==!0}function i(t){return"string"==typeof t?e.trim(t):t}var s,o,r,a,l={},c=t.data("options");if("object"==typeof c)return c;for(r=(c||":").split(";"),a=r.length,s=a-1;s>=0;s--)o=r[s].split(":"),/true/i.test(o[1])&&(o[1]=!0),/false/i.test(o[1])&&(o[1]=!1),n(o[1])&&(o[1]=parseInt(o[1],10)),2===o.length&&o[0].length>0&&(l[i(o[0])]=i(o[1]));return l},delay:function(e,t){return setTimeout(e,t)},empty:function(e){if(e.length&&e.length>0)return!1;if(e.length&&0===e.length)return!0;for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0},register_media:function(t,n){Foundation.media_queries[t]===i&&(e("head").append('<meta class="'+n+'">'),Foundation.media_queries[t]=o(e("."+n).css("font-family")))},addCustomRule:function(e,t){if(t===i)Foundation.stylesheet.insertRule(e,Foundation.stylesheet.cssRules.length);else{var n=Foundation.media_queries[t];n!==i&&Foundation.stylesheet.insertRule("@media "+Foundation.media_queries[t]+"{ "+e+" }")}},loaded:function(e,t){function n(){t(e[0])}function i(){if(this.one("load",n),/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var e=this.attr("src"),t=e.match(/\?/)?"&":"?";t+="random="+(new Date).getTime(),this.attr("src",e+t)}}return e.attr("src")?void(e[0].complete||4===e[0].readyState?n():i.call(e)):void n()},bindings:function(t,n){var i=this,s=!r(this).data(this.name+"-init");return"string"==typeof t?this[t].call(this):void(r(this.scope).is("[data-"+this.name+"]")?(r(this.scope).data(this.name+"-init",e.extend({},this.settings,n||t,this.data_options(r(this.scope)))),s&&this.events(this.scope)):r("[data-"+this.name+"]",this.scope).each(function(){var s=!r(this).data(i.name+"-init");r(this).data(i.name+"-init",e.extend({},i.settings,n||t,i.data_options(r(this)))),s&&i.events(this)}))}}},e.fn.foundation=function(){var e=Array.prototype.slice.call(arguments,0);return this.each(function(){return Foundation.init.apply(Foundation,[this].concat(e)),this})}}(jQuery,this,this.document),function(e){"use strict";Foundation.libs.alert={name:"alert",version:"5.0.0",settings:{animation:"fadeOut",speed:300,callback:function(){}},init:function(e,t,n){this.bindings(t,n)},events:function(){e(this.scope).off(".alert").on("click.fndtn.alert","[data-alert] a.close",function(t){var n=e(this).closest("[data-alert]"),i=n.data("alert-init");t.preventDefault(),n[i.animation](i.speed,function(){e(this).trigger("closed").remove(),i.callback()})})},reflow:function(){}}}(jQuery,this,this.document),define("alerts",["foundation"],function(){}),function(e,t){"use strict";Foundation.libs.dropdown={name:"dropdown",version:"5.0.0",settings:{active_class:"open",is_hover:!1,opened:function(){},closed:function(){}},init:function(e,t,n){Foundation.inherit(this,"throttle"),this.bindings(t,n)},events:function(){var n=this;e(this.scope).off(".dropdown").on("click.fndtn.dropdown","[data-dropdown]",function(t){var i=e(this).data("dropdown-init");t.preventDefault(),(!i.is_hover||Modernizr.touch)&&n.toggle(e(this))}).on("mouseenter.fndtn.dropdown","[data-dropdown], [data-dropdown-content]",function(){var t=e(this);if(clearTimeout(n.timeout),t.data("dropdown"))var i=e("#"+t.data("dropdown")),s=t;else{var i=t;s=e("[data-dropdown='"+i.attr("id")+"']")}var o=s.data("dropdown-init");o.is_hover&&n.open.apply(n,[i,s])}).on("mouseleave.fndtn.dropdown","[data-dropdown], [data-dropdown-content]",function(){var t=e(this);n.timeout=setTimeout(function(){if(t.data("dropdown")){var i=t.data("dropdown-init");i.is_hover&&n.close.call(n,e("#"+t.data("dropdown")))}else{var s=e('[data-dropdown="'+e(this).attr("id")+'"]'),i=s.data("dropdown-init");i.is_hover&&n.close.call(n,t)}}.bind(this),150)}).on("click.fndtn.dropdown",function(t){var i=e(t.target).closest("[data-dropdown-content]");if(!e(t.target).data("dropdown")&&!e(t.target).parent().data("dropdown"))return!e(t.target).data("revealId")&&i.length>0&&(e(t.target).is("[data-dropdown-content]")||e.contains(i.first()[0],t.target))?void t.stopPropagation():void n.close.call(n,e("[data-dropdown-content]"))}).on("opened.fndtn.dropdown","[data-dropdown-content]",this.settings.opened).on("closed.fndtn.dropdown","[data-dropdown-content]",this.settings.closed),e(t).off(".dropdown").on("resize.fndtn.dropdown",n.throttle(function(){n.resize.call(n)},50)).trigger("resize")},close:function(t){var n=this;t.each(function(){e(this).hasClass(n.settings.active_class)&&(e(this).css(Foundation.rtl?"right":"left","-99999px").removeClass(n.settings.active_class),e(this).trigger("closed"))})},open:function(e,t){this.css(e.addClass(this.settings.active_class),t),e.trigger("opened")},toggle:function(t){var n=e("#"+t.data("dropdown"));0!==n.length&&(this.close.call(this,e("[data-dropdown-content]").not(n)),n.hasClass(this.settings.active_class)?this.close.call(this,n):(this.close.call(this,e("[data-dropdown-content]")),this.open.call(this,n,t)))},resize:function(){var t=e("[data-dropdown-content].open"),n=e("[data-dropdown='"+t.attr("id")+"']");t.length&&n.length&&this.css(t,n)},css:function(n,i){var s=n.offsetParent(),o=i.offset();if(o.top-=s.offset().top,o.left-=s.offset().left,this.small())n.css({position:"absolute",width:"95%","max-width":"none",top:o.top+i.outerHeight()}),n.css(Foundation.rtl?"right":"left","2.5%");else{if(!Foundation.rtl&&e(t).width()>n.outerWidth()+i.offset().left){var r=o.left;n.hasClass("right")&&n.removeClass("right")}else{n.hasClass("right")||n.addClass("right");var r=o.left-(n.outerWidth()-i.outerWidth())}n.attr("style","").css({position:"absolute",top:o.top+i.outerHeight(),left:r})}return n},small:function(){return matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches
},off:function(){e(this.scope).off(".fndtn.dropdown"),e("html, body").off(".fndtn.dropdown"),e(t).off(".fndtn.dropdown"),e("[data-dropdown-content]").off(".fndtn.dropdown"),this.settings.init=!1},reflow:function(){}}}(jQuery,this,this.document),define("dropdown",["foundation"],function(){}),function(e){"use strict";Foundation.libs.tab={name:"tab",version:"5.0.1",settings:{active_class:"active"},init:function(e,t,n){this.bindings(t,n)},events:function(){e(this.scope).off(".tab").on("click.fndtn.tab","[data-tab] > dd > a",function(t){t.preventDefault();var n=e(this).parent(),i=e("#"+this.href.split("#")[1]),s=n.siblings(),o=n.closest("[data-tab]").data("tab-init");n.addClass(o.active_class),s.removeClass(o.active_class),i.siblings().removeClass(o.active_class).end().addClass(o.active_class)})},off:function(){},reflow:function(){}}}(jQuery,this,this.document),define("tabs",["foundation"],function(){}),function(e){"use strict";Foundation.libs.tooltip={name:"tooltip",version:"5.0.0",settings:{additional_inheritable_classes:[],tooltip_class:".tooltip",append_to:"body",touch_close_text:"Tap To Close",disable_for_touch:!1,tip_template:function(e,t){return'<span data-selector="'+e+'" class="'+Foundation.libs.tooltip.settings.tooltip_class.substring(1)+'">'+t+'<span class="nub"></span></span>'}},cache:{},init:function(e,t,n){this.bindings(t,n)},events:function(){var t=this;Modernizr.touch?e(this.scope).off(".tooltip").on("click.fndtn.tooltip touchstart.fndtn.tooltip touchend.fndtn.tooltip","[data-tooltip]",function(n){var i=e.extend({},t.settings,t.data_options(e(this)));i.disable_for_touch||(n.preventDefault(),e(i.tooltip_class).hide(),t.showOrCreateTip(e(this)))}).on("click.fndtn.tooltip touchstart.fndtn.tooltip touchend.fndtn.tooltip",this.settings.tooltip_class,function(t){t.preventDefault(),e(this).fadeOut(150)}):e(this.scope).off(".tooltip").on("mouseenter.fndtn.tooltip mouseleave.fndtn.tooltip","[data-tooltip]",function(n){var i=e(this);/enter|over/i.test(n.type)?t.showOrCreateTip(i):("mouseout"===n.type||"mouseleave"===n.type)&&t.hide(i)})},showOrCreateTip:function(e){var t=this.getTip(e);return t&&t.length>0?this.show(e):this.create(e)},getTip:function(t){var n=this.selector(t),i=null;return n&&(i=e('span[data-selector="'+n+'"]'+this.settings.tooltip_class)),"object"==typeof i?i:!1},selector:function(e){var t=e.attr("id"),n=e.attr("data-tooltip")||e.attr("data-selector");return(t&&t.length<1||!t)&&"string"!=typeof n&&(n="tooltip"+Math.random().toString(36).substring(7),e.attr("data-selector",n)),t&&t.length>0?t:n},create:function(t){var n=e(this.settings.tip_template(this.selector(t),e("<div></div>").html(t.attr("title")).html())),i=this.inheritable_classes(t);n.addClass(i).appendTo(this.settings.append_to),Modernizr.touch&&n.append('<span class="tap-to-close">'+this.settings.touch_close_text+"</span>"),t.removeAttr("title").attr("title",""),this.show(t)},reposition:function(t,n,i){var s,o,r,a,l;if(n.css("visibility","hidden").show(),s=t.data("width"),o=n.children(".nub"),r=o.outerHeight(),a=o.outerHeight(),l=function(e,t,n,i,s,o){return e.css({top:t?t:"auto",bottom:i?i:"auto",left:s?s:"auto",right:n?n:"auto",width:o?o:"auto"}).end()},l(n,t.offset().top+t.outerHeight()+10,"auto","auto",t.offset().left,s),this.small())l(n,t.offset().top+t.outerHeight()+10,"auto","auto",12.5,e(this.scope).width()),n.addClass("tip-override"),l(o,-r,"auto","auto",t.offset().left);else{var c=t.offset().left;Foundation.rtl&&(c=t.offset().left+t.offset().width-n.outerWidth()),l(n,t.offset().top+t.outerHeight()+10,"auto","auto",c,s),n.removeClass("tip-override"),i&&i.indexOf("tip-top")>-1?l(n,t.offset().top-n.outerHeight(),"auto","auto",c,s).removeClass("tip-override"):i&&i.indexOf("tip-left")>-1?l(n,t.offset().top+t.outerHeight()/2-2.5*r,"auto","auto",t.offset().left-n.outerWidth()-r,s).removeClass("tip-override"):i&&i.indexOf("tip-right")>-1&&l(n,t.offset().top+t.outerHeight()/2-2.5*r,"auto","auto",t.offset().left+t.outerWidth()+r,s).removeClass("tip-override")}n.css("visibility","visible").hide()},small:function(){return matchMedia(Foundation.media_queries.small).matches},inheritable_classes:function(t){var n=["tip-top","tip-left","tip-bottom","tip-right","noradius"].concat(this.settings.additional_inheritable_classes),i=t.attr("class"),s=i?e.map(i.split(" "),function(t){return-1!==e.inArray(t,n)?t:void 0}).join(" "):"";return e.trim(s)},show:function(e){var t=this.getTip(e);this.reposition(e,t,e.attr("class")),t.fadeIn(150)},hide:function(e){var t=this.getTip(e);t.fadeOut(150)},reload:function(){var t=e(this);return t.data("fndtn-tooltips")?t.foundationTooltips("destroy").foundationTooltips("init"):t.foundationTooltips("init")},off:function(){e(this.scope).off(".fndtn.tooltip"),e(this.settings.tooltip_class).each(function(t){e("[data-tooltip]").get(t).attr("title",e(this).text())}).remove()},reflow:function(){}}}(jQuery,this,this.document),define("tooltip",["foundation"],function(){}),function(e,t,n){"use strict";Foundation.libs.abide={name:"abide",version:"5.0.0",settings:{focus_on_invalid:!0,timeout:1e3,patterns:{alpha:/[a-zA-Z]+/,alpha_numeric:/[a-zA-Z0-9]+/,integer:/-?\d+/,number:/-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?/,password:/(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/,card:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,cvv:/^([0-9]){3,4}$/,email:/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,url:/(https?|ftp|file|ssh):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?/,domain:/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}$/,datetime:/([0-2][0-9]{3})\-([0-1][0-9])\-([0-3][0-9])T([0-5][0-9])\:([0-5][0-9])\:([0-5][0-9])(Z|([\-\+]([0-1][0-9])\:00))/,date:/(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))/,time:/(0[0-9]|1[0-9]|2[0-3])(:[0-5][0-9]){2}/,dateISO:/\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/,month_day_year:/(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.](19|20)\d\d/,color:/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/}},timer:null,init:function(e,t,n){this.bindings(t,n)},events:function(t){{var n=this,i=e(t).attr("novalidate","novalidate");i.data("abide-init")}i.off(".abide").on("submit.fndtn.abide validate.fndtn.abide",function(t){var i=/ajax/i.test(e(this).attr("data-abide"));return n.validate(e(this).find("input, textarea, select").get(),t,i)}).find("input, textarea, select").off(".abide").on("blur.fndtn.abide change.fndtn.abide",function(e){n.validate([this],e)}).on("keydown.fndtn.abide",function(t){var i=e(this).closest("form").data("abide-init");clearTimeout(n.timer),n.timer=setTimeout(function(){n.validate([this],t)}.bind(this),i.timeout)})},validate:function(t,n,i){for(var s=this.parse_patterns(t),o=s.length,r=e(t[0]).closest("form"),a=/submit/.test(n.type),l=0;o>l;l++)if(!s[l]&&(a||i))return this.settings.focus_on_invalid&&t[l].focus(),r.trigger("invalid"),e(t[l]).closest("form").attr("data-invalid",""),!1;return(a||i)&&r.trigger("valid"),r.removeAttr("data-invalid"),i?!1:!0},parse_patterns:function(e){for(var t=e.length,n=[],i=t-1;i>=0;i--)n.push(this.pattern(e[i]));return this.check_validation_and_apply_styles(n)},pattern:function(e){var t=e.getAttribute("type"),n="string"==typeof e.getAttribute("required");if(this.settings.patterns.hasOwnProperty(t))return[e,this.settings.patterns[t],n];var i=e.getAttribute("pattern")||"";return this.settings.patterns.hasOwnProperty(i)&&i.length>0?[e,this.settings.patterns[i],n]:i.length>0?[e,new RegExp(i),n]:(i=/.*/,[e,i,n])},check_validation_and_apply_styles:function(t){for(var n=t.length,i=[],s=n-1;s>=0;s--){var o=t[s][0],r=t[s][2],a=o.value,l=o.getAttribute("data-equalto"),c="radio"===o.type,d=r?o.value.length>0:!0;c&&r?i.push(this.valid_radio(o,r)):l&&r?i.push(this.valid_equal(o,r)):t[s][1].test(a)&&d||!r&&o.value.length<1?(e(o).removeAttr("data-invalid").parent().removeClass("error"),i.push(!0)):(e(o).attr("data-invalid","").parent().addClass("error"),i.push(!1))}return i},valid_radio:function(t){for(var i=t.getAttribute("name"),s=n.getElementsByName(i),o=s.length,r=!1,a=0;o>a;a++)s[a].checked&&(r=!0);for(var a=0;o>a;a++)r?e(s[a]).removeAttr("data-invalid").parent().removeClass("error"):e(s[a]).attr("data-invalid","").parent().addClass("error");return r},valid_equal:function(t){var i=n.getElementById(t.getAttribute("data-equalto")).value,s=t.value,o=i===s;return o?e(t).removeAttr("data-invalid").parent().removeClass("error"):e(t).attr("data-invalid","").parent().addClass("error"),o}}}(jQuery,this,this.document),define("abide",["foundation"],function(){}),window.Modernizr=function(e,t,n){function i(e){b.cssText=e}function s(e,t){return i(T.join(e+";")+(t||""))}function o(e,t){return typeof e===t}function r(e,t){return!!~(""+e).indexOf(t)}function a(e,t){for(var i in e){var s=e[i];if(!r(s,"-")&&b[s]!==n)return"pfx"==t?s:!0}return!1}function l(e,t,i){for(var s in e){var r=t[e[s]];if(r!==n)return i===!1?e[s]:o(r,"function")?r.bind(i||t):r}return!1}function c(e,t,n){var i=e.charAt(0).toUpperCase()+e.slice(1),s=(e+" "+S.join(i+" ")+i).split(" ");return o(t,"string")||o(t,"undefined")?a(s,t):(s=(e+" "+_.join(i+" ")+i).split(" "),l(s,t,n))}function d(){f.input=function(n){for(var i=0,s=n.length;s>i;i++)A[n[i]]=!!(n[i]in w);return A.list&&(A.list=!(!t.createElement("datalist")||!e.HTMLDataListElement)),A}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),f.inputtypes=function(e){for(var i,s,o,r=0,a=e.length;a>r;r++)w.setAttribute("type",s=e[r]),i="text"!==w.type,i&&(w.value=x,w.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(s)&&w.style.WebkitAppearance!==n?(v.appendChild(w),o=t.defaultView,i=o.getComputedStyle&&"textfield"!==o.getComputedStyle(w,null).WebkitAppearance&&0!==w.offsetHeight,v.removeChild(w)):/^(search|tel)$/.test(s)||(i=/^(url|email)$/.test(s)?w.checkValidity&&w.checkValidity()===!1:w.value!=x)),M[e[r]]=!!i;return M}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var u,h,p="2.8.3",f={},m=!0,v=t.documentElement,g="modernizr",y=t.createElement(g),b=y.style,w=t.createElement("input"),x=":)",C={}.toString,T=" -webkit- -moz- -o- -ms- ".split(" "),k="Webkit Moz O ms",S=k.split(" "),_=k.toLowerCase().split(" "),D={svg:"http://www.w3.org/2000/svg"},E={},M={},A={},N=[],F=N.slice,O=function(e,n,i,s){var o,r,a,l,c=t.createElement("div"),d=t.body,u=d||t.createElement("body");if(parseInt(i,10))for(;i--;)a=t.createElement("div"),a.id=s?s[i]:g+(i+1),c.appendChild(a);return o=["&#173;",'<style id="s',g,'">',e,"</style>"].join(""),c.id=g,(d?c:u).innerHTML+=o,u.appendChild(c),d||(u.style.background="",u.style.overflow="hidden",l=v.style.overflow,v.style.overflow="hidden",v.appendChild(u)),r=n(c,e),d?c.parentNode.removeChild(c):(u.parentNode.removeChild(u),v.style.overflow=l),!!r},j=function(t){var n=e.matchMedia||e.msMatchMedia;if(n)return n(t)&&n(t).matches||!1;var i;return O("@media "+t+" { #"+g+" { position: absolute; } }",function(t){i="absolute"==(e.getComputedStyle?getComputedStyle(t,null):t.currentStyle).position}),i},I=function(){function e(e,s){s=s||t.createElement(i[e]||"div"),e="on"+e;var r=e in s;return r||(s.setAttribute||(s=t.createElement("div")),s.setAttribute&&s.removeAttribute&&(s.setAttribute(e,""),r=o(s[e],"function"),o(s[e],"undefined")||(s[e]=n),s.removeAttribute(e))),s=null,r}var i={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return e}(),P={}.hasOwnProperty;h=o(P,"undefined")||o(P.call,"undefined")?function(e,t){return t in e&&o(e.constructor.prototype[t],"undefined")}:function(e,t){return P.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=F.call(arguments,1),i=function(){if(this instanceof i){var s=function(){};s.prototype=t.prototype;var o=new s,r=t.apply(o,n.concat(F.call(arguments)));return Object(r)===r?r:o}return t.apply(e,n.concat(F.call(arguments)))};return i}),E.flexbox=function(){return c("flexWrap")},E.flexboxlegacy=function(){return c("boxDirection")},E.canvas=function(){var e=t.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},E.canvastext=function(){return!(!f.canvas||!o(t.createElement("canvas").getContext("2d").fillText,"function"))},E.webgl=function(){return!!e.WebGLRenderingContext},E.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:O(["@media (",T.join("touch-enabled),("),g,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=9===e.offsetTop}),n},E.geolocation=function(){return"geolocation"in navigator},E.postmessage=function(){return!!e.postMessage},E.websqldatabase=function(){return!!e.openDatabase},E.indexedDB=function(){return!!c("indexedDB",e)},E.hashchange=function(){return I("hashchange",e)&&(t.documentMode===n||t.documentMode>7)},E.history=function(){return!(!e.history||!history.pushState)},E.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},E.websockets=function(){return"WebSocket"in e||"MozWebSocket"in e},E.rgba=function(){return i("background-color:rgba(150,255,150,.5)"),r(b.backgroundColor,"rgba")},E.hsla=function(){return i("background-color:hsla(120,40%,100%,.5)"),r(b.backgroundColor,"rgba")||r(b.backgroundColor,"hsla")},E.multiplebgs=function(){return i("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(b.background)},E.backgroundsize=function(){return c("backgroundSize")},E.borderimage=function(){return c("borderImage")},E.borderradius=function(){return c("borderRadius")},E.boxshadow=function(){return c("boxShadow")},E.textshadow=function(){return""===t.createElement("div").style.textShadow},E.opacity=function(){return s("opacity:.55"),/^0.55$/.test(b.opacity)},E.cssanimations=function(){return c("animationName")},E.csscolumns=function(){return c("columnCount")},E.cssgradients=function(){var e="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",n="linear-gradient(left top,#9f9, white);";return i((e+"-webkit- ".split(" ").join(t+e)+T.join(n+e)).slice(0,-e.length)),r(b.backgroundImage,"gradient")},E.cssreflections=function(){return c("boxReflect")},E.csstransforms=function(){return!!c("transform")},E.csstransforms3d=function(){var e=!!c("perspective");return e&&"webkitPerspective"in v.style&&O("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t){e=9===t.offsetLeft&&3===t.offsetHeight}),e},E.csstransitions=function(){return c("transition")},E.fontface=function(){var e;return O('@font-face {font-family:"font";src:url("https://")}',function(n,i){var s=t.getElementById("smodernizr"),o=s.sheet||s.styleSheet,r=o?o.cssRules&&o.cssRules[0]?o.cssRules[0].cssText:o.cssText||"":"";e=/src/i.test(r)&&0===r.indexOf(i.split(" ")[0])}),e},E.generatedcontent=function(){var e;return O(["#",g,"{font:0/0 a}#",g,':after{content:"',x,'";visibility:hidden;font:3px/1 a}'].join(""),function(t){e=t.offsetHeight>=3}),e},E.video=function(){var e=t.createElement("video"),n=!1;try{(n=!!e.canPlayType)&&(n=new Boolean(n),n.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(i){}return n},E.audio=function(){var e=t.createElement("audio"),n=!1;try{(n=!!e.canPlayType)&&(n=new Boolean(n),n.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(i){}return n},E.localstorage=function(){try{return localStorage.setItem(g,g),localStorage.removeItem(g),!0}catch(e){return!1}},E.sessionstorage=function(){try{return sessionStorage.setItem(g,g),sessionStorage.removeItem(g),!0}catch(e){return!1}},E.webworkers=function(){return!!e.Worker},E.applicationcache=function(){return!!e.applicationCache},E.svg=function(){return!!t.createElementNS&&!!t.createElementNS(D.svg,"svg").createSVGRect},E.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==D.svg},E.smil=function(){return!!t.createElementNS&&/SVGAnimate/.test(C.call(t.createElementNS(D.svg,"animate")))},E.svgclippaths=function(){return!!t.createElementNS&&/SVGClipPath/.test(C.call(t.createElementNS(D.svg,"clipPath")))};for(var V in E)h(E,V)&&(u=V.toLowerCase(),f[u]=E[V](),N.push((f[u]?"":"no-")+u));return f.input||d(),f.addTest=function(e,t){if("object"==typeof e)for(var i in e)h(e,i)&&f.addTest(i,e[i]);else{if(e=e.toLowerCase(),f[e]!==n)return f;t="function"==typeof t?t():t,"undefined"!=typeof m&&m&&(v.className+=" "+(t?"":"no-")+e),f[e]=t}return f},i(""),y=w=null,function(e,t){function n(e,t){var n=e.createElement("p"),i=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",i.insertBefore(n.lastChild,i.firstChild)}function i(){var e=y.elements;return"string"==typeof e?e.split(" "):e}function s(e){var t=g[e[m]];return t||(t={},v++,e[m]=v,g[v]=t),t}function o(e,n,i){if(n||(n=t),d)return n.createElement(e);i||(i=s(n));var o;return o=i.cache[e]?i.cache[e].cloneNode():f.test(e)?(i.cache[e]=i.createElem(e)).cloneNode():i.createElem(e),!o.canHaveChildren||p.test(e)||o.tagUrn?o:i.frag.appendChild(o)}function r(e,n){if(e||(e=t),d)return e.createDocumentFragment();n=n||s(e);for(var o=n.frag.cloneNode(),r=0,a=i(),l=a.length;l>r;r++)o.createElement(a[r]);return o}function a(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return y.shivMethods?o(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+i().join().replace(/[\w\-]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(y,t.frag)}function l(e){e||(e=t);var i=s(e);return!y.shivCSS||c||i.hasCSS||(i.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),d||a(e,i),e}var c,d,u="3.7.0",h=e.html5||{},p=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,m="_html5shiv",v=0,g={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",c="hidden"in e,d=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(n){c=!0,d=!0}}();var y={elements:h.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:u,shivCSS:h.shivCSS!==!1,supportsUnknownElements:d,shivMethods:h.shivMethods!==!1,type:"default",shivDocument:l,createElement:o,createDocumentFragment:r};e.html5=y,l(t)}(this,t),f._version=p,f._prefixes=T,f._domPrefixes=_,f._cssomPrefixes=S,f.mq=j,f.hasEvent=I,f.testProp=function(e){return a([e])},f.testAllProps=c,f.testStyles=O,f.prefixed=function(e,t,n){return t?c(e,t,n):c(e,"pfx")},v.className=v.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(m?" js "+N.join(" "):""),f}(this,this.document),define("modernizr",function(){}),function(e,t){function n(t,n){var s,o,r,a=t.nodeName.toLowerCase();return"area"===a?(s=t.parentNode,o=s.name,t.href&&o&&"map"===s.nodeName.toLowerCase()?(r=e("img[usemap=#"+o+"]")[0],!!r&&i(r)):!1):(/input|select|textarea|button|object/.test(a)?!t.disabled:"a"===a?t.href||n:n)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var s=0,o=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"@VERSION",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(n,i){return"number"==typeof n?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),i&&i.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length)for(var i,s,o=e(this[0]);o.length&&o[0]!==document;){if(i=o.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(o.css("zIndex"),10),!isNaN(s)&&0!==s))return s;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++s)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),s=isNaN(i);return(s||i>=0)&&n(t,!s)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,i){function s(t,n,i,s){return e.each(o,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var o="Width"===i?["Left","Right"]:["Top","Bottom"],r=i.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(n){return n===t?a["inner"+i].call(this):this.each(function(){e(this).css(r,s(this,n)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?a["outer"+i].call(this,t):this.each(function(){e(this).css(r,s(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,i){var s,o=e.ui[t].prototype;for(s in i)o.plugins[s]=o.plugins[s]||[],o.plugins[s].push([n,i[s]])},call:function(e,t,n){var i,s=e.plugins[t];if(s&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(i=0;i<s.length;i++)e.options[s[i][0]]&&s[i][1].apply(e.element,n)}},hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",s=!1;return t[i]>0?!0:(t[i]=1,s=t[i]>0,t[i]=0,s)}})}(jQuery),define("jqueryui",["jquery"],function(e){return function(){var t;return t||e.jquery}}(this)),function(e,t){var n=0,i=Array.prototype.slice,s=e.cleanData;e.cleanData=function(t){for(var n,i=0;null!=(n=t[i]);i++)try{e(n).triggerHandler("remove")}catch(o){}s(t)},e.widget=function(t,n,i){var s,o,r,a,l={},c=t.split(".")[0];t=t.split(".")[1],s=c+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][s.toLowerCase()]=function(t){return!!e.data(t,s)},e[c]=e[c]||{},o=e[c][t],r=e[c][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new r(e,t)},e.extend(r,o,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),a=new n,a.options=e.widget.extend({},a.options),e.each(i,function(t,i){return e.isFunction(i)?void(l[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},s=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,o=this._superApply;return this._super=e,this._superApply=s,t=i.apply(this,arguments),this._super=n,this._superApply=o,t}}()):void(l[t]=i)}),r.prototype=e.widget.extend(a,{widgetEventPrefix:o?a.widgetEventPrefix||t:t},l,{constructor:r,namespace:c,widgetName:t,widgetFullName:s}),o?(e.each(o._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,r,n._proto)}),delete o._childConstructors):n._childConstructors.push(r),e.widget.bridge(t,r)},e.widget.extend=function(n){for(var s,o,r=i.call(arguments,1),a=0,l=r.length;l>a;a++)for(s in r[a])o=r[a][s],r[a].hasOwnProperty(s)&&o!==t&&(n[s]=e.isPlainObject(o)?e.isPlainObject(n[s])?e.widget.extend({},n[s],o):e.widget.extend({},o):o);return n},e.widget.bridge=function(n,s){var o=s.prototype.widgetFullName||n;e.fn[n]=function(r){var a="string"==typeof r,l=i.call(arguments,1),c=this;return r=!a&&l.length?e.widget.extend.apply(null,[r].concat(l)):r,this.each(a?function(){var i,s=e.data(this,o);return s?e.isFunction(s[r])&&"_"!==r.charAt(0)?(i=s[r].apply(s,l),i!==s&&i!==t?(c=i&&i.jquery?c.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+r+"' for "+n+" widget instance"):e.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+r+"'")}:function(){var t=e.data(this,o);t?t.option(r||{})._init():e.data(this,o,new s(r,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,i){var s,o,r,a=n;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof n)if(a={},s=n.split("."),n=s.shift(),s.length){for(o=a[n]=e.widget.extend({},this.options[n]),r=0;r<s.length-1;r++)o[s[r]]=o[s[r]]||{},o=o[s[r]];if(n=s.pop(),1===arguments.length)return o[n]===t?null:o[n];o[n]=i}else{if(1===arguments.length)return this.options[n]===t?null:this.options[n];a[n]=i}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,i){var s,o=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=s=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,s=this.widget()),e.each(i,function(i,r){function a(){return t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof r?o[r]:r).apply(o,arguments):void 0}"string"!=typeof r&&(a.guid=r.guid=r.guid||a.guid||e.guid++);var l=i.match(/^(\w+)\s*(.*)$/),c=l[1]+o.eventNamespace,d=l[2];d?s.delegate(d,c,a):n.bind(c,a)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var s,o,r=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(s in o)s in n||(n[s]=o[s]);return this.element.trigger(n,i),!(e.isFunction(r)&&r.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,s,o){"string"==typeof s&&(s={effect:s});var r,a=s?s===!0||"number"==typeof s?n:s.effect||n:t;s=s||{},"number"==typeof s&&(s={duration:s}),r=!e.isEmptyObject(s),s.complete=o,s.delay&&i.delay(s.delay),r&&e.effects&&e.effects.effect[a]?i[t](s):a!==t&&i[a]?i[a](s.duration,s.easing,o):i.queue(function(n){e(this)[t](),o&&o.call(i[0]),n()})}})}(jQuery),define("widgetFactory",["jqueryui"],function(e){return function(){var t;return t||e.jquery}}(this)),function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"@VERSION",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)
}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,s=1===n.which,o="string"==typeof this.options.cancel&&n.target.nodeName?e(n.target).closest(this.options.cancel).length:!1;return s&&!o&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),define("mouseInteraction",["jqueryui","widgetFactory"],function(e){return function(){var t;return t||e.jquery}}(this)),function(e){function t(e,t,n){return e>t&&t+n>e}function n(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"@VERSION",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||n(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){"disabled"===t?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var i=null,s=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,o.widgetName+"-item")===o?(i=e(this),!1):void 0}),e.data(t.target,o.widgetName+"-item")===o&&(i=e(t.target)),i&&(!this.options.handle||n||(e(this.options.handle,i).find("*").addBack().each(function(){this===t.target&&(s=!0)}),s))?(this.currentItem=i,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(t,n,i){var s,o,r=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&"auto"!==r.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",r.cursor),this.storedStylesheet=e("<style>*{ cursor: "+r.cursor+" !important; }</style>").appendTo(o)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,i,s,o,r=this.options,a=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-this.overflowOffset.top<r.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-r.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-this.overflowOffset.left<r.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-r.scrollSpeed)):(t.pageY-e(document).scrollTop()<r.scrollSensitivity?a=e(document).scrollTop(e(document).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<r.scrollSensitivity&&(a=e(document).scrollTop(e(document).scrollTop()+r.scrollSpeed)),t.pageX-e(document).scrollLeft()<r.scrollSensitivity?a=e(document).scrollLeft(e(document).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<r.scrollSensitivity&&(a=e(document).scrollLeft(e(document).scrollLeft()+r.scrollSpeed))),a!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(i=this.items[n],s=i.item[0],o=this._intersectsWithPointer(i),o&&i.instance===this.currentContainer&&s!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==s&&!e.contains(this.placeholder[0],s)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],s):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,s=this.placeholder.offset(),o=this.options.axis,r={};o&&"x"!==o||(r.left=s.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(r.top=s.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(r,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&i.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n.each(function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,i=this.positionAbs.top,s=i+this.helperProportions.height,o=e.left,r=o+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,d=this.offset.click.left,u="x"===this.options.axis||i+c>a&&l>i+c,h="y"===this.options.axis||t+d>o&&r>t+d,p=u&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:o<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<r&&a<i+this.helperProportions.height/2&&s-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var n="x"===this.options.axis||t(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||t(this.positionAbs.left+this.offset.click.left,e.left,e.width),s=n&&i,o=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return s?this.floating?r&&"right"===r||"down"===o?2:1:o&&("down"===o?2:1):!1},_intersectsWithSides:function(e){var n=t(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=t(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&i||"left"===o&&!i:s&&("down"===s&&n||"up"===s&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function n(){a.push(this)}var i,s,o,r,a=[],l=[],c=this._connectWith();if(c&&t)for(i=c.length-1;i>=0;i--)for(o=e(c[i]),s=o.length-1;s>=0;s--)r=e.data(o[s],this.widgetFullName),r&&r!==this&&!r.options.disabled&&l.push([e.isFunction(r.options.items)?r.options.items.call(r.element):e(r.options.items,r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),r]);for(l.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=l.length-1;i>=0;i--)l[i][0].each(n);return e(a)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,i,s,o,r,a,l,c,d=this.items,u=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--)for(s=e(h[n]),i=s.length-1;i>=0;i--)o=e.data(s[i],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(u.push([e.isFunction(o.options.items)?o.options.items.call(o.element[0],t,{item:this.currentItem}):e(o.options.items,o.element),o]),this.containers.push(o));for(n=u.length-1;n>=0;n--)for(r=u[n][1],a=u[n][0],i=0,c=a.length;c>i;i++)l=e(a[i]),l.data(this.widgetName+"-item",r),d.push({item:l,instance:r,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,i,s,o;for(n=this.items.length-1;n>=0;n--)i=this.items[n],i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(s=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item,t||(i.width=s.outerWidth(),i.height=s.outerHeight()),o=s.offset(),i.left=o.left,i.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)o=this.containers[n].element.offset(),this.containers[n].containerCache.left=o.left,this.containers[n].containerCache.top=o.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,i=t.options;i.placeholder&&i.placeholder.constructor!==String||(n=i.placeholder,i.placeholder={element:function(){var i=t.currentItem[0].nodeName.toLowerCase(),s=e("<"+i+">",t.document[0]).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===i?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(s)}):"img"===i&&s.attr("src",t.currentItem.attr("src")),n||s.css("visibility","hidden"),s},update:function(e,s){(!n||i.forcePlaceholderSize)&&(s.height()||s.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),s.width()||s.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_contactContainers:function(i){var s,o,r,a,l,c,d,u,h,p,f=null,m=null;for(s=this.containers.length-1;s>=0;s--)if(!e.contains(this.currentItem[0],this.containers[s].element[0]))if(this._intersectsWith(this.containers[s].containerCache)){if(f&&e.contains(this.containers[s].element[0],f.element[0]))continue;f=this.containers[s],m=s}else this.containers[s].containerCache.over&&(this.containers[s]._trigger("out",i,this._uiHash(this)),this.containers[s].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",i,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(r=1e4,a=null,p=f.floating||n(this.currentItem),l=p?"left":"top",c=p?"width":"height",d=this.positionAbs[l]+this.offset.click[l],o=this.items.length-1;o>=0;o--)e.contains(this.containers[m].element[0],this.items[o].item[0])&&this.items[o].item[0]!==this.currentItem[0]&&(!p||t(this.positionAbs.top+this.offset.click.top,this.items[o].top,this.items[o].height))&&(u=this.items[o].item.offset()[l],h=!1,Math.abs(u-d)>Math.abs(u+this.items[o][c]-d)&&(h=!0,u+=this.items[o][c]),Math.abs(u-d)<r&&(r=Math.abs(u-d),a=this.items[o],this.direction=h?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;a?this._rearrange(i,a,null,!0):this._rearrange(i,null,this.containers[m].element,!0),this._trigger("change",i,this._uiHash()),this.containers[m]._trigger("change",i,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",i,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||n.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||n.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,s=this.options;"parent"===s.containment&&(s.containment=this.helper[0].parentNode),("document"===s.containment||"window"===s.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===s.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===s.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(s.containment)||(t=e(s.containment)[0],n=e(s.containment).offset(),i="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"===t?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:s.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*i}},_generatePosition:function(t){var n,i,s=this.options,o=t.pageX,r=t.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),s.grid&&(n=this.originalPageY+Math.round((r-this.originalPageY)/s.grid[1])*s.grid[1],r=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-s.grid[1]:n+s.grid[1]:n,i=this.originalPageX+Math.round((o-this.originalPageX)/s.grid[0])*s.grid[0],o=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-s.grid[0]:i+s.grid[0]:i)),{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(e,t,n,i){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var s=this.counter;this._delay(function(){s===this.counter&&this.refreshPositions(!i)})},_clear:function(e,t){function n(e,t,n){return function(i){n._trigger(e,i,t._uiHash(t))}}this.reverting=!1;var i,s=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&s.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||s.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(s.push(function(e){this._trigger("remove",e,this._uiHash())}),s.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),s.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||s.push(n("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(s.push(n("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),i=0;i<s.length;i++)s[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(i=0;i<s.length;i++)s[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(jQuery),define("sortable",["jqueryui","widgetFactory","mouseInteraction"],function(e){return function(){var t;return t||e.jquery}}(this)),function(e){var t=0,n={},i={};n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="hide",i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="show",e.widget("ui.accordion",{version:"@VERSION",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e(),content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?void this._activate(t):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),void("disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)))},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var n=e.ui.keyCode,i=this.headers.length,s=this.headers.index(t.target),o=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:o=this.headers[(s+1)%i];break;case n.LEFT:case n.UP:o=this.headers[(s-1+i)%i];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:o=this.headers[0];break;case n.END:o=this.headers[i-1]}o&&(e(t.target).attr("tabIndex",-1),e(o).attr("tabIndex",0),o.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var n,i=this.options,s=i.heightStyle,o=this.element.parent(),r=this.accordionId="ui-accordion-"+(this.element.attr("id")||++t);this.active=this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var n=e(this),i=n.attr("id"),s=n.next(),o=s.attr("id");i||(i=r+"-header-"+t,n.attr("id",i)),o||(o=r+"-panel-"+t,s.attr("id",o)),n.attr("aria-controls",o),s.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===s?(n=o.height(),this.element.siblings(":visible").each(function(){var t=e(this),i=t.css("position");"absolute"!==i&&"fixed"!==i&&(n-=t.outerHeight(!0))}),this.headers.each(function(){n-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===s&&(n=0,this.headers.next().each(function(){n=Math.max(n,e(this).css("height","").height())
}).height(n))},_activate:function(t){var n=this._findActive(t)[0];n!==this.active[0]&&(n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var n={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var n=this.options,i=this.active,s=e(t.currentTarget),o=s[0]===i[0],r=o&&n.collapsible,a=r?e():s.next(),l=i.next(),c={oldHeader:i,oldPanel:l,newHeader:r?e():s,newPanel:a};t.preventDefault(),o&&!n.collapsible||this._trigger("beforeActivate",t,c)===!1||(n.active=r?!1:this.headers.index(s),this.active=o?e():s,this._toggle(c),i.removeClass("ui-accordion-header-active ui-state-active"),n.icons&&i.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header),o||(s.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),n.icons&&s.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader),s.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var n=t.newPanel,i=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=i,this.options.animate?this._animate(n,i,t):(i.hide(),n.show(),this._toggleComplete(t)),i.attr({"aria-hidden":"true"}),i.prev().attr("aria-selected","false"),n.length&&i.length?i.prev().attr({tabIndex:-1,"aria-expanded":"false"}):n.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),n.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(e,t,s){var o,r,a,l=this,c=0,d=e.length&&(!t.length||e.index()<t.index()),u=this.options.animate||{},h=d&&u.down||u,p=function(){l._toggleComplete(s)};return"number"==typeof h&&(a=h),"string"==typeof h&&(r=h),r=r||h.easing||u.easing,a=a||h.duration||u.duration,t.length?e.length?(o=e.show().outerHeight(),t.animate(n,{duration:a,easing:r,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(i,{duration:a,easing:r,complete:p,step:function(e,n){n.now=Math.round(e),"height"!==n.prop?c+=n.now:"content"!==l.options.heightStyle&&(n.now=Math.round(o-t.outerHeight()-c),c=0)}})):t.animate(n,a,r,p):e.animate(i,a,r,p)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})}(jQuery),define("accordion",["jqueryui","widgetFactory"],function(e){return function(){var t;return t||e.jquery}}(this)),function(e){e.isScrollToFixed=function(t){return!!e(t).data("ScrollToFixed")},e.ScrollToFixed=function(t,n){function i(){C.trigger("preUnfixed.ScrollToFixed"),d(),C.trigger("unfixed.ScrollToFixed"),_=-1,T=C.offset().top,k=C.offset().left,v.options.offsets&&(k+=C.offset().left-C.position().left),-1==S&&(S=k),g=C.css("position"),x=!0,-1!=v.options.bottom&&(C.trigger("preFixed.ScrollToFixed"),l(),C.trigger("fixed.ScrollToFixed"))}function s(){var e=v.options.limit;return e?"function"==typeof e?e.apply(C):e:0}function o(){return"fixed"===g}function r(){return"absolute"===g}function a(){return!(o()||r())}function l(){o()||(D.css({display:C.css("display"),width:C.outerWidth(!0),height:C.outerHeight(!0),"float":C.css("float")}),cssOptions={"z-index":v.options.zIndex,position:"fixed",top:-1==v.options.bottom?h():"",bottom:-1==v.options.bottom?"":v.options.bottom,"margin-left":"0px"},v.options.dontSetWidth||(cssOptions.width=C.width()),C.css(cssOptions),C.addClass(v.options.baseClassName),v.options.className&&C.addClass(v.options.className),g="fixed")}function c(){var e=s(),t=k;v.options.removeOffsets&&(t="",e-=T),cssOptions={position:"absolute",top:e,left:t,"margin-left":"0px",bottom:""},v.options.dontSetWidth||(cssOptions.width=C.width()),C.css(cssOptions),g="absolute"}function d(){a()||(_=-1,D.css("display","none"),C.css({"z-index":w,width:"",position:y,left:"",top:b,"margin-left":""}),C.removeClass("scroll-to-fixed-fixed"),v.options.className&&C.removeClass(v.options.className),g=null)}function u(e){e!=_&&(C.css("left",k-e),_=e)}function h(){var e=v.options.marginTop;return e?"function"==typeof e?e.apply(C):e:0}function p(){if(e.isScrollToFixed(C)){var t=x;x?a()&&(T=C.offset().top,k=C.offset().left):i();var n=e(window).scrollLeft(),p=e(window).scrollTop(),g=s();v.options.minWidth&&e(window).width()<v.options.minWidth?a()&&t||(m(),C.trigger("preUnfixed.ScrollToFixed"),d(),C.trigger("unfixed.ScrollToFixed")):v.options.maxWidth&&e(window).width()>v.options.maxWidth?a()&&t||(m(),C.trigger("preUnfixed.ScrollToFixed"),d(),C.trigger("unfixed.ScrollToFixed")):-1==v.options.bottom?g>0&&p>=g-h()?r()&&t||(m(),C.trigger("preAbsolute.ScrollToFixed"),c(),C.trigger("unfixed.ScrollToFixed")):p>=T-h()?(o()&&t||(m(),C.trigger("preFixed.ScrollToFixed"),l(),_=-1,C.trigger("fixed.ScrollToFixed")),u(n)):a()&&t||(m(),C.trigger("preUnfixed.ScrollToFixed"),d(),C.trigger("unfixed.ScrollToFixed")):g>0?p+e(window).height()-C.outerHeight(!0)>=g-(h()||-f())?o()&&(m(),C.trigger("preUnfixed.ScrollToFixed"),"absolute"===y?c():d(),C.trigger("unfixed.ScrollToFixed")):(o()||(m(),C.trigger("preFixed.ScrollToFixed"),l()),u(n),C.trigger("fixed.ScrollToFixed")):u(n)}}function f(){return v.options.bottom?v.options.bottom:0}function m(){var e=C.css("position");C.trigger("absolute"==e?"postAbsolute.ScrollToFixed":"fixed"==e?"postFixed.ScrollToFixed":"postUnfixed.ScrollToFixed")}var v=this;v.$el=e(t),v.el=t,v.$el.data("ScrollToFixed",v);var g,y,b,w,x=!1,C=v.$el,T=0,k=0,S=-1,_=-1,D=null,E=function(){C.is(":visible")&&(x=!1,p())},M=function(){window.requestAnimationFrame?requestAnimationFrame(p):p()},A=function(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1};v.init=function(){v.options=e.extend({},e.ScrollToFixed.defaultOptions,n),w=C.css("z-index"),v.$el.css("z-index",v.options.zIndex),D=e("<div />"),g=C.css("position"),y=C.css("position"),b=C.css("top"),a()&&v.$el.after(D),e(window).bind("resize.ScrollToFixed",E),e(window).bind("scroll.ScrollToFixed",M),"ontouchmove"in window&&e(window).bind("touchmove.ScrollToFixed",p),v.options.preFixed&&C.bind("preFixed.ScrollToFixed",v.options.preFixed),v.options.postFixed&&C.bind("postFixed.ScrollToFixed",v.options.postFixed),v.options.preUnfixed&&C.bind("preUnfixed.ScrollToFixed",v.options.preUnfixed),v.options.postUnfixed&&C.bind("postUnfixed.ScrollToFixed",v.options.postUnfixed),v.options.preAbsolute&&C.bind("preAbsolute.ScrollToFixed",v.options.preAbsolute),v.options.postAbsolute&&C.bind("postAbsolute.ScrollToFixed",v.options.postAbsolute),v.options.fixed&&C.bind("fixed.ScrollToFixed",v.options.fixed),v.options.unfixed&&C.bind("unfixed.ScrollToFixed",v.options.unfixed),v.options.spacerClass&&D.addClass(v.options.spacerClass),C.bind("resize.ScrollToFixed",function(){D.height(C.height())}),C.bind("scroll.ScrollToFixed",function(){C.trigger("preUnfixed.ScrollToFixed"),d(),C.trigger("unfixed.ScrollToFixed"),p()}),C.bind("detach.ScrollToFixed",function(t){A(t),C.trigger("preUnfixed.ScrollToFixed"),d(),C.trigger("unfixed.ScrollToFixed"),e(window).unbind("resize.ScrollToFixed",E),e(window).unbind("scroll.ScrollToFixed",M),C.unbind(".ScrollToFixed"),D.remove(),v.$el.removeData("ScrollToFixed")}),E()},v.init()},e.ScrollToFixed.defaultOptions={marginTop:0,limit:0,bottom:-1,zIndex:1e3,baseClassName:"scroll-to-fixed-fixed"},e.fn.scrollToFixed=function(t){return this.each(function(){new e.ScrollToFixed(this,t)})}}(jQuery),define("scrollToFixed",["jquery"],function(e){return function(){var t;return t||e.jquery}}(this)),function(e){"undefined"==typeof e.fn.each2&&e.extend(e.fn,{each2:function(t){for(var n=e([0]),i=-1,s=this.length;++i<s&&(n.context=n[0]=this[i])&&t.call(n[0],i,n)!==!1;);return this}})}(jQuery),function(e,t){"use strict";function n(t){var n=e(document.createTextNode(""));t.before(n),n.before(t),n.remove()}function i(e){function t(e){return L[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function s(e,t){for(var n=0,i=t.length;i>n;n+=1)if(r(e,t[n]))return n;return-1}function o(){var t=e(B);t.appendTo(document.body);var n={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),n}function r(e,n){return e===n?!0:e===t||n===t?!1:null===e||null===n?!1:e.constructor===String?e+""==n+"":n.constructor===String?n+""==e+"":!1}function a(e,t,n){var i,s,o;if(null===e||e.length<1)return[];for(i=e.split(t),s=0,o=i.length;o>s;s+=1)i[s]=n(i[s]);return i}function l(e){return e.outerWidth(!1)-e.width()}function c(n){var i="keyup-change-value";n.on("keydown",function(){e.data(n,i)===t&&e.data(n,i,n.val())}),n.on("keyup",function(){var s=e.data(n,i);s!==t&&n.val()!==s&&(e.removeData(n,i),n.trigger("keyup-change"))})}function d(n){n.on("mousemove",function(n){var i=V;(i===t||i.x!==n.pageX||i.y!==n.pageY)&&e(n.target).trigger("mousemove-filtered",n)})}function u(e,n,i){i=i||t;var s;return function(){var t=arguments;window.clearTimeout(s),s=window.setTimeout(function(){n.apply(i,t)},e)}}function h(e,t){var n=u(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){s(e.target,t.get())>=0&&n(e)})}function p(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,n=e[0],i=e.val().length;e.focus();var s=n.offsetWidth>0||n.offsetHeight>0;s&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(i,i):n.createTextRange&&(t=n.createTextRange(),t.collapse(!1),t.select()))},0)}function f(t){t=e(t)[0];var n=0,i=0;if("selectionStart"in t)n=t.selectionStart,i=t.selectionEnd-n;else if("selection"in document){t.focus();var s=document.selection.createRange();i=document.selection.createRange().text.length,s.moveStart("character",-t.value.length),n=s.text.length-i}return{offset:n,length:i}}function m(e){e.preventDefault(),e.stopPropagation()}function v(e){e.preventDefault(),e.stopImmediatePropagation()}function g(t){if(!j){var n=t[0].currentStyle||window.getComputedStyle(t[0],null);j=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"}),j.attr("class","select2-sizer"),e(document.body).append(j)}return j.text(t.val()),j.width()}function y(t,n,i){var s,o,r=[];s=e.trim(t.attr("class")),s&&(s=""+s,e(s.split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&r.push(this)})),s=e.trim(n.attr("class")),s&&(s=""+s,e(s.split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(o=i(this),o&&r.push(o))})),t.attr("class",r.join(" "))}function b(e,t,n,s){var o=i(e.toUpperCase()).indexOf(i(t.toUpperCase())),r=t.length;return 0>o?void n.push(s(e)):(n.push(s(e.substring(0,o))),n.push("<span class='select2-match'>"),n.push(s(e.substring(o,o+r))),n.push("</span>"),void n.push(s(e.substring(o+r,e.length))))}function w(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function x(n){var i,s=null,o=n.quietMillis||100,r=n.url,a=this;return function(l){window.clearTimeout(i),i=window.setTimeout(function(){var i=n.data,o=r,c=n.transport||e.fn.select2.ajaxDefaults.transport,d={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||t,dataType:n.dataType||"json"},u=e.extend({},e.fn.select2.ajaxDefaults.params,d);i=i?i.call(a,l.term,l.page,l.context):null,o="function"==typeof o?o.call(a,l.term,l.page,l.context):o,s&&"function"==typeof s.abort&&s.abort(),n.params&&(e.isFunction(n.params)?e.extend(u,n.params.call(a)):e.extend(u,n.params)),e.extend(u,{url:o,dataType:n.dataType,data:i,success:function(e){var t=n.results(e,l.page,l);l.callback(t)},error:function(e,t,n){var i={hasError:!0,jqXHR:e,textStatus:t,errorThrown:n};l.callback(i)}}),s=c.call(a,u)},o)}}function C(t){var n,i,s=t,o=function(e){return""+e.text};e.isArray(s)&&(i=s,s={results:i}),e.isFunction(s)===!1&&(i=s,s=function(){return i});var r=s();return r.text&&(o=r.text,e.isFunction(o)||(n=r.text,o=function(e){return e[n]})),function(t){var n,i=t.term,r={results:[]};return""===i?void t.callback(s()):(n=function(s,r){var a,l;if(s=s[0],s.children){a={};for(l in s)s.hasOwnProperty(l)&&(a[l]=s[l]);a.children=[],e(s.children).each2(function(e,t){n(t,a.children)}),(a.children.length||t.matcher(i,o(a),s))&&r.push(a)}else t.matcher(i,o(s),s)&&r.push(s)},e(s().results).each2(function(e,t){n(t,r.results)}),void t.callback(r))}}function T(n){var i=e.isFunction(n);return function(s){var o=s.term,r={results:[]},a=i?n(s):n;e.isArray(a)&&(e(a).each(function(){var e=this.text!==t,n=e?this.text:this;(""===o||s.matcher(o,n))&&r.results.push(e?this:{id:this,text:this})}),s.callback(r))}}function k(t,n){if(e.isFunction(t))return!0;if(!t)return!1;if("string"==typeof t)return!0;throw new Error(n+" must be a string, function, or falsy value")}function S(t,n){if(e.isFunction(t)){var i=Array.prototype.slice.call(arguments,2);return t.apply(n,i)}return t}function _(t){var n=0;return e.each(t,function(e,t){t.children?n+=_(t.children):n++}),n}function D(e,n,i,s){var o,a,l,c,d,u=e,h=!1;if(!s.createSearchChoice||!s.tokenSeparators||s.tokenSeparators.length<1)return t;for(;;){for(a=-1,l=0,c=s.tokenSeparators.length;c>l&&(d=s.tokenSeparators[l],a=e.indexOf(d),!(a>=0));l++);if(0>a)break;if(o=e.substring(0,a),e=e.substring(a+d.length),o.length>0&&(o=s.createSearchChoice.call(this,o,n),o!==t&&null!==o&&s.id(o)!==t&&null!==s.id(o))){for(h=!1,l=0,c=n.length;c>l;l++)if(r(s.id(o),s.id(n[l]))){h=!0;break}h||i(o)}}return u!==e?e:void 0}function E(){var t=this;e.each(arguments,function(e,n){t[n].remove(),t[n]=null})}function M(t,n){var i=function(){};return i.prototype=new t,i.prototype.constructor=i,i.prototype.parent=t.prototype,i.prototype=e.extend(i.prototype,n),i}if(window.Select2===t){var A,N,F,O,j,I,P,V={x:0,y:0},R={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case R.LEFT:case R.RIGHT:case R.UP:case R.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case R.SHIFT:case R.CTRL:case R.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e}},B="<div class='select2-measure-scrollbar'></div>",L={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};I=e(document),O=function(){var e=1;return function(){return e++}}(),A=M(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(n){var i,s,r=".select2-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==t&&null!==n.element.data("select2")&&n.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=e(".select2-hidden-accessible"),0==this.liveRegion.length&&(this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+O()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",n.element.attr("title")),this.body=e(document.body),y(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",n.element.attr("style")),this.container.css(S(n.containerCss,this.opts.element)),this.container.addClass(S(n.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",m),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),y(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(S(n.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",m),this.results=i=this.container.find(r),this.search=s=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",m),d(this.results),this.dropdown.on("mousemove-filtered",r,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",r,this.bind(function(e){this._touchEvent=!0,this.highlightUnderEvent(e)})),this.dropdown.on("touchmove",r,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",r,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),h(80,this.results),this.dropdown.on("scroll-debounced",r,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&i.mousewheel(function(e,t,n,s){var o=i.scrollTop();s>0&&0>=o-s?(i.scrollTop(0),m(e)):0>s&&i.get(0).scrollHeight-i.scrollTop()+s<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),m(e))}),c(s),s.on("keyup-change input paste",this.bind(this.updateResults)),s.on("focus",function(){s.addClass("select2-focused")}),s.on("blur",function(){s.removeClass("select2-focused")}),this.dropdown.on("mouseup",r,this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(e){e.stopPropagation()}),this.nextSearchTerm=t,e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==n.maximumInputLength&&this.search.attr("maxlength",n.maximumInputLength);var a=n.element.prop("disabled");a===t&&(a=!1),this.enable(!a);var l=n.element.prop("readonly");l===t&&(l=!1),this.readonly(l),P=P||o(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",n.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,n=e.data("select2"),i=this;this.close(),e.length&&e[0].detachEvent&&i._sync&&e.each(function(){i._sync&&this.detachEvent("onpropertychange",i._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,n!==t&&(n.container.remove(),n.liveRegion.remove(),n.dropdown.remove(),e.show().removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show()),E.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:r(e.attr("locked"),"locked")||r(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(n){var i,s,o,l,c=this;if(i=n.element,"select"===i.get(0).tagName.toLowerCase()&&(this.select=s=n.element),s&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),n=e.extend({},{populateResults:function(i,s,o){var r,a=this.opts.id,l=this.liveRegion;(r=function(i,s,d){var u,h,p,f,m,v,g,y,b,w;i=n.sortResults(i,s,o);var x=[];for(u=0,h=i.length;h>u;u+=1)p=i[u],m=p.disabled===!0,f=!m&&a(p)!==t,v=p.children&&p.children.length>0,g=e("<li></li>"),g.addClass("select2-results-dept-"+d),g.addClass("select2-result"),g.addClass(f?"select2-result-selectable":"select2-result-unselectable"),m&&g.addClass("select2-disabled"),v&&g.addClass("select2-result-with-children"),g.addClass(c.opts.formatResultCssClass(p)),g.attr("role","presentation"),y=e(document.createElement("div")),y.addClass("select2-result-label"),y.attr("id","select2-result-label-"+O()),y.attr("role","option"),w=n.formatResult(p,y,o,c.opts.escapeMarkup),w!==t&&(y.html(w),g.append(y)),v&&(b=e("<ul></ul>"),b.addClass("select2-result-sub"),r(p.children,b,d+1),g.append(b)),g.data("select2-data",p),x.push(g[0]);s.append(x),l.text(n.formatMatches(i.length))})(s,i,0)}},e.fn.select2.defaults,n),"function"!=typeof n.id&&(o=n.id,n.id=function(e){return e[o]}),e.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}if(s?(n.query=this.bind(function(e){var n,s,o,r={results:[],more:!1},a=e.term;o=function(t,n){var i;t.is("option")?e.matcher(a,t.text(),t)&&n.push(c.optionToData(t)):t.is("optgroup")&&(i=c.optionToData(t),t.children().each2(function(e,t){o(t,i.children)}),i.children.length>0&&n.push(i))},n=i.children(),this.getPlaceholder()!==t&&n.length>0&&(s=this.getPlaceholderOption(),s&&(n=n.not(s))),n.each2(function(e,t){o(t,r.results)}),e.callback(r)}),n.id=function(e){return e.id}):"query"in n||("ajax"in n?(l=n.element.data("ajax-url"),l&&l.length>0&&(n.ajax.url=l),n.query=x.call(n.element,n.ajax)):"data"in n?n.query=C(n.data):"tags"in n&&(n.query=T(n.tags),n.createSearchChoice===t&&(n.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),n.initSelection===t&&(n.initSelection=function(t,i){var s=[];e(a(t.val(),n.separator,n.transformVal)).each(function(){var t={id:this,text:this},i=n.tags;e.isFunction(i)&&(i=i()),e(i).each(function(){return r(this.id,t.id)?(t=this,!1):void 0}),s.push(t)}),i(s)}))),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");if("top"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.unshift(t)};else if("bottom"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.push(t)};else if("function"!=typeof n.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return n},monitorSource:function(){var n,i=this.opts.element,s=this;i.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),this._sync=this.bind(function(){var e=i.prop("disabled");e===t&&(e=!1),this.enable(!e);var n=i.prop("readonly");n===t&&(n=!1),this.readonly(n),this.container&&(y(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(S(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(y(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(S(this.opts.dropdownCssClass,this.opts.element)))}),i.length&&i[0].attachEvent&&i.each(function(){this.attachEvent("onpropertychange",s._sync)}),n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,n!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new n(function(t){e.each(t,s._sync)}),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var n=e.Event("select2-selecting",{val:this.id(t),object:t,choice:t});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){e===t&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):!1},positionDropdown:function(){var t,n,i,s,o,r=this.dropdown,a=this.container,l=a.offset(),c=a.outerHeight(!1),d=a.outerWidth(!1),u=r.outerHeight(!1),h=e(window),p=h.width(),f=h.height(),m=h.scrollLeft()+p,v=h.scrollTop()+f,g=l.top+c,y=l.left,b=v>=g+u,w=l.top-u>=h.scrollTop(),x=r.outerWidth(!1),C=function(){return m>=y+x},T=function(){return l.left+m+a.outerWidth(!1)>x},k=r.hasClass("select2-drop-above");k?(n=!0,!w&&b&&(i=!0,n=!1)):(n=!1,!b&&w&&(i=!0,n=!0)),i&&(r.hide(),l=this.container.offset(),c=this.container.outerHeight(!1),d=this.container.outerWidth(!1),u=r.outerHeight(!1),m=h.scrollLeft()+p,v=h.scrollTop()+f,g=l.top+c,y=l.left,x=r.outerWidth(!1),r.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(o=e(".select2-results",r)[0],r.addClass("select2-drop-auto-width"),r.css("width",""),x=r.outerWidth(!1)+(o.scrollHeight===o.clientHeight?0:P.width),x>d?d=x:x=d,u=r.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(t=this.body.offset(),g-=t.top,y-=t.left),!C()&&T()&&(y=l.left+this.container.outerWidth(!1)-x),s={left:y,width:d},n?(s.top=l.top-u,s.bottom="auto",this.container.addClass("select2-drop-above"),r.addClass("select2-drop-above")):(s.top=g,s.bottom="auto",this.container.removeClass("select2-drop-above"),r.removeClass("select2-drop-above")),s=e.extend(s,S(this.opts.dropdownCss,this.opts.element)),r.css(s)
},shouldOpen:function(){var t;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),I.on("mousemove.select2Event",function(e){V.x=e.pageX,V.y=e.pageY}),!0):!1},opening:function(){var t,i=this.containerEventName,s="scroll."+i,o="resize."+i,r="orientationchange."+i;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),t=e("#select2-drop-mask"),0===t.length&&(t=e(document.createElement("div")),t.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),t.hide(),t.appendTo(this.body),t.on("mousedown touchstart click",function(i){n(t);var s,o=e("#select2-drop");o.length>0&&(s=o.data("select2"),s.opts.selectOnBlur&&s.selectHighlighted({noFocus:!0}),s.close(),i.preventDefault(),i.stopPropagation())})),this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),t.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var a=this;this.container.parents().add(window).each(function(){e(this).on(o+" "+s+" "+r,function(){a.opened()&&a.positionDropdown()})})},close:function(){if(this.opened()){var t=this.containerEventName,n="scroll."+t,i="resize."+t,s="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(n).off(i).off(s)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),I.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return S(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var t,n,i,s,o,r,a,l,c=this.results;if(n=this.highlight(),!(0>n)){if(0==n)return void c.scrollTop(0);t=this.findHighlightableChoices().find(".select2-result-label"),i=e(t[n]),l=(i.offset()||{}).top||0,s=l+i.outerHeight(!0),n===t.length-1&&(a=c.find("li.select2-more-results"),a.length>0&&(s=a.offset().top+a.outerHeight(!0))),o=c.offset().top+c.outerHeight(!1),s>o&&c.scrollTop(c.scrollTop()+(s-o)),r=l-c.offset().top,0>r&&"none"!=i.css("display")&&c.scrollTop(c.scrollTop()+r)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(t){for(var n=this.findHighlightableChoices(),i=this.highlight();i>-1&&i<n.length;){i+=t;var s=e(n[i]);if(s.hasClass("select2-result-selectable")&&!s.hasClass("select2-disabled")&&!s.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(t){var n,i,o=this.findHighlightableChoices();return 0===arguments.length?s(o.filter(".select2-highlighted")[0],o.get()):(t>=o.length&&(t=o.length-1),0>t&&(t=0),this.removeHighlight(),n=e(o[t]),n.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",n.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(n.text()),i=n.data("select2-data"),void(i&&this.opts.element.trigger({type:"select2-highlight",val:this.id(i),choice:i})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var n=e(t.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(n))}else 0==n.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e,t=this.results,n=t.find("li.select2-more-results"),i=this.resultsPage+1,s=this,o=this.search.val(),r=this.context;0!==n.length&&(e=n.offset().top-t.offset().top-t.height(),e<=this.opts.loadMorePadding&&(n.addClass("select2-active"),this.opts.query({element:this.opts.element,term:o,page:i,context:r,matcher:this.opts.matcher,callback:this.bind(function(e){s.opened()&&(s.opts.populateResults.call(this,t,e.results,{term:o,page:i,context:r}),s.postprocessResults(e,!1,!1),e.more===!0?(n.detach().appendTo(t).html(s.opts.escapeMarkup(S(s.opts.formatLoadMore,s.opts.element,i+1))),window.setTimeout(function(){s.loadMoreIfNeeded()},10)):n.remove(),s.positionDropdown(),s.resultsPage=i,s.context=e.context,this.opts.element.trigger({type:"select2-loaded",items:e}))})})))},tokenize:function(){},updateResults:function(n){function i(){c.removeClass("select2-active"),h.positionDropdown(),h.liveRegion.text(d.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?d.text():h.opts.formatMatches(d.find('.select2-result-selectable:not(".select2-selected")').length))}function s(e){d.html(e),i()}var o,a,l,c=this.search,d=this.results,u=this.opts,h=this,p=c.val(),f=e.data(this.container,"select2-last-term");if((n===!0||!f||!r(p,f))&&(e.data(this.container,"select2-last-term",p),n===!0||this.showSearchInput!==!1&&this.opened())){l=++this.queryCount;var m=this.getMaximumSelectionSize();if(m>=1&&(o=this.data(),e.isArray(o)&&o.length>=m&&k(u.formatSelectionTooBig,"formatSelectionTooBig")))return void s("<li class='select2-selection-limit'>"+S(u.formatSelectionTooBig,u.element,m)+"</li>");if(c.val().length<u.minimumInputLength)return s(k(u.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+S(u.formatInputTooShort,u.element,c.val(),u.minimumInputLength)+"</li>":""),void(n&&this.showSearch&&this.showSearch(!0));if(u.maximumInputLength&&c.val().length>u.maximumInputLength)return void s(k(u.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+S(u.formatInputTooLong,u.element,c.val(),u.maximumInputLength)+"</li>":"");u.formatSearching&&0===this.findHighlightableChoices().length&&s("<li class='select2-searching'>"+S(u.formatSearching,u.element)+"</li>"),c.addClass("select2-active"),this.removeHighlight(),a=this.tokenize(),a!=t&&null!=a&&c.val(a),this.resultsPage=1,u.query({element:u.element,term:c.val(),page:this.resultsPage,context:null,matcher:u.matcher,callback:this.bind(function(o){var a;if(l==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(o.hasError!==t&&k(u.formatAjaxError,"formatAjaxError"))return void s("<li class='select2-ajax-error'>"+S(u.formatAjaxError,u.element,o.jqXHR,o.textStatus,o.errorThrown)+"</li>");if(this.context=o.context===t?null:o.context,this.opts.createSearchChoice&&""!==c.val()&&(a=this.opts.createSearchChoice.call(h,c.val(),o.results),a!==t&&null!==a&&h.id(a)!==t&&null!==h.id(a)&&0===e(o.results).filter(function(){return r(h.id(this),h.id(a))}).length&&this.opts.createSearchChoicePosition(o.results,a)),0===o.results.length&&k(u.formatNoMatches,"formatNoMatches"))return void s("<li class='select2-no-results'>"+S(u.formatNoMatches,u.element,c.val())+"</li>");d.empty(),h.opts.populateResults.call(this,d,o.results,{term:c.val(),page:this.resultsPage,context:null}),o.more===!0&&k(u.formatLoadMore,"formatLoadMore")&&(d.append("<li class='select2-more-results'>"+u.escapeMarkup(S(u.formatLoadMore,u.element,this.resultsPage))+"</li>"),window.setTimeout(function(){h.loadMoreIfNeeded()},10)),this.postprocessResults(o,n),i(),this.opts.element.trigger({type:"select2-loaded",items:o})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){p(this.search)},selectHighlighted:function(e){if(this._touchMoved)return void this.clearTouchMoved();var t=this.highlight(),n=this.results.find(".select2-highlighted"),i=n.closest(".select2-result").data("select2-data");i?(this.highlight(t),this.onSelect(i,e)):e&&e.noFocus&&this.close()},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var n=this.select.children("option").first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&n||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.trim(n.text())&&""===n.val())return n}},initContainerWidth:function(){function n(){var n,i,s,o,r,a;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(n=this.opts.element.attr("style"),n!==t)for(i=n.split(";"),o=0,r=i.length;r>o;o+=1)if(a=i[o].replace(/\s/g,""),s=a.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==s&&s.length>=1)return s[1];return"resolve"===this.opts.width?(n=this.opts.element.css("width"),n.indexOf("%")>0?n:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var i=n.call(this);null!==i&&this.container.css("width",i)}}),N=M(A,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return t},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var n,i,s;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),n=this.search.get(0),n.createTextRange?(i=n.createTextRange(),i.collapse(!1),i.select()):n.setSelectionRange&&(s=this.search.val().length,n.setSelectionRange(s,s))),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),E.call(this,"selection","focusser")},initContainer:function(){var t,i,s=this.container,o=this.dropdown,r=O();this.showSearch(this.opts.minimumResultsForSearch<0?!1:!0),this.selection=t=s.find(".select2-choice"),this.focusser=s.find(".select2-focusser"),t.find(".select2-chosen").attr("id","select2-chosen-"+r),this.focusser.attr("aria-labelledby","select2-chosen-"+r),this.results.attr("id","select2-results-"+r),this.search.attr("aria-owns","select2-results-"+r),this.focusser.attr("id","s2id_autogen"+r),i=e("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.focus(this.bind(function(){this.focus()})),this.focusser.prev().text(i.text()).attr("for",this.focusser.attr("id"));var a=this.opts.element.attr("title");this.opts.element.attr("title",a||i.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(e("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&229!=e.keyCode){if(e.which===R.PAGE_UP||e.which===R.PAGE_DOWN)return void m(e);switch(e.which){case R.UP:case R.DOWN:return this.moveHighlight(e.which===R.UP?-1:1),void m(e);case R.ENTER:return this.selectHighlighted(),void m(e);case R.TAB:return void this.selectHighlighted({noFocus:!0});case R.ESC:return this.cancel(e),void m(e)}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==R.TAB&&!R.isControl(e)&&!R.isFunctionKey(e)&&e.which!==R.ESC){if(this.opts.openOnEnter===!1&&e.which===R.ENTER)return void m(e);if(e.which==R.DOWN||e.which==R.UP||e.which==R.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void m(e)}return e.which==R.DELETE||e.which==R.BACKSPACE?(this.opts.allowClear&&this.clear(),void m(e)):void 0}})),c(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}})),t.on("mousedown touchstart","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),v(e),this.close(),this.selection&&this.selection.focus())})),t.on("mousedown touchstart",this.bind(function(i){n(t),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),m(i)})),o.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),t.on("focus",this.bind(function(e){m(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(t){var n=this.selection.data("select2-data");if(n){var i=e.Event("select2-clearing");if(this.opts.element.trigger(i),i.isDefaultPrevented())return;var s=this.getPlaceholderOption();this.opts.element.val(s?s.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),t!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.setPlaceholder(),e.nextSearchTerm=e.opts.nextSearchTerm(n,e.search.val()))})}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()===t?!1:(e=this.getPlaceholderOption())!==t&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val()},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=e.find("option").filter(function(){return this.selected&&!this.disabled});t(n.optionToData(i))}:"data"in t&&(t.initSelection=t.initSelection||function(n,i){var s=n.val(),o=null;t.query({matcher:function(e,n,i){var a=r(s,t.id(i));return a&&(o=i),a},callback:e.isFunction(i)?function(){i(o)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,n){var i=0,s=this;if(this.findHighlightableChoices().each2(function(e,t){return r(s.id(t.data("select2-data")),s.opts.element.val())?(i=e,!1):void 0}),n!==!1&&this.highlight(t===!0&&i>=0?i:0),t===!0){var o=this.opts.minimumResultsForSearch;o>=0&&this.showSearch(_(e.results)>=o)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var n=this.opts.element.val(),i=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),t&&t.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),r(n,this.id(e))||this.triggerChange({added:e,removed:i})}},updateSelection:function(e){var n,i,s=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),s.empty(),null!==e&&(n=this.opts.formatSelection(e,s,this.opts.escapeMarkup)),n!==t&&s.append(n),i=this.opts.formatSelectionCssClass(e,s),i!==t&&s.addClass(i),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,n=!1,i=null,s=this,o=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(n=arguments[1]),this.select)this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return i=s.optionToData(t),!1}),this.updateSelection(i),this.setPlaceholder(),n&&this.triggerChange({added:i,removed:o});else{if(!e&&0!==e)return void this.clear(n);if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){s.opts.element.val(e?s.id(e):""),s.updateSelection(e),s.setPlaceholder(),n&&s.triggerChange({added:e,removed:o})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var n,i=!1;return 0===arguments.length?(n=this.selection.data("select2-data"),n==t&&(n=null),n):(arguments.length>1&&(i=arguments[1]),void(e?(n=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),i&&this.triggerChange({added:e,removed:n})):this.clear(i)))}}),F=M(A,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=[];e.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(e,t){i.push(n.optionToData(t))}),t(i)}:"data"in t&&(t.initSelection=t.initSelection||function(n,i){var s=a(n.val(),t.separator,t.transformVal),o=[];t.query({matcher:function(n,i,a){var l=e.grep(s,function(e){return r(e,t.id(a))}).length;return l&&o.push(a),l},callback:e.isFunction(i)?function(){for(var e=[],n=0;n<s.length;n++)for(var a=s[n],l=0;l<o.length;l++){var c=o[l];if(r(a,t.id(c))){e.push(c),o.splice(l,1);break}}i(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),E.call(this,"searchContainer","selection")},initContainer:function(){var t,n=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(n);var i=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(){i.search[0].focus(),i.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+O()),this.search.prev().text(e("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.focus(this.bind(function(){this.focus()})),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var n=t.find(".select2-search-choice-focus"),i=n.prev(".select2-search-choice:not(.select2-locked)"),s=n.next(".select2-search-choice:not(.select2-locked)"),o=f(this.search);if(n.length&&(e.which==R.LEFT||e.which==R.RIGHT||e.which==R.BACKSPACE||e.which==R.DELETE||e.which==R.ENTER)){var r=n;return e.which==R.LEFT&&i.length?r=i:e.which==R.RIGHT?r=s.length?s:null:e.which===R.BACKSPACE?this.unselect(n.first())&&(this.search.width(10),r=i.length?i:s):e.which==R.DELETE?this.unselect(n.first())&&(this.search.width(10),r=s.length?s:null):e.which==R.ENTER&&(r=null),this.selectChoice(r),m(e),void(r&&r.length||this.open())}if((e.which===R.BACKSPACE&&1==this.keydowns||e.which==R.LEFT)&&0==o.offset&&!o.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),void m(e);if(this.selectChoice(null),this.opened())switch(e.which){case R.UP:case R.DOWN:return this.moveHighlight(e.which===R.UP?-1:1),void m(e);case R.ENTER:return this.selectHighlighted(),void m(e);case R.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case R.ESC:return this.cancel(e),void m(e)}if(e.which!==R.TAB&&!R.isControl(e)&&!R.isFunctionKey(e)&&e.which!==R.BACKSPACE&&e.which!==R.ESC){if(e.which===R.ENTER){if(this.opts.openOnEnter===!1)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===R.PAGE_UP||e.which===R.PAGE_DOWN)&&m(e),e.which===R.ENTER&&m(e)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",n,this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.on("focus",n,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),n=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var n=[],i=[],o=this;e(t).each(function(){s(o.id(this),n)<0&&(n.push(o.id(this)),i.push(this))}),t=i,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){o.addSelectedChoice(this)}),o.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts),null!=e&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,n){this.triggerSelect(e)&&""!==e.text&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(e,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),n&&n.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var i,s,o=!n.locked,r=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),a=e("<li class='select2-search-choice select2-locked'><div></div></li>"),l=o?r:a,c=this.id(n),d=this.getVal();i=this.opts.formatSelection(n,l.find("div"),this.opts.escapeMarkup),i!=t&&l.find("div").replaceWith(e("<div></div>").html(i)),s=this.opts.formatSelectionCssClass(n,l.find("div")),s!=t&&l.addClass(s),o&&l.find(".select2-search-choice-close").on("mousedown",m).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),m(t),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),l.data("select2-data",n),l.insertBefore(this.searchContainer),d.push(c),this.setVal(d)},unselect:function(t){var n,i,o=this.getVal();if(t=t.closest(".select2-search-choice"),0===t.length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(n=t.data("select2-data")){var r=e.Event("select2-removing");if(r.val=this.id(n),r.choice=n,this.opts.element.trigger(r),r.isDefaultPrevented())return!1;for(;(i=s(this.id(n),o))>=0;)o.splice(i,1),this.setVal(o),this.select&&this.postprocessResults();return t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}),!0}},postprocessResults:function(e,t,n){var i=this.getVal(),o=this.results.find(".select2-result"),r=this.results.find(".select2-result-with-children"),a=this;o.each2(function(e,t){var n=a.id(t.data("select2-data"));s(n,i)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),r.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&n!==!1&&this.opts.closeOnSelect===!0&&a.highlight(0),!this.opts.createSearchChoice&&!o.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&k(a.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+S(a.opts.formatNoMatches,a.opts.element,a.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-l(this.search)},resizeSearch:function(){var e,t,n,i,s,o=l(this.search);e=g(this.search)+10,t=this.search.offset().left,n=this.selection.width(),i=this.selection.offset().left,s=n-(t-i)-o,e>s&&(s=n-o),40>s&&(s=n-o),0>=s&&(s=e),this.search.width(Math.floor(s))},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),a(e,this.opts.separator,this.opts.transformVal))},setVal:function(t){var n;this.select?this.select.val(t):(n=[],e(t).each(function(){s(this,n)<0&&n.push(this)}),this.opts.element.val(0===n.length?"":n.join(this.opts.separator)))},buildChangeDetails:function(e,t){for(var t=t.slice(0),e=e.slice(0),n=0;n<t.length;n++)for(var i=0;i<e.length;i++)r(this.opts.id(t[n]),this.opts.id(e[i]))&&(t.splice(n,1),n>0&&n--,e.splice(i,1),i--);return{added:t,removed:e}},val:function(n,i){var s,o=this;if(0===arguments.length)return this.getVal();if(s=this.data(),s.length||(s=[]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(i&&this.triggerChange({added:this.data(),removed:s}));if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(s,this.data()));
else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var n=e.map(t,o.id);o.setVal(n),o.updateSelection(t),o.clearSearch(),i&&o.triggerChange(o.buildChangeDetails(s,o.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(n.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t,n){var i,s,o=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(s=this.data(),t||(t=[]),i=e.map(t,function(e){return o.opts.id(e)}),this.setVal(i),this.updateSelection(t),this.clearSearch(),n&&this.triggerChange(this.buildChangeDetails(s,this.data())),void 0)}}),e.fn.select2=function(){var n,i,o,r,a,l=Array.prototype.slice.call(arguments,0),c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],d=["opened","isFocused","container","dropdown"],u=["val","data"],h={search:"externalSearch"};return this.each(function(){if(0===l.length||"object"==typeof l[0])n=0===l.length?{}:e.extend({},l[0]),n.element=e(this),"select"===n.element.get(0).tagName.toLowerCase()?a=n.element.prop("multiple"):(a=n.multiple||!1,"tags"in n&&(n.multiple=a=!0)),i=a?new window.Select2["class"].multi:new window.Select2["class"].single,i.init(n);else{if("string"!=typeof l[0])throw"Invalid arguments to select2 plugin: "+l;if(s(l[0],c)<0)throw"Unknown method: "+l[0];if(r=t,i=e(this).data("select2"),i===t)return;if(o=l[0],"container"===o?r=i.container:"dropdown"===o?r=i.dropdown:(h[o]&&(o=h[o]),r=i[o].apply(i,l.slice(1))),s(l[0],d)>=0||s(l[0],u)>=0&&1==l.length)return!1}}),r===t?this:r},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,n,i){var s=[];return b(this.text(e),n.term,s,i),s.join("")},transformVal:function(t){return e.trim(t)},formatSelection:function(e,n,i){return e?i(this.text(e)):t},sortResults:function(e){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(){return t},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==t?null:e.id},text:function(t){return t&&this.data&&this.data.text?e.isFunction(this.data.text)?this.data.text(t):t[this.data.text]:t.text},matcher:function(e,t){return i(""+t).toUpperCase().indexOf(i(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:D,escapeMarkup:w,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return t},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){var t="ontouchstart"in window||navigator.msMaxTouchPoints>0;return t&&e.opts.minimumResultsForSearch<0?!1:!0}},e.fn.select2.locales=[],e.fn.select2.locales.en={formatMatches:function(e){return 1===e?"One result is available, press enter to select it.":e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(){return"Loading failed"},formatInputTooShort:function(e,t){var n=t-e.length;return"Please enter "+n+" or more character"+(1==n?"":"s")},formatInputTooLong:function(e,t){var n=e.length-t;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results…"},formatSearching:function(){return"Searching…"}},e.extend(e.fn.select2.defaults,e.fn.select2.locales.en),e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:x,local:C,tags:T},util:{debounce:u,markMatch:b,escapeMarkup:w,stripDiacritics:i},"class":{"abstract":A,single:N,multi:F}}}}(jQuery),define("select2",["jquery"],function(e){return function(){var t;return t||e.jquery}}(this));var context=context||function(){function e(e){o=$.extend({},o,e),$(document).on("click","html",function(){$(".dropdown-context").removeData("contextTarget"),$(".dropdown-context").fadeOut(o.fadeSpeed,function(){$(".dropdown-context").css({display:""}).find(".drop-left").removeClass("drop-left")})}),o.preventDoubleContext&&$(document).on("contextmenu",".dropdown-context",function(e){e.preventDefault()}),$(document).on("mouseenter",".dropdown-submenu",function(){var e=$(this).find(".dropdown-context-sub:first"),t=e.width(),n=e.offset().left,i=t+n>window.innerWidth;i&&e.addClass("drop-left")})}function t(e){o=$.extend({},o,e)}function n(e,t,i){var s,r=i?" dropdown-context-sub":"",a=o.compress?" compressed-context":"",l=$('<ul class="dropdown-menu dropdown-context'+r+a+'" id="dropdown-'+t+'"></ul>'),c="";for(s=0;s<e.length;s++){if("undefined"!=typeof e[s].divider)l.append('<li class="divider"></li>');else if("undefined"!=typeof e[s].header)l.append('<li class="nav-header">'+e[s].header+"</li>");else if("undefined"==typeof e[s].href&&(e[s].href="#"),"undefined"!=typeof e[s].target&&(c=' target="'+e[s].target+'"'),$sub="undefined"!=typeof e[s].subMenu?'<li class="dropdown-submenu"><a tabindex="-1" href="'+e[s].href+'">'+e[s].text+"</a></li>":$('<li><a tabindex="-1" href="'+e[s].href+'"'+c+">"+e[s].text+"</a></li>"),"undefined"!=typeof e[s].action&&$sub.find("a").addClass("context-event").on("click",e[s].action),l.append($sub),"undefined"!=typeof e[s].subMenu){var d=n(e[s].subMenu,t,!0);l.find("li:last").append(d)}"function"==typeof o.filter&&o.filter(l.find("li:last"))}return l}function i(e,t){var i=new Date,s=i.getTime(),r=n(t,s);$("body").append(r),$(document).on("contextmenu",e,function(e){if(e.preventDefault(),e.stopPropagation(),$(".dropdown-context:not(.dropdown-context-sub)").hide(),$dd=$("#dropdown-"+s),$dd.data("contextTarget",e.target),"boolean"==typeof o.above&&o.above)$dd.addClass("dropdown-context-up").css({top:e.pageY-20-$("#dropdown-"+s).height(),left:e.pageX-13}).fadeIn(o.fadeSpeed);else if("string"==typeof o.above&&"auto"==o.above){$dd.removeClass("dropdown-context-up");var t=$dd.height()+12;e.pageY+t>$("html").height()?$dd.addClass("dropdown-context-up").css({top:e.pageY-20-t,left:e.pageX-13}).fadeIn(o.fadeSpeed):$dd.css({top:e.pageY+10,left:e.pageX-13}).fadeIn(o.fadeSpeed)}})}function s(e){$(document).off("contextmenu",e).off("click",".context-event")}var o={fadeSpeed:100,filter:function(){},above:"auto",preventDoubleContext:!0,compress:!1};return{init:e,settings:t,attach:i,destroy:s}}();define("contextjs",function(){}),function(e){"object"==typeof module&&"object"==typeof module.exports?module.exports=e(window.Velocity?window.jQuery:require("jquery")):"function"==typeof define&&define.amd?define("velocity",e):e()}(function(){var e=window.jQuery;return function(t,n,i,s){function o(e){for(var t=-1,n=e?e.length:0,i=[];++t<n;){var s=e[t];s&&i.push(s)}return i}function r(e){return g.isNode(e)?[e]:e}function a(e){var t=p.data(e,"velocity");return null===t?s:t}function l(e){return function(t){return Math.round(t*e)*(1/e)}}function c(e,t,i,s){function o(e,t){return 1-3*t+3*e}function r(e,t){return 3*t-6*e}function a(e){return 3*e}function l(e,t,n){return((o(t,n)*e+r(t,n))*e+a(t))*e}function c(e,t,n){return 3*o(t,n)*e*e+2*r(t,n)*e+a(t)}function d(t,n){for(var s=0;m>s;++s){var o=c(n,e,i);if(0===o)return n;var r=l(n,e,i)-t;n-=r/o}return n}function u(){for(var t=0;b>t;++t)T[t]=l(t*w,e,i)}function h(t,n,s){var o,r,a=0;do r=n+(s-n)/2,o=l(r,e,i)-t,o>0?s=r:n=r;while(Math.abs(o)>g&&++a<y);return r}function p(t){for(var n=0,s=1,o=b-1;s!=o&&T[s]<=t;++s)n+=w;--s;var r=(t-T[s])/(T[s+1]-T[s]),a=n+r*w,l=c(a,e,i);return l>=v?d(t,a):0==l?a:h(t,n,n+w)}function f(){k=!0,(e!=t||i!=s)&&u()}var m=4,v=.001,g=1e-7,y=10,b=11,w=1/(b-1),x="Float32Array"in n;if(4!==arguments.length)return!1;for(var C=0;4>C;++C)if("number"!=typeof arguments[C]||isNaN(arguments[C])||!isFinite(arguments[C]))return!1;e=Math.min(e,1),i=Math.min(i,1),e=Math.max(e,0),i=Math.max(i,0);var T=x?new Float32Array(b):new Array(b),k=!1,S=function(n){return k||f(),e===t&&i===s?n:0===n?0:1===n?1:l(p(n),t,s)};S.getControlPoints=function(){return[{x:e,y:t},{x:i,y:s}]};var _="generateBezier("+[e,t,i,s]+")";return S.toString=function(){return _},S}function d(e,t){var n=e;return g.isString(e)?w.Easings[e]||(n=!1):n=g.isArray(e)&&1===e.length?l.apply(null,e):g.isArray(e)&&2===e.length?x.apply(null,e.concat([t])):g.isArray(e)&&4===e.length?c.apply(null,e):!1,n===!1&&(n=w.Easings[w.defaults.easing]?w.defaults.easing:b),n}function u(e){if(e)for(var t=(new Date).getTime(),n=0,i=w.State.calls.length;i>n;n++)if(w.State.calls[n]){var o=w.State.calls[n],r=o[0],l=o[2],c=o[3];c||(c=w.State.calls[n][3]=t-16);for(var d=Math.min((t-c)/l.duration,1),p=0,m=r.length;m>p;p++){var y=r[p],b=y.element;if(a(b)){var x=!1;l.display!==s&&null!==l.display&&"none"!==l.display&&("flex"===l.display&&C.setPropertyValue(b,"display",(f?"-ms-":"-webkit-")+l.display),C.setPropertyValue(b,"display",l.display)),l.visibility&&"hidden"!==l.visibility&&C.setPropertyValue(b,"visibility",l.visibility);for(var T in y)if("element"!==T){var k,S=y[T],_=g.isString(S.easing)?w.Easings[S.easing]:S.easing;if(k=1===d?S.endValue:S.startValue+(S.endValue-S.startValue)*_(d),S.currentValue=k,C.Hooks.registered[T]){var D=C.Hooks.getRoot(T),E=a(b).rootPropertyValueCache[D];E&&(S.rootPropertyValue=E)}var M=C.setPropertyValue(b,T,S.currentValue+(0===parseFloat(k)?"":S.unitType),S.rootPropertyValue,S.scrollData);C.Hooks.registered[T]&&(a(b).rootPropertyValueCache[D]=C.Normalizations.registered[D]?C.Normalizations.registered[D]("extract",null,M[1]):M[1]),"transform"===M[0]&&(x=!0)}l.mobileHA&&a(b).transformCache.translate3d===s&&(a(b).transformCache.translate3d="(0px, 0px, 0px)",x=!0),x&&C.flushTransformCache(b)}}l.display!==s&&"none"!==l.display&&(w.State.calls[n][2].display=!1),l.visibility&&"hidden"!==l.visibility&&(w.State.calls[n][2].visibility=!1),l.progress&&l.progress.call(o[1],o[1],d,Math.max(0,c+l.duration-t),c),1===d&&h(n)}w.State.isTicking&&v(u)}function h(e,t){if(!w.State.calls[e])return!1;for(var n=w.State.calls[e][0],i=w.State.calls[e][1],o=w.State.calls[e][2],r=w.State.calls[e][4],l=!1,c=0,d=n.length;d>c;c++){var u=n[c].element;if(t||o.loop||("none"===o.display&&C.setPropertyValue(u,"display",o.display),"hidden"===o.visibility&&C.setPropertyValue(u,"visibility",o.visibility)),(p.queue(u)[1]===s||!/\.velocityQueueEntryFlag/i.test(p.queue(u)[1]))&&a(u)){a(u).isAnimating=!1,a(u).rootPropertyValueCache={};var h=!1;p.each(C.Lists.transforms3D,function(e,t){var n=/^scale/.test(t)?1:0,i=a(u).transformCache[t];a(u).transformCache[t]!==s&&new RegExp("^\\("+n+"[^.]").test(i)&&(h=!0,delete a(u).transformCache[t])}),o.mobileHA&&(h=!0,delete a(u).transformCache.translate3d),h&&C.flushTransformCache(u),C.Values.removeClass(u,"velocity-animating")}if(!t&&o.complete&&!o.loop&&c===d-1)try{o.complete.call(i,i)}catch(f){setTimeout(function(){throw f},1)}r&&o.loop!==!0&&r(i),o.loop!==!0||t||w(u,"reverse",{loop:!0,delay:o.delay}),o.queue!==!1&&p.dequeue(u,o.queue)}w.State.calls[e]=!1;for(var m=0,v=w.State.calls.length;v>m;m++)if(w.State.calls[m]!==!1){l=!0;break}l===!1&&(w.State.isTicking=!1,delete w.State.calls,w.State.calls=[])}var p,f=function(){if(i.documentMode)return i.documentMode;for(var e=7;e>4;e--){var t=i.createElement("div");if(t.innerHTML="<!--[if IE "+e+"]><span></span><![endif]-->",t.getElementsByTagName("span").length)return t=null,e}return s}(),m=function(){var e=0;return n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||function(t){var n,i=(new Date).getTime();return n=Math.max(0,16-(i-e)),e=i+n,setTimeout(function(){t(i+n)},n)}}(),v=n.requestAnimationFrame||m,g={isString:function(e){return"string"==typeof e},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)},isNode:function(e){return e&&e.nodeType},isNodeList:function(e){return"object"==typeof e&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(e))&&e.length!==s&&(0===e.length||"object"==typeof e[0]&&e[0].nodeType>0)},isWrapped:function(e){return e&&(e.jquery||n.Zepto&&n.Zepto.zepto.isZ(e))},isSVG:function(e){return n.SVGElement&&e instanceof SVGElement},isEmptyObject:function(e){var t;for(t in e)return!1;return!0}};if(e&&e.fn!==s?p=e:n.Velocity&&n.Velocity.Utilities&&(p=n.Velocity.Utilities),!p)throw new Error("Velocity: Either jQuery or Velocity's jQuery shim must first be loaded.");if(t.Velocity!==s&&t.Velocity.Utilities==s)throw new Error("Velocity: Namespace is occupied.");if(7>=f){if(e)return void(e.fn.velocity=e.fn.animate);throw new Error("Velocity: In IE<=7, Velocity falls back to jQuery, which must first be loaded.")}if(8===f&&!e)throw new Error("Velocity: In IE8, Velocity requires jQuery proper to be loaded; Velocity's jQuery shim does not work with IE8.");var y=400,b="swing",w={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:n.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:i.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:p,Sequences:{},Easings:{},Promise:n.Promise,defaults:{queue:"",duration:y,easing:b,begin:null,complete:null,progress:null,display:s,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(e){p.data(e,"velocity",{isSVG:g.isSVG(e),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},animate:null,hook:null,mock:!1,version:{major:0,minor:11,patch:8},debug:!1};n.pageYOffset!==s?(w.State.scrollAnchor=n,w.State.scrollPropertyLeft="pageXOffset",w.State.scrollPropertyTop="pageYOffset"):(w.State.scrollAnchor=i.documentElement||i.body.parentNode||i.body,w.State.scrollPropertyLeft="scrollLeft",w.State.scrollPropertyTop="scrollTop");var x=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,n,i){var s={x:t.x+i.dx*n,v:t.v+i.dv*n,tension:t.tension,friction:t.friction};return{dx:s.v,dv:e(s)}}function n(n,i){var s={dx:n.v,dv:e(n)},o=t(n,.5*i,s),r=t(n,.5*i,o),a=t(n,i,r),l=1/6*(s.dx+2*(o.dx+r.dx)+a.dx),c=1/6*(s.dv+2*(o.dv+r.dv)+a.dv);return n.x=n.x+l*i,n.v=n.v+c*i,n}return function i(e,t,s){var o,r,a,l={x:-1,v:0,tension:null,friction:null},c=[0],d=0,u=1e-4,h=.016;for(e=parseFloat(e)||500,t=parseFloat(t)||20,s=s||null,l.tension=e,l.friction=t,o=null!==s,o?(d=i(e,t),r=d/s*h):r=h;;)if(a=n(a||l,r),c.push(1+a.x),d+=16,!(Math.abs(a.x)>u&&Math.abs(a.v)>u))break;return o?function(e){return c[e*(c.length-1)|0]}:d}}();w.Easings={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},spring:function(e){return 1-Math.cos(4.5*e*Math.PI)*Math.exp(6*-e)}},p.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(e,t){w.Easings[t[0]]=c.apply(null,t[1])});var C=w.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var e=0;e<C.Lists.colors.length;e++)C.Hooks.templates[C.Lists.colors[e]]=["Red Green Blue Alpha","255 255 255 1"];var t,n,i;if(f)for(t in C.Hooks.templates){n=C.Hooks.templates[t],i=n[0].split(" ");var s=n[1].match(C.RegEx.valueSplit);"Color"===i[0]&&(i.push(i.shift()),s.push(s.shift()),C.Hooks.templates[t]=[i.join(" "),s.join(" ")])}for(t in C.Hooks.templates){n=C.Hooks.templates[t],i=n[0].split(" ");for(var e in i){var o=t+i[e],r=e;C.Hooks.registered[o]=[t,r]}}},getRoot:function(e){var t=C.Hooks.registered[e];return t?t[0]:e},cleanRootPropertyValue:function(e,t){return C.RegEx.valueUnwrap.test(t)&&(t=t.match(C.Hooks.RegEx.valueUnwrap)[1]),C.Values.isCSSNullValue(t)&&(t=C.Hooks.templates[e][1]),t},extractValue:function(e,t){var n=C.Hooks.registered[e];if(n){var i=n[0],s=n[1];return t=C.Hooks.cleanRootPropertyValue(i,t),t.toString().match(C.RegEx.valueSplit)[s]}return t},injectValue:function(e,t,n){var i=C.Hooks.registered[e];if(i){var s,o,r=i[0],a=i[1];return n=C.Hooks.cleanRootPropertyValue(r,n),s=n.toString().match(C.RegEx.valueSplit),s[a]=t,o=s.join(" ")}return n}},Normalizations:{registered:{clip:function(e,t,n){switch(e){case"name":return"clip";case"extract":var i;return C.RegEx.wrappedValueAlreadyExtracted.test(n)?i=n:(i=n.toString().match(C.RegEx.valueUnwrap),i=i?i[1].replace(/,(\s+)?/g," "):n),i;case"inject":return"rect("+n+")"}},opacity:function(e,t,n){if(8>=f)switch(e){case"name":return"filter";case"extract":var i=n.toString().match(/alpha\(opacity=(.*)\)/i);return n=i?i[1]/100:1;case"inject":return t.style.zoom=1,parseFloat(n)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(n),10)+")"}else switch(e){case"name":return"opacity";case"extract":return n;case"inject":return n}}},register:function(){9>=f||w.State.isGingerbread||(C.Lists.transformsBase=C.Lists.transformsBase.concat(C.Lists.transforms3D));for(var e=0;e<C.Lists.transformsBase.length;e++)!function(){var t=C.Lists.transformsBase[e];C.Normalizations.registered[t]=function(e,n,i){switch(e){case"name":return"transform";case"extract":return a(n)===s||a(n).transformCache[t]===s?/^scale/i.test(t)?1:0:a(n).transformCache[t].replace(/[()]/g,"");case"inject":var o=!1;switch(t.substr(0,t.length-1)){case"translate":o=!/(%|px|em|rem|vw|vh|\d)$/i.test(i);break;case"scal":case"scale":w.State.isAndroid&&a(n).transformCache[t]===s&&1>i&&(i=1),o=!/(\d)$/i.test(i);break;case"skew":o=!/(deg|\d)$/i.test(i);break;case"rotate":o=!/(deg|\d)$/i.test(i)}return o||(a(n).transformCache[t]="("+i+")"),a(n).transformCache[t]}}}();for(var e=0;e<C.Lists.colors.length;e++)!function(){var t=C.Lists.colors[e];C.Normalizations.registered[t]=function(e,n,i){switch(e){case"name":return t;case"extract":var o;if(C.RegEx.wrappedValueAlreadyExtracted.test(i))o=i;else{var r,a={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(i)?r=a[i]!==s?a[i]:a.black:C.RegEx.isHex.test(i)?r="rgb("+C.Values.hexToRgb(i).join(" ")+")":/^rgba?\(/i.test(i)||(r=a.black),o=(r||i).toString().match(C.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return 8>=f||3!==o.split(" ").length||(o+=" 1"),o;case"inject":return 8>=f?4===i.split(" ").length&&(i=i.split(/\s+/).slice(0,3).join(" ")):3===i.split(" ").length&&(i+=" 1"),(8>=f?"rgb":"rgba")+"("+i.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})},SVGAttribute:function(e){var t="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(f||w.State.isAndroid&&!w.State.isChrome)&&(t+="|transform"),new RegExp("^("+t+")$","i").test(e)},prefixCheck:function(e){if(w.State.prefixMatches[e])return[w.State.prefixMatches[e],!0];for(var t=["","Webkit","Moz","ms","O"],n=0,i=t.length;i>n;n++){var s;if(s=0===n?e:t[n]+e.replace(/^\w/,function(e){return e.toUpperCase()}),g.isString(w.State.prefixElement.style[s]))return w.State.prefixMatches[e]=s,[s,!0]}return[e,!1]}},Values:{hexToRgb:function(e){var t,n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;return e=e.replace(n,function(e,t,n,i){return t+t+n+n+i+i}),t=i.exec(e),t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[0,0,0]},isCSSNullValue:function(e){return 0==e||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(e)},getUnitType:function(e){return/^(rotate|skew)/i.test(e)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(e)?"":"px"},getDisplayType:function(e){var t=e.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(t)?"inline":/^(li)$/i.test(t)?"list-item":/^(tr)$/i.test(t)?"table-row":"block"},addClass:function(e,t){e.classList?e.classList.add(t):e.className+=(e.className.length?" ":"")+t},removeClass:function(e,t){e.classList?e.classList.remove(t):e.className=e.className.toString().replace(new RegExp("(^|\\s)"+t.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(e,t,i,o){function r(e,t){function i(){c&&C.setPropertyValue(e,"display","none")}var l=0;if(8>=f)l=p.css(e,t);else{var c=!1;if(/^(width|height)$/.test(t)&&0===C.getPropertyValue(e,"display")&&(c=!0,C.setPropertyValue(e,"display",C.Values.getDisplayType(e))),!o){if("height"===t&&"border-box"!==C.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var d=e.offsetHeight-(parseFloat(C.getPropertyValue(e,"borderTopWidth"))||0)-(parseFloat(C.getPropertyValue(e,"borderBottomWidth"))||0)-(parseFloat(C.getPropertyValue(e,"paddingTop"))||0)-(parseFloat(C.getPropertyValue(e,"paddingBottom"))||0);return i(),d}if("width"===t&&"border-box"!==C.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var u=e.offsetWidth-(parseFloat(C.getPropertyValue(e,"borderLeftWidth"))||0)-(parseFloat(C.getPropertyValue(e,"borderRightWidth"))||0)-(parseFloat(C.getPropertyValue(e,"paddingLeft"))||0)-(parseFloat(C.getPropertyValue(e,"paddingRight"))||0);return i(),u}}var h;h=a(e)===s?n.getComputedStyle(e,null):a(e).computedStyle?a(e).computedStyle:a(e).computedStyle=n.getComputedStyle(e,null),(f||w.State.isFirefox)&&"borderColor"===t&&(t="borderTopColor"),l=9===f&&"filter"===t?h.getPropertyValue(t):h[t],(""===l||null===l)&&(l=e.style[t]),i()}if("auto"===l&&/^(top|right|bottom|left)$/i.test(t)){var m=r(e,"position");("fixed"===m||"absolute"===m&&/top|left/i.test(t))&&(l=p(e).position()[t]+"px")}return l}var l;if(C.Hooks.registered[t]){var c=t,d=C.Hooks.getRoot(c);i===s&&(i=C.getPropertyValue(e,C.Names.prefixCheck(d)[0])),C.Normalizations.registered[d]&&(i=C.Normalizations.registered[d]("extract",e,i)),l=C.Hooks.extractValue(c,i)}else if(C.Normalizations.registered[t]){var u,h;u=C.Normalizations.registered[t]("name",e),"transform"!==u&&(h=r(e,C.Names.prefixCheck(u)[0]),C.Values.isCSSNullValue(h)&&C.Hooks.templates[t]&&(h=C.Hooks.templates[t][1])),l=C.Normalizations.registered[t]("extract",e,h)}return/^[\d-]/.test(l)||(l=a(e)&&a(e).isSVG&&C.Names.SVGAttribute(t)?/^(height|width)$/i.test(t)?e.getBBox()[t]:e.getAttribute(t):r(e,C.Names.prefixCheck(t)[0])),C.Values.isCSSNullValue(l)&&(l=0),w.debug>=2&&console.log("Get "+t+": "+l),l},setPropertyValue:function(e,t,i,s,o){var r=t;if("scroll"===t)o.container?o.container["scroll"+o.direction]=i:"Left"===o.direction?n.scrollTo(i,o.alternateValue):n.scrollTo(o.alternateValue,i);else if(C.Normalizations.registered[t]&&"transform"===C.Normalizations.registered[t]("name",e))C.Normalizations.registered[t]("inject",e,i),r="transform",i=a(e).transformCache[t];else{if(C.Hooks.registered[t]){var l=t,c=C.Hooks.getRoot(t);s=s||C.getPropertyValue(e,c),i=C.Hooks.injectValue(l,i,s),t=c}if(C.Normalizations.registered[t]&&(i=C.Normalizations.registered[t]("inject",e,i),t=C.Normalizations.registered[t]("name",e)),r=C.Names.prefixCheck(t)[0],8>=f)try{e.style[r]=i}catch(d){w.debug&&console.log("Browser does not support ["+i+"] for ["+r+"]")}else a(e)&&a(e).isSVG&&C.Names.SVGAttribute(t)?e.setAttribute(t,i):e.style[r]=i;w.debug>=2&&console.log("Set "+t+" ("+r+"): "+i)}return[r,i]},flushTransformCache:function(e){function t(t){return parseFloat(C.getPropertyValue(e,t))}var n="";if((f||w.State.isAndroid&&!w.State.isChrome)&&a(e).isSVG){var i={translate:[t("translateX"),t("translateY")],skewX:[t("skewX")],skewY:[t("skewY")],scale:1!==t("scale")?[t("scale"),t("scale")]:[t("scaleX"),t("scaleY")],rotate:[t("rotateZ"),0,0]};p.each(a(e).transformCache,function(e){/^translate/i.test(e)?e="translate":/^scale/i.test(e)?e="scale":/^rotate/i.test(e)&&(e="rotate"),i[e]&&(n+=e+"("+i[e].join(" ")+") ",delete i[e])})}else{var s,o;p.each(a(e).transformCache,function(t){return s=a(e).transformCache[t],"transformPerspective"===t?(o=s,!0):(9===f&&"rotateZ"===t&&(t="rotate"),void(n+=t+s+" "))}),o&&(n="perspective"+o+" "+n)}C.setPropertyValue(e,"transform",n)}};C.Hooks.register(),C.Normalizations.register(),w.hook=function(e,t,n){var i=s;return g.isWrapped(e)&&(e=[].slice.call(e)),p.each(r(e),function(e,o){if(a(o)===s&&w.init(o),n===s)i===s&&(i=w.CSS.getPropertyValue(o,t));else{var r=w.CSS.setPropertyValue(o,t,n);"transform"===r[0]&&w.CSS.flushTransformCache(o),i=r}}),i};var T=function(){function e(){return l?D.promise||null:c}function t(){function e(){function e(e,t){var n=s,i=s,o=s;return g.isArray(e)?(n=e[0],!g.isArray(e[1])&&/^[\d-]/.test(e[1])||g.isFunction(e[1])||C.RegEx.isHex.test(e[1])?o=e[1]:(g.isString(e[1])&&!C.RegEx.isHex.test(e[1])||g.isArray(e[1]))&&(i=t?e[1]:d(e[1],l.duration),e[2]!==s&&(o=e[2]))):n=e,t||(i=i||l.easing),g.isFunction(n)&&(n=n.call(r,k,T)),g.isFunction(o)&&(o=o.call(r,k,T)),[n||0,i,o]}function h(e,t){var n,i;return i=(t||0).toString().toLowerCase().replace(/[%A-z]+$/,function(e){return n=e,""}),n||(n=C.Values.getUnitType(e)),[i,n]}function f(){var e={myParent:r.parentNode||i.body,position:C.getPropertyValue(r,"position"),fontSize:C.getPropertyValue(r,"fontSize")},t=e.position===O.lastPosition&&e.myParent===O.lastParent,s=e.fontSize===O.lastFontSize;O.lastParent=e.myParent,O.lastPosition=e.position,O.lastFontSize=e.fontSize;var o=100,l={};if(s&&t)l.emToPx=O.lastEmToPx,l.percentToPxWidth=O.lastPercentToPxWidth,l.percentToPxHeight=O.lastPercentToPxHeight;else{var c=a(r).isSVG?i.createElementNS("http://www.w3.org/2000/svg","rect"):i.createElement("div");w.init(c),e.myParent.appendChild(c),w.CSS.setPropertyValue(c,"position",e.position),w.CSS.setPropertyValue(c,"fontSize",e.fontSize),w.CSS.setPropertyValue(c,"overflow","hidden"),w.CSS.setPropertyValue(c,"overflowX","hidden"),w.CSS.setPropertyValue(c,"overflowY","hidden"),w.CSS.setPropertyValue(c,"boxSizing","content-box"),w.CSS.setPropertyValue(c,"paddingLeft",o+"em"),p.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(e,t){w.CSS.setPropertyValue(c,t,o+"%")}),l.percentToPxWidth=O.lastPercentToPxWidth=(parseFloat(C.getPropertyValue(c,"width",null,!0))||1)/o,l.percentToPxHeight=O.lastPercentToPxHeight=(parseFloat(C.getPropertyValue(c,"height",null,!0))||1)/o,l.emToPx=O.lastEmToPx=(parseFloat(C.getPropertyValue(c,"paddingLeft"))||1)/o,e.myParent.removeChild(c)}return null===O.remToPx&&(O.remToPx=parseFloat(C.getPropertyValue(i.body,"fontSize"))||16),null===O.vwToPx&&(O.vwToPx=parseFloat(n.innerWidth)/100,O.vhToPx=parseFloat(n.innerHeight)/100),l.remToPx=O.remToPx,l.vwToPx=O.vwToPx,l.vhToPx=O.vhToPx,w.debug>=1&&console.log("Unit ratios: "+JSON.stringify(l),r),l}if(l.begin&&0===k)try{l.begin.call(m,m)}catch(y){setTimeout(function(){throw y},1)}if("scroll"===E){var x,S,_,M=/^x$/i.test(l.axis)?"Left":"Top",A=parseFloat(l.offset)||0;l.container?g.isWrapped(l.container)||g.isNode(l.container)?(l.container=l.container[0]||l.container,x=l.container["scroll"+M],_=x+p(r).position()[M.toLowerCase()]+A):l.container=null:(x=w.State.scrollAnchor[w.State["scrollProperty"+M]],S=w.State.scrollAnchor[w.State["scrollProperty"+("Left"===M?"Top":"Left")]],_=p(r).offset()[M.toLowerCase()]+A),c={scroll:{rootPropertyValue:!1,startValue:x,currentValue:x,endValue:_,unitType:"",easing:l.easing,scrollData:{container:l.container,direction:M,alternateValue:S}},element:r},w.debug&&console.log("tweensContainer (scroll): ",c.scroll,r)}else if("reverse"===E){if(!a(r).tweensContainer)return void p.dequeue(r,l.queue);"none"===a(r).opts.display&&(a(r).opts.display="auto"),"hidden"===a(r).opts.visibility&&(a(r).opts.visibility="visible"),a(r).opts.loop=!1,a(r).opts.begin=null,a(r).opts.complete=null,b.easing||delete l.easing,b.duration||delete l.duration,l=p.extend({},a(r).opts,l);var N=p.extend(!0,{},a(r).tweensContainer);for(var F in N)if("element"!==F){var I=N[F].startValue;N[F].startValue=N[F].currentValue=N[F].endValue,N[F].endValue=I,g.isEmptyObject(b)||(N[F].easing=l.easing),w.debug&&console.log("reverse tweensContainer ("+F+"): "+JSON.stringify(N[F]),r)}c=N}else if("start"===E){var N;a(r).tweensContainer&&a(r).isAnimating===!0&&(N=a(r).tweensContainer),p.each(v,function(t,n){if(RegExp("^"+C.Lists.colors.join("$|^")+"$").test(t)){var i=e(n,!0),o=i[0],r=i[1],a=i[2];if(C.RegEx.isHex.test(o)){for(var l=["Red","Green","Blue"],c=C.Values.hexToRgb(o),d=a?C.Values.hexToRgb(a):s,u=0;u<l.length;u++)v[t+l[u]]=[c[u],r,d?d[u]:d];delete v[t]}}});for(var P in v){var V=e(v[P]),R=V[0],B=V[1],L=V[2];P=C.Names.camelCase(P);var H=C.Hooks.getRoot(P),q=!1;if(a(r).isSVG||C.Names.prefixCheck(H)[1]!==!1||C.Normalizations.registered[H]!==s){(l.display!==s&&null!==l.display&&"none"!==l.display||l.visibility&&"hidden"!==l.visibility)&&/opacity|filter/.test(P)&&!L&&0!==R&&(L=0),l._cacheValues&&N&&N[P]?(L===s&&(L=N[P].endValue+N[P].unitType),q=a(r).rootPropertyValueCache[H]):C.Hooks.registered[P]?L===s?(q=C.getPropertyValue(r,H),L=C.getPropertyValue(r,P,q)):q=C.Hooks.templates[H][1]:L===s&&(L=C.getPropertyValue(r,P));var W,U,z,$=!1;if(W=h(P,L),L=W[0],z=W[1],W=h(P,R),R=W[0].replace(/^([+-\/*])=/,function(e,t){return $=t,""}),U=W[1],L=parseFloat(L)||0,R=parseFloat(R)||0,"%"===U&&(/^(fontSize|lineHeight)$/.test(P)?(R/=100,U="em"):/^scale/.test(P)?(R/=100,U=""):/(Red|Green|Blue)$/i.test(P)&&(R=R/100*255,U="")),/[\/*]/.test($))U=z;else if(z!==U&&0!==L)if(0===R)U=z;else{t=t||f();var Y=/margin|padding|left|right|width|text|word|letter/i.test(P)||/X$/.test(P)?"x":"y";switch(z){case"%":L*="x"===Y?t.percentToPxWidth:t.percentToPxHeight;break;case"px":break;default:L*=t[z+"ToPx"]}switch(U){case"%":L*=1/("x"===Y?t.percentToPxWidth:t.percentToPxHeight);break;case"px":break;default:L*=1/t[U+"ToPx"]}}switch($){case"+":R=L+R;break;case"-":R=L-R;break;case"*":R=L*R;break;case"/":R=L/R}c[P]={rootPropertyValue:q,startValue:L,currentValue:L,endValue:R,unitType:U,easing:B},w.debug&&console.log("tweensContainer ("+P+"): "+JSON.stringify(c[P]),r)
}else w.debug&&console.log("Skipping ["+H+"] due to a lack of browser support.")}c.element=r}c.element&&(C.Values.addClass(r,"velocity-animating"),j.push(c),l.queue!==!1&&(a(r).tweensContainer=c),a(r).opts=l,a(r).isAnimating=!0,k===T-1?(w.State.calls.length>1e4&&(w.State.calls=o(w.State.calls)),w.State.calls.push([j,m,l,null,D.resolver]),w.State.isTicking===!1&&(w.State.isTicking=!0,u())):k++)}var t,r=this,l=p.extend({},w.defaults,b),c={};if(a(r)===s&&w.init(r),parseFloat(l.delay)&&l.queue!==!1&&p.queue(r,l.queue,function(e){w.velocityQueueEntryFlag=!0,a(r).delayTimer={setTimeout:setTimeout(e,parseFloat(l.delay)),next:e}}),w.mock===!0)l.duration=1;else switch(l.duration.toString().toLowerCase()){case"fast":l.duration=200;break;case"normal":l.duration=y;break;case"slow":l.duration=600;break;default:l.duration=parseFloat(l.duration)||1}l.easing=d(l.easing,l.duration),l.begin&&!g.isFunction(l.begin)&&(l.begin=null),l.progress&&!g.isFunction(l.progress)&&(l.progress=null),l.complete&&!g.isFunction(l.complete)&&(l.complete=null),l.display!==s&&null!==l.display&&(l.display=l.display.toString().toLowerCase(),"auto"===l.display&&(l.display=w.CSS.Values.getDisplayType(r))),l.visibility&&(l.visibility=l.visibility.toString().toLowerCase()),l.mobileHA=l.mobileHA&&w.State.isMobile&&!w.State.isGingerbread,l.queue===!1?l.delay?setTimeout(e,l.delay):e():p.queue(r,l.queue,function(t,n){return n===!0?(D.promise&&D.resolver(m),!0):(w.velocityQueueEntryFlag=!0,void e(t))}),""!==l.queue&&"fx"!==l.queue||"inprogress"===p.queue(r)[0]||p.dequeue(r)}var l,c,f,m,v,b,x=arguments[0]&&(p.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||g.isString(arguments[0].properties));if(g.isWrapped(this)?(l=!1,f=0,m=this,c=this):(l=!0,f=1,m=x?arguments[0].elements:arguments[0]),m=g.isWrapped(m)?[].slice.call(m):m){x?(v=arguments[0].properties,b=arguments[0].options):(v=arguments[f],b=arguments[f+1]);var T=g.isArray(m)||g.isNodeList(m)?m.length:1,k=0;if("stop"!==v&&!p.isPlainObject(b)){var S=f+1;b={};for(var _=S;_<arguments.length;_++)!g.isArray(arguments[_])&&/^\d/.test(arguments[_])?b.duration=parseFloat(arguments[_]):g.isString(arguments[_])||g.isArray(arguments[_])?b.easing=arguments[_]:g.isFunction(arguments[_])&&(b.complete=arguments[_])}var D={promise:null,resolver:null,rejecter:null};l&&w.Promise&&(D.promise=new w.Promise(function(e,t){D.resolver=e,D.rejecter=t}));var E;switch(v){case"scroll":E="scroll";break;case"reverse":E="reverse";break;case"stop":p.each(r(m),function(e,t){a(t)&&a(t).delayTimer&&(clearTimeout(a(t).delayTimer.setTimeout),a(t).delayTimer.next&&a(t).delayTimer.next(),delete a(t).delayTimer)});var M=[];return p.each(w.State.calls,function(e,t){t&&p.each(r(t[1]),function(n,i){var o=g.isString(b)?b:"";return b!==s&&t[2].queue!==o?!0:void p.each(r(m),function(t,n){n===i&&(a(n)&&p.each(a(n).tweensContainer,function(e,t){t.endValue=t.currentValue}),b!==s&&(p.each(p.queue(n,o),function(e,t){g.isFunction(t)&&t(null,!0)}),p.queue(n,o,[])),M.push(e))})})}),p.each(M,function(e,t){h(t,!0)}),D.promise&&D.resolver(m),e();default:if(!p.isPlainObject(v)||g.isEmptyObject(v)){if(g.isString(v)&&w.Sequences[v]){var A=b.duration,N=b.delay||0;return b.backwards===!0&&(m=(g.isWrapped(m)?[].slice.call(m):m).reverse()),p.each(r(m),function(e,t){parseFloat(b.stagger)?b.delay=N+parseFloat(b.stagger)*e:g.isFunction(b.stagger)&&(b.delay=N+b.stagger.call(t,e,T)),b.drag&&(b.duration=parseFloat(A)||(/^(callout|transition)/.test(v)?1e3:y),b.duration=Math.max(b.duration*(b.backwards?1-e/T:(e+1)/T),.75*b.duration,200)),w.Sequences[v].call(t,t,b||{},e,T,m,D.promise?D:s)}),e()}var F="Velocity: First argument ("+v+") was not a property map, a known action, or a registered sequence. Aborting.";return D.promise?D.rejecter(new Error(F)):console.log(F),e()}E="start"}var O={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},j=[];p.each(r(m),function(e,n){g.isNode(n)&&t.call(n)});var I,P=p.extend({},w.defaults,b);if(P.loop=parseInt(P.loop),I=2*P.loop-1,P.loop)for(var V=0;I>V;V++){var R={delay:P.delay};V===I-1&&(R.display=P.display,R.visibility=P.visibility,R.complete=P.complete),w(m,"reverse",R)}return e()}};w=p.extend(T,w),w.animate=T,w.State.isMobile||i.hidden===s||i.addEventListener("visibilitychange",function(){i.hidden?(v=function(e){return setTimeout(function(){e(!0)},16)},u()):v=n.requestAnimationFrame||m});var k;return e&&e.fn!==s?k=e:n.Zepto&&(k=n.Zepto),(k||n).Velocity=w,k&&(k.fn.velocity=T,k.fn.velocity.defaults=w.defaults),p.each(["Down","Up"],function(e,t){w.Sequences["slide"+t]=function(e,n,i,o,r,a){var l=p.extend({},n),c=l.begin,d=l.complete,u={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},h={};l.display===s&&(l.display="Down"===t?"inline"===w.CSS.Values.getDisplayType(e)?"inline-block":"block":"none"),l.begin=function(e){c&&c.call(e,e);for(var n in u){h[n]=e.style[n];var i=w.CSS.getPropertyValue(e,n);u[n]="Down"===t?[i,0]:[0,i]}},l.complete=function(e){for(var t in h)e.style[t]=h[t];d&&d.call(e,e),a&&a.resolver(r||e)},w(e,u,l)}}),p.each(["In","Out"],function(e,t){w.Sequences["fade"+t]=function(e,n,i,o,r,a){var l=p.extend({},n),c={opacity:"In"===t?1:0};if(i!==o-1)l.complete=l.begin=null;else{var d=l.complete;l.complete=function(){d&&d.call(e,e),a&&a.resolver(r||e)}}l.display===s&&(l.display="In"===t?"auto":"none"),w(this,c,l)}}),w}(e||window,window,document)}),function(e){"use strict";function t(t,n){var i=this,s=t.attr("name")||n.name||"";t.parent().hide();var o=t.css("width");t.parent().show(),"0px"==o&&(o=t.outerWidth()+20),this.$el=t.hide(),this.options=n,this.$parent=e("<div"+e.map(["class","title"],function(e){var t=i.$el.attr(e)||"";return t=("class"===e?"ms-parent"+(t?" ":""):"")+t,t?" "+e+'="'+t+'"':""}).join("")+" />"),this.$choice=e('<button type="button" class="ms-choice"><span class="placeholder">'+n.placeholder+"</span><div></div></button>"),this.$drop=e('<div class="ms-drop '+n.position+'"></div>'),this.$el.after(this.$parent),this.$parent.append(this.$choice),this.$parent.append(this.$drop),this.$el.prop("disabled")&&this.$choice.addClass("disabled"),this.$parent.css("width",n.width||o),this.options.keepOpen||e("body").click(function(t){e(t.target)[0]!==i.$choice[0]&&e(t.target).parents(".ms-choice")[0]!==i.$choice[0]&&(e(t.target)[0]!==i.$drop[0]&&e(t.target).parents(".ms-drop")[0]===i.$drop[0]||!i.options.isOpen||i.close())}),this.selectAllName='name="selectAll'+s+'"',this.selectGroupName='name="selectGroup'+s+'"',this.selectItemName='name="selectItem'+s+'"'}t.prototype={constructor:t,init:function(){var t=this,n=[];this.options.filter&&n.push('<div class="ms-search">','<input type="text" autocomplete="off" autocorrect="off" autocapitilize="off" spellcheck="false">',"</div>"),n.push("<ul>"),this.options.selectAll&&!this.options.single&&n.push('<li class="ms-select-all">',"<label>",'<input type="checkbox" '+this.selectAllName+" /> ",this.options.selectAllDelimiter[0]+this.options.selectAllText+this.options.selectAllDelimiter[1],"</label>","</li>"),e.each(this.$el.children(),function(e,i){n.push(t.optionToHtml(e,i))}),n.push('<li class="ms-no-results">'+this.options.noMatchesFound+"</li>"),n.push("</ul>"),this.$drop.html(n.join("")),this.$drop.find("ul").css("max-height",this.options.maxHeight+"px"),this.$drop.find(".multiple").css("width",this.options.multipleWidth+"px"),this.$searchInput=this.$drop.find(".ms-search input"),this.$selectAll=this.$drop.find("input["+this.selectAllName+"]"),this.$selectGroups=this.$drop.find("input["+this.selectGroupName+"]"),this.$selectItems=this.$drop.find("input["+this.selectItemName+"]:enabled"),this.$disableItems=this.$drop.find("input["+this.selectItemName+"]:disabled"),this.$noResults=this.$drop.find(".ms-no-results"),this.events(),this.updateSelectAll(!0),this.update(!0),this.options.isOpen&&this.open()},optionToHtml:function(t,n,i,s){var o,r=this,a=e(n),l=[],c=this.options.multiple,d=["class","title"],u=e.map(d,function(e){var t="class"===e&&c,n=a.attr(e)||"";return t||n?" "+e+'="'+(t?"multiple"+(n?" ":""):"")+n+'"':""}).join(""),h=this.options.single?"radio":"checkbox";if(a.is("option")){var p=a.val(),f=r.options.textTemplate(a),m=void 0!=r.$el.attr("multiple")?a.prop("selected"):"selected"==a.attr("selected"),v=this.options.styler(p)?' style="'+this.options.styler(p)+'"':"";o=s||a.prop("disabled"),this.options.blockSeparator>""&&this.options.blockSeparator==a.val()?l.push("<li"+u+v+">",'<label class="'+this.options.blockSeparator+(o?"disabled":"")+'">',f,"</label>","</li>"):l.push("<li"+u+v+">","<label"+(o?' class="disabled"':"")+">",'<input type="'+h+'" '+this.selectItemName+' value="'+p+'"'+(m?' checked="checked"':"")+(o?' disabled="disabled"':"")+(i?' data-group="'+i+'"':"")+"/> ",f,"</label>","</li>")}else if(!i&&a.is("optgroup")){var g="group_"+t,y=a.attr("label");o=a.prop("disabled"),l.push('<li class="group">','<label class="optgroup'+(o?" disabled":"")+'" data-group="'+g+'">',this.options.hideOptgroupCheckboxes?"":'<input type="checkbox" '+this.selectGroupName+(o?' disabled="disabled"':"")+" /> ",y,"</label>","</li>"),e.each(a.children(),function(e,t){l.push(r.optionToHtml(e,t,g,o))})}return l.join("")},events:function(){function t(e){e.preventDefault(),n[n.options.isOpen?"close":"open"]()}var n=this,i=this.$el.parent().closest("label")[0]||e("label[for="+this.$el.attr("id")+"]")[0];i&&e(i).off("click").on("click",function(e){"label"===e.target.nodeName.toLowerCase()&&e.target===this&&(t(e),n.options.filter&&n.options.isOpen||n.focus(),e.stopPropagation())}),this.$choice.off("click").on("click",t).off("focus").on("focus",this.options.onFocus).off("blur").on("blur",this.options.onBlur),this.$parent.off("keydown").on("keydown",function(e){switch(e.which){case 27:n.close(),n.$choice.focus()}}),this.$searchInput.off("keydown").on("keydown",function(e){9===e.keyCode&&e.shiftKey&&n.close()}).off("keyup").on("keyup",function(e){return n.options.filterAcceptOnEnter&&(13===e.which||32==e.which)&&n.$searchInput.val()?(n.$selectAll.click(),n.close(),void n.focus()):void n.filter()}),this.$selectAll.off("click").on("click",function(){var t=e(this).prop("checked"),i=n.$selectItems.filter(":visible");i.length===n.$selectItems.length?n[t?"checkAll":"uncheckAll"]():(n.$selectGroups.prop("checked",t),i.prop("checked",t),n.options[t?"onCheckAll":"onUncheckAll"](),n.update())}),this.$selectGroups.off("click").on("click",function(){var t=e(this).parent().attr("data-group"),i=n.$selectItems.filter(":visible"),s=i.filter('[data-group="'+t+'"]'),o=s.length!==s.filter(":checked").length;s.prop("checked",o),n.updateSelectAll(),n.update(),n.options.onOptgroupClick({label:e(this).parent().text(),checked:o,children:s.get()})}),this.$selectItems.off("click").on("click",function(){n.updateSelectAll(),n.update(),n.updateOptGroupSelect(),n.options.onClick({label:e(this).parent().text(),value:e(this).val(),checked:e(this).prop("checked")}),n.options.single&&n.options.isOpen&&!n.options.keepOpen&&n.close()})},open:function(){if(!this.$choice.hasClass("disabled")){if(this.options.isOpen=!0,this.$choice.find(">div").addClass("open"),this.$drop.show(),this.$selectAll.parent().show(),this.$noResults.hide(),0===this.$el.children().length&&(this.$selectAll.parent().hide(),this.$noResults.show()),this.options.container){var t=this.$drop.offset();this.$drop.appendTo(e(this.options.container)),this.$drop.offset({top:t.top,left:t.left})}this.options.filter&&(this.$searchInput.val(""),this.$searchInput.focus(),this.filter()),this.options.onOpen()}},close:function(){this.options.isOpen=!1,this.$choice.find(">div").removeClass("open"),this.$drop.hide(),this.options.container&&(this.$parent.append(this.$drop),this.$drop.css({top:"auto",left:"auto"})),this.options.onClose()},update:function(t){var n=this.getSelects(),i=this.$choice.find(">span");0===n.length?i.addClass("placeholder").html(this.options.placeholder):i.removeClass("placeholder").html(this.options.countSelected&&n.length<this.options.minumimCountSelected?(this.options.displayValues?n:this.getSelects("text")).join(this.options.delimiter):this.options.allSelected&&n.length===this.$selectItems.length+this.$disableItems.length?this.options.allSelected:(this.options.countSelected||this.options.etcaetera)&&n.length>this.options.minumimCountSelected?this.options.etcaetera?(this.options.displayValues?n:this.getSelects("text").slice(0,this.options.minumimCountSelected)).join(this.options.delimiter)+"...":this.options.countSelected.replace("#",n.length).replace("%",this.$selectItems.length+this.$disableItems.length):(this.options.displayValues?n:this.getSelects("text")).join(this.options.delimiter)),this.$el.val(this.getSelects()),this.$drop.find("li").removeClass("selected"),this.$drop.find("input["+this.selectItemName+"]:checked").each(function(){e(this).parents("li").first().addClass("selected")}),t||this.$el.trigger("change")},updateSelectAll:function(e){var t=this.$selectItems;e||(t=t.filter(":visible")),this.$selectAll.prop("checked",t.length&&t.length===t.filter(":checked").length),this.$selectAll.prop("checked")&&this.options.onCheckAll()},updateOptGroupSelect:function(){var t=this.$selectItems.filter(":visible");e.each(this.$selectGroups,function(n,i){var s=e(i).parent().attr("data-group"),o=t.filter('[data-group="'+s+'"]');e(i).prop("checked",o.length&&o.length===o.filter(":checked").length)})},getSelects:function(t){var n=this,i=[],s=[];return this.$drop.find("input["+this.selectItemName+"]:checked").each(function(){i.push(e(this).parents("li").first().text()),s.push(e(this).val())}),"text"===t&&this.$selectGroups.length&&(i=[],this.$selectGroups.each(function(){var t=[],s=e.trim(e(this).parent().text()),o=e(this).parent().data("group"),r=n.$drop.find("["+n.selectItemName+'][data-group="'+o+'"]'),a=r.filter(":checked");if(0!==a.length){if(t.push("["),t.push(s),r.length>a.length){var l=[];a.each(function(){l.push(e(this).parent().text())}),t.push(": "+l.join(", "))}t.push("]"),i.push(t.join(""))}})),"text"===t?i:s},setSelects:function(t){var n=this;this.$selectItems.prop("checked",!1),e.each(t,function(e,t){n.$selectItems.filter('[value="'+t+'"]').prop("checked",!0)}),this.$selectAll.prop("checked",this.$selectItems.length===this.$selectItems.filter(":checked").length),this.update()},enable:function(){this.$choice.removeClass("disabled")},disable:function(){this.$choice.addClass("disabled")},checkAll:function(){this.$selectItems.prop("checked",!0),this.$selectGroups.prop("checked",!0),this.$selectAll.prop("checked",!0),this.update(),this.options.onCheckAll()},uncheckAll:function(){this.$selectItems.prop("checked",!1),this.$selectGroups.prop("checked",!1),this.$selectAll.prop("checked",!1),this.update(),this.options.onUncheckAll()},focus:function(){this.$choice.focus(),this.options.onFocus()},blur:function(){this.$choice.blur(),this.options.onBlur()},refresh:function(){this.init()},filter:function(){var t=this,n=e.trim(this.$searchInput.val()).toLowerCase();0===n.length?(this.$selectItems.parent().show(),this.$disableItems.parent().show(),this.$selectGroups.parent().show()):(this.$selectItems.each(function(){var t=e(this).parent();t[t.text().toLowerCase().indexOf(n)<0?"hide":"show"]()}),this.$disableItems.parent().hide(),this.$selectGroups.each(function(){var n=e(this).parent(),i=n.attr("data-group"),s=t.$selectItems.filter(":visible");n[0===s.filter('[data-group="'+i+'"]').length?"hide":"show"]()}),this.$selectItems.filter(":visible").length?(this.$selectAll.parent().show(),this.$noResults.hide()):(this.$selectAll.parent().hide(),this.$noResults.show())),this.updateOptGroupSelect(),this.updateSelectAll()}},e.fn.multipleSelect=function(){var n,i=arguments[0],s=arguments,o=["getSelects","setSelects","enable","disable","checkAll","uncheckAll","focus","blur","refresh"];return this.each(function(){var r=e(this),a=r.data("multipleSelect"),l=e.extend({},e.fn.multipleSelect.defaults,r.data(),"object"==typeof i&&i);if(a||(a=new t(r,l),r.data("multipleSelect",a)),"string"==typeof i){if(e.inArray(i,o)<0)throw"Unknown method: "+i;n=a[i](s[1])}else a.init(),s[1]&&(n=a[s[1]].apply(a,[].slice.call(s,2)))}),n?n:this},e.fn.multipleSelect.defaults={name:"",isOpen:!1,placeholder:"",selectAll:!0,selectAllText:"Select all",selectAllDelimiter:["[","]"],allSelected:"All selected",minumimCountSelected:3,countSelected:"# of % selected",noMatchesFound:"No matches found",multiple:!1,multipleWidth:80,single:!1,filter:!1,width:void 0,maxHeight:250,container:null,position:"bottom",keepOpen:!1,blockSeparator:"",displayValues:!1,delimiter:", ",styler:function(){return!1},textTemplate:function(e){return e.text()},onOpen:function(){return!1},onClose:function(){return!1},onCheckAll:function(){return!1},onUncheckAll:function(){return!1},onFocus:function(){return!1},onBlur:function(){return!1},onOptgroupClick:function(){return!1},onClick:function(){return!1}}}(jQuery),define("multipleSelect",["jquery"],function(){}),require.config({shim:{base64:{exports:"Base64"},alerts:{deps:["foundation"]},dropdown:{deps:["foundation"]},tabs:{deps:["foundation"]},tooltip:{deps:["foundation"]},abide:{deps:["foundation"]},foundation:{exports:"Foundation",deps:["jquery"]},jqueryui:{exports:"jquery",deps:["jquery"]},select2:{exports:"jquery",deps:["jquery"]},widgetFactory:{exports:"jquery",deps:["jqueryui"]},mouseInteraction:{exports:"jquery",deps:["jqueryui","widgetFactory"]},sortable:{exports:"jquery",deps:["jqueryui","widgetFactory","mouseInteraction"]},accordion:{exports:"jquery",deps:["jqueryui","widgetFactory"]},ckeditorAdapter:{exports:"jquery",deps:["jquery","ckeditor"]},scrollToFixed:{exports:"jquery",deps:["jquery"]},datetimepicker:{exports:"datetimepicker",deps:["jquery"]},velocity:{deps:["jquery"]},multipleSelect:{deps:["jquery"]}},packages:[{name:"underscore",location:"vendor/lodash-amd/underscore"},{name:"masseuse",location:"vendor/masseuse/app"},{name:"helpers",location:"helpers"}],paths:{jquery:"vendor/jquery/dist/jquery",jqueryui:"vendor/jquery.ui/ui/jquery.ui.core",select2:"vendor/select2/select2",backbone:"vendor/backbone-amd/backbone",text:"vendor/requirejs-text/text",rivets:"vendor/rivets/dist/rivets",base64:"vendor/js-base64/base64",foundation:"vendor/foundation/js/foundation/foundation",modernizr:"vendor/modernizr/modernizr",ckeditor:"vendor/ckeditor/ckeditor",ckeditorAdapter:"vendor/ckeditor/adapters/jquery","svg-edit-embed-api":"vendor/svg-edit-2.7/embedapi",ace:"vendor/ace/lib/ace",moment:"vendor/moment/moment",scrollToFixed:"vendor/ScrollToFixed/jquery-scrolltofixed",datetimepicker:"vendor/datetimepicker/jquery.datetimepicker",sparkmd5:"vendor/SparkMD5/spark-md5",JSONEditor:"vendor/jsoneditor/jsoneditor",contextjs:"vendor/contextjs/context",velocity:"vendor/velocity/jquery.velocity",mousetrap:"vendor/mousetrap/mousetrap",multipleSelect:"vendor/multiple-select/jquery.multiple.select",router:"router",alerts:"vendor/foundation/js/foundation/foundation.alert",dropdown:"vendor/foundation/js/foundation/foundation.dropdown",accordion:"vendor/jquery.ui/ui/jquery.ui.accordion",tabs:"vendor/foundation/js/foundation/foundation.tab",tooltip:"vendor/foundation/js/foundation/foundation.tooltip",abide:"vendor/foundation/js/foundation/foundation.abide",widgetFactory:"vendor/jquery.ui/ui/jquery.ui.widget",mouseInteraction:"vendor/jquery.ui/ui/jquery.ui.mouse",sortable:"vendor/jquery.ui/ui/jquery.ui.sortable",validationLibrary:"validation/validationLibrary",validationTypes:"validation/validationTypes",validationAlpha:"validation/views/alpha/view",validationAlphaConfig:"validation/views/alpha/config",validationAlphaModel:"validation/views/alpha/model",validationNumber:"validation/views/number/view",validationNumberConfig:"validation/views/number/config",validationNumberModel:"validation/views/number/model",validationAlphaNumeric:"validation/views/alphaNumeric/view",validationAlphaNumericConfig:"validation/views/alphaNumeric/config",validationAlphaNumericModel:"validation/views/alphaNumeric/model",validationDate:"validation/views/date/view",validationDateConfig:"validation/views/date/config",validationDateModel:"validation/views/date/model",validationDateFormatters:"validation/views/date/formatters",validationDatetime:"validation/views/datetime/view",validationDatetimeConfig:"validation/views/datetime/config",validationDatetimeModel:"validation/views/datetime/model",validationDatetimeFormatters:"validation/views/datetime/formatters",validationEmail:"validation/views/email/view",validationEmailConfig:"validation/views/email/config",validationEmailModel:"validation/views/email/model",validationRegex:"validation/views/regex/view",validationRegexConfig:"validation/views/regex/config",validationRegexModel:"validation/views/regex/model",validationUrl:"validation/views/url/view",validationUrlConfig:"validation/views/url/config",validationUrlModel:"validation/views/url/model",validationRequired:"validation/views/required/view",validationRequiredConfig:"validation/views/required/config",validationRequiredModel:"validation/views/required/model",mixins:"mixins",grasshopperBaseView:"views/grasshopperBaseView",pluginBaseView:"views/pluginBaseView",advancedSearch:"views/advancedSearch",addAssetsView:"views/addAssets/addAssetsView",addAssetsViewConfig:"views/addAssets/addAssetsViewConfig",addAssetsViewModel:"views/addAssets/addAssetsViewModel",addContentView:"views/addContent/addContentView",addContentViewConfig:"views/addContent/addContentViewConfig",addContentViewModel:"views/addContent/addContentViewModel",addFolderView:"views/addFolder/addFolderView",addFolderViewConfig:"views/addFolder/addFolderViewConfig",addFolderViewModel:"views/addFolder/addFolderViewModel",addUser:"views/addUser",alertBoxView:"views/alertBox/alertBoxView",alertBoxViewConfig:"views/alertBox/alertBoxViewConfig",alertBoxViewModel:"views/alertBox/alertBoxViewModel",assetDetailView:"views/assetDetail/assetDetailView",assetDetailViewConfig:"views/assetDetail/assetDetailViewConfig",assetDetailViewModel:"views/assetDetail/assetDetailViewModel",contentBrowseView:"views/contentBrowse/contentBrowseView",contentBrowseViewConfig:"views/contentBrowse/contentBrowseViewConfig",contentBrowseViewModel:"views/contentBrowse/contentBrowseViewModel",contentBrowseViewChildNodesCollection:"views/contentBrowse/childNodesCollection",contentDetailView:"views/contentDetail/contentDetailView",contentDetailViewConfig:"views/contentDetail/contentDetailViewConfig",contentDetailViewModel:"views/contentDetail/contentDetailViewModel",contentDetailRowView:"views/contentDetail/contentDetailRow/view",contentDetailRowViewConfig:"views/contentDetail/contentDetailRow/config",contentDetailRowViewModel:"views/contentDetail/contentDetailRow/model",contentTypeDetailView:"views/contentTypeDetail/contentTypeDetailView",contentTypeDetailViewConfig:"views/contentTypeDetail/contentTypeDetailViewConfig",contentTypeDetailViewModel:"views/contentTypeDetail/contentTypeDetailViewModel",contentTypeDetailViewFieldsCollection:"views/contentTypeDetail/contentTypeDetailViewFieldsCollection",contentTypeDetailRow:"views/contentTypeDetail/contentTypeDetailRow/view",contentTypeDetailRowConfig:"views/contentTypeDetail/contentTypeDetailRow/config",contentTypeDetailRowModel:"views/contentTypeDetail/contentTypeDetailRow/model",contentTypeIndexView:"views/contentTypeIndex/contentTypeIndexView",contentTypeIndexViewConfig:"views/contentTypeIndex/contentTypeIndexViewConfig",contentTypeIndexViewModel:"views/contentTypeIndex/contentTypeIndexViewModel",fieldAccordionView:"views/contentTypeDetail/fieldAccordion/view",fieldAccordionConfig:"views/contentTypeDetail/fieldAccordion/config",fieldAccordionModel:"views/contentTypeDetail/fieldAccordion/model",fieldAccordionBinders:"views/contentTypeDetail/fieldAccordion/binders",fieldAccordionValidationCollection:"views/contentTypeDetail/fieldAccordion/validationCollection",fileBrowserView:"views/fileBrowser/fileBrowserView",fileBrowserViewConfig:"views/fileBrowser/fileBrowserViewConfig",fileBrowserViewModel:"views/fileBrowser/fileBrowserViewModel",headerView:"views/header/headerView",headerViewConfig:"views/header/headerViewConfig",headerViewModel:"views/header/headerViewModel",itemSelectModal:"views/itemSelectModal",login:"views/login",mastheadView:"views/masthead/mastheadView",mastheadViewConfig:"views/masthead/mastheadViewConfig",mastheadViewModel:"views/masthead/mastheadViewModel",mastheadViewBinders:"views/masthead/binders",modalView:"views/modal/modalView",modalViewConfig:"views/modal/modalViewConfig",modalViewModel:"views/modal/modalViewModel",modalViewBinders:"views/modal/binders",modalViewFormatters:"views/modal/formatters",nodeDetailView:"views/nodeDetail/nodeDetailView",nodeDetailViewConfig:"views/nodeDetail/nodeDetailViewConfig",nodeDetailViewModel:"views/nodeDetail/nodeDetailViewModel",pagination:"views/pagination",pluginWrapperView:"views/pluginWrapper/pluginWrapperView",pluginWrapperViewConfig:"views/pluginWrapper/pluginWrapperViewConfig",pluginWrapperViewModel:"views/pluginWrapper/pluginWrapperViewModel",pluginWrapperViewCollection:"views/pluginWrapper/pluginCollection",userDetail:"views/userDetail",userDetailRow:"views/userDetail/userDetailRow",userIndexView:"views/userIndex/userIndexView",userIndexViewConfig:"views/userIndex/userIndexViewConfig",userIndexViewModel:"views/userIndex/userIndexViewModel",forbiddenView:"views/forbidden/forbiddenView",forbiddenViewConfig:"views/forbidden/forbiddenViewConfig",notFoundView:"views/notFound/notFoundView",notFoundViewConfig:"views/notFound/notFoundViewConfig",sysInfoView:"views/sysInfo/sysInfoView",sysInfoViewConfig:"views/sysInfo/sysInfoViewConfig",UserModel:"models/userModel",grasshopperModel:"models/grasshopperModel",pluginSetupModel:"views/contentTypeDetail/pluginSetupModel",loginWorker:"workers/loginWorker",logoutWorker:"workers/logoutWorker",contentTypeWorker:"workers/contentTypeWorker",ajaxCounterWorker:"workers/ajaxCounterWorker",clipboardWorker:"workers/clipboardWorker",assetWorker:"workers/assetWorker",breadcrumbWorker:"workers/breadcrumbWorker",nodeWorker:"workers/nodeWorker",urlWorker:"workers/urlWorker",paginationWorker:"workers/paginationWorker",searchWorker:"workers/searchWorker",grasshopperCollection:"collections/grasshopperCollection",paginatedCollection:"collections/paginatedCollection",searchCollection:"collections/searchCollection",api:"api/api",plugins:"plugins",appBinders:"appBinders",pluginWrapperBinders:"views/pluginWrapper/pluginWrapperBinders",contentTypeDetailBinders:"views/contentTypeDetail/contentTypeDetailBinders",formatters:"formatters",contentTypeDetailFormatters:"views/contentTypeDetail/contentTypeDetailFormatters",resources:"resources",constants:"constants"}}),require(["backbone","underscore","jquery","router","resources","ajaxCounterWorker","require","alerts","dropdown","tabs","tooltip","abide","modernizr","sortable","accordion","scrollToFixed","select2","sparkmd5","contextjs","velocity","multipleSelect"],function(e,t,n,i,s,o){"use strict";var r=new i;t.templateSettings={evaluate:/\[\[(.+?)\]\]/g,interpolate:/\[\[=(.+?)\]\]/g,escape:/\[\[-(.+?)\]\]/g},o.setupCounter(),n(document).foundation(),e.history.start({hashChange:!1,pushState:!0,root:"/admin"}),n(document).on("click","a:not([data-bypass])",function(e){var t=n(this).attr("href")||"",i=this.protocol+"//",s=this.protocol.slice(0,-1);t&&"#"!=t&&t.slice(i.length)!==i&&"javascript"!=s&&(e.preventDefault(),r.navigate(t,{trigger:!0}))})}),define("main",function(){});
//# sourceMappingURL=main.js
//# sourceMappingURL=main.js.map